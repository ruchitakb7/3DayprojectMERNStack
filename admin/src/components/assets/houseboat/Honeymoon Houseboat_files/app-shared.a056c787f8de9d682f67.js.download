/*@license For license information please refer to app-shared.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[926],{45293:function(e,t,n){n.d(t,{X:function(){return c}});var r=n(96540),i=n(33897),a=n(94791),o=n(58716),s=n(79817);const l=(e,t)=>n=>{(0,a.updateSearch)({history:e,location:t,newParams:{useRewards:String(n)},replace:!0})},c=r.memo((e=>{var t;const{page:n,context:a,searchResults:c}=(0,o.g)(),{location:u,regionId:d,startDate:h,endDate:p,spacingProps:f}=e,m=(0,i.useLocation)(),g=(0,i.useHistory)(),v=g.location,y=null==c?void 0:c.searchCriteria,E=Boolean(y&&"true"===y.useRewards),b=r.useMemo((()=>Number(d)?{notificationLocation:u,xPageId:n.pageId,optionalContext:{journeyCriterias:[{destination:{regionId:d},dateRange:{start:h,end:p}}]}}:{notificationLocation:u,xPageId:n.pageId}),[u,n.pageId,d,h,p]);if(!n||!n.pageId)return null;let S;if(null===(t=null==a?void 0:a.site)||void 0===t?void 0:t.domain){const{domain:e}=a.site,t=m.search||"";S=`https://${e}${m.pathname||""}${t}`}return u===s.T5.IN_PAGE?r.createElement("div",{"data-stid":"one-key-customer-notification"},r.createElement(s.YU,{inputs:{xPageId:n.pageId,notificationLocation:u,optionalContext:{referer:S}},skipSsr:!0,switchHandler:l(g,v),useRewards:E,spacingProps:f})):r.createElement("div",{"data-stid":"customer-notification"},r.createElement(s.YU,{inputs:b,spacingProps:{margin:{blockstart:"two"}}}))}))},33381:function(e,t,n){n.d(t,{O:function(){return s}});var r=n(96540),i=n(98669),a=n(16484),o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const s=r.forwardRef(((e,t)=>{var{children:n,placeholder:s=r.createElement(a.s,null)}=e,l=o(e,["children","placeholder"]);return r.createElement(i.Ay,Object.assign({once:!0,placeholder:s},l,{ref:t}),n)}))},38946:function(e,t,n){n.d(t,{C:function(){return g}});var r=n(96540),i=n(33897),a=n(94791),o=n(94220),s=n(21181),l=n(86663),c=n(58716),u=n(3581),d=n(65809),h=n(85625),p=n(1192),f=n(26852),m=n(59877);const g=r.memo((({analyticsSearch:e,analytics:t,experiment:n})=>{const{multiItem:g,searchResults:v}=(0,c.g)(),y=(0,i.useHistory)(),E=(0,i.useLocation)(),b=(0,p.useLocalization)(),S=null==v?void 0:v.searchCriteria,T=r.useMemo((()=>Boolean(new URLSearchParams(E.search).get("selected"))),[E.search]),R=r.useMemo((()=>Boolean(new URLSearchParams(E.search).get("oneKeyToggleUsed"))),[E.search]),{exposure:O}=(0,h.useExperiment)("OKC_toggle_default_state_for_meta_traffic",T),_=1===O.bucket&&T,I=r.useCallback((r=>{e.withPublishingAnalyticsPayload(a.updateSearch,t,n)({history:y,location:E,newParams:Object.assign({useRewards:String(r)},_&&{oneKeyToggleUsed:!0}),replace:!0}),setTimeout((()=>(0,s.liveAnnounce)(b.formatText(r?"common.pointsApplied":"common.pointsRemoved"),s.Level.POLITE)),500)}),[t,e,n,y,b,E,_]);if(!S)return null;const x=(0,l.parse)(y.location.search),C=null==g?void 0:g.getPackageType(),k=(0,d.Q)(x),{mdpdtl:w,gclid:D,mdpcid:P}=k,A=Object.assign(Object.assign(Object.assign({},w&&{metaDistributionPartnersDetails:w}),D&&{googleClickIdentifier:D}),P&&{metaDistributionPartnersChannelIdentifier:P}),L="true"===S.useRewards,N={useLoyaltyCurrency:_?R&&L:L,pageLocation:f.Hb.SEARCH_RESULTS,packageType:C&&m.Lo[C]||null,packageLOB:C?f.Ub.LODGING:null,marketing:A,lineOfBusiness:C?f.Ub.PACKAGES:f.Ub.LODGING,searchContext:(0,m.tT)(S)};return r.createElement(h.Experiment,{name:"eg_one_key_client"},r.createElement(h.ExperimentControl,null),r.createElement(h.ExperimentVariant,{bucket:1},r.createElement(o.b,{padding:{blockstart:"two"}},r.createElement("div",{"data-stid":"onekeybanner-toggle"},r.createElement(f.oD,{inputs:N,switchHandler:I,showBorder:!0,skipSsr:!0,shouldDisableOneKeyMessagingCard:(0,u.VG)(v)})))))}));g.displayName="OneKeyBannerToggle"},29306:function(e,t,n){n.d(t,{B9:function(){return Qe},GL:function(){return Ke}});var r=n(96540),i=n(22451),a=n(16756),o=n(20181),s=n(8311),l=n(94791),c=n(90112),u=n(71831),d=n(74),h=n(94495),p=n(30313),f=n(90745),m=n(66597),g=n(48182),v=n(85625),y=n(1192),E=n(2619),b=n(68174),S=n(27475),T=n(33897),R=n(31579),O=n(86663),_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function I(e){var{handleChange:t,onSubmit:n,replace:i,wrappedFormRef:a,"data-stid":o,children:s}=e,l=_(e,["handleChange","onSubmit","replace","wrappedFormRef","data-stid","children"]);const c=(0,T.useHistory)(),u=(e,t,n)=>{const{action:r}=l,i=R(e.target);if(d(i),t&&t(e,i),e.defaultPrevented)return;e.preventDefault();const a=(0,O.stringify)(i),o=(0,O.parse)(c.location.search),s=`${r}?${a}${o.pwaOverlay?`&pwaOverlay=${o.pwaOverlay}`:""}`;n?c.replace(s):c.push(s)},d=e=>{[{key:"infantsInSeats"}].forEach((({key:t})=>{var n,r;const i=e[t];Array.isArray(i)&&(null===(n=e[t])||void 0===n?void 0:n[0])&&(e[t]=null===(r=e[t])||void 0===r?void 0:r[0])}))};return r.createElement("form",Object.assign({},l,{onChange:e=>{"function"==typeof t&&t(e)},onSubmit:e=>{u(e,n,i)},ref:a,"data-stid":o}),s)}I.displayName="Form";var x=n(42782),C=n(94220);function k(e){var t;return t=class extends r.Component{constructor(){super(...arguments),this.updateModel=e=>{const{model:t,updateModelCallback:n}=this.props,r=e&&e.target,i=r&&r.name,a=r&&r.value,o=r&&r.userHistory,s=t&&t[i];t&&i&&(t[i]=a),"function"==typeof n&&n(e),r&&!0===r.track&&this.trackUpdate(i,a,s,o)},this.registerValidator=e=>{const{validators:t}=this.props;t&&t.push(e)}}trackUpdate(e,t,n,r){const{analytics:i}=this.props,a=t===n?".(pristine)":"",o="destination"===e&&r;i&&"function"==typeof i.trackEvent&&(o?i.trackEvent(":RecentSearches",`${e} has changed from Typeahead Recent Searches`,null):i.trackEvent(`.${e}.${t}${a}`,`${e} has changed`,null))}render(){return r.createElement(e,Object.assign({updateModel:this.updateModel,registerValidator:this.registerValidator},this.props))}},t.wrappedComponent=e,t}var w=n(48538),D=n(40051);const P=r.memo((({l10n:e})=>r.createElement(r.Fragment,null,w.yv.map((([,t])=>r.createElement("option",{value:t,key:t},e.formatText(`multiItem.searchWizard.timeSelect.${t}`))))))),A=r.memo((({label:e,id:t,invalid:n,value:i,formattedDate:a="Â ",onChange:o,l10n:s,domRef:l=null})=>r.createElement("div",{id:`${t}-label`,className:"multi-item-time-select"},r.createElement(C.b,{padding:{block:"two"}},r.createElement("div",null,r.createElement(f.c,{align:"left",size:300},a))),r.createElement(D.i,{"aria-labelledby":`${t}-label`,icon:"access_time",name:t,label:e,value:i,invalid:n,domRef:l,onChange:o,id:t},r.createElement(P,{l10n:s})))));var L=n(29885);const N=(e="")=>{const t=(0,w.Mu)(e);return 60*t.hour+t.minute},j=k((({updateModel:e,updateModelCallback:t,model:n,validators:i,modelKey:a,registerValidator:o})=>{const s=(0,y.useLocalization)(),l=r.createRef(),[c,u]=r.useState(!1),[d,h]=r.useState(!1),{pickUpTime:m,dropOffTime:g,startDate:v,endDate:E}=n,S=s.formatText("multiItem.searchWizard.dropOffErrorMsg"),T=r.useMemo((()=>new L.E(s)),[s]),R=()=>{const e=O();u(e)};r.useEffect((()=>(R(),()=>R())),[e,v,E,m,g]),r.useEffect((()=>{if(o){o((()=>{const e=O();return u(e),e?{invalidDropOffErrorMessage:S,focus:()=>{var e;return null===(e=null==l?void 0:l.current)||void 0===e?void 0:e.focus()}}:null}))}}),[o]);const O=()=>!(!n.startDate||!n.endDate)&&(!n.pickUpTime||!n.dropOffTime||(n.startDate&&n.endDate?1440*T.getDaysBetween(n.startDate,n.endDate)+N(n.dropOffTime):0)-N(n.pickUpTime)<120),_=e=>{try{return s.formatDateString(e,{skeleton:"MMMd"})||""}catch(t){return""}},I={updateModelCallback:t,model:n,modelKey:a,validators:i,onChange:e,l10n:s},k=r.createElement(p.E,{columns:2,space:"two"},r.createElement(p.a,null,r.createElement(A,Object.assign({label:s.formatText("multiItem.searchWizard.pickUpTime"),id:"pickUpTime",value:null!=m?m:"",formattedDate:_(null!=v?v:"")},I))),r.createElement(p.a,null,r.createElement(A,Object.assign({label:s.formatText("multiItem.searchWizard.dropOffTime"),id:"dropOffTime",invalid:c?S:"",value:null!=g?g:"",formattedDate:_(null!=E?E:""),domRef:l},I))));return r.createElement(p.a,{colSpan:{small:1,medium:3}},r.createElement("div",null,r.createElement(b.LM,null,r.createElement(b.NP,null,r.createElement(r.Fragment,null,r.createElement(C.b,{margin:{block:"three"}},r.createElement("hr",null)),r.createElement(f.E,{tag:"h4",size:6},r.createElement(y.LocalizedText,{message:"multiItem.searchWizard.mobile.carLabel"})),k)),r.createElement(b.rw,null,r.createElement(x.b,{size:"medium",expandoTitle:s.formatText("multiItem.searchWizard.pickUpDropOffToggle"),isVisible:d,"data-stid":"expand-multiitem-search-wizard-car-fields",onToggle:()=>h(!d)},k)))))}));var M=n(38209);const F=k((({modelKey:e,model:t,updateModel:n})=>{const{formatText:i}=(0,y.useLocalization)();return r.createElement(p.a,{colSpan:"all"},r.createElement("div",null,r.createElement(M.E,{id:e,name:e,value:t.directFlights,checked:"true"===t.directFlights,onChange:t=>{if("function"==typeof n){const{checked:r}=t.target;n({target:{name:e,value:String(r),track:!0}})}}},i("multiItem.searchWizard.directFlightsOnly"))))})),U=(0,c.ClickTracker)(D.i),B=k((0,a.inject)("context")((0,a.observer)((({context:e,modelKey:t,model:n,updateModel:i})=>{var a;const{formatText:o}=(0,y.useLocalization)(),s=r.useMemo((()=>{var t;switch(null===(t=null==e?void 0:e.site)||void 0===t?void 0:t.id){case 500053:return[{label:o("hotels.preferredClass.multiitem.dialog.economy.label"),value:"COACH"},{label:o("hotels.preferredClass.multiitem.dialog.firstClass.label"),value:"FIRST"}];case 500081:case 500084:case 500083:return[{label:o("hotels.preferredClass.multiitem.dialog.economy.label"),value:"COACH"},{label:o("hotels.preferredClass.multiitem.dialog.premiumEconomy.label"),value:"PREMIUM_ECONOMY"},{label:o("hotels.preferredClass.multiitem.dialog.business.label"),value:"BUSINESS"}];default:return[{label:o("hotels.preferredClass.multiitem.dialog.economy.label"),value:"COACH"},{label:o("hotels.preferredClass.multiitem.dialog.premiumEconomy.label"),value:"PREMIUM_ECONOMY"},{label:o("hotels.preferredClass.multiitem.dialog.business.label"),value:"BUSINESS"},{label:o("hotels.preferredClass.multiitem.dialog.firstClass.label"),value:"FIRST"}]}}),[null===(a=null==e?void 0:e.site)||void 0===a?void 0:a.id,o]);return r.createElement(p.a,{colSpan:1},r.createElement("div",null,r.createElement(U,{id:t,name:t,label:o("hotels.preferredClass.multiitem.label"),icon:"airline_seat_recline_extra",onChange:i,value:n.cabinClass,rfrr:"CabinClass",linkName:"Select flight cabin class"},s.map((e=>r.createElement("option",{value:e.value,key:e.label},e.label))))))}))));var G=n(22865),$=n(93033);const H=k((0,a.inject)("analytics","context","multiItem")((0,a.observer)((({context:e,model:t,multiItem:n,maxTypeaheadResults:i=10,analytics:a,essAnalyticsLogger:o,registerValidator:s,updateModel:c})=>{var u;const d=(0,T.useHistory)(),h=(0,T.useLocation)(),{formatText:f}=(0,y.useLocalization)();let m=!0;const g=r.createRef(),E=e=>{a&&"function"==typeof a.trackEvent&&a.trackEvent("DismissOriginTypeahead","Origin Typeahead Modal Dismissed",void 0),e===$.i.DIALOG&&d.goBack(),(null==g?void 0:g.current)&&"function"==typeof g.current.focusTypeaheadInput&&g.current.focusTypeaheadInput()},b=()=>(m=!1,S()),S=()=>{if(m)return;const e=t&&t.origin,n=(null==g?void 0:g.current)&&"function"==typeof g.current.focusTypeaheadInput&&g.current.focusTypeaheadInput;return e?void 0:{text:f("hotels.searchWizard.multiitem.validation.invalidOrigin"),focus:n}};s&&s(b);const R={dest:!1,essLogger:o,guid:e&&e.deviceId,inputId:"hotels-origin",locale:e&&e.locale,maxResults:i,siteId:e&&e.site&&e.site.id,client:"Packages.Search",features:"nearby_airport|ta_hierarchy|consistent_display",lob:"PACKAGES",subLob:null==n?void 0:n.getPackageType(),personalize:!1,regionType:863,packageType:null==n?void 0:n.getPackageType()},O={allowExactMatch:!0,label:f("hotels.searchWizard.multiitem.origin"),icon:"place",invalid:null===(u=S())||void 0===u?void 0:u.text,name:"origin",onClick:e=>{e===$.i.DIALOG&&(0,l.updateSearch)({history:d,location:h,newParams:{pwaDialog:"typeahead"}}),a&&"function"==typeof a.trackEvent&&a.trackEvent(":ChangeOrigin","User searching Origin",{})},onDismiss:E,renderDialog:e=>r.createElement(l.QueryRoute,{query:{pwaDialog:"typeahead"}},r.createElement(G.Layer,{id:"home-typeahead",onDismiss:E},e)),renderType:$.i.ADAPTIVE,stid:"trip-origin",value:t&&t.origin,ref:g,onUpdate:e=>{const{data:t,term:n}=e,r=t&&"USERHISTORY"===t.category;"function"==typeof c&&(m=!1,c({target:{name:"origin",value:n,track:!0,userHistory:r}}))}};return r.createElement(G.ErrorBoundary,{label:"Origin.typeahead"},r.createElement(p.a,null,r.createElement("div",null,r.createElement(v.Experiment,{name:"Remove_POI_and_Neighborhood_from_flight_and_package_typeahead"},r.createElement(v.ExperimentControl,null,r.createElement($.j,Object.assign({},O,{adapter:new $.E(Object.assign({},R))}))),r.createElement(v.ExperimentVariant,{bucket:1},r.createElement($.j,Object.assign({},O,{adapter:new $.E(Object.assign(Object.assign({},R),{regionType:839}))})))))))}))));var z=n(24355);var V=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let W=class extends r.Component{constructor(e){super(e),this.state={mounted:!1,footerText:void 0,showDatePicker:!1},this.datePickerAnalytics={},this.focusButton=r.createRef(),this.focusDateFieldInput=this.focusDateFieldInput.bind(this),this.onMount=this.onMount.bind(this),this.dismiss=this.dismiss.bind(this),this.open=this.open.bind(this),this.save=this.save.bind(this)}componentDidMount(){const{registerFocusMethod:e,uiPage:t}=this.props;null==e||e("endDate",this.focusDateFieldInput),this.setState({mounted:!0}),this.disposerUiPageOpenDatePickerEvent=(0,i.reaction)((()=>null==t?void 0:t.openNewDatePickerEvent),(e=>{e&&this.setState({showDatePicker:!0})}),{delay:200})}componentWillUnmount(){this.disposerUiPageOpenDatePickerEvent&&this.disposerUiPageOpenDatePickerEvent()}open(e,t){const{history:n,location:r}=this.props;var i;t&&n&&r?(0,l.updateSearch)({history:n,location:r,newParams:{pwaDialog:`datepicker-${e}`}}):((i={scrollTo:0})&&i.ref&&"function"==typeof i.ref.scrollIntoView?i.ref.scrollIntoView({block:"start",behavior:"smooth"}):i&&void 0!==i.scrollTo&&window.scrollTo({top:i.scrollTo,left:0,behavior:"smooth"}),i&&i.ref&&"function"==typeof i.ref.focus&&i.ref.focus()),this.setState({showDatePicker:!0})}save(e,t,n){const{endDate:r,l10n:i,startDate:a,updateModels:o}=this.props,{formatDate:s}=i,l=s(t,{raw:"yyyy-MM-dd"}),c=s(e,{raw:"yyyy-MM-dd"});r===l&&a===c||o(c,l),this.dismiss(n,!1)}focusDateFieldInput(){const{dateFieldProps:e}=this.props,{endInvalid:t,startInvalid:n}=e;n&&(this.focusButton=this.startRef&&this.startRef.current),t&&(this.focusButton=this.endRef&&this.endRef.current),this.focusButton&&"function"==typeof this.focusButton.focus&&this.focusButton.focus()}dismiss(e,t){var n;e&&(null===(n=this.props.history)||void 0===n||n.goBack()),t||this.setState({showDatePicker:!1})}onMount(e,t){this.startRef=e,this.endRef=t}render(){const{analytics:e,buttonText:t,context:n,dateFieldProps:i,endDate:a,midnightBookingOffsetHours:o,numDaysBookableInAdvance:s,startDate:c,l10n:u}=this.props,{mounted:d,showDatePicker:h}=this.state,p=parseInt(z.j[u.getWeekData().firstDay.toUpperCase()],10);this.datePickerAnalytics={closeAnalytics:e.setupTracker(":ChangeDatesClose","Close Date Picker",null),doneAnalytics:e.setupTracker(":ChangeDatesDone","Apply Date Picker",null),nextPageAnalytics:e.setupTracker(":NextMonthClick","Next Month Click",null),previousPageAnalytics:e.setupTracker(":PreviousMonthClick","Previous Month Click",null)};let f=Object.assign(Object.assign({},i),{showDatePicker:h,endAnalytics:e.setupTracker(":ChangeDatesCheckOut","Open Date Picker"),startAnalytics:e.setupTracker(":ChangeDatesCheckIn","Open Date Picker")});d||(f=Object.assign(Object.assign({},f),{endPlaceholder:null==n?void 0:n.localDateFormat,startPlaceholder:null==n?void 0:n.localDateFormat}));const m={analytics:this.datePickerAnalytics,buttonText:t,dateFieldProps:f,daysBookableInAdvance:s,dialogWrapper:(e,t)=>r.createElement(l.QueryRoute,{query:{pwaDialog:`datepicker-${t}`}},r.createElement(G.Layer,{id:`home-datepicker-${t}`,onDismiss:this.dismiss},e)),doubleMonths:!0,endDate:a,footerText:this.state.footerText,midnightBookingOffset:o,onDismissCB:this.dismiss,onMountCB:this.onMount,onOpenCB:this.open,onSubmitCB:this.save,startDate:c,firstDayOfWeek:p};return r.createElement(z.i,Object.assign({},m))}};W.defaultProps={endDate:"",startDate:"",l10n:null},W=V([T.withRouter,y.withLocalization,(0,a.inject)("analytics","context","currentHotel","uiPage"),a.observer],W);var Y=n(14457),q=n(85416);const K=s.ClientLogger.getLoggerWithIdentifier("pwa.component.searchform"),Q=e=>e&&"Invalid Date"!==e.toString(),X=k((({model:e,updateModel:t,registerValidator:n})=>{const{formatText:i}=(0,y.useLocalization)(),[a,o]=r.useState(void 0),[s,l]=r.useState(void 0);null==n||n((()=>m("startDate"))),null==n||n((()=>m("endDate")));const c=e.partialStayStartDate&&Q(new Date(e.partialStayStartDate)),u=e.partialStayEndDate&&Q(new Date(e.partialStayEndDate)),d=c?e.partialStayStartDate:e.startDate,h=u?e.partialStayEndDate:e.endDate,f=e=>{"function"==typeof t&&t(e)},m=t=>{const{partialStayStartDate:n,partialStayEndDate:r,startDate:o,endDate:l,isPartialStay:c}=e;if(!c)return;const u=n||o,d=r||o;if("startDate"===t&&u&&o){const t=new Date(u),n=new Date(o),r="hotels.search.validation.invalidFromDate.text";if(!Q(t)&&!e.isDateless)return{text:i(r),focus:s};if(n.setHours(0,0,0,0),t.setHours(0,0,0,0),t<n)return{text:i("hotels.search.validation.invalidPartialDates.text"),focus:a}}if("endDate"===t&&u&&d&&l){const t=new Date(l),n=new Date(u),r=new Date(d),o="hotels.search.validation.invalidToDate.text";if(!Q(r)&&!e.isDateless)return{text:i(o),focus:a};if(Q(n)){if(r<n)return{text:i("hotels.search.validation.invalidDateRange.text"),focus:a};if(t.setHours(0,0,0,0),r.setHours(0,0,0,0),n.setHours(0,0,0,0),r>t)return{text:i("hotels.search.validation.invalidPartialDates.text"),focus:a}}}},g=m("startDate"),v=m("endDate");K&&"function"==typeof K.logEvent&&(g||v)&&d&&h&&((e,t,n,r)=>{K.logEvent(new E.SystemEvent(E.SystemEventLevel.ERROR,"SEARCH_FORM_PARTIAL_STAY_DATE_RANGE_ERROR"),`${e} | ${t}`,`partialStayStartDate=${n} partialStayEndDate=${r}`,{escalation:q.I.CUSTOMER})})(g,v,d,h);const S={startDate:d,endDate:h,onChange:f,placeholder:i("hotels.search.form.toDate.placeholder"),numDaysBookableInAdvance:Y.hG.NUM_OF_DAYS_BOOKABLE_IN_ADVANCE,midnightBookingOffsetHours:Y.hG.MIDNIGHT_BOOKING_OFFSET_IN_HOURS,buttonText:i("hotels.roomPicker.doneButton.label"),registerFocusMethod:(e,t)=>{"startDate"===e?l(t):o(t)},isDateless:!1,updateModels:(e,t)=>{f({target:{name:"partialStayStartDate",value:e}}),f({target:{name:"partialStayEndDate",value:t}})}},T={endId:"hotels-partial-stay-check-out",endInvalid:v&&v.text,endLabel:i("hotels.search.form.toDateHyphen.label"),endName:"partialStayEndDate",endPlaceholder:i("hotels.search.form.toDate.placeholder"),onChange:S.onChange,routerLinkWrapper:e=>r.createElement(r.Fragment,null,e),startId:"hotels-partial-stay-check-in",startInvalid:g&&g.text,startLabel:i("hotels.search.form.fromDateHyphen.label"),startName:"partialStayStartDate",startPlaceholder:i("hotels.search.form.toDate.placeholder")};return e.isPartialStay?r.createElement(r.Fragment,null,r.createElement(p.a,{colSpan:{small:1,medium:2}},r.createElement("div",null,r.createElement(W,Object.assign({rfrr:{end:":ChangePartialDatesCheckOut",start:":ChangePartialDatesCheckIn"},dateFieldProps:T},S)))),r.createElement(b.LM,null,r.createElement(b.zQ,null,r.createElement(p.a,null,r.createElement("div",null))))):null})),Z=k((({updateModel:e,model:t,modelKey:n})=>{const{formatText:i}=(0,y.useLocalization)();return r.createElement(p.a,{colSpan:"all"},r.createElement("div",null,r.createElement(M.E,{id:n,name:n,value:String(t.isPartialStay),checked:t.isPartialStay,onChange:t=>{if("function"==typeof e){const{checked:n}=t.target;e({target:{name:"partialStay",value:String(n),track:!0}})}}},i("multiItem.searchWizard.partialStay.text"))))})),J=(e,t)=>{if(ee(ne(t)))return"dateRange"===e?{colSpan:{small:1,medium:2}}:{colSpan:1};if(te(ne(t)))switch(e){case"dateRange":return{colSpan:{small:1,medium:2}};case"location":return{colSpan:{small:"all",medium:4,large:2}};default:return{}}},ee=e=>e&&[m.Rn.FH,m.Rn.FHC].includes(e),te=e=>e&&e===m.Rn.HC,ne=e=>{var t;return null===(t=null==e?void 0:e.multiItemContext)||void 0===t?void 0:t.packageType};var re=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const ie=s.ClientLogger.getLoggerWithIdentifier("pwa.component.searchform");let ae=class extends r.Component{constructor(e){super(e),this.state={endDateFocus:void 0,startDateFocus:void 0},this.handleChange=this.handleChange.bind(this),this.registerFocusMethod=this.registerFocusMethod.bind(this),this.validate=this.validate.bind(this);const{registerValidator:t}=e;t((()=>this.validate("startDate"))),t((()=>this.validate("endDate")))}handleChange(e){const{updateModel:t}=this.props;"function"==typeof t&&t(e)}logDateRangeError(e,t,n,r){ie.logEvent(new E.SystemEvent(E.SystemEventLevel.ERROR,"SEARCH_FORM_DATE_RANGE_ERROR"),`${JSON.stringify(e)} | ${JSON.stringify(t)}`,`startDate=${n} endDate=${r}`,{escalation:q.I.CUSTOMER})}updateModels(e,t){this.handleChange({target:{name:"startDate",value:e}}),this.handleChange({target:{name:"endDate",value:t}})}render(){const{l10n:e,model:t,fetchDatePickerRates:n,multiItem:i}=this.props,{formatText:a}=e,o=t.startDate&&this.isValidDate(new Date(t.startDate))?t.startDate:void 0,s=t.endDate&&this.isValidDate(new Date(t.endDate))?t.endDate:void 0,l=a("hotels.roomPicker.doneButton.label"),c=this.validate("startDate"),u=this.validate("endDate"),d={startDate:o,endDate:s,placeholder:a("hotels.search.form.toDate.placeholder"),numDaysBookableInAdvance:S.h.NUM_OF_DAYS_BOOKABLE_IN_ADVANCE,midnightBookingOffsetHours:S.h.MIDNIGHT_BOOKING_OFFSET_IN_HOURS,buttonText:l,registerFocusMethod:this.registerFocusMethod,updateModels:this.updateModels.bind(this)};ie&&"function"==typeof ie.logEvent&&(c||u)&&this.logDateRangeError(c,u,o,s);const h=i&&i.getPackageType()&&i.getPackageType()!==m.Rn.HC,{startDateLabel:f,endDateLabel:g}=h?{startDateLabel:a("hotels.searchWizard.multiitem.departing.date"),endDateLabel:a("hotels.searchWizard.multiitem.returning.date")}:{startDateLabel:a("hotels.search.form.fromDateHyphen.label"),endDateLabel:a("hotels.search.form.toDateHyphen.label")},v={endId:"hotels-check-out",endInvalid:u&&u.text,endLabel:g,endName:"endDate",endPlaceholder:a("hotels.search.form.toDate.placeholder"),routerLinkWrapper:e=>r.createElement(r.Fragment,null,e),startId:"hotels-check-in",startInvalid:c&&c.text,startLabel:f,startName:"startDate",startPlaceholder:a("hotels.search.form.toDate.placeholder")};return r.createElement(C.b,{margin:{small:{block:"half"},medium:{block:"unset"}}},r.createElement(p.a,Object.assign({},J("dateRange",i)),r.createElement("div",null,r.createElement(W,Object.assign({rfrr:{end:":ChangeDatesCheckOut",start:":ChangeDatesCheckIn"},dateFieldProps:v,fetchDatePickerRates:n},d)))))}registerFocusMethod(e,t){this.setState({[`${e}Focus`]:t})}validate(e){const{l10n:t,model:n}=this.props,{startDateFocus:r,endDateFocus:i}=this.state,{formatText:a}=t,{endDate:o,startDate:s}=n;if("startDate"===e){const e=s&&new Date(s),t="hotels.search.validation.invalidFromDate.text";if(!(e&&this.isValidDate(e)||n.isDateless))return{text:a(t),focus:r}}if("endDate"===e){const e=s?new Date(s):void 0,t=o?new Date(o):void 0,r="hotels.search.validation.invalidToDate.text";if(!(t&&this.isValidDate(t)||n.isDateless))return{text:a(r),focus:i};if(e&&this.isValidDate(e)){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+28);if(e&&t&&t<e)return{text:a("hotels.search.validation.invalidDateRange.text"),focus:i};if(n&&n.setHours(0,0,0,0),null==t||t.setHours(0,0,0,0),null!==n&&t&&t>n)return{text:a("hotels.search.validation.invalidDateDateRangeLength.text"),focus:i}}}}isValidDate(e){return"Invalid Date"!==e.toString()}};ae=re([y.withLocalization,k,(0,a.inject)("currentHotel","multiItem","experiment")],ae);var oe=n(77271),se=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const le=["poi","hotelName","group","neighborhood"];let ce=class extends r.Component{constructor(e){super(e),this.pristine=!0,this.timestamp=this.getCurrentTimestampInSeconds(),this.dismissTypeahead=this.dismissTypeahead.bind(this),this.openTypeahead=this.openTypeahead.bind(this),this.handleUpdate=this.handleUpdate.bind(this),this.validate=this.validate.bind(this),this.formValidator=this.formValidator.bind(this),this.renderTypeaheadDialog=this.renderTypeaheadDialog.bind(this),this.fieldRef=r.createRef(),e.registerValidator&&e.registerValidator(this.formValidator)}renderTypeaheadDialog(e){return r.createElement(l.QueryRoute,{query:{pwaDialog:"typeahead"}},r.createElement(G.Layer,{id:"home-typeahead",onDismiss:this.dismissTypeahead},e))}dismissTypeahead(e){const{analytics:t,history:n}=this.props;t&&"function"==typeof t.trackEvent&&t.trackEvent("DismissDestinationTypeahead","Destination Typeahead Modal Dismissed",null),e===$.i.DIALOG&&n.goBack(),this.fieldRef&&this.fieldRef.current&&"function"==typeof this.fieldRef.current.focusTypeaheadInput&&this.fieldRef.current.focusTypeaheadInput()}openTypeahead(e){const{analytics:t,history:n,location:r}=this.props;e===$.i.DIALOG&&(0,l.updateSearch)({history:n,location:r,newParams:{pwaDialog:"typeahead"}}),t&&"function"==typeof t.trackEvent&&t.trackEvent(":ChangeDestination","User searching Destination",null)}handleUpdate(){return e=>{var t,n,r,i,a,o,s;const{updateModel:l,l10n:c,multiItem:u}=this.props,{formatDate:d}=c,{data:h,term:p}=e,f=h&&"USERHISTORY"===h.category,m=u&&u.isPackageShoppingPath(),g=null!==(t=null==h?void 0:h.regionId)&&void 0!==t?t:"",v=null!==(i=null===(r=null===(n=null==h?void 0:h.hierarchyInfo)||void 0===n?void 0:n.airport)||void 0===r?void 0:r.multicity)&&void 0!==i?i:"",y=null!==(s=null===(o=null===(a=null==h?void 0:h.hierarchyInfo)||void 0===a?void 0:a.airport)||void 0===o?void 0:o.airportCode)&&void 0!==s?s:"";this.timestamp=this.getCurrentTimestampInSeconds(),"function"==typeof l&&(this.pristine=!1,l({target:{name:"destination",value:p,track:!0,userHistory:f}}),l({target:{name:"latLong",value:h&&h.location?`${h.location.lat},${h.location.long}`:""}}),l({target:{name:"regionId",value:m&&!g?v:g}}),y&&m&&(null==u||u.setTtla(y)),l({target:{name:"selected",value:h&&h.selected?h.selected:""}}),h&&h.startDate&&h.endDate&&(l({target:{name:"startDate",value:d(new Date(h.startDate),{raw:"yyyy-MM-dd"})}}),l({target:{name:"endDate",value:d(new Date(h.endDate),{raw:"yyyy-MM-dd"})}})),le.forEach((e=>l({target:{name:e,value:void 0}}))))}}render(){var e,t,n,i,a,o;const{context:s,l10n:l,model:c,multiItem:u,maxTypeaheadResults:d,experiment:h,page:f}=this.props,{formatText:m}=l,g=m("hotels.search.form.destination.label"),v=u&&u.isPackageShoppingPath(),y=v&&1===(0,oe.MB)("PWA_Packages_Exclude_MultiRegion_Destination_Search",s,h,f),E={client:"shopping-pwa-lodging",dest:!0,essLogger:this.props.essAnalyticsLogger,features:"ta_hierarchy|postal_code|contextual_ta|google|consistent_display",guid:null!==(e=null==s?void 0:s.deviceId)&&void 0!==e?e:"",inputId:"hotels-destination",lob:"HOTELS",locale:null!==(t=null==s?void 0:s.locale)&&void 0!==t?t:"",maxResults:d,personalize:!0,regionType:2047,siteId:(null===(n=null==s?void 0:s.site)||void 0===n?void 0:n.id)||null,lastSearchLatLong:null==c?void 0:c.latLong,lastSearchRegionId:null==c?void 0:c.regionId,lastSearchElapseTime:this.timestamp?this.getCurrentTimestampInSeconds()-this.timestamp:void 0},b=Object.assign(Object.assign({},E),{client:"shopping-pwa-packages",features:"nearby_airport|ta_hierarchy|consistent_display",lob:"PACKAGES",subLob:v?null===(i=null==u?void 0:u.multiItemContext)||void 0===i?void 0:i.packageType:"",personalize:!1,regionType:(null==c?void 0:c.typeaheadRegionType)||(y?735:991),packageType:v?null===(a=null==u?void 0:u.multiItemContext)||void 0===a?void 0:a.packageType:""}),S={allowExactMatch:!0,label:g,icon:"place",invalid:this.validate()&&(null===(o=this.validate())||void 0===o?void 0:o.text),name:"destination",onClick:this.openTypeahead,onDismiss:this.dismissTypeahead,renderDialog:this.renderTypeaheadDialog,renderType:$.i.ADAPTIVE,stid:"hotels-destination",value:c&&c.destination,ref:this.fieldRef,onUpdate:this.handleUpdate()},T=v?new $.E(Object.assign(Object.assign({},b),{maxResults:b.maxResults||0})):new $.E(Object.assign(Object.assign({},E),{maxResults:E.maxResults||0}));return r.createElement(G.ErrorBoundary,{label:"location.typeahead"},r.createElement(p.a,Object.assign({},J("location",u)),r.createElement("div",null,r.createElement($.j,Object.assign({},S,{adapter:T})))))}getCurrentTimestampInSeconds(){return Math.floor(Date.now()/1e3)}formValidator(){return this.pristine=!1,this.validate()}validate(){const{l10n:e,model:t}=this.props,{formatText:n}=e;if(this.pristine)return;const r=t&&t.destination,i=this.fieldRef&&this.fieldRef.current&&"function"==typeof this.fieldRef.current.focusTypeaheadInput&&this.fieldRef.current.focusTypeaheadInput;return r?void 0:{text:n("hotels.search.validation.invalidDestination.text"),focus:i}}};ce.defaultProps={maxTypeaheadResults:10},ce=se([y.withLocalization,T.withRouter,k,(0,a.inject)("analytics","context","multiItem","experiment","page")],ce);var ue=n(68963),de=n(43162),he=n(41165),pe=n(1443),fe=n(9746),me=n(18518),ge=n(67045),ve=n(46198),ye=n(65618),Ee=n(91214),be=n(82960),Se=n(21181),Te=n(83885),Re=n(44326),Oe=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};class _e{constructor({adults:e,children:t}={},n,r,i=!1,a=!1){this.rooms=[],this.l10n=n,this.context=r,this.isPackageShoppingPath=i,this.petsIncluded=a,this.setupRooms(e,t)}get initialProps(){return{adults:this.initAdults,children:this.initChildren}}get finalProps(){return{adults:this.rooms.map((e=>e.adults)).filter((e=>e>0)).join(","),children:this.rooms.map(((e,t)=>(0,Re.ym)(t+1,e.children))).filter((e=>""!==e)).join(",")}}get counts(){return this.rooms.reduce(((e,t)=>(e.guests+=t.adults+t.children.length,e)),{guests:0,rooms:this.rooms.length})}get displaySummary(){const{rooms:e,guests:t}=this.counts,n=t>_e.MAX_GUESTS?_e.MAX_GUESTS:t;return this.l10n.formatText(this.displaySummaryKey,e,n)}get displaySummaryKey(){return(0,he.S)(this.context)?this.petsIncluded?_e.VRBO_DISPLAY_SUMMARY_KEY_WITH_PETS:_e.VRBO_DISPLAY_SUMMARY_KEY:_e.DISPLAY_SUMMARY_KEY}get roomCount(){return this.rooms.length}get disableAddRoom(){return!!(this.isPackageShoppingPath&&this.counts.guests>=6)||!(this.initialRoomCount&&this.rooms.length<this.initialRoomCount)&&(this.rooms.length>=_e.MAX_ROOM_COUNT||this.counts.guests>=_e.MAX_GUESTS)}get enableInfantSeatSelection(){return this.rooms.some((e=>e.children.some((e=>e<=1))))}includePets(){this.petsIncluded=!0}excludePets(){this.petsIncluded=!1}addRoom(){this.rooms.push({adults:1,children:[]})}removeRoom(e){this.rooms=this.rooms.filter((t=>t!==e))}changeAdultsForRoom(e,t){const n=e.adults;e.adults=t,this.counts.guests>_e.MAX_GUESTS&&(e.adults=n)}changeChildrenForRoom(e,t,n=!1){let r=this.infantAwareDiff(e,t,n);if(r>0)for(;r>0;r--){const t=n||!this.isPackageShoppingPath?_e.DEFAULT_SA_CHILD_AGE:_e.DEFAULT_MULTI_ITEM_CHILD_AGE;e.children.push(t)}else r<0&&this.infantAwareSplice(e,r,n);this.counts.guests>_e.MAX_GUESTS&&e.children.pop()}changeChildAge(e,t,n,r=!1){this.rooms=(0,i.observable)(this.rooms.map(((i,a)=>{if(t>-1&&t<i.children.length&&a===e){let e=-1;for(let a=0;a<i.children.length;a++){const o=i.children[a];if((void 0!==o&&(r&&o<2||!r&&o>=2)||!this.isPackageShoppingPath)&&e++,e===t){i.children[a]=n;break}}}return i})))}reset(){this.setupRooms(this.initAdults,this.initChildren)}setupRooms(e,t){var n;const r=e&&e.length>0?e.split(","):[],i=this.convertChildrenTextToRooms(t),a=Math.max(r.length,i.length),o=[];for(let s=0;s<a;s++){const e=s<r.length?parseInt(null!==(n=r[s])&&void 0!==n?n:"",10):0,t=i[s]?i[s]:[];o.push({adults:isNaN(e)?0:e,children:null!=t?t:[]})}this.initAdults=null!=e?e:"",this.initChildren=null!=t?t:"",this.rooms.replace(o),this.initialRoomCount=o.length}infantAwareDiff(e,t,n){if(this.isPackageShoppingPath){return t-e.children.filter((e=>n?e<2:e>=2)).length}return t-e.children.length}infantAwareSplice(e,t,n){if(this.isPackageShoppingPath)for(let r=e.children.length-1;r>-1;r--){const i=e.children[r];if((i<2&&n||i>=2&&!n)&&(e.children.splice(r,1),t++),0===t)break}else e.children.splice(e.children.length+t,-t)}convertChildrenTextToRooms(e){return(e&&e.length>0?e.split(","):[]).reduce(((e,t)=>{var n;const r=t.split("_");if(!r[0]||!r[1])return e;let i=parseInt(r[0],10);const a=parseInt(r[1],10);return isNaN(i)||isNaN(a)||(i-=1,e[i]?null===(n=e[i])||void 0===n||n.push(a):e[i]=[a]),e}),[])}}_e.DISPLAY_SUMMARY_KEY="hotels.roomPicker.roomSummary",_e.VRBO_DISPLAY_SUMMARY_KEY="hotels.roomPicker.roomSummary.singleUnit",_e.VRBO_DISPLAY_SUMMARY_KEY_WITH_PETS="hotels.roomPicker.roomSummary.singleUnit.withPets",_e.DEFAULT_SA_CHILD_AGE=0,_e.DEFAULT_MULTI_ITEM_CHILD_AGE=2,_e.MAX_ROOM_COUNT=8,_e.MAX_GUESTS=14,_e.determineMaxGuests=(e,t)=>e+6-t,Oe([i.observable],_e.prototype,"rooms",void 0),Oe([i.observable],_e.prototype,"petsIncluded",void 0),Oe([i.computed],_e.prototype,"finalProps",null),Oe([i.computed],_e.prototype,"counts",null),Oe([i.computed],_e.prototype,"displaySummary",null),Oe([i.computed],_e.prototype,"displaySummaryKey",null),Oe([i.computed],_e.prototype,"roomCount",null),Oe([i.computed],_e.prototype,"disableAddRoom",null),Oe([i.computed],_e.prototype,"enableInfantSeatSelection",null),Oe([i.action],_e.prototype,"includePets",null),Oe([i.action],_e.prototype,"excludePets",null),Oe([i.action],_e.prototype,"addRoom",null),Oe([i.action],_e.prototype,"removeRoom",null),Oe([i.action],_e.prototype,"changeAdultsForRoom",null),Oe([i.action],_e.prototype,"changeChildrenForRoom",null),Oe([i.action],_e.prototype,"changeChildAge",null),Oe([i.action],_e.prototype,"reset",null);const Ie=({minChildAge:e,maxChildAge:t,childAge:n,childIndex:i,l10n:a,onChildAgeUpdated:o,roomIndex:s,selectLabel:l,isInfant:c})=>{const u=xe(e,t,a),d=c?`infant-${s}-${i}`:`child-${s}-${i}`,h=c?`infant-age-${i}`:`age-${i}`;return r.createElement(p.a,{colSpan:1},r.createElement("div",null,r.createElement(D.i,{label:l,id:h,name:d,value:n.toString(),onChange:e=>o(i,e.target)},u.map((e=>r.createElement("option",{key:e.value,value:e.value},e.name))))))},xe=(e,t,n)=>{const r=[];for(let i=e;i<=t;i++){const e=0===i?n.formatText("hotels.roomPicker.youngestChildAge.text"):i;r.push({value:`${i}`,name:`${e}`})}return r},Ce=(0,c.ClickTracker)(ge.E),ke=({analytics:e,roomIndex:t,headerRef:n,l10n:i,onChildAgeUpdated:a,onRoomAdultsChanged:o,onRoomChildrenChanged:s,onRemoveRoom:l,room:c,selection:u,onInfantAgeUpdated:d,onRoomInfantsChanged:h})=>{const{roomCount:m}=u,g=null==e?void 0:e.setupTracker(":Guest","Adjust guest count in change search"),v=(e,n)=>a(t,e,n),y=(e,n)=>d(t,e,n),E=t+1,b=u.roomCount===E,S=u.counts.guests,T=c.children.filter((e=>e<2)),R=c.children.filter((e=>e>=2));return r.createElement(C.b,{padding:{blockstart:"three"}},r.createElement("div",{key:`room-${m}-${t}`,"data-stid":"room-count"},r.createElement(f.E,{tag:"h3",domRef:b?n:void 0},r.createElement(f.c,{size:200,weight:"medium"},r.createElement("span",{"aria-hidden":"true"},i.formatText("hotels.roomPicker.room.title",E)))),r.createElement(Te.a,{label:i.formatText("hotels.roomPicker.adults.text"),incrementText:i.formatText("hotels.roomPicker.increaseAdults.text",m),incrementId:`room-${m}-${t}-adults-increase`,decrementText:i.formatText("hotels.roomPicker.decreaseAdults.text",m),max:_e.determineMaxGuests(c.adults,S),decrementId:`room-${m}-${t}-adults-decrease`,min:1,value:c.adults,onChange:e=>o(c,e),analytics:g,id:`room-${m}-${t}-adults`}),r.createElement(Te.a,{label:i.formatText("hotels.roomPicker.children.text"),incrementText:i.formatText("hotels.roomPicker.increaseChildren.text",m),incrementId:`room-${m}-${t}-children-increase`,decrementText:i.formatText("hotels.roomPicker.decreaseChildren.text",m),decrementId:`room-${m}-${t}-children-decrease`,description:i.formatText("hotels.roomPicker.multiitem.children.caption"),max:_e.determineMaxGuests(R.length,S),min:0,value:R.length,onChange:e=>s(c,e),analytics:g,id:`room-${m}-${t}-children`}),R.length>0&&r.createElement(p.E,{columns:2,space:"two"},r.createElement("div",null,R.map(((e,n)=>r.createElement(Ie,{childAge:e,childIndex:n,key:n,l10n:i,onChildAgeUpdated:v,room:c,roomIndex:t,selectLabel:i.formatText("hotels.roomPicker.childAgeInput.label",n+1),isInfant:!1,minChildAge:2,maxChildAge:17}))))),r.createElement(Te.a,{label:i.formatText("hotels.roomPicker.multiitem.infants.text"),incrementText:i.formatText("hotels.roomPicker.multiitem.increaseInfants",m),incrementId:`room-${m}-${t}-infants-increase`,decrementText:i.formatText("hotels.roomPicker.multiitem.decreaseInfants",m),decrementId:`room-${m}-${t}-infants-decrease`,description:i.formatText("hotels.roomPicker.multiitem.infants.caption"),max:_e.determineMaxGuests(T.length,S),min:0,value:T.length,onChange:e=>h(c,e),analytics:g,id:`room-${m}-${t}-infants`}),T.length>0&&r.createElement(p.E,{columns:2,space:"two"},r.createElement("div",null,T.map(((e,n)=>r.createElement(Ie,{childAge:e,childIndex:n,key:n,l10n:i,onChildAgeUpdated:y,room:c,roomIndex:t,selectLabel:i.formatText("hotels.roomPicker.multiitem.infantAgeInput.label",n+1),isInfant:!0,minChildAge:0,maxChildAge:1}))))),0!==t&&r.createElement(C.b,{padding:{blockstart:"four"}},r.createElement(f.c,{align:"right"},r.createElement("div",null,r.createElement(Ce,{"data-stid":"remove-room",linkName:"Remove room",onClick:()=>l(c),rfrr:":RemoveRoom","aria-label":i.formatText("hotels.roomPicker.removeRoomButton.a11yLabel",E,m)},i.formatText("hotels.roomPicker.removeRoomButton.label"))))),r.createElement(C.c,null)))};var we=n(15144),De=n(75826);const Pe="EXCLUDE_PETS",Ae="INCLUDE_PETS",Le=({enabled:e,onEnable:t,onDisable:n})=>{const i=(0,y.useLocalization)(),a=(0,De.KY)(),[o,s]=r.useState(e?Ae:Pe);return r.createElement(C.b,{padding:{blockend:"twelve"}},r.createElement("div",null,r.createElement(ye.a,{legendLabel:i.formatText("hotels.roomPicker.pets.label"),onChange:e=>{const r=e.target.value;s(r),a(`HOT.SR.TravelersField.${r}`,`Travelers Field ${r}`),r===Ae?t():n()},group:"petsIncluded",selected:o},r.createElement(we.i,{justifyContent:"space-between",alignItems:"center"},r.createElement(we.j,null,r.createElement(f.c,null,i.formatText("hotels.roomPicker.pets.title"))),r.createElement(we.j,null,r.createElement(we.i,null,r.createElement(we.j,null,r.createElement(ye.E,{id:Pe,value:Pe},i.formatText("hotels.roomPicker.pets.exclude"))),r.createElement(we.j,null,r.createElement(ye.E,{id:Ae,value:Ae},i.formatText("hotels.roomPicker.pets.include")))))))))},Ne=(0,c.ClickTracker)(ge.E),je=({context:e,analytics:t,roomIndex:n,headerRef:i,l10n:a,onChildAgeUpdated:o,onRoomAdultsChanged:s,onRoomChildrenChanged:l,onRemoveRoom:c,room:u,selection:d})=>{const{roomCount:h}=d,m=null==t?void 0:t.setupTracker(":Guest","Adjust guest count in change search"),g=(e,t)=>o(n,e,t),v=n+1,y=d.roomCount===v;return r.createElement(C.b,{padding:{blockstart:"three"}},r.createElement("div",{key:`room-${h}-${n}`,"data-stid":"room-count"},!(0,he.S)(e)&&r.createElement(f.c,{size:200,weight:"medium"},r.createElement("h3",{tabIndex:0,className:"no-outline",ref:y?i:null,"aria-label":a.formatText("hotels.roomPicker.room.a11yLabelRoom",v,h)},r.createElement("span",{"aria-hidden":"true"},a.formatText("hotels.roomPicker.room.title",v)))),r.createElement(Te.a,{label:a.formatText("hotels.roomPicker.adults.text"),incrementText:a.formatText("hotels.roomPicker.increaseAdults.text",v),incrementId:`room-${h}-${n}-adults-increase`,decrementText:a.formatText("hotels.roomPicker.decreaseAdults.text",v),decrementId:`room-${h}-${n}-adults-decrease`,max:14,min:1,value:u.adults,onChange:e=>s(u,e),analytics:m,id:`room-${h}-${n}-adults`}),r.createElement(Te.a,{label:a.formatText("hotels.roomPicker.children.text"),incrementText:a.formatText("hotels.roomPicker.increaseChildren.text",v),incrementId:`room-${h}-${n}-children-increase`,decrementText:a.formatText("hotels.roomPicker.decreaseChildren.text",v),decrementId:`room-${h}-${n}-children-decrease`,description:a.formatText("hotels.roomPicker.children.caption"),max:6,min:0,value:u.children.length,onChange:e=>l(u,e),analytics:m,id:`room-${h}-${n}-children`}),u.children.length>0&&r.createElement(p.E,{columns:2,space:"two"},r.createElement("div",null,u.children.map(((e,t)=>r.createElement(Ie,{childAge:e,childIndex:t,key:t,l10n:a,onChildAgeUpdated:g,room:u,roomIndex:n,selectLabel:a.formatText("hotels.roomPicker.childAgeInput.label",t+1),isInfant:!1,minChildAge:0,maxChildAge:17}))))),0!==n&&r.createElement(C.b,{padding:{blockstart:"four"}},r.createElement("div",null,r.createElement(f.c,{align:"right"},r.createElement(Ne,{"data-stid":"remove-room",linkName:"Remove room",onClick:()=>c(u),rfrr:":RemoveRoom","aria-label":a.formatText("hotels.roomPicker.removeRoomButton.a11yLabel",v,h)},a.formatText("hotels.roomPicker.removeRoomButton.label"))))),r.createElement(C.c,null)))};var Me=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Fe=(0,c.ClickTracker)(me.E),Ue=(0,c.ClickTracker)(ge.E);var Be;!function(e){e.IN_SEAT="seat",e.ON_LAP="lap"}(Be||(Be={}));let Ge=class extends r.Component{constructor(e){super(e),this.focusOnOpen=r.createRef(),this.lastRoomHeader=r.createRef();const{l10n:t,context:n,isPackageShoppingPath:i,petsIncluded:a,infantsInSeats:o}=e;this.state={dialogShow:!1,selection:new _e(e,t,n,i,a),justAddedRoom:!1,justRemovedRoom:!1,infantsInSeats:o},this.onIncludePets=this.onIncludePets.bind(this),this.onExcludePets=this.onExcludePets.bind(this),this.onAddRoom=this.onAddRoom.bind(this),this.onChildAgeUpdated=this.onChildAgeUpdated.bind(this),this.onRemoveRoom=this.onRemoveRoom.bind(this),this.onRoomAdultsChanged=this.onRoomAdultsChanged.bind(this),this.onRoomChildrenChanged=this.onRoomChildrenChanged.bind(this),this.onRoomInfantsChanged=this.onRoomInfantsChanged.bind(this),this.onInfantAgeUpdated=this.onInfantAgeUpdated.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onSubmit=this.onSubmit.bind(this),this.resetLiveAnnounce=this.resetLiveAnnounce.bind(this)}componentWillMount(){this.updateStateWithProps(this.props)}componentWillReceiveProps(e){this.updateStateWithProps(e)}componentDidMount(){this.setState({dialogShow:!0})}componentDidUpdate(){const{l10n:e}=this.props,{selection:t}=this.state,{roomCount:n}=t;this.state.justAddedRoom&&((0,Se.liveAnnounce)(e.formatText("hotels.roomPicker.roomAdded.liveAnnounce",n)),this.setFocusOnLastRoomHeader(),this.setState({justAddedRoom:!1})),this.state.justRemovedRoom&&((0,Se.liveAnnounce)(e.formatText("hotels.roomPicker.roomRemoved.liveAnnounce",n)),this.setFocusOnLastRoomHeader(),this.setState({justRemovedRoom:!1}))}setFocusOnLastRoomHeader(){this.lastRoomHeader.current&&"function"==typeof this.lastRoomHeader.current.focus&&this.lastRoomHeader.current.focus()}updateStateWithProps(e){const{adults:t,children:n}=this.state.selection.initialProps;t===e.adultsString&&n===e.childrenString||this.state.selection.setupRooms(e.adultsString,e.childrenString)}render(){var e,t;const{l10n:n,context:i}=this.props,{dialogShow:a,selection:o}=this.state,{disableAddRoom:s,displaySummary:l,rooms:c,enableInfantSeatSelection:u}=o,p=this.props.isPackageShoppingPath?n.formatText("hotels.travelers.multiitem.dialog.label"):n.formatText("hotels.roomPicker.title"),m=null===(e=this.props.analytics)||void 0===e?void 0:e.setupTracker(":ChangeRoomGuest","Close Room Picker"),g=this.props.buttonText?this.props.buttonText:n.formatText("hotels.roomPicker.doneButton.label"),v=r.createElement(r.Fragment,null,g,r.createElement("span",{className:"is-visually-hidden"},n.formatText("hotels.roomPicker.doneButton.a11yLabel"))),y=this.props.isPackageShoppingPath&&(null===(t=this.props.multiItem)||void 0===t?void 0:t.isFlightPackage())&&u;return r.createElement(ue.e,{type:"centered",isVisible:a,triggerRef:null},r.createElement(be.b,{toolbarTitle:p,navigationContent:{onClick:this.onDismiss,navIconLabel:n.formatText("hotels.roomPicker.cancelButton.a11yLabel"),onClickAnalytics:m,navButtonRef:this.focusOnOpen}}),r.createElement(ue.f,null,r.createElement("section",{className:"uitk-scroll-vertical"},r.createElement(C.b,{padding:{blockstart:"half",blockend:"twelve",inline:"four"}},r.createElement("div",null,c.map(((e,t)=>this.getRoomComponent(t,e,o))),!(0,he.S)(i)&&r.createElement(C.b,{padding:{blockstart:"four",blockend:"twelve"}},r.createElement("div",null,r.createElement(f.c,{align:"right"},r.createElement(Ue,{"data-stid":"add-room",linkName:"Add room",onClick:this.onAddRoom,disabled:s,rfrr:":AddRoom"},n.formatText("hotels.roomPicker.addRoomButton.label"))))),y&&r.createElement("div",{className:"airlineChildSeating"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(f.c,{size:300,weight:"bold"},n.formatText("hotels.roomPicker.multiitem.infantSeating.label"))),r.createElement(ye.a,{group:"ChildSeating",onChange:e=>this.onInfantSeatingChanged(e),selected:"1"===this.state.infantsInSeats?Be.IN_SEAT:Be.ON_LAP},r.createElement(C.b,{padding:{inlineend:"six"}},r.createElement("div",null,r.createElement(ye.E,{id:"ChildOnLap",value:"lap"},n.formatText("hotels.roomPicker.multiitem.infantSeating.inlap.label")))),r.createElement(C.b,{padding:{inlineend:"six"}},r.createElement("div",null,r.createElement(ye.E,{id:"ChildInSeat",value:"seat"},n.formatText("hotels.roomPicker.multiitem.infantSeating.inseat.label"))))))),y&&r.createElement("div",null,r.createElement(ve.E,{size:"small",className:"airlineAgeRules"},r.createElement("a",{href:"/p/info-main/h_fw_default?rhtx=HTX_FLTSRCH_RT#travs",id:"airline-age-rules",target:"_blank",rel:"noopener"},n.formatText("hotels.roomPicker.multiitem.airlineRules.text"),r.createElement(h.a,{id:"airline-age-rules-opens-in-new",name:"open_in_new",title:"Opens in a new window"})))),(0,he.S)(i)&&r.createElement(Le,{enabled:this.state.selection.petsIncluded,onEnable:this.onIncludePets,onDisable:this.onExcludePets}),r.createElement(C.b,{padding:{blockstart:"two",blockend:"six"}},r.createElement("div",null)))))),r.createElement(Ee.E,{type:Ee.a.BUTTON},r.createElement(Fe,{isFullWidth:!0,size:d.E.LARGE,"data-stid":"apply-room-picker",linkName:"Apply Room Picker",onClick:this.onSubmit,rfrr:":ChangeRoomGuestDone",subText:l},v)))}onIncludePets(){this.state.selection.includePets()}onExcludePets(){this.state.selection.excludePets()}onRoomAdultsChanged(e,t){const n=parseInt(t.target.value,10);isNaN(n)||this.state.selection.changeAdultsForRoom(e,n)}onRoomChildrenChanged(e,t){const n=parseInt(t.target.value,10);isNaN(n)||this.state.selection.changeChildrenForRoom(e,n)}onRoomInfantsChanged(e,t){const n=parseInt(t.target.value,10);isNaN(n)||this.state.selection.changeChildrenForRoom(e,n,!0)}onAddRoom(){this.state.selection.addRoom(),this.setState({justAddedRoom:!0})}onRemoveRoom(e){this.state.selection.removeRoom(e),this.setState({justRemovedRoom:!0})}onChildAgeUpdated(e,t,n){const{analytics:r,l10n:i}=this.props,a=n.value;if(this.state.selection.changeChildAge(e,t,a),n.focus(),(0,Se.liveAnnounce)(i.formatText("hotels.roomPicker.childUpdated.liveAnnounce",t,a),Se.Level.POLITE),r&&"function"==typeof r.trackEvent){const n=e+1,i=t+1;r.trackEvent(`:ROOM.${n}.Child.${i}.AGE.${a}`,"Child age update",null)}}onInfantAgeUpdated(e,t,n){const{analytics:r,l10n:i}=this.props,a=n.value;if(this.state.selection.changeChildAge(e,t,a,!0),n.focus(),(0,Se.liveAnnounce)(i.formatText("hotels.roomPicker.childUpdated.liveAnnounce",t,a),Se.Level.POLITE),r&&"function"==typeof r.trackEvent){const n=e+1,i=t+1;r.trackEvent(`:ROOM.${n}.Infant.${i}.AGE.${a}`,"Infant age update",null)}}onInfantSeatingChanged(e){const{analytics:t}=this.props,n=e.target.value;this.setState({infantsInSeats:n===Be.ON_LAP?"0":"1"}),t&&"function"==typeof t.trackEvent&&t.trackEvent(`:Infant.Seating.${n}`,"Infant seating update",null)}resetLiveAnnounce(){(0,Se.liveAnnounce)("",Se.Level.ASSERTIVE)}onDismiss(){const{onDismiss:e}=this.props;this.state.selection.reset(),this.resetLiveAnnounce(),e&&e()}onSubmit(){const{onSave:e}=this.props;if(e){const{finalProps:t,displaySummary:n,petsIncluded:r}=this.state.selection;e(t.adults,t.children,n,r,this.state.infantsInSeats)}this.onDismiss()}getRoomComponent(e,t,n){return this.props.isPackageShoppingPath?r.createElement(ke,{analytics:this.props.analytics,key:e,l10n:this.props.l10n,headerRef:this.lastRoomHeader,onChildAgeUpdated:this.onChildAgeUpdated,onRoomAdultsChanged:this.onRoomAdultsChanged,onRoomChildrenChanged:this.onRoomChildrenChanged,onRoomInfantsChanged:this.onRoomInfantsChanged,onInfantAgeUpdated:this.onInfantAgeUpdated,onRemoveRoom:this.onRemoveRoom,room:t,roomIndex:e,selection:n}):r.createElement(je,{context:this.props.context,analytics:this.props.analytics,key:e,l10n:this.props.l10n,headerRef:this.lastRoomHeader,onChildAgeUpdated:this.onChildAgeUpdated,onRoomAdultsChanged:this.onRoomAdultsChanged,onRoomChildrenChanged:this.onRoomChildrenChanged,onRemoveRoom:this.onRemoveRoom,room:t,roomIndex:e,selection:n})}};Ge.defaultRoomProps={adultsString:"2",childrenString:""},Me([i.action],Ge.prototype,"onIncludePets",null),Me([i.action],Ge.prototype,"onExcludePets",null),Me([i.action],Ge.prototype,"onRoomAdultsChanged",null),Me([i.action],Ge.prototype,"onRoomChildrenChanged",null),Me([i.action],Ge.prototype,"onRoomInfantsChanged",null),Me([i.action],Ge.prototype,"onAddRoom",null),Me([i.action],Ge.prototype,"onRemoveRoom",null),Me([i.action],Ge.prototype,"onChildAgeUpdated",null),Me([i.action],Ge.prototype,"onInfantAgeUpdated",null),Me([i.action],Ge.prototype,"onInfantSeatingChanged",null),Ge=Me([y.withLocalization,(0,a.inject)("currentHotel","context","multiItem"),a.observer],Ge);var $e=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let He=class extends r.Component{constructor(e){var t,n;super(e),this.focusButton=r.createRef(),this.fieldValues=e=>{const{adults:t,children:n,infantsInSeats:i}=e;return r.createElement(r.Fragment,null,t&&r.createElement("input",{type:"hidden",name:"adults",value:t,readOnly:!0}),n&&r.createElement("input",{type:"hidden",name:"children",value:n,readOnly:!0}),i&&r.createElement("input",{type:"hidden",name:"infantsInSeats",value:i,readOnly:!0}))};const i=null===(n=null===(t=this.props.model)||void 0===t?void 0:t.guestCount)||void 0===n?void 0:n.toString();this.state={adults:i,children:"",mounted:!1,value:""},this.isPackageShoppingPath=e.multiItem&&e.multiItem.isPackageShoppingPath(),this.roomPickerModel=new _e({adults:"",children:""},e.l10n,e.context,this.isPackageShoppingPath),this.convertRoomConfigToRoomModel=this.convertRoomConfigToRoomModel.bind(this),this.convertRoomModelToRoomConfig=this.convertRoomModelToRoomConfig.bind(this),this.dismiss=this.dismiss.bind(this),this.open=this.open.bind(this),this.openDatepicker=this.openDatepicker.bind(this),this.save=this.save.bind(this),this.validate=this.validate.bind(this),this.parseRooms=this.parseRooms.bind(this),this.updatePetsSelection=this.updatePetsSelection.bind(this),e.registerValidator&&e.registerValidator((()=>this.validate("children"))),e.registerValidator&&e.registerValidator((()=>this.validate("adults")))}open(){const{analytics:e,history:t,location:n}=this.props;(0,l.updateSearch)({history:t,location:n,newParams:{pwaDialog:"travelerPicks"}}),e&&"function"==typeof e.trackEvent&&e.trackEvent(":ChangeRoomGuest","Open Room Picker",null)}openDatepicker(){const{analytics:e,history:t,location:n}=this.props;(0,l.updateSearch)({history:t,location:n,newParams:{pwaDialog:"datepicker-start"}}),e&&"function"==typeof e.trackEvent&&e.trackEvent(":OpenDatepickerRoomGuest","Open Datepicker from Room Guest",null)}save(e,t,n,r,i){const{context:a,model:o,updateModel:s}=this.props;this.roomPickerModel.setupRooms(e,t);const{finalProps:l,rooms:c}=this.roomPickerModel;if("function"==typeof s&&(s({target:{name:"rooms",value:this.convertRoomConfigToRoomModel(c)}}),i&&s({target:{name:"infantsInSeats",value:i}}),(0,he.S)(a))){let e=[...o.amenities];const t=e.indexOf(de.b$q.PETS);r&&t<0?e.push(de.b$q.PETS):!r&&t>-1&&(e=e.filter((e=>e!==de.b$q.PETS))),s({target:{name:"amenities",value:e}})}l.adults&&l.children&&this.setState({adults:l.adults,children:l.children,value:n,infantsInSeats:i})}dismiss(){this.props.history.goBack();const e=this.focusButton;e.current&&"function"==typeof e.current.focus&&e.current.focus()}convertRoomModelToRoomConfig(e){return e.map((e=>{var t;return{adults:e.adults,children:null===(t=e.children)||void 0===t?void 0:t.map((e=>e.age))}}))}convertRoomConfigToRoomModel(e){return e.map((e=>new fe.t({adults:e.adults,children:e.children.map((e=>new pe.s({age:e})))})))}parseRooms(e){if(!e)return;this.roomPickerModel.rooms=this.convertRoomModelToRoomConfig(e);const{displaySummary:t,finalProps:n}=this.roomPickerModel;return{adults:n.adults,children:n.children,value:t}}get petsIncluded(){var e,t;return(null===(t=null===(e=this.props.model)||void 0===e?void 0:e.amenities)||void 0===t?void 0:t.includes(de.b$q.PETS))||!1}updatePetsSelection(){this.petsIncluded?this.roomPickerModel.includePets():this.roomPickerModel.excludePets()}componentDidMount(){const{rooms:e,infantsInSeats:t}=this.props.model;this.updatePetsSelection(),this.setState(Object.assign(Object.assign({},this.parseRooms(e)),{mounted:!0,infantsInSeats:t}))}componentDidUpdate(){this.updatePetsSelection()}componentWillReceiveProps(e){const{rooms:t,infantsInSeats:n}=e.model;this.setState(Object.assign(Object.assign({},this.parseRooms(t)),{infantsInSeats:n}))}getLabel(){return this.isPackageShoppingPath?"hotels.travelers.multiitem.dialog.label":"hotels.search.form.travelers.label"}render(){const{id:e,name:t,placeholder:n,updateModel:i,hidden:a}=this.props,{adults:o,mounted:s,value:c}=this.state,u=`${e}__btn`,d=parseInt(o,10)>_e.MAX_GUESTS?_e.MAX_GUESTS.toString():o,h=s?c:d,f=this.props.buttonText,m=[];return a?this.fieldValues(this.state):(s&&m.push("is-hidden"),r.createElement(r.Fragment,null,r.createElement(p.a,null,r.createElement("div",null,r.createElement(D.b,{id:e,name:s?t:"adults",className:m.join(" "),label:(()=>r.createElement(r.Fragment,null,r.createElement(y.LocalizedText,{message:this.getLabel()}),r.createElement("span",{className:"is-visually-hidden"},h)))(),placeholder:n,value:h,onChange:i,"data-stid":"input-date",icon:"person",invalid:s&&(this.validate("adults")||this.validate("children"))},s&&r.createElement(D.a,{domRef:this.focusButton,id:u,type:"button","data-stid":"open-room-picker",onClick:this.open},r.createElement("span",{className:"is-visually-hidden"},r.createElement(y.LocalizedText,{message:this.getLabel()})," "),h)))),s&&this.fieldValues(this.state),r.createElement(l.QueryRoute,{query:{pwaDialog:"travelerPicks"}},r.createElement(ue.h,{isVisible:!0},r.createElement(G.Layer,{id:"home-travelerpicks",onDismiss:this.dismiss},r.createElement(Ge,{adultsString:this.state.adults,childrenString:this.state.children,petsIncluded:this.petsIncluded,infantsInSeats:this.state.infantsInSeats,onSave:this.save,onDismiss:this.dismiss,analytics:this.props.analytics,buttonText:f,isPackageShoppingPath:this.isPackageShoppingPath}))))))}validate(e){const{l10n:t}=this.props,{adults:n,children:r}=this.state,{formatText:i}=t,a=n.split(",").map(parseInt).reduce(((e,t)=>e+t));if("adults"===e){if(!n)return i("hotels.search.validation.invalidGuests.text");if(a<=0)return i("hotels.search.validation.invalidGuests.text")}if("children"===e){if(!r)return;const e=r.split(","),t=e.filter((e=>{var t;return parseInt(null!==(t=e.split("_")[1])&&void 0!==t?t:"",10)<2}));let n=1===e.length?i("hotels.search.validation.missingChildAge.text"):i("hotels.search.validation.missingChildrenAges.text"),o=!1;const s=[];e.forEach((e=>{e.match(/\d{1,2}_\d{1,2}/)||(o=!0);const t=e.split("_")[1];t&&s.push(parseInt(t,10))}));const l=s.filter((e=>e>=6)).length+a;return this.isPackageShoppingPath&&t.length>l&&(o=!0,n=i("hotels.travelers.multiitem.validation.maxInfants")),o?n:void 0}}};$e([i.computed],He.prototype,"petsIncluded",null),He=$e([T.withRouter,y.withLocalization,k,(0,a.inject)("analytics","context","multiItem"),a.observer],He);const ze={origin:e=>r.createElement(v.Experiment,{name:"Optimize_Number_Of_Typeahead_Suggestion"},r.createElement(v.ExperimentControl,null,r.createElement(H,Object.assign({},e,{maxTypeaheadResults:10}))),r.createElement(v.ExperimentVariant,{bucket:1},r.createElement(H,Object.assign({},e,{maxTypeaheadResults:5}))),r.createElement(v.ExperimentVariant,{bucket:2},r.createElement(H,Object.assign({},e,{maxTypeaheadResults:6})))),destination:e=>r.createElement(v.Experiment,{name:"Optimize_Number_Of_Typeahead_Suggestion"},r.createElement(v.ExperimentControl,null,r.createElement(ce,Object.assign({},e,{maxTypeaheadResults:10}))),r.createElement(v.ExperimentVariant,{bucket:1},r.createElement(ce,Object.assign({},e,{maxTypeaheadResults:5}))),r.createElement(v.ExperimentVariant,{bucket:2},r.createElement(ce,Object.assign({},e,{maxTypeaheadResults:6})))),dateRange:ae,rooms:He,cabinClass:B,directFlights:F,partialStayCheckbox:Z,partialStayDateRange:X};var Ve=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const We=s.ClientLogger.getLoggerWithIdentifier("pwa.component.searchform"),{withoutKeys:Ye}=l.merge,qe=(0,c.ClickTracker)(u.E),Ke=["changedFilters","logger","comparePropertyIds","compareDialog"];let Qe=class extends r.Component{constructor(e){var t,n,r,i;super(e),this.validators=[];const a=e.model?e.model.clone():new S.h({},this.props.l10n);this.state={model:a,submitDisabled:!1,mounted:!1},this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this),this.getFormRef=this.getFormRef.bind(this),this.dispatchSubmitEvent=o(this.dispatchSubmitEvent.bind(this),(null===(n=null===(t=this.props.multiItem)||void 0===t?void 0:t.multiItemContext)||void 0===n?void 0:n.packageType)&&!e.isMobile?2e3:200,{trailing:!0}),this.essAnalyticsLogger=new g.EssClientLogger(e.analytics,s.ClientLogger,(a||{}).destination,null===(i=null===(r=this.props.l10n)||void 0===r?void 0:r.experimentStore)||void 0===i?void 0:i.exposures)}componentWillReceiveProps(e){e.model!==this.props.model&&this.setState({model:e.model?e.model.clone():new S.h({},this.props.l10n)})}componentDidMount(){this.setState({mounted:!0})}get hiddenFields(){const{displayFields:e,ignoreFields:t}=this.props,{model:n,mounted:r}=this.state,i=[];return r||i.push("latLong","regionId"),Object.keys(Ye([...Ke,...null!=t?t:[],...null!=e?e:[],...i]).merge({},n))}get modelDefaults(){return S.h&&S.h.DEFAULTS||{}}get displayFieldsActive(){const{model:e}=this.state,{displayFields:t}=this.props;return null==t?void 0:t.reduce(((t,n)=>{const r=e&&e[n],a=this.modelDefaults[n];return i.comparer.structural(r,a)||t.push(n),t}),[])}get displayFieldsActiveLength(){return this.displayFieldsActive&&this.displayFieldsActive.length}clearDisplayfields(){var e;const t=this.state.model;null===(e=this.displayFieldsActive)||void 0===e||e.forEach((e=>{const n=this.modelDefaults[e];t&&e&&(t[e]=n),"hotelName"===e&&(t.selected="")}))}handleChange(e){document&&document.dispatchEvent&&"function"==typeof document.dispatchEvent&&CustomEvent&&document.dispatchEvent(new CustomEvent("mesoSlotFilterUpdate",{detail:{type:"slotFilter",editType:"adding",filterData:null==e?void 0:e.target}})),this.setState({submitDisabled:!1})}dispatchSubmitEvent(){var e;const t=new Event("submit",{cancelable:!0});null===(e=this.formRef)||void 0===e||e.dispatchEvent(t)}handleSubmit(e){var t;const{onUpdateResults:n}=this.props;this.essAnalyticsLogger&&this.essAnalyticsLogger.logWizardSubmitEvent(),this.setState({submitDisabled:!0});const r=[];if(this.validators.forEach((e=>{const t=e();t&&r.push(t)})),r.length>0){e&&"function"==typeof e.preventDefault&&e.preventDefault();const t=r.find((e=>e.focus));t&&t.focus(),this.setState({submitDisabled:!1}),We&&"function"==typeof We.logEvent&&We.logEvent(new E.SystemEvent(E.SystemEventLevel.ERROR,"SEARCH_FORM_HANDLE_SUBMIT_ERROR"),JSON.stringify(r),{escalation:q.I.CUSTOMER})}else null===(t=this.props.analytics)||void 0===t||t.resetAnalyticsForNewPage(),"function"==typeof n&&n(e,this.state.model)}render(){var e;const{displayFields:t,multiItem:n}=this.props,{model:i,submitDisabled:a}=this.state,o=null===(e=null==n?void 0:n.multiItemContext)||void 0===e?void 0:e.packageType,s={submitDisabled:a};return r.createElement(I,{method:"GET",action:"/Hotel-Search","data-stid":"sidebar-search-form",noValidate:!0,wrappedFormRef:this.getFormRef,onSubmit:this.handleSubmit},r.createElement(v.Experiment,{name:"HoB_SQM_AA_TEST_1"},r.createElement(v.ExperimentControl,null),r.createElement(v.ExperimentVariant,{bucket:1})),r.createElement(v.Experiment,{name:"HoB_SQM_AA_Test_2"},r.createElement(v.ExperimentControl,null),r.createElement(v.ExperimentVariant,{bucket:1})),r.createElement(p.E,Object.assign({},(e=>ee(ne(e))?{columns:{small:1,medium:2,large:3},space:"two"}:te(ne(e))?{columns:{small:1,medium:4,large:6},space:"two"}:void 0)(n)),t&&t.length>0&&t.map((e=>r.createElement(Je,{key:`displayField-${e}`,field:e,model:i,validators:this.validators,handleChange:this.handleChange}))),this.hiddenFields&&this.hiddenFields.length>0&&this.hiddenFields.map((e=>r.createElement(Ze,{key:`hidden_${e}`,field:e,model:i,validators:this.validators,handleChange:this.handleChange}))),r.createElement(b.LM,null,r.createElement(b.NP,null,r.createElement(r.Fragment,null,o===m.Rn.HC&&r.createElement(j,{model:this.state.model,modelKey:"multiItemCarTimeRange",updateModelCallback:this.handleChange,validators:this.validators}),r.createElement(Xe,Object.assign({},s)))),r.createElement(b.rw,null,r.createElement(r.Fragment,null,r.createElement(Xe,Object.assign({},s)),o===m.Rn.HC&&r.createElement(j,{model:this.state.model,modelKey:"multiItemCarTimeRange",updateModelCallback:this.handleChange,validators:this.validators}))))))}getFormRef(e){this.formRef=e}};Qe.defaultProps={displayFields:[],ignoreFields:[],provideDefaultSubmitButton:!0,l10n:{}},Ve([i.computed],Qe.prototype,"displayFieldsActive",null),Ve([i.computed],Qe.prototype,"displayFieldsActiveLength",null),Qe=Ve([y.withLocalization,(0,a.inject)("analytics","multiItem"),a.observer],Qe);const Xe=({submitDisabled:e,packageType:t,showSubmitButtonIcon:n})=>{const i={type:"submit",rfrr:"FORM.SUBMIT",linkName:"Submit search form",isFullWidth:!0,size:d.E.LARGE,"data-stid":"submit-hotel-search"},a=n?r.createElement(h.a,{name:"search"}):r.createElement(y.LocalizedText,{message:"hotels.search.form.submit.label"}),o=[r.createElement(b.rw,{key:"medium"},r.createElement(p.a,null,r.createElement("div",null,r.createElement(f.c,{align:"right"},r.createElement(qe,Object.assign({},i),a)))))];return o.push(r.createElement(b.NP,{key:"small"},r.createElement(p.a,null,r.createElement("div",null,r.createElement(qe,Object.assign({},i,{disabled:e}),a))))),t!==m.Rn.FH&&t!==m.Rn.FHC||o.push(r.createElement(b.zQ,{key:"large"},r.createElement(p.a,null,r.createElement("div",null,r.createElement(qe,Object.assign({},i),a))))),r.createElement(b.LM,null,o)};Xe.displayName="DefaultSubmitButton";const Ze=({field:e,model:t,validators:n,handleChange:i})=>{if(["rooms"].includes(e))return r.createElement(Je,{key:`displayField-${e}`,field:e,model:t,hidden:!0,validators:n,handleChange:i});const a={type:"hidden",name:e,value:t[e]||"",disabled:!1};return(""===a.value||"number"==typeof a.value.length&&0===a.value.length)&&(a.disabled=!0),r.createElement("input",Object.assign({},a))};Ze.displayName="HiddenField";const Je=({field:e,model:t,validators:n,handleChange:i,isSubmitted:a,fetchDatePickerRates:o,essAnalyticsLogger:s,hidden:l=!1})=>{const c=ze[e];return c?r.createElement(c,{model:t,modelKey:e,validators:n,updateModelCallback:i,isSubmitted:a,fetchDatePickerRates:o,essAnalyticsLogger:s,hidden:l}):null};Je.displayName="DisplayField"},81603:function(e,t,n){n.d(t,{w:function(){return s}});var r=n(96540),i=n(21181),a=n(58716),o=n(84719);const s=({children:e})=>{const{uiPage:t}=(0,a.g)();return r.createElement(o.UF,{dispatchHandler:({message:e})=>{null==t||t.showNotification(e),(0,i.liveAnnounce)(e,i.Level.POLITE)}},e)}},40456:function(e,t,n){n.d(t,{J:function(){return f}});var r=n(96540),i=n(33897),a=n(86663),o=n(6462),s=n(59877),l=n(58716),c=n(85625),u=n(63971),d=n(33222),h=n(22060);const p=(e,t)=>{const n=e.split(/[-/]/);return n[0]&&n[1]&&n[2]?/^dd?\/mm?\/(yyyy|y)$/i.test(t)&&/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[0-2])\/\d{4}$/.test(e)?{year:parseInt(n[2],10),month:parseInt(n[1],10),day:parseInt(n[0],10)}:/^mm?\/dd?\/(yyyy|y)$/i.test(t)&&/^(0?[1-9]|1[0-2])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}$/.test(e)?{year:parseInt(n[2],10),month:parseInt(n[0],10),day:parseInt(n[1],10)}:/^\d{4}[-/](0?[1-9]|1[0-2])[-/](0?[1-9]|[12][0-9]|3[01])$/.test(e)?{year:parseInt(n[0],10),month:parseInt(n[1],10),day:parseInt(n[2],10)}:null:null},f=({handleSubmit:e,showDatePicker:t,toggleDatePicker:n,autoOpenPlayback:f,includePlayback:m,dateLocalFormat:g,queryParamStartDate:v,queryParamEndDate:y,isVrboPastDateSearch:E,queryParamLatLong:b,alternateDestination:S,dateFieldInitialFocus:T,redirectToSearchResultOnSubmit:R,autoSubmitOnFieldChange:O,queryParamDaysInFuture:_,queryParamStayLength:I,queryRooms:x,features:C,pageLocation:k})=>{var w,D,P,A,L,N,j,M,F,U;const{page:B,searchCriteria:G}=(0,l.g)(),$=(0,i.useHistory)(),H=(0,h.EY)(),z=(0,c.useExperiment)("Invalidated_Date_Feature_Gate"),V=p(v,null!=g?g:""),W=p(y,null!=g?g:""),Y=!V&&_?(0,s.V)(_,I):{checkInDate:V,checkOutDate:W},q=null===(w=null==H?void 0:H.secondaryCriteria)||void 0===w?void 0:w.selections,K=(null==Y?void 0:Y.checkInDate)&&(null==Y?void 0:Y.checkOutDate)||q?((e,t,n,r)=>{var i;return(null==e?void 0:e.primarySearchCriteria.property)?t&&n?Object.assign(Object.assign({},e),{primarySearchCriteria:Object.assign(Object.assign({},null==e?void 0:e.primarySearchCriteria),{property:Object.assign(Object.assign({},e.primarySearchCriteria.property),{dateRange:Object.assign(Object.assign({},null===(i=null==e?void 0:e.primarySearchCriteria)||void 0===i?void 0:i.property.dateRange),{checkInDate:t,checkOutDate:n})})}),secondaryCriteria:Object.assign(Object.assign({},e.secondaryCriteria),{selections:[]})}):r?Object.assign(Object.assign({},e),{primarySearchCriteria:Object.assign(Object.assign({},null==e?void 0:e.primarySearchCriteria),{property:Object.assign(Object.assign({},e.primarySearchCriteria.property),{dateRange:null})}),secondaryCriteria:Object.assign(Object.assign({},e.secondaryCriteria),{selections:[]})}):Object.assign(Object.assign({},e),{primarySearchCriteria:Object.assign(Object.assign({},null==e?void 0:e.primarySearchCriteria),{property:Object.assign({},e.primarySearchCriteria.property),secondaryCriteria:Object.assign(Object.assign({},e.secondaryCriteria),{selections:[]})})}):e})(H,null!==(D=null==Y?void 0:Y.checkInDate)&&void 0!==D?D:null,null!==(P=null==Y?void 0:Y.checkOutDate)&&void 0!==P?P:null,E):H,[Q,X]=r.useState(!1),Z=null===(L=null===(A=null==H?void 0:H.secondaryCriteria)||void 0===A?void 0:A.selections)||void 0===L?void 0:L.some((e=>e.value===o.l.PETS_ALLOWED)),[J,ee]=r.useState(!1),te=H&&!Q&&1===z.exposure.bucket&&void 0===!G.isInvalidatedDate;r.useEffect((()=>{const e=(0,a.parse)($.location.search).pwaDialog,t=Boolean(e)||""===e;"PUSH"===$.action&&t&&ee(!0),"POP"===$.action&&J?(X(!0),ee(!1)):"POP"===$.action&&X(!1)}),[$.action]),r.useEffect((()=>{(te||H&&!Q&&0===z.exposure.bucket)&&X(!0)}),[H,Q]),r.useEffect((()=>{1===z.exposure.bucket&&"true"===G.isInvalidatedDate&&(X(!1),G.isInvalidatedDate=void 0)}),[$.action,G.isInvalidatedDate]);const{exposure:ne,logExperiment:re}=(0,c.useExperiment)("VRBO_Web_Alternative_Destinations_in_Typeahead_Lodging_SRP"),{exposure:ie}=(0,c.useExperiment)("Searchlocation_BFF_implementation"),ae=r.useCallback((()=>{try{re(ne)}catch(w){}}),[ne,re]),oe=1===ne.bucket,se=S||oe,le=""+(se?"search-form-with-alternateDestination":""),ce={popularFilter:!0,xPageId:B.pageId},ue=(null===(j=null===(N=null==K?void 0:K.primarySearchCriteria)||void 0===N?void 0:N.property)||void 0===j?void 0:j.rooms)||[],de={propertySearchCriteriaInput:{primary:Object.assign(Object.assign({},null===(M=null==K?void 0:K.primarySearchCriteria)||void 0===M?void 0:M.property),{destination:Object.assign({},null===(U=null===(F=null==K?void 0:K.primarySearchCriteria)||void 0===F?void 0:F.property)||void 0===U?void 0:U.destination),rooms:[...x.length>0?x:ue]}),secondary:null==K?void 0:K.secondaryCriteria}};return r.createElement(u.Rn,{name:"SearchForm",dataStid:le},r.createElement(d.Z0,{inputs:null!=de?de:{},onSubmit:e,includePlayback:m,autoOpenPlayback:f,skipQuery:Q,showCalendar:t,toggleCalendar:n,autoSubmitOnFieldChange:O,isAnyPetAllowed:Z,updateLatLongOnSelection:se,additionalAdapterFields:se?Object.assign({alternate:!0,lastSearchLatLong:b,drivable:""},ce):Object.assign({},ce),onOpenLocationField:ae,dateFieldInitialFocus:T,features:null!=C?C:[d.GR.PREFILL_PROPERTY_NAME],includeFlexibleCalendarContent:!0,includeFlexibleDatesContent:!0,redirectToSearchResultOnSubmit:R,pageLocation:k,enableBffForSearchLocation:1===ie.bucket}))};f.displayName="SearchFormWrapping"},19910:function(e,t,n){n.d(t,{_:function(){return N}});var r=n(96540),i=n(33897),a=n(70111),o=n(91188),s=n(22865),l=n(79718),c=n(31484),u=n(58716),d=n(33319),h=n(85625),p=n(1192),f=n(17271),m=n(5315),g=n(16756),v=n(70313);const y=(0,g.inject)("uiPage")((0,g.observer)((({uiPage:e})=>(r.useEffect((()=>()=>null==e?void 0:e.hideProgressIndicator()),[e]),r.createElement(s.ErrorBoundary,{label:"animatedProgressIndicator.shopping-pwa"},r.createElement(v.a,{visible:e&&e.displayProgressIndicator}))))));var E=n(59083),b=n(61287),S=n(93938);const T=({className:e})=>{const t=(0,m.EH)(),n=(0,c.m)();return r.createElement(s.ErrorBoundary,{label:"hotel.bernie.header"},r.createElement(l.Y9,{className:e,lineOfBusiness:E.zhC.HOTEL,customJourneyCriterias:R(t),marketing:O(n,t)}))};T.displayName="Header";const R=e=>{let t;const{regionId:n,startDate:r,endDate:i}=e||{};return Number(n)&&(t=[{destination:{regionId:n},dateRange:{startDate:r,endDate:i}}]),t},O=(e,t)=>{var n,r,i,a,o,s;const l=e&&t&&(null===(r=null===(n=(0,b.e)(e,t))||void 0===n?void 0:n.secondary)||void 0===r?void 0:r.selections),c=null===(i=null==l?void 0:l.find((e=>"gclid"===e.id.toLowerCase())))||void 0===i?void 0:i.value,u=null===(a=null==l?void 0:l.find((e=>"mdpdtl"===e.id.toLowerCase())))||void 0===a?void 0:a.value,d=null===(o=null==l?void 0:l.find((e=>"icmdtl"===e.id.toLowerCase())))||void 0===o?void 0:o.value,h=null===(s=null==l?void 0:l.find((e=>"semcid"===e.id.toLowerCase())))||void 0===s?void 0:s.value;let p=u;return u&&(p=`${S.R.mdpdtl}=${u}`),d&&(p=`${S.R.icmdtl}=${d}`),h&&(p=`${S.R.semcid}=${h}`),{metaDistributionPartnersDetails:p,googleClickIdentifier:c}};var _=n(43623);const I=(0,g.inject)("uiPage")((0,g.observer)((({uiPage:e})=>(r.useEffect((()=>()=>null==e?void 0:e.resetNotification()),[e]),e&&e.notifications?r.createElement(r.Fragment,null,r.createElement(s.ErrorBoundary,{label:"notifications.shopping-pwa"},e.notifications.show&&r.createElement(_.E,{show:e.notifications.show},e.notifications.message))):null))));var x=n(38417),C=n(33381),k=n(94220),w=n(73520),D=n(7629);const P=({pageHeader:e,templateContent:t,inlineMargin:n="six"})=>{const{multiItem:i,page:a}=(0,u.g)(),o=!(null==i?void 0:i.isPackageShoppingPath())&&(null==a?void 0:a.pageName)===D.F_.SA,l=e&&r.createElement("header",null,r.createElement("h1",{className:"is-visually-hidden"},e)),c=r.createElement("div",null,o?r.createElement(w.L,null):l,r.createElement("div",{className:"main-region"},r.createElement(s.ErrorBoundary,{label:"hotel.masterPage.template"},t)));return r.createElement(k.b,{margin:{medium:{inline:n}}},c)};P.displayName="BodyRegion";const A=r.memo(T),L=r.memo(l.wi),N=(0,i.withRouter)((({"data-stid":e="master-page",inlineMargin:t,pageHeader:n,route:i,templateContent:l})=>{const g=(0,p.useLocalization)(),v=(0,a.m)(),{analytics:E,context:b,page:S,searchCriteria:T}=(0,u.g)(),R=(0,h.useExperiment)("Lodging_Shopping_PWA_EGTNL_AA_Test");E&&i&&i.routeData&&(E.setPageNamespace(i.routeData.rfrrNamespace||""),S&&!S.pageName&&(S.pageName=i.routeData.pageName||"page.unknown"));const O=(0,d.getProductHeaderLink)((null==S?void 0:S.pageName)||"");v.setLink(o.C.from([O,v.link])),r.useEffect((()=>{document.title=(null==S?void 0:S.title)||g.formatText("common.defaultPageTitle")}),[null==S?void 0:S.title,g]),r.useEffect((()=>{R.logExperiment(R.exposure)}),[R]);const _=[{context:c.r,value:b},{context:m.r8,value:T}];return r.createElement(m.e8,{contextPairs:_},r.createElement(s.ErrorBoundary,{label:"lodging.masterPage.egtnlServerStressTest"},r.createElement(h.Experiment,{name:"stress_load_server_side_exposure_logging_in_shopping_pwa"},r.createElement(h.ExperimentControl,null),r.createElement(h.ExperimentVariant,{bucket:1}))),r.createElement("div",{"data-stid":e},r.createElement(h.Experiment,{name:"Lodging_Shopping_PWA_EGTNL_AA_Test"},r.createElement(h.ExperimentControl,null),r.createElement(h.ExperimentVariant,{bucket:1})),r.createElement(s.ErrorBoundary,{label:"lodging.masterPage.header"},r.createElement(A,null)),r.createElement(s.ErrorBoundary,{label:"onekey.onboarding.shopping-pwa"},r.createElement(f.y,null)),r.createElement("main",null,r.createElement(P,{templateContent:l,pageHeader:n,inlineMargin:t})),r.createElement(s.ErrorBoundary,{label:"lodging.masterPage.footer"},r.createElement(C.O,null,r.createElement(L,{skipSsr:!0}))),r.createElement(y,null),r.createElement(I,null)),r.createElement(s.ErrorBoundary,{label:"meso.scripts.errorboundary"},r.createElement(x.v,null)))}))},73520:function(e,t,n){n.d(t,{L:function(){return d}});var r=n(96540),i=n(22865),a=n(58716),o=n(54235),s=n(22060),l=n(93287);const c=()=>{var e;const{searchResults:t}=(0,a.g)();if(!t)return null;const n=null===(e=t.resultsHeading)||void 0===e?void 0:e.split("|")[0];return n?r.createElement(l.rT,{resultsHeading:n}):null};c.displayName="ResultsAccessibilityHeading";var u=n(7629);const d=()=>{const{multiItem:e,page:t}=(0,a.g)();return!(null==e?void 0:e.isPackageShoppingPath())&&(null==t?void 0:t.pageName)===u.F_.SA?r.createElement(o.R8,{productType:o.ch.Lodging},r.createElement(s.Ok,null,r.createElement(i.ErrorBoundary,{label:"hotel.masterPage.results.accessibility.heading"},r.createElement(c,null)))):null};d.displayName="ResultsAccessibilityHeadingRegion"},38417:function(e,t,n){n.d(t,{v:function(){return h}});var r=n(96540),i=n(22451),a=n(16756),o=n(22060),s=n(27475),l=n(7629);const c=e=>{var t,n,r,i,a;if(e instanceof s.h)return e;const o=null===(t=null==e?void 0:e.primarySearchCriteria)||void 0===t?void 0:t.cruise,l=null!==(n=null==o?void 0:o.adultCount)&&void 0!==n?n:2,c=null!==(r=null==o?void 0:o.childCount)&&void 0!==r?r:0,u=null!==(i=null==o?void 0:o.destinations)&&void 0!==i?i:null,{end:d,start:h}=null!==(a=null==o?void 0:o.departureDateRange)&&void 0!==a?a:{end:{},start:{}};return{regionId:"",startDate:`${null==h?void 0:h.year}-${null==h?void 0:h.month}-${null==h?void 0:h.day}`,endDate:`${null==d?void 0:d.year}-${null==d?void 0:d.month}-${null==d?void 0:d.day}`,adults:l,children:c,star:"",amenities:"",lodging:"",origin:"",cruiseDest:u}},u=e=>{var t;return Object.assign(Object.assign({},e),{targeting:Object.assign(Object.assign({},null!==(t=null==e?void 0:e.targeting)&&void 0!==t?t:{}),{sr:""})})},d=e=>{window.meso=window.meso||{},window.meso.targeting=window.meso.targeting||[],window.meso.targeting.push(e)},h=(0,a.inject)("advertising","page","searchResults","currentHotel")((({advertising:e,page:t,searchResults:n,currentHotel:a})=>{const[s,h]=(0,r.useState)(null),p=(0,o.EY)(),f=e=>{const t=(e=>{var t,n,r;const{regionId:i,startDate:a,endDate:o,adults:s,children:l,star:u,amenities:d,lodging:h,origin:p,cruiseDest:f}=c(e);return{type:"update",targeting:Object.assign(Object.assign(Object.assign(Object.assign({dateEnd:null!=o?o:"",dateStart:null!=a?a:"",adults:s,kids:l},f&&{cruiseDest:f}),i&&{dest:i}),p&&{origin:p}),{locResolver:"gaia",ha:null!==(t=null==d?void 0:d.toString())&&void 0!==t?t:"",hpt:null!==(n=null==h?void 0:h.toString())&&void 0!==n?n:"",sr:null!==(r=null==u?void 0:u.toString())&&void 0!==r?r:""})}})(e);((e,t)=>{var n,r;return(null===(r=null===(n=null===window||void 0===window?void 0:window.meso)||void 0===n?void 0:n.adblock)||void 0===r?void 0:r.acceptableads)?!i.comparer.structural(u(e),u(t)):!i.comparer.structural(e,t)})(s,t)&&(h(t),d(t))},m=(0,r.useMemo)((()=>!!(null==e?void 0:e.triggeredPageName)&&(d({type:"clear"}),Object.values(l.kC).some((t=>t===(null==e?void 0:e.triggeredPageName))))),[null==e?void 0:e.triggeredPageName]);return"page.Cruise-Search"===(null==t?void 0:t.pageName)?(0,r.useEffect)((()=>{p&&f(p)}),[p]):(0,r.useEffect)((()=>{m&&(null==a?void 0:a.searchCriteria)?f(a.searchCriteria):(null==n?void 0:n.searchCriteria)&&f(null==n?void 0:n.searchCriteria)}),[m,null==n?void 0:n.searchCriteria,null==a?void 0:a.searchCriteria]),null}));h.displayName="MesoScripts"},54166:function(e,t,n){n.d(t,{W:function(){return c}});var r=n(96540),i=n(22865),a=n(34638),o=n(21181),s=n(65886),l=n(59994);const c=e=>{let t="meso-display-ad";(null==e?void 0:e.uci)&&(t+=`-${e.uci}`);const[n]=(0,s.O)(t),c=r.useMemo((()=>{var t;return r.createElement(l.w,{uci:null!==(t=e.uci)&&void 0!==t?t:"",displayAdRef:n})}),[]),u=r.useMemo((()=>{var t;return r.createElement(l.w,{uci:null!==(t=e.uci)&&void 0!==t?t:"",displayAdRef:n,adSwapEnabled:e.adSwapEnabled,isEnabled:e.isEnabled})}),[n,e.isEnabled,e.adSwapEnabled,e.uci]),d=(0,o.classNames)("ad-div","display-ad",e.className&&{[e.className]:e.className});return r.createElement(i.ErrorBoundary,{label:"meso.display.ad"},r.createElement(a.d,{type:"relative",className:d},e.adSwapEnabled?u:c))};c.displayName="MesoDisplayAd"},33879:function(e,t,n){n.d(t,{A:function(){return h}});var r=n(96540),i=n(16756),a=n(22865),o=n(30313),s=n(94220),l=n(66597),c=n(54166),u=n(46167),d=n(7629);const h=(0,i.inject)("advertising")((0,i.observer)((({advertising:e})=>Object.values(d.kC).some((t=>t===(null==e?void 0:e.triggeredPageName)))?r.createElement((({pageName:e})=>r.createElement(a.ErrorBoundary,{label:"meso.footer"},r.createElement(s.b,{padding:{block:"four"}},r.createElement(o.E,{justifyItems:"center"},r.createElement(o.a,null,r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM1))),r.createElement(o.a,null,r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM2))),r.createElement(o.a,null,r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM3))),r.createElement(o.a,null,(e=>!!e&&Object.values(l.Rn).some((t=>d.kC[t]===e)))(e)?r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM4)):r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM6))))))),{pageName:null==e?void 0:e.triggeredPageName}):r.createElement((()=>r.createElement(a.ErrorBoundary,{label:"meso.footer"},r.createElement(s.b,{padding:{blockstart:"six"}},r.createElement(o.E,{justifyItems:"center"},r.createElement(o.a,null,r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM1))),r.createElement(o.a,null,r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM2))),r.createElement(o.a,null,r.createElement(c.W,Object.assign({},u.mA.FOOTER_CM3))))))),null))))},72678:function(e,t,n){n.d(t,{s:function(){return o}});var r=n(96540),i=n(54166),a=n(46167);const o=r.memo((()=>r.createElement(r.Fragment,null,r.createElement(i.W,Object.assign({},a.mA.SIDERAIL_R1)),r.createElement(i.W,Object.assign({},a.mA.SIDERAIL_R2)))));o.displayName="MesoSideRail"},70595:function(e,t,n){n.d(t,{_:function(){return l}});var r=n(96540),i=n(16756),a=n(22865),o=n(94220),s=n(20205);const l=(0,i.inject)("multiItem","analytics","page")((0,i.observer)((({multiItem:e,analytics:t,page:n})=>{var i;if(!(null==e?void 0:e.isPackageShoppingPath()))return null;let l=null;-1===(null===(i=null==n?void 0:n.pageName)||void 0===i?void 0:i.toUpperCase().indexOf("INFOSITE"))&&(l="");const c=e.multiItemSessionId;return r.createElement(a.ErrorBoundary,{label:"progress-indicator"},r.createElement(o.b,{padding:{small:{blockstart:"three",inlinestart:"three"},medium:{blockstart:"one"},large:{blockstart:"three"}}},r.createElement("div",null,r.createElement(s.Z,{inputs:{multiItemSessionId:c||null,journeyContinuationId:null,multiItemPriceToken:l,lockupPrice:null,savingsPrice:null,originalBookingId:null,additionalChangeQueryParams:null},scrimColor:"PRIMARY",showLoadingState:!0,changeLinkClickCallback:(e,n,r)=>{null==t||t.trackEvent(e,n,t.omnitureData,r,!0)},errorCallback:()=>{null==t||t.trackEvent("MIT.PROGRESS.INDICATOR.ERROR","RFRR Action Event",t.omnitureData,null,!0)}}))))})));l.displayName="MitHeader"},56274:function(e,t,n){n.d(t,{Y:function(){return h}});var r=n(96540),i=n(33897),a=n(94907),o=n(70790),s=n(75826),l=n(26538),c=n(68174),u=n(53033),d=n(80933);const h=({templateComponent:e})=>{var t;const n=(0,o.lq)((0,o.Ik)({view:(0,o.lq)((0,o.fc)(l.eA)),bexQuickFiltersEnabled:(0,o.lq)((0,o.zM)()),filterBarSpacing:(0,o.lq)((0,o.bz)())})),i=(0,o.xL)(n,e.config);if(!i.success)return null;const{view:a,bexQuickFiltersEnabled:s,filterBarSpacing:u}=null!==(t=i.output)&&void 0!==t?t:{},d={dialogView:a,bexQuickFiltersEnabled:s};return r.createElement(c.LM,null,r.createElement(c.NP,null,r.createElement(p,Object.assign({withMapButton:!0},d,{filterBarSpacing:u}))),r.createElement(c.zQ,null,r.createElement(p,Object.assign({withMapButton:!1},d,{filterBarSpacing:u}))))};h.displayName="Filterbar";const p=({withMapButton:e,dialogView:t,bexQuickFiltersEnabled:n,filterBarSpacing:o})=>{const c=(0,a.kU)(),h=(0,s._q)(),p=e&&r.createElement("div",{"data-stid":"map-trigger"},r.createElement(u.b,{viewTracker:c,tracker:h,dialogView:t,bexQuickFiltersEnabled:n})),f=new URLSearchParams((0,i.useLocation)().search);return r.createElement(r.Fragment,null,"map"!==f.get("pwaOverlay")&&r.createElement("div",{"data-stid":"filterbar"},r.createElement(d.j,{view:l.eA.FILTER_BAR,filterBarSpacing:o})),p)}},61594:function(e,t,n){n.d(t,{S:function(){return v}});var r=n(96540),i=n(71831),a=n(67811),o=n(94495),s=n(15144),l=n(75826),c=n(85625),u=n(1192),d=n(93287),h=n(51753),p=n(58716),f=n(24624),m=n(43317);const g=({l10n:e,onClick:t,toggled:n,iconName:s,name:l,label:c})=>n?r.createElement(i.E,{type:"button",id:`${l}-toggle`,"aria-label":e.formatText("gridView.toggle.selected.a11yLabel",l)},r.createElement(o.a,{name:s}),c):r.createElement(a.E,{type:"button",className:"grid-view-toggle-unselected",onClick:t,id:`${l}-toggle`,"aria-label":e.formatText("gridView.toggle.unselected.a11yLabel",l)},r.createElement(o.a,{name:s}),c),v=({alignment:e="end"})=>{const{multiItem:t,pageLayout:n,analyticsSearch:i,context:a}=(0,p.g)(),o=(0,u.useLocalization)(),v=(0,l.iQ)(),{isGridView:y,toggleGridView:E}=(0,d.kl)(),{exposure:b}=(0,c.useExperiment)("SRP_Grid_view_web",!1),S=()=>{var e;null==E||E(),null==n||n.setProductCardAdaptiveViewType(y?h.bD.LIST:h.bD.GRID,!0),e=!y,v(Object.assign({},(0,m.D)(e,null==i?void 0:i.searchId)))};return!(0,m.N)(b)||(null==t?void 0:t.isPackageShoppingPath())||(null==n?void 0:n.isDisabledGridView)?null:r.createElement(s.i,{direction:"row",justifyContent:e,space:"one",alignItems:"center"},r.createElement(s.j,null,r.createElement(g,{l10n:o,onClick:S,toggled:!y,iconName:"view_list",name:o.formatText("gridView.toggle.flavour.list"),label:(0,f.Gz)(a)?null:o.formatText("gridView.toggle.label.list")})),r.createElement(s.j,null,r.createElement(g,{l10n:o,onClick:S,toggled:y,iconName:"view_grid_large",name:o.formatText("gridView.toggle.flavour.grid"),label:(0,f.Gz)(a)?null:o.formatText("gridView.toggle.label.grid")})))}},43317:function(e,t,n){n.d(t,{D:function(){return r},N:function(){return i}});const r=(e,t)=>({event:{event_name:e?"grid_view.selected":"list_view.selected",event_type:"Interaction",event_version:"1.0.0"},search_request:{search_id:t}}),i=e=>1===(null==e?void 0:e.bucket)||2===(null==e?void 0:e.bucket)},92733:function(e,t,n){n.d(t,{z4:function(){return A}});var r=n(96540),i=n(33897),a=n(22451),o=n(16756),s=n(94791),l=n(22865),c=n(43162),u=n(37075),d=n(51753),h=n(58716),p=n(24338),f=n(24624),m=n(65632),g=n(75826),v=n(85625),y=n(1192),E=n(61397),b=n(68174),S=n(59877),T=n(41165),R=n(94193),O=n(2543),_=n(39437);const{withoutKeys:I,flattenFields:x,allKeys:C}=s.merge,k=["criteria_primary_destination_regionName","criteria_primary_destination_regionId","criteria_primary_destination_coordinates","criteria_primary_destination_pinnedPropertyId","criteria_primary_destination_propertyIds","criteria_primary_destination_mapBounds","criteria_primary_destination_coordinates_latitude","criteria_primary_destination_coordinates_longitude"];var w=n(7629),D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const P=({cfg:e,clientPadding:t,onMapDialogClosed:n,filterComponent:o,fullscreenOptions:P,onInit:A,setViewportToApplyOnMapExpandChange:L,mapFocusHolderDisabled:N})=>{var j,M,F,U,B,G,$,H,z;const{analytics:V,searchResults:W,searchCriteria:Y,pageLayout:q,currentHotel:K,multiItem:Q,experiment:X,page:Z,map:J,context:ee,analyticsSearch:te}=(0,h.g)(),ne=(0,i.useHistory)(),re=(0,i.useLocation)(),ie=(0,y.useLocalization)(),ae=r.useRef(),{highlightedPropertyId:oe}=(0,u.aU)(),se=r.useMemo((()=>Boolean(new URLSearchParams(re.search).get("selected"))),[re.search]),{exposure:le}=(0,v.useExperiment)("Akamai_smart_cropping_for_PDP_image_gallery"),{exposure:ce}=(0,v.useExperiment)("mWeb_larger_image_for_top_of_PDP_gallery"),{exposure:ue}=(0,v.useExperiment)("PropertyDetailsQuery_CSR"),{exposure:de,logExperiment:he}=(0,v.useExperiment)("Map_sheet_on_pinned_SRP_sheet_optimisation"),pe=(0,p.v)(X,ee);r.useEffect((()=>{se&&he(de)}),[se]);const fe=se?1===de.bucket?(0,f.Fr)(ee)?E.SheetType.BOTTOM:E.SheetType.CENTERED:E.SheetType.FULL:E.SheetType.FULL;const{reset:me}=(0,g._q)(),ge=J?e=>J.setCustomPlace(e):void 0,ve=null===(j=null==J?void 0:J.customPlaces)||void 0===j?void 0:j[0],ye=(e=>{var t;return e===(null===(t=w.F_.SA)||void 0===t?void 0:t.valueOf())?"Lodging":"Package"})((null==Z?void 0:Z.pageName)||w.F_.SA);me({data:{experience:{page_product_line:ye}},config:{isEgClickstream:!0}});const[Ee]=r.useState((e=>{var t,n;const r=null===(n=null===(t=null==e?void 0:e.latLong)||void 0===t?void 0:t.split(","))||void 0===n?void 0:n.map(parseFloat);if(2===(null==r?void 0:r.length)&&(0!==r[0]||0!==r[1]))return{center:r,zoom:10}})(Y)),be=(0,b.s5)(m.r),Se=!(null==Q?void 0:Q.isPackageShoppingPath()),Te=r.useCallback((()=>{var e,t,n,r,i;const a=Se?null===(e=null==Y?void 0:Y.paginationSubSets)||void 0===e?void 0:e.previousSubset:null===(n=null===(t=null==W?void 0:W.pagination)||void 0===t?void 0:t.subSets)||void 0===n?void 0:n.previousSubset,o={size:(0,T.S)(ee)?null==a?void 0:a.size:100,startingIndex:(null!==(r=null==a?void 0:a.startingIndex)&&void 0!==r?r:0)+(null!==(i=null==a?void 0:a.size)&&void 0!==i?i:0)},s=ee?(0,S.tD)(ee,te,W.searchCriteria,null==Q?void 0:Q.multiItemContext,o):{context:ee,destination:{}},{context:l}=s;return D(s,["context"])}),[ee,Q,W,Y,X]),[Re,Oe]=r.useState(Te());r.useEffect((()=>{(0,a.autorun)((()=>{if(ee){const e=Te();Oe((t=>((e,t)=>{var n,r,i,o,s,l,c;const[u,d]=[I(k).merge({},x(e)),I(k).merge({},x(t))];if(!(0,O.isEqual)(u,d))return t;const[h,p]=[null===(n=null==e?void 0:e.criteria)||void 0===n?void 0:n.primary.destination,null===(r=t.criteria)||void 0===r?void 0:r.primary.destination],f=a.comparer.structural(C().merge({},null!==(i=null==h?void 0:h.coordinates)&&void 0!==i?i:{}),C().merge({},null!==(o=null==p?void 0:p.coordinates)&&void 0!==o?o:{})),m=(null==h?void 0:h.regionName)!==(null==p?void 0:p.regionName),g=null!==(null===(c=null===(l=null===(s=t.criteria)||void 0===s?void 0:s.primary)||void 0===l?void 0:l.destination)||void 0===c?void 0:c.regionId);return f&&(g||m)?e:t})(t,e)))}}))}),[ee,Q,W,Y,X]);const _e=r.useCallback((e=>{L&&L(e.bounds)}),[L]);r.useEffect((()=>{ae.current&&ae.current.addBoundChangeListener(_e,"updateViewportToApplyOnMapExpandChange")}),[_e]);const Ie=(null==q?void 0:q.templateName)===d.eV.SplitView,xe=Ie?{__typename:"PropertySearchResults",dynamicMap:null==W?void 0:W.dynamicMap,propertySearchListings:null==W?void 0:W.propertySearchListings}:void 0;r.useEffect((()=>{var e,t,n;if(L){let r;const{initialViewport:i,bounds:a}=(null===(e=null==xe?void 0:xe.dynamicMap)||void 0===e?void 0:e.map)||{};if(i===c.acO.BOUNDS&&a){const{northeast:{latitude:e,longitude:t},southwest:{latitude:n,longitude:i}}=a;r={sw:[n,i],ne:[e,t]}}else i===c.acO.FIT_MARKERS&&(r=null===(n=null===(t=null==xe?void 0:xe.dynamicMap)||void 0===t?void 0:t.map)||void 0===n?void 0:n.markers.flatMap((e=>"EGDSMapFeature"===e.__typename?[[e.markerPosition.latitude,e.markerPosition.longitude]]:[])));r&&L(r)}}),[L,null===(M=null==xe?void 0:xe.dynamicMap)||void 0===M?void 0:M.map,null===(U=null===(F=null==xe?void 0:xe.dynamicMap)||void 0===F?void 0:F.map)||void 0===U?void 0:U.bounds,null===(G=null===(B=null==xe?void 0:xe.dynamicMap)||void 0===B?void 0:B.map)||void 0===G?void 0:G.markers,null===(H=null===($=null==xe?void 0:xe.dynamicMap)||void 0===$?void 0:$.map)||void 0===H?void 0:H.initialViewport]);const Ce=r.useCallback((e=>{ae.current=e,_e&&e.addBoundChangeListener(_e,"updateViewportToApplyOnMapExpandChange"),A&&A(e)}),[]),ke=r.useCallback(((e,t)=>((e,t,...n)=>e===_.i18nKeys.defaultClusterPropertyLabel?t.formatText("egmaps.markers.cluster.available.text",n[0]):void 0)(e,ie,...t)),[ie]),we=r.useMemo((()=>Object.assign(Object.assign(Object.assign({},e),{i18n:{formatFunction:ke}}),{googleMaps:{gmapsAddConfig:{useStaticMap:!1}}})),[e,ke]);if(!(ee&&(null==W?void 0:W.searchCriteria)&&te&&K))return null;const De=n?{onClose:n,isDialogOpen:!0,triggerRef:null!==(z=null==P?void 0:P.triggerRef)&&void 0!==z?z:null}:void 0,Pe=be===b.OB.LARGE||be===b.OB.EXTRA_LARGE,Ae=pe&&Pe,Le=!Pe||!Ie;return r.createElement(r.Fragment,null,!N&&r.createElement("div",{id:"map-focus-holder-entry",role:"button",tabIndex:0,onKeyDown:e=>{if(e.shiftKey&&"Tab"===e.key){const t=document.querySelectorAll('[data-stid="next-button"]');t.length&&t[0]&&(e.preventDefault(),t[0].focus())}},"aria-label":"Map"}),r.createElement(l.ErrorBoundary,{label:"search.map.dynamic-search-map"},r.createElement(E.DynamicSearchMap,{showToolbar:Le,hideOverfilteredToast:Ae,propertySearchResult:xe,inputs:Re,selectedFeatureId:oe,clientPadding:t,fullscreenOptions:De,egMapsConfig:we,filterComponent:o,onDestinationChanged:e=>{var t,n,r,i;const a=e.coordinates?`${e.coordinates.latitude},${e.coordinates.longitude}`:"undefined,undefined",o=e.mapBounds?[[null===(t=e.mapBounds[0])||void 0===t?void 0:t.latitude,null===(n=e.mapBounds[0])||void 0===n?void 0:n.longitude],[null===(r=e.mapBounds[1])||void 0===r?void 0:r.latitude,null===(i=e.mapBounds[1])||void 0===i?void 0:i.longitude]]:null;(null==V?void 0:V.clickTracker)&&V.clickTracker("Module.Map.Search.Button","User clicking the map search button on PWA HSR Map",null,(()=>null)),te.withPublishingAnalyticsPayload(s.updateSearch,V,X)({history:ne,location:re,newParams:{regionId:"",destination:"",selected:"",poi:"",latLong:a,mapBounds:o,neighborhood:"",multi_neighborhood_group:""}}),window.scrollTo(0,0)},onLodgingCardClickCallback:e=>{null==K||K.setPropertyListingAsCurrentHotel(e);const t=le.bucket,n=ce.bucket,r=ue.bucket;(0,R.df)(e,{isMobile:(0,f.Fr)(ee),isTablet:(0,f.v1)(ee)},t,n,r)},initialViewport:Ee,height:"100%",externalLoadingBar:(0,T.S)(ee)&&Pe,isPropertyListingLoading:null==W?void 0:W.isLoading,onInit:Ce,setSavedFeature:ge,savedFeature:ve,sheetType:fe})),!N&&r.createElement("div",{id:"map-focus-holder-exit",role:"button",tabIndex:0,onKeyDown:e=>{e.preventDefault();document.getElementById("post-map-focus-footer").focus()},"aria-label":"Map"}))};P.displayName="DynamicSearchMapWrapper";const A=(0,o.observer)(P)},53033:function(e,t,n){n.d(t,{b:function(){return _}});var r=n(96540),i=n(33897),a=n(16756),o=n(8311),s=n(94791),l=n(22865),c=n(15144),u=n(94220),d=n(11992),h=n(86663),p=n(94907),f=n(24624),m=n(85625),g=n(61397),v=n(2619),y=n(26538),E=n(22060),b=n(80933),S=n(92733),T=n(85416);const R={markers:{place:{zIndex:{unknown:0}},property:{zIndex:{[`${d.lL.NOT_CLUSTERED}`]:0}}}},O=o.ClientLogger.getLoggerWithIdentifier("pwa.component.mappreview"),_=(0,a.inject)("experiment","multiItem","searchResults","searchCriteria","context","analyticsSearch")((0,a.observer)((e=>{const{context:t,dialogView:n,multiItem:a,tracker:o,viewTracker:d,searchInputs:_,searchResults:I,searchCriteria:x,bexQuickFiltersEnabled:C,analyticsSearch:k,mapTriggerButtonType:w}=e,D=(0,i.useLocation)(),P=(0,i.useHistory)(),{exposure:A,logExperiment:L}=(0,m.useExperiment)("Filter_Removal_at_destination_level_based_on_supply_mweb_apps"),N=r.useMemo((()=>Boolean(new URLSearchParams(D.search).get("selected"))),[D.search]),{exposure:j,logExperiment:M}=(0,m.useExperiment)("Vrbo_map_button_on_pinned_SRP_contrast_optimisation"),{exposure:F}=(0,m.useExperiment)("Map_button_CTA_optimisation_on_pinned_SRP"),{exposure:U}=(0,m.useExperiment)("Quick_Filters_On_Vrbo_Map_View"),B=1===U.bucket;r.useEffect((()=>{(0,f.Fr)(t)&&N&&M(j)}),[t,N,j]);const G=(0,E.EY)();if(!(t&&x&&I&&k))return O.logEvent(new v.SystemEvent(v.SystemEventLevel.ERROR,"MAP_PREVIEW_MISSING_PROPS"),{escalation:T.I.SERVICE}),null;if(I&&!(null==I?void 0:I.mapTrigger))return null;const $=(null==D?void 0:D.search)?(0,h.parse)(D.search):void 0,H=null!=_?_:{destination:{regionName:null==$?void 0:$.destination,pinnedPropertyId:null==$?void 0:$.selected},productShoppingCriteriaInput:G},z=C||B?y.eA.FILTER_BAR:y.eA.FILTER_DIALOG,V=C||B?{inlinestart:"four",blockstart:"four"}:{},W=(0,f.Fr)(t)&&N&&1===j.bucket,Y=N&&[1,2,3,4].includes(F.bucket),q=r.createElement(S.z4,{cfg:R,clientPadding:"32px",onMapDialogClosed:()=>{var e;P&&D&&(0,s.updateSearch)({history:P,location:D,newParams:{pwaOverlay:""}}),(0,p.ec)(o,d,p.Ss.LISTINGS,null!==(e=null==a?void 0:a.getPackageType())&&void 0!==e?e:void 0)},filterComponent:r.createElement(u.b,{padding:V},r.createElement(c.j,{shrink:0},r.createElement(b.j,{view:z,isMapView:!0,onOpenDialog:()=>{(null==a?void 0:a.isPackageShoppingPath())||L(A)}})))});return r.createElement(l.ErrorBoundary,{label:"search.map.map-preview"},r.createElement(g.PropertySearchMapTrigger,{inputs:H,dialogView:C?y.eA.FILTER_BAR:n,externalData:null==I?void 0:I.mapTrigger,mapTriggerButtonType:W?"primary":w,showMapIconInLargeView:Y},q))})))},94193:function(e,t,n){n.d(t,{df:function(){return i}});var r;!function(e){e.MEDIUM="medium",e.MEDIUM_HIGH="mediumHigh",e.HIGH="high"}(r||(r={}));const i=(e,t,n=0,r=0,i=0)=>{var o,s;const l=((e,t)=>{var n,r,i;return 2!==t||"GenericDiscoveryCard"===e.__typename||"HttpURI"!==(null===(n=e.cardLink)||void 0===n?void 0:n.resource.__typename)?"":null!==(i=null===(r=new URLSearchParams(e.cardLink.resource.value.split("?")[1]).get("pdpImageUrls"))||void 0===r?void 0:r.split(",")[0])&&void 0!==i?i:""})(e,i);if(l){const e=new Image;return e.src=l,e}if("LodgingCard"===e.__typename){const i=null===(s=null===(o=e.mediaSection.gallery)||void 0===o?void 0:o.media[0])||void 0===s?void 0:s.media;if("Image"===(null==i?void 0:i.__typename)&&(c=i.url,/trvl-media/.test(c)||/media.int/.test(c))){const e=new Image;return e.src=a(i.url,t,n,r),e}}var c;return null},a=(e,{isMobile:t,isTablet:n},i=0,a=0,o=!1)=>{if(o&&(t||n))return e;const s=new URL(e);if(t&&a){const e=575,t=575;return`${s.origin}${s.pathname}?impolicy=resizecrop&rw=${e}&rh=${t}&ra=fill`}if(i){let e=null;const n=t?575:608,a=t?323:342;switch(i){case 2:e=r.MEDIUM_HIGH;break;case 3:e=r.HIGH;break;default:e=null}return((e,t,n,r)=>{const i=r?`&q=${r}`:"";return`${e.origin}${e.pathname}?impolicy=fcrop&w=${t}&h=${n}&p=0.5${i}`})(s,n,a,e)}let l=598;return n?l=432:t&&(l=500),`${s.origin}${s.pathname}?impolicy=resizecrop&rw=${l}&ra=fit`}},19297:function(e,t,n){n.d(t,{V:function(){return u}});var r=n(96540),i=n(8311),a=n(40047),o=n(85625),s=n(2619),l=n(85416);const c=i.ClientLogger.getLoggerWithIdentifier("pwa.customer.qualtrics.experiments"),u=()=>r.createElement(o.Experiment,{name:"EGTNL_Lodging_PWA_Qualtrics"},r.createElement(o.ExperimentControl,null),r.createElement(o.ExperimentVariant,{bucket:1},r.createElement(a.l,{skipSsr:!0,onInit:e=>{((e,t)=>{const n=`Qualtrics startup zoneId: ${e} ${t?`experimentName: ${t}`:""}`;c.logEvent(new s.SystemEvent(s.SystemEventLevel.INFO,"INIT_QUALTRICS"),n,{escalation:l.I.SERVICE})})(e)}})));u.displayName="QualtricsExperiments"},6625:function(e,t,n){n.d(t,{y:function(){return U},O:function(){return F}});var r=n(96540),i=n(16756),a=n(22865),o=n(15144),s=n(94220),l=n(53033),c=n(94907),u=n(24624),d=n(75826),h=n(85625),p=n(1192),f=n(26538),m=n(68174),g=n(56274),v=n(33897),y=n(30313),E=n(90745),b=n(93287),S=n(22060),T=n(59877),R=n(94791),O=n(90112),_=n(92799),I=n(21181);const x=(0,O.ClickTracker)(_.E),C=(0,i.observer)((({searchCriteria:e,forceHistoryPushOnGoBack:t,history:n,location:i,model:a,switchPositionOfToggleOnEPS:o})=>{const{formatText:l}=(0,p.useLocalization)();if(!(a&&a.saveWithPointsActionMessage&&a.saveWithPointsMessage&&e))return null;const c=o?"trailing":"leading";return r.createElement(s.b,{padding:{block:"two"}},r.createElement("div",{"data-stid":"swp-toggle"},r.createElement(E.c,{size:300},r.createElement(x,{id:"swpToggle",checked:"true"===e.useRewards,onChange:()=>{(0,R.updateSearch)({history:n,location:i,newParams:{useRewards:String("true"!==(null==e?void 0:e.useRewards))},replace:!0}),t&&"function"==typeof t&&t(),"true"===(null==e?void 0:e.useRewards)?setTimeout((()=>(0,I.liveAnnounce)(l("common.pointsRemoved"),I.Level.POLITE)),500):setTimeout((()=>(0,I.liveAnnounce)(l("common.pointsApplied"),I.Level.POLITE)),500)},rfrr:`swpToggle: ${a.saveWithPointsActionMessage}`,linkName:"rewards toggle",switchPosition:c},a.saveWithPointsMessage))))})),k=(0,v.withRouter)(C);var w=n(61594),D=n(43317),P=n(80933),A=n(44864);const L=({analyticsSearch:e,justifySelf:t,colEnd:n,isError:i,usePropertyListingQuery:a,localizedText:o,isLoyaltyPWPToggleEnabled:s,searchInputs:l,resultMessages:c,isLoading:u,loyaltyMessagingModel:d,searchCriteria:p,criteriaChanged:f,searchResults:m})=>{const{exposure:g}=(0,h.useExperiment)("SRP_Grid_view_web",!1);return r.createElement(y.a,{colSpan:5,justifySelf:t,colEnd:n,alignSelf:(0,D.N)(g)?"end":void 0},r.createElement("div",null,!i&&r.createElement(r.Fragment,null,a?r.createElement(A.b,{analyticsSearch:e,searchInputs:l,searchResults:m,localizedText:o,switchPositionOfToggleOnEPS:s,criteriaChanged:f}):r.createElement(r.Fragment,null,d&&r.createElement(k,{model:d,searchCriteria:p,switchPositionOfToggleOnEPS:s}),r.createElement(j,{loading:u,localizedText:o,resultMessages:c})))))};L.displayName="PointsToggleAndSortOrder";const N=(0,i.inject)("context","searchCriteria","searchResults","experiment","multiItem","analyticsSearch","pageLayout")((0,i.observer)((e=>{var t,n;const{resultMessages:i,isLoading:a,l10n:l,loyaltyMessagingModel:c,searchCriteria:u,searchResults:d,isQuickAccessFiltersActive:p,context:g,experiment:E,multiItem:b,analyticsSearch:R,pageLayout:O,spacingOptions:_}=e,I=(0,S.EY)(),x=Boolean(null==d?void 0:d.isError),C=u&&u.misId?"multiItem":"hotels",N=l.formatText(`${C}.searchResults.loadingMessage.text`),M=(0,v.useLocation)();if(!(g&&u&&d&&R))return null;const F=!(null==b?void 0:b.isPackageShoppingPath()),{exposure:U}=(0,h.useExperiment)("SRP_Grid_view_web",!1),B=F&&I?(0,T.jH)(I,g,R,M,O,u,E):void 0,G=Boolean(F&&(0,T.YA)(g,u,d)),$=!(null==b?void 0:b.isPackageShoppingPath())&&1===(null===(n=null===(t=null==E?void 0:E.exposures)||void 0===t?void 0:t.ETS_POINTS_TOGGLE_UI_DISPLAY)||void 0===n?void 0:n.bucket),H=$?"end":"start",z=$?"end":void 0,V=$?9:0,W=!p&&r.createElement(y.a,{colSpan:3},r.createElement("div",null,r.createElement(y.E,{columns:1},r.createElement(y.a,null,r.createElement(P.j,{view:f.eA.SORT})),r.createElement(y.a,{alignSelf:"end"},r.createElement(s.b,{padding:{blockstart:"two"}},r.createElement("div",null,r.createElement(w.S,{alignment:$?"start":"end"}))))))),Y={analyticsSearch:R,justifySelf:z,colEnd:V,isError:x,usePropertyListingQuery:F,localizedText:N,isLoyaltyPWPToggleEnabled:$,searchInputs:B,resultMessages:i,isLoading:a,loyaltyMessagingModel:c,searchCriteria:u,criteriaChanged:G};return r.createElement(s.b,Object.assign({},_),r.createElement("header",null,r.createElement(m.LM,null,r.createElement(m.NP,null,r.createElement(r.Fragment,null,r.createElement(y.E,{columns:(0,D.N)(U)?2:1},r.createElement(y.a,null,!x&&r.createElement(r.Fragment,null,F?r.createElement(A.b,{analyticsSearch:R,searchInputs:B,searchResults:d,localizedText:N,criteriaChanged:G,switchPositionOfToggleOnEPS:$}):r.createElement(r.Fragment,null,c&&r.createElement(o.i,{justifyContent:H},r.createElement(k,{model:c,searchCriteria:u,switchPositionOfToggleOnEPS:$})),r.createElement(j,{loading:a,localizedText:N,resultMessages:i})))),r.createElement(y.a,null,r.createElement(w.S,null))))),r.createElement(m.zQ,null,r.createElement(y.E,{columns:8},$?r.createElement(r.Fragment,null,W,r.createElement(L,Object.assign({},Y,{searchResults:d}))):r.createElement(r.Fragment,null,r.createElement(L,Object.assign({},Y,{searchResults:d})),W))))))})));N.displayName="ResultsSubHeader";const j=({loading:e,localizedText:t,resultMessages:n})=>e?r.createElement(s.b,{padding:{blockend:"two"}},r.createElement(E.c,{inline:!1,align:"left",theme:"default"},t)):n&&0!==n.length?r.createElement("div",{"data-stid":"results-header-messages"},r.createElement(b.RI,{messages:n,standardLinkFontWeight:"bold"})):null;j.displayName="HeaderMessages";var M=n(94222);const F=(0,i.inject)("searchResults","multiItem","context")((0,i.observer)((({searchResults:e,withMapButton:t,withFilterButton:n,multiItem:i,context:o})=>{const l=r.useRef(null),c=(0,p.useLocalization)(),d=null==i?void 0:i.isPackageShoppingPath(),{exposure:v,logExperiment:y}=(0,h.useExperiment)("Quick_Filters_xLOB_Lodging_mWeb_Retest");if(Boolean(v)&&(0,u.Fr)(o)&&y(v),!e)return null;const{isLoading:E,loyaltyMessagingModel:b,resultMessages:S}=e,T={resultMessages:S,isLoading:E,l10n:c,loyaltyMessagingModel:b},R={dialogTitle:c.formatText("hotels.searchResults.filtersDialog.title"),withMapButton:t,withFilterButton:n,isPackageShoppingPath:d},O=r.createElement(r.Fragment,null,r.createElement(B,Object.assign({},R)),r.createElement(P.j,{view:f.eA.APPLIED_FILTERS}),r.createElement(N,Object.assign({},T,{isQuickAccessFiltersActive:!1}))),_=r.createElement(r.Fragment,null,r.createElement(g.Y,{templateComponent:{config:{view:f.eA.FILTER_BAR,bexQuickFiltersEnabled:!0,filterBarSpacing:{padding:{small:{blockend:"four"}}}}}}),r.createElement(N,Object.assign({},T,{isQuickAccessFiltersActive:!0})));return r.createElement(a.ErrorBoundary,{label:"hotel.search.tools"},r.createElement(s.b,{margin:{blockstart:"one"}},r.createElement("section",{"data-stid":"results-header",ref:l},r.createElement(m.LM,null,r.createElement(m.NP,null,r.createElement(h.Experiment,{name:"Quick_Filters_xLOB_Lodging_mWeb_Retest",logExposure:!1},r.createElement(h.ExperimentControl,null,O),r.createElement(h.ExperimentVariant,{bucket:1},d?_:r.createElement(r.Fragment,null,r.createElement(N,Object.assign({},T,{isQuickAccessFiltersActive:!0})))))),r.createElement(m.rw,null,O)))))}))),U=({withFilterButton:e,withMapButton:t,isPackageShoppingPath:n,productType:i})=>{const a=(0,c.kU)(),u=(0,d._q)(),{exposure:p,logExperiment:m}=(0,h.useExperiment)("Improve_Price_Slider_on_mweb"),{exposure:g,logExperiment:v}=(0,h.useExperiment)("Filter_Removal_at_destination_level_based_on_supply_mweb_apps"),y=()=>{m(p),n||v(g)};return r.createElement(s.b,{"data-stid":"tools__actions"},r.createElement(o.i,null,e&&r.createElement(o.j,{grow:1,shrink:1,minWidth:"0x","data-stid":"filters-toggle-button"},r.createElement(s.b,{padding:{blockend:"three"}},r.createElement("div",null,r.createElement(o.i,null,r.createElement(o.j,{grow:2},"Cars"===i?r.createElement(M.t,{view:f.eA.SORT_AND_FILTERS,onOpenDialog:y}):r.createElement(P.j,{view:f.eA.SORT_AND_FILTERS,onOpenDialog:y})))))),t&&r.createElement(o.j,{grow:1,shrink:1,minWidth:"0x","data-stid":"map-preview-button"},r.createElement(s.b,{margin:{inline:"one"}},r.createElement("div",null,r.createElement(l.b,{mapTriggerButtonType:"secondary",viewTracker:a,tracker:u}))))))},B=({dialogTitle:e,withFilterButton:t,withMapButton:n,isPackageShoppingPath:i})=>r.createElement(m.LM,null,r.createElement(m.NP,null,r.createElement(U,{dialogTitle:e,withFilterButton:!0,withMapButton:!0,isPackageShoppingPath:i})),r.createElement(m.zQ,null,r.createElement(r.Fragment,null)),r.createElement(m.TD,null,r.createElement(U,{dialogTitle:e,withMapButton:n,withFilterButton:t,isPackageShoppingPath:i})))},66570:function(e,t,n){n.d(t,{z:function(){return l}});var r=n(96540),i=n(33897),a=n(94791),o=n(93287),s=n(22060);const l=({batchKey:e})=>{const t=(0,s.EY)(),n=(0,i.useHistory)(),l=(0,i.useLocation)(),c={productShoppingCriteriaInput:t,destination:{regionName:null,regionId:null,coordinates:null,pinnedPropertyId:null,propertyIds:null,mapBounds:null},shoppingContext:{multiItem:null},returnPropertyType:!1,criteria:null,dateRange:null,filters:null,marketing:null,propertyShopOptions:null,rooms:null,searchIntent:null,searchPagination:null,sort:null};return r.createElement(o.IL,{inputs:c,onRewardsToggleChange:e=>{(0,a.updateSearch)({history:n,location:l,newParams:{useRewards:String(e)},replace:!0})},switchPositionOfToggleOnEPS:!1,skeletonLayout:[o.Wu.Secondary,o.Wu.Primary],batchKey:e})}},44864:function(e,t,n){n.d(t,{b:function(){return h}});var r=n(96540),i=n(33897),a=n(16756),o=n(94791),s=n(41165),l=n(85625),c=n(93287),u=n(54235),d=n(43317);const h=(0,a.inject)("context","searchCriteria","analytics","experiment","searchResults")((0,a.observer)((e=>{const{context:t,analyticsSearch:n,searchInputs:a,criteriaChanged:h,localizedText:p,switchPositionOfToggleOnEPS:f,skeletonLayout:m,analytics:g,experiment:v,searchResults:y}=e,[E,b]=(0,r.useState)(a),{exposure:S}=(0,l.useExperiment)("SRP_Grid_view_web",!1),T=(0,u.z)(),R=(0,i.useHistory)(),O=(0,i.useLocation)(),_=T===u.ch.Lodging&&!(0,s.S)(t),I=r.useMemo((()=>Boolean(new URLSearchParams(O.search).get("selected"))),[O.search]),{exposure:x}=(0,l.useExperiment)("OKC_toggle_default_state_for_meta_traffic",I),C=1===x.bucket&&I;(0,r.useEffect)((()=>{h&&b(a)}),[h]);const k={summary:{resultMessages:null==y?void 0:y.resultMessages,resultsHeading:null==y?void 0:y.resultsHeading,loyaltyInfo:null==y?void 0:y.loyaltyMessagingModel}};return r.createElement(c.IL,{data:k,loading:null==y?void 0:y.isLoading,propertySearchListingsPwa:null==y?void 0:y.propertySearchListings,inputs:E,localizedText:p,onRewardsToggleChange:e=>{n.withPublishingAnalyticsPayload(o.updateSearch,g,v)({history:R,location:O,newParams:Object.assign({useRewards:String(e)},C&&{oneKeyToggleUsed:!0}),replace:!0})},switchPositionOfToggleOnEPS:f,skeletonLayout:m,alignment:(0,d.N)(S)?"left":void 0,standardLinkFontWeight:_?"bold":"regular"})})));h.displayName="ResultsSubHeaderWrapper"},94222:function(e,t,n){n.d(t,{t:function(){return s}});var r=n(96540),i=n(9618),a=n(26538),o=n(22060);const s=({onOpenDialog:e,view:t,filterBarSpacing:n,batchKey:s})=>{const l=(0,o.EY)(),c=(0,o.m6)(),u=!l;return r.createElement(a.xv,{onFieldChange:(e,t)=>{c({field:e,event:t,type:o.Lv.SORT_AND_FILTER_UPDATE})},onRemoveAppliedFilter:e=>{c({type:o.Lv.REMOVE_FILTER_PILL,filterId:null==e?void 0:e.selections})},onRemoveAllAppliedFilters:()=>{c({type:o.Lv.REMOVE_ALL_FILTERS})},loading:u,view:t,onSubmit:()=>{c({type:o.Lv.SORT_AND_FILTER_SUBMIT}),setTimeout((()=>{(0,i.N7)(!1)}),200)},onOpenDialog:e,inputs:{destination:{},productShoppingCriteriaInput:l},filterBarSpacing:n,batchKey:s})}},80933:function(e,t,n){n.d(t,{j:function(){return A}});var r=n(96540),i=n(33897),a=n(94791),o=n(22865),s=n(58716),l=n(9618),c=n(75826),u=n(85625),d=n(54235),h=n(26538),p=n(22060),f=n(86663);const m=new Set(["TOWNHOUSE","APART_HOTEL","APARTMENT","CABIN","CARAVAN_PARK","CARAVAN_PARK_CAMPSITE","CHALET","CONDO","CONDO_RESORT","CONDOMINIUM_RESORT","COTTAGE","HOUSE_BOAT","MOBILE_HOME","VACATION_HOME","PRIVATE_VACATION_HOME","RESIDENCE","TREE_HOUSE","TREE_HOUSE_PROPERTY","VILLA"]),g=new Set(["AGRITOURISM","ALL_INCLUSIVE_PROPERTY","BED_AND_BREAKFAST","CAPSULE_HOTEL","CASTLE","COUNTRY_HOUSE","CRUISE","GUESTHOUSE","HOLIDAY_PARK","HOSTAL","HOSTEL_BACKPACKER_ACCOMMODATION","HOTEL","INN","LODGE","MOTEL","PALACE","PENSION","POUSADA_BRAZIL","POUSADA_PORTUGAL","RANCH","HOTEL_RESORT","RIAD","RYOKAN","SAFARI","SAFARI_TENTALOW","10","20","30","40","50"]);var v;!function(e){e.DESTINATION="destination"}(v||(v={}));const y=[...Object.values(h.T2),...Object.values(h._p),...Object.values(p.dM),...Object.values(p.fF)],E=Object.values(h._p),b=e=>t=>!e.startsWith(t),S=e=>!y.includes(e)||e===h.T2.REGION_ID||e===h.T2.SELECTED,T=e=>!E.includes(e),R=e=>e!==h.T2.AI_SEARCH_QUERY,O=({name:e,value:t,existingUrlQueryString:n,stayOptionExperimentExposure:r,event:i,defaults:o,showRegionName:s=!1})=>{var l,c,u,d;let p,y;const E=null===(l=null==i?void 0:i.target)||void 0===l?void 0:l.type,O=null===(c=null==i?void 0:i.target)||void 0===c?void 0:c.checked,I=null==i?void 0:i.type,x=(0,f.parse)(n);switch(e){case h.RH.CLEAR:return y=(null==o?void 0:o.regionId)?{[h.T2.REGION_ID]:o.regionId,[h.T2.NEIGHBORHOOD]:o.regionId}:{},p=(0,a.mergeQueryString)(n,y,S),p;case h.RH.CLEAR_QUICK_FILTERS:{const e=new URLSearchParams(n);return t.forEach((t=>{if(void 0===t.value){for(const[n,r]of e.entries())r===t.key&&e.delete(n);e.delete(t.key)}else{const n=e.getAll(t.key).filter((e=>e!==t.value));e.delete(t.key);for(const r of n)e.append(t.key,r)}})),p=e.toString(),p}case h.RH.CLEAR_FILTERS_APPLIED:{const e=new URLSearchParams(n);return t.forEach((t=>{if(void 0===t.value)e.delete(t.id);else{const n=e.getAll(t.id).filter((e=>e!==t.value));e.delete(t.id);for(const r of n)e.append(t.id,r)}})),p=e.toString(),p}case h.RH.RESTORE:return"";case h.T2.PROPERTY_NAME:return y=Object.assign({[h.T2.HOTEL_NAME]:t.hotelName,[h.T2.SELECTED]:t.selected},(null==t?void 0:t.regionName)&&s&&{[v.DESTINATION]:null==t?void 0:t.regionName}),p=(0,a.mergeQueryString)(n,y,R),p;case h.T2.REGION_ID:return y={[e]:t,[h.T2.NEIGHBORHOOD]:t},p=(0,a.mergeQueryString)(n,y,R),p;case h._p.PROPERTY_SIZE:case h._p.NIGHTLY_PRICE:case h._p.TOTAL_PRICE:return-1===t.min&&-1===t.max?(y={[e]:void 0},p=(0,a.mergeQueryString)(n,y,R),p):(y={[e]:[t.min,t.max]},p=(0,a.mergeQueryString)(n,y,b(e)),p=(0,a.mergeQueryString)(p,{},R),p);case h._p.PRICE:return-1===t.min&&-1===t.max?(p=(0,a.mergeQueryString)(n,{},T),p=(0,a.mergeQueryString)(p,{},R),p):(y={[e]:[t.min,t.max]},p=(0,a.mergeQueryString)(n,y,b(e)),p=(0,a.mergeQueryString)(p,{},R),p);case h.T2.NEIGHBORHOOD:p=_(n);return!!x&&"neighborhood"in x?(p=(0,a.mergeQueryString)(p,{},R),((e,t,n)=>{const r=new RegExp(`${t}=[^&]+`);return e.replace(r,`${t}=${n}`)})(p,e,t)):p.concat(`&${e}=${t}`);case h.T2.STAY_OPTIONS_GROUP:{const e=new URLSearchParams(n),i=new URLSearchParams;if("hotels_option"===t){for(const[t,n]of e.entries())m.has(n)||i.append(t,n);1!==(null==r?void 0:r.bucket)&&2!==(null==r?void 0:r.bucket)||i.delete("bedroomFilter"),i.set("stay_options_group","hotels_option")}else if("vacation_rentals_option"===t){for(const[t,n]of e.entries())g.has(n)||i.append(t,n);i.delete("hotel_brand"),1!==(null==r?void 0:r.bucket)&&2!==(null==r?void 0:r.bucket)||(i.delete("mealPlan"),i.delete("paymentType")),i.set("stay_options_group","vacation_rentals_option")}else if(""===t||"any_option"===t)return e.delete("stay_options_group"),e.delete("ai_search_query"),e.toString();return i.delete("ai_search_query"),i.toString()}case h.T2.AI_SEARCH_QUERY:return(0,a.mergeQueryString)(n,{[e]:t});default:if("checkbox"===E){let r=null!==(u=x[e])&&void 0!==u?u:[];if("string"==typeof r&&(r=[r]),!O){r=Array.isArray(r)?r.filter((e=>e!==t)):[],y={[e]:r},p=(0,a.mergeQueryString)(n,y,R);const i="house_rules_group=pets_allowed";return n.includes(i)&&(p=p.replace("amenities=PETS","")),p}return p=(0,a.mergeQueryString)(n,{},R),p=p.concat(`&${e}=${t}`),e===h.T2.MULTI_NEIGHBORHOOD_GROUP&&(p=_(p)),p}if("click"===I&&"SPAN"===(null===(d=null==i?void 0:i.target)||void 0===d?void 0:d.tagName)){const r=new URLSearchParams(n);return r.delete(e,t),r.delete("ai_search_query"),r.toString()}return y={[e]:t},p=(0,a.mergeQueryString)(n,y,R),p}},_=e=>{const t=new URLSearchParams(e);return t.delete(h.T2.POI),t.toString()},I=(e,t)=>{if(!t||0===t.length)return e;const n=new URLSearchParams(e);return t.forEach((e=>{n.set(e.name,e.value)})),n.toString()};var x=n(59877),C=n(68132);const k=[C.aL.AI_SEARCH_QUERY,"searchId"],w=[C.aL.AI_AFFINITY,C.aL.AI_AFFINITY_NEARBY,C.aL.AI_AMENITY,C.aL.AI_LOCATION,C.aL.AI_PROPERTY_BRAND,C.aL.AI_PROPERTY_NAME],D=(e,t)=>{var n;if(null===(n=null==e?void 0:e.multiItemContext)||void 0===n?void 0:n.id)return{id:e.multiItemContext.id,packageType:e.multiItemContext.packageType?t[e.multiItemContext.packageType]:void 0}},P=({className:e="",view:t,onOpenDialog:n,isMapView:o,filterBarSpacing:f})=>{const{multiItem:m,searchResults:g,analyticsSearch:v,analytics:y,experiment:E}=(0,s.g)(),[b,S]=r.useState(""),{exposure:T}=(0,u.useExperiment)("Meso_Slot_Filter_Ad_Refresh"),R=(0,c.KY)(),_=(0,p.EY)(),C=(0,p.m6)(),P=(0,d.z)(),{inputs:A,filterSheetFooterInputs:L}=(e=>{var t,n,a;const[o,l]=(0,r.useState)(""),{multiItem:c,analyticsSearch:u}=(0,s.g)(),d=(0,i.useHistory)(),h=(0,i.useLocation)(),f=(0,p.EY)(),{property:m}=null!==(t=null==f?void 0:f.primarySearchCriteria)&&void 0!==t?t:{},g=new URLSearchParams(h.search);g.delete("pwaDialog");const v=g.toString(),y=JSON.stringify(null===(n=null==f?void 0:f.primarySearchCriteria)||void 0===n?void 0:n.property),E=(0,r.useMemo)((()=>{var e,t,n,r;if(!(null===(e=null==f?void 0:f.primarySearchCriteria)||void 0===e?void 0:e.property))return null;const{secondaryCriteria:i}=f,a="true"===new URLSearchParams(h.search).get("showFilterNotification"),o=null===(t=null==i?void 0:i.selections)||void 0===t?void 0:t.some((e=>w.includes(e.id))),s=null===(n=null==i?void 0:i.selections)||void 0===n?void 0:n.filter((e=>o?!k.includes(e.id):"searchId"!==e.id)),l=[...null!=s?s:[],{id:"searchId",value:u.searchId}],c=[...null!==(r=null==i?void 0:i.booleans)&&void 0!==r?r:[],{id:"showFilterNotification",value:a}];return{primary:f.primarySearchCriteria.property,secondary:Object.assign(Object.assign({},f.secondaryCriteria),{selections:l,booleans:c})}}),[y,v]),[b,S]=(0,r.useState)({destination:null!==(a=null==m?void 0:m.destination)&&void 0!==a?a:{},criteria:E,shoppingContext:{multiItem:D(c,x.Lo)}}),T=(0,r.useMemo)((()=>{var t,n,r,i;const{propertySearchCriteriaInput:a}=(0,p.ld)(new URLSearchParams(""===e?d.location.search:e)),o=null===(n=null===(t=null==a?void 0:a.secondary)||void 0===t?void 0:t.selections)||void 0===n?void 0:n.some((e=>w.includes(e.id))),s=null===(i=null===(r=null==a?void 0:a.secondary)||void 0===r?void 0:r.selections)||void 0===i?void 0:i.filter((e=>!o||!k.includes(e.id))),l=[...null!=s?s:[],{id:"searchId",value:u.searchId}];return Object.assign(Object.assign({},b),{criteria:Object.assign(Object.assign({},a),{secondary:Object.assign(Object.assign({},null==a?void 0:a.secondary),{selections:l})})})}),[e,u.searchId]);return(0,r.useEffect)((()=>{var e;o!==u.searchId&&(S({destination:null!==(e=null==m?void 0:m.destination)&&void 0!==e?e:{},criteria:E,shoppingContext:{multiItem:D(c,x.Lo)}}),l(u.searchId))}),[u.searchId]),{inputs:b,filterSheetFooterInputs:T}})(b),{exposure:N}=(0,u.useExperiment)("Hotel_vs_VR_Contextualization"),{exposure:j}=(0,u.useExperiment)("Vrbo_Srp_Static_Map"),M=1===j.bucket,F=(0,i.useHistory)(),U=(0,i.useLocation)(),B=[h.eA.SORT_AND_FILTERS,h.eA.FILTER_DIALOG,h.eA.FILTER_BAR].includes(t),G=P===d.ch.Lodging?A:{destination:{},criteria:null,shoppingContext:{},productShoppingCriteriaInput:_},{exposure:$}=(0,u.useExperiment)("Filter_Facet_Counts"),{exposure:H}=(0,u.useExperiment)("Filter_Facet_Count_BEXH"),{exposure:z}=(0,u.useExperiment)("Search_form_location_resolution"),V=[1,2,3].includes($.bucket)||1===H.bucket,W=[1,2].includes(null==N?void 0:N.bucket),Y=(V||W)&&P===d.ch.Lodging?L:G,q=(V||W)&&P===d.ch.Lodging?null:L,K=(null==g?void 0:g.isLoading)&&!_,Q=e=>{1===T.bucket&&document.dispatchEvent(new CustomEvent("mesoSlotFilterUpdate",{detail:{type:"slotFilter",editType:"update",filterData:{name:e}}}));v.withPublishingAnalyticsPayload(a.updateSearch,y,E)({history:F,location:U,newParams:I(e),replace:!1,queryCombiner:(e,t)=>t})},X=()=>B&&""!==b?b:F.location.search,Z=e=>{B?S(e):(Q(e),window.scrollTo(0,0),(0,l.N7)(!1))},J=r.useCallback((()=>{const e=""===b?F.location.search:b,t=(0,a.mergeQueryString)(e,{},(e=>!e.startsWith("pwaDialog")));setTimeout((()=>{Q(t),window.scrollTo(0,0),S(""),(0,l.N7)(!1)}),200)}),[b]);return v?r.createElement("div",{className:e},r.createElement(h.xv,Object.assign({onFieldChange:(e,t)=>{var n;const r=t&&(t.isTrusted||(null===(n=t.nativeEvent)||void 0===n?void 0:n.isTrustedEvent));if(!((e,t,n)=>{var r;if(n&&e&&"neighborhood"===e.name&&"checkbox"===(null===(r=t.target)||void 0===r?void 0:r.type)&&!t.target.checked){const t=document.getElementById(`${e.name}_${e.value}`);if(t)return t.click(),!0}return!1})(e,t,r)){const{name:n,value:i}=e;B&&n!==h.RH.RESTORE&&v.newSearchId();const a=O({name:n,value:i,existingUrlQueryString:X(),stayOptionExperimentExposure:N,event:t,showRegionName:1===z.bucket});r?setTimeout((()=>{Z(a)})):Z(a)}},onFieldClick:e=>{"sort"===e.name&&R("HOT.SR:SortFilterControl","Search tools sort section dropdown clicked")},onRemoveAppliedFilter:e=>{const t=((e,t)=>{let n="";const{ranges:r,selections:i}=e,a=null==i?void 0:i.find(Boolean);return n=(null==a?void 0:a.id)===h.T2.NEIGHBORHOOD?O({name:h.T2.REGION_ID,value:a.value,existingUrlQueryString:t}):O({name:h.RH.CLEAR_FILTERS_APPLIED,value:null!=r?r:i,existingUrlQueryString:t}),n})(e,X());Z(t)},onRemoveAllAppliedFilters:e=>{const t=O({name:h.RH.CLEAR,value:{},existingUrlQueryString:X(),stayOptionExperimentExposure:N,event:void 0,defaults:e});Z(t)},onSubmit:J,onOpenDialog:n,view:t,inputs:Y,loading:K,filterSheetFooterInputs:q,appliedFiltersSpacing:{margin:{blockend:"three"}},isMapView:o,isShoppingWithoutPackagePath:!(null==m?void 0:m.multiItemContext),filterBarSpacing:f},(()=>{if(P!==d.ch.Cruise)return{};if(B){const e=X();return{onSelectionChange(){},onMultiSelectClose(t,n,r){const i=new URLSearchParams(e),a=[];null==r||r.reduce(((e,t)=>{const n=t.data.value;return n&&e.push(n),e}),a),i.set(n,a.join("|")),Z(i.toString())},onMultiSelectClearAll(t){const n=new URLSearchParams(e);n.delete(t),Z(n.toString())}}}return(e=>({onSelectionChange(){},onMultiSelectClose(t,n,r){e({type:p.Lv.MULTI_SELECT_CLOSE,filterId:n,selections:r})},onMultiSelectClearAll(t){e({type:p.Lv.MULTI_SELECT_CLEAR_ALL,filterId:t})}}))(C)})(),{onRemoveToggleFilter:(e,t,n)=>{var r;if(n&&(n.isTrusted||(null===(r=n.nativeEvent)||void 0===r?void 0:r.isTrustedEvent))){const r=O({name:e,value:t,existingUrlQueryString:X(),event:n});Q(r),window.scrollTo(0,0),(0,l.N7)(!1)}},skipSsr:M}))):null};P.displayName="UniversalSortFilter";const A=({view:e,className:t,onOpenDialog:n,isMapView:i,filterBarSpacing:a})=>r.createElement(o.ErrorBoundary,{label:"hotel.search.universal-sort-filter"},r.createElement(P,{view:e,className:t,onOpenDialog:n,isMapView:i,filterBarSpacing:a}));A.displayName="UniversalSortFilterWrapper"},54714:function(e,t,n){n.d(t,{S:function(){return l}});var r=n(96540),i=n(22865),a=n(15144),o=n(8065),s=n(68174);const l=({templateComponent:e})=>{const{children:t}=e;return t&&0!==t.length?r.createElement(a.j,{minWidth:160,maxWidth:160},r.createElement("div",{className:"side-rail"},r.createElement(s.LM,null,r.createElement(s.TD,null,r.createElement(i.ErrorBoundary,{label:"hotel.masterPage.sideRail"},t&&r.createElement(o._A,{templateComponents:t})))))):null}},83330:function(e,t,n){n.d(t,{V:function(){return c}});var r=n(96540),i=n(15144),a=n(30313),o=n(94220),s=n(8065),l=n(70790);const c=({templateComponent:e})=>{var t;const{children:n,config:c}=e,u=(0,l.lq)((0,l.Ik)({type:(0,l.Yj)(),grow:(0,l.lq)((0,l.ai)()),direction:(0,l.lq)((0,l.Yj)()),colSpan:(0,l.lq)((0,l.ai)()),padding:(0,l.lq)((0,l.bz)()),margin:(0,l.lq)((0,l.bz)()),maxWidth:(0,l.lq)((0,l.KC)([(0,l.Yj)(),(0,l.ai)()]))})),d=(0,l.xL)(u,c);if(!d.success||!n||0===n.length)return null;const{type:h,grow:p,direction:f,colSpan:m,padding:g,margin:v,maxWidth:y}=null!==(t=d.output)&&void 0!==t?t:{},E=r.createElement(s._A,{templateComponents:n});switch(h){case"EGDSLayoutFlex":return r.createElement(i.i,{direction:f},E);case"EGDSLayoutFlexItem":return r.createElement(i.j,{grow:p,maxWidth:y},r.createElement("div",null,E));case"EGDSLayoutGridItem":return r.createElement(a.a,{colSpan:m},r.createElement("div",null,E));case"EGDSSpacing":return r.createElement(o.b,{padding:g,margin:v},r.createElement("div",null,E));default:return null}}},37882:function(e,t,n){n.d(t,{c:function(){return c}});var r=n(96540),i=n(33897),a=n(16756),o=n(3581),s=n(93287),l=n(22060);const c=(0,a.inject)("context","multiItem","analytics")((({context:e,multiItem:t,openDatePicker:n,batchKey:a})=>{if(!e||!t)return null;const c=(0,i.useHistory)(),u={productShoppingCriteriaInput:(0,l.EY)(),destination:{regionName:null,regionId:null,coordinates:null,pinnedPropertyId:null,propertyIds:null,mapBounds:null},shoppingContext:{multiItem:null},returnPropertyType:!1,criteria:null,dateRange:null,filters:null,marketing:null,propertyShopOptions:null,rooms:null,searchIntent:null,searchPagination:null,sort:null};return r.createElement(s.Gu,{inputs:u,onFilterPillRemoval:e=>(0,o.om)(e,c),openDatePicker:n,batchKey:a})}))},46167:function(e,t,n){n.d(t,{mA:function(){return a}});var r=n(43162),i=n(70790);const a={SIDERAIL_R1:{uci:"R1"},SIDERAIL_R2:{uci:"R2",className:"sticky-top__with-navbar"},SIDERAIL_TEST_R2:{uci:"R2_TEST",className:"sticky-top__with-navbar"},SIDERAIL_CONTROL_R2:{uci:"R2_CONTROL",className:"sticky-top__with-navbar"},FOOTER_CM6:{uci:"CM6"},FOOTER_CM4:{uci:"CM4"},FOOTER_CM3:{uci:"CM3"},FOOTER_CM2:{uci:"CM2"},FOOTER_CM1:{uci:"CM1"}};(0,i.Ik)({code:(0,i.Yj)(),uci:(0,i.Yj)()}),r.WY8.ADS_ONLY},98497:function(e,t,n){n.d(t,{I:function(){return i},T:function(){return r}});const r="product-details-accessibility-batch-key",i="universal-property-search"},51194:function(e,t,n){n.d(t,{Q:function(){return r}});const r={google:"3.57",mapbox:"2.9.2"}},5315:function(e,t,n){n.d(t,{e8:function(){return u},r8:function(){return a},EH:function(){return o},_t:function(){return c}});var r=n(96540),i=n(27475);const a=(0,r.createContext)(new i.h({}));function o(){return(0,r.useContext)(a)}var s=n(54235),l=n(22060);function c(e){return t=>r.createElement(s.R8,{productType:s.ch.Lodging},r.createElement(l.Ok,null,r.createElement(e,Object.assign({},t))))}const u=({contextPairs:e,children:t})=>{if(!e||!Array.isArray(e)||!e[0])return(0,r.createElement)(r.Fragment,null,t);const{context:n,value:i}=e[0];return(0,r.createElement)(n.Provider,{value:i},(0,r.createElement)(u,{contextPairs:e.slice(1)},t))};u.displayName="MultiContextProvider"},37075:function(e,t,n){n.d(t,{aU:function(){return a},uV:function(){return o}});var r=n(96540);const i=r.createContext({setHighlightedPropertyId:()=>{}}),a=()=>r.useContext(i),o=({children:e})=>{const[t,n]=r.useState(),a=r.useCallback((e=>{n(e)}),[]);return r.createElement(i.Provider,{value:{highlightedPropertyId:t,setHighlightedPropertyId:a}},e)}},31484:function(e,t,n){n.d(t,{r:function(){return i},m:function(){return a}});var r=n(96540);const i=(0,r.createContext)({});function a(){return(0,r.useContext)(i)}},65886:function(e,t,n){n.d(t,{O:function(){return o},t:function(){return s}});var r=n(96540);const i={},a=r.createContext(i),o=(...e)=>{const t=r.useContext(a);return e.map((e=>{const n=t[e];return n||(t[e]=r.createRef())}))},s=({children:e})=>r.createElement(a.Provider,{value:i},e);s.displayName="RefProvider"},94907:function(e,t,n){n.d(t,{Ss:function(){return r},mb:function(){return l},ec:function(){return u},kU:function(){return o}});var r,i=n(96540);!function(e){e.LISTINGS="listings",e.MAP="map"}(r||(r={}));const a=(0,i.createContext)({});function o(){return(0,i.useContext)(a)}const s={setView:()=>null,view:r.LISTINGS},l=({children:e,viewTracker:t})=>(s.setView=t.setView,s.view=t.view,i.createElement(a.Provider,{value:s},e));var c=n(7629);function u(e,t,n,i){const{view:a,setView:o}=t;if(n!==a){o(n);const t=n===r.LISTINGS?c.b0:c.jM,a=i?t[i]:t.SA;e.reset({data:{experience:{page_name_detailed:a}},config:{isEgClickstream:!0}})}}},58716:function(e,t,n){n.d(t,{g:function(){return a}});var r=n(96540),i=n(16756);const a=()=>r.useContext(i.MobXProviderContext)},7059:function(e,t,n){n.d(t,{M$:function(){return f},fT:function(){return p},u0:function(){return h},kO:function(){return d},Zc:function(){return u},Gy:function(){return c}});var r=n(91188),i=n(82437);const a=e=>o[e]||"unknown",o={airnewzealand:"expedia",cheaptickets:"expedia",ebookers:"expedia",expedia:"expedia",hawaiianairlines:"expedia",hotwire:"expedia",lastminute:"expedia",mrjet:"expedia",orbitz:"expedia",travelocity:"expedia",wotif:"expedia",vrbo:"vrbo",hotels:"hotels",taap:"taap"};var s=n(85416);class l extends r.C{constructor(e,t,n,r,i,a){super(),this.analytics=e,this.logger=t,this.analyticsSearch=n,this.productLine=r,this.brand=i,this.experiment=a}request(e,t){return c(e,t,this.productLine,this.brand).map((t=>{var n,r,a,o,l,c,u;if(("PropertyListingQuery"===e.operationName||"PropertySearchDynamicSearchMapQuery"===e.operationName)&&t){const e=null===(r=null===(n=t.extensions)||void 0===n?void 0:n.analytics)||void 0===r?void 0:r[0],d=null===(u=null===(c=null===(l=null===(o=null===(a=t.data)||void 0===a?void 0:a.propertySearch)||void 0===o?void 0:o.criteria)||void 0===l?void 0:l.secondary)||void 0===c?void 0:c.booleans)||void 0===u?void 0:u.find((e=>"shouldFetchSecondaryBatch"===e.id&&e.value));e&&this.analyticsSearch.addPayload(e),!d&&this.analytics&&e?this.analyticsSearch.publishPayload(this.analytics,this.experiment):this.analytics&&e||this.logger.logEvent(i.o.PROPERTY_LISTING_ANALYTICS_PUBLISH_ERROR,"Unable to publish analytics for property listings due to missing analytics store or data",{escalation:s.I.DOWNSTREAM})}return t}))}}const c=(e,t,n,r)=>(e.setContext({headers:Object.assign(Object.assign({},e.getContext().headers),{"x-product-line":n,"x-parent-brand-id":a(r)})}),t(e)),u=(e,t,n,r,i,a)=>new l(e,t,n,r,i,a),d="lodging",h="ground-transportation",p="cruise",f="car"},9618:function(e,t,n){n.d(t,{N7:function(){return a},Zv:function(){return i}});const r="compressionBannerDismiss";function i(){if(localStorage){const e=localStorage.getItem(r);return!!e&&JSON.parse(e)}return!1}function a(e){localStorage&&localStorage.setItem(r,JSON.stringify(e))}},65809:function(e,t,n){n.d(t,{A:function(){return a},Q:function(){return o}});var r=n(33897),i=n(86663);function a(){return(0,i.parse)((0,r.useLocation)().search)}function o(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}},44326:function(e,t,n){n.d(t,{o5:function(){return r},ym:function(){return o}});const r=e=>({adults:i(e),children:a(e)}),i=e=>e.map((e=>e.adults)).filter((e=>e>0)).join(","),a=e=>e.map(((e,t)=>{var n;return o(t+1,(null===(n=e.children)||void 0===n?void 0:n.map((e=>e.age)))||[])})).filter((e=>""!==e)).join(","),o=(e,t)=>t.map((t=>`${e}_${t}`)).join(",")},65632:function(e,t,n){n.d(t,{r:function(){return i}});var r=n(68174);const i={[r.OB.SMALL]:r.OB.SMALL,[r.OB.MEDIUM]:r.OB.MEDIUM,[r.OB.LARGE]:r.OB.LARGE,[r.OB.EXTRA_LARGE]:r.OB.EXTRA_LARGE}},15204:function(e,t,n){n.d(t,{gs:function(){return I}});var r=n(74848),i=n(1192),a=n(68174),o=n(96540),s=n(86544),l=n(40051),c=n(15144),u=n(21181),d=n(20917),h=n(24355),p=n(74786),f=n.n(p),m=n(67045),g=n(71831),v=n(74),y=n(94495),E=n(94220),b=n(91214),S=n(82960);const T=u.classNames.bind(f());var R,O;!function(e){e.START="start",e.END="end",e.NONE="none"}(R||(R={})),function(e){e.DIALOG="dialog",e.MENU="menu"}(O||(O={}));class _ extends o.Component{constructor(e){super(e);const t=this.setInitialDates(),n=new h.D(t.lastValidDate,e.singleDateSelect);let r;r=e.triggeredSelector?e.triggeredSelector:e.dateFieldProps.showDatePicker?R.START:"",this.startDomRef=e.startDateRef?e.startDateRef:o.createRef(),this.endDomRef=e.endDateRef?e.endDateRef:o.createRef(),this.state={localizedText:{checkInInstructions:()=>e.l10n.formatText("datePicker.fromDateInstructions.a11yLabel"),checkOutInstructions:()=>e.l10n.formatText("datePicker.toDateInstructions.a11yLabel"),dateFieldSelected:()=>e.l10n.formatText("datePicker.selectedDateField.allyLabel"),doneHeader:()=>e.l10n.formatText("datePicker.doneHeader"),clearHeader:()=>e.l10n.formatText("datePicker.clearHeader"),selectEndDate:()=>e.l10n.formatText("datePicker.dateInput.endDate.placeholder"),selectStartDate:()=>e.l10n.formatText("datePicker.dateInput.startDate.placeholder"),clearedDates:()=>e.l10n.formatText("datepicker.cleared.dates")},name:r,selection:n},this.getDatePickerProps=this.getDatePickerProps.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onClearDates=this.onClearDates.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onSelectStartMode=this.onSelectStartMode.bind(this),this.onSelectEndMode=this.onSelectEndMode.bind(this),this.openDatePicker=this.openDatePicker.bind(this),this.selectionClassNames=this.selectionClassNames.bind(this),this.setInitialDates=this.setInitialDates.bind(this),this.updateDatePicker=this.updateDatePicker.bind(this),this.updateViewport=this.updateViewport.bind(this)}UNSAFE_componentWillMount(){this.updateStateWithProps(this.props)}componentDidMount(){const{props:e}=this;e.onMountCB&&e.onMountCB(this.startDomRef,this.endDomRef)}UNSAFE_componentWillReceiveProps(e){const{startDate:t,endDate:n,validStartDate:r}=this.props;e.startDate===t&&e.endDate===n||(this.preselectedStart=e.startDate,this.preselectedEnd=e.endDate),e.validStartDate!==r&&this.setFirstValidDate(e),this.updateStateWithProps(e)}componentDidUpdate(e){const{dateFieldProps:t,daysBookableInAdvance:n}=this.props,{selection:r}=this.state;e.daysBookableInAdvance!==n&&(this.lastValidDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()+n,this.today.getDate()),r.lastValidEndDate=this.lastValidDate),!e.dateFieldProps.showDatePicker&&t.showDatePicker&&(this.isOpenInternallyDriven?this.isOpenInternallyDriven=void 0:this.openDatePicker(R.START,!1))}onSubmit(){const{l10n:e,onSubmitCB:t}=this.props,{name:n,selection:r}=this.state,{start:i,end:a}=r;this.resetLiveAnnounce(),this.updateDatePicker(),this.preselectedEnd=e.formatDate(a,{dateFormat:"iso-date",raw:"yyyy-MM-dd"}),this.preselectedStart=e.formatDate(i,{dateFormat:"iso-date",raw:"yyyy-MM-dd"}),this.focusOnTrigger(n),t&&t(i,a,this.isDialog)}onClearDates(){const{onClearDatesCB:e}=this.props;this.clearDatePicker(),e&&e()}onDismiss(e){const{onDismissCB:t}=this.props,{name:n,selection:r}=this.state;r.start=null,r.end=null,this.updateDatePicker(),this.resetLiveAnnounce(),this.focusOnTrigger(n),t&&t(this.isDialog,e)}onSelectStartMode(e){const{onSelectStartModeCB:t}=this.props,{localizedText:n,selection:r}=this.state;r.setCurrentTrigger("start"),(0,u.liveAnnounce)(n.checkInInstructions(),u.Level.POLITE),t&&t(),e||this.updateDatePicker()}onSelectEndMode(e){const{onSelectEndModeCB:t}=this.props,{localizedText:n,selection:r}=this.state;r.setCurrentTrigger("end"),(0,u.liveAnnounce)(n.checkOutInstructions(),u.Level.POLITE),t&&t(),e||this.updateDatePicker()}getDatePickerProps(){const{analytics:e,buttonText:t,clearButtonText:n,currentPrice:r,dateFieldProps:i,datePickerContent:a,doubleMonths:o,endSelectionPlaceholder:s,firstDayOfWeek:l,footerText:c,holidays:u,l10n:d,onDoneButtonClickCB:h,renderType:p,singleMode:f,startSelectionPlaceholder:m,submitDisabled:g}=this.props,{localizedText:v,selection:y}=this.state,E=y.start,b=y.end,S=m||v.selectStartDate(),T=s||v.selectEndDate(),R=E?d.formatDate(E,{dateFormat:"full",skeleton:"MMMEd"}):S,O=b?d.formatDate(b,{dateFormat:"full",skeleton:"MMMEd"}):T,_=e||{},{closeAnalytics:I,doneAnalytics:x,nextPageAnalytics:C,previousPageAnalytics:k}=_,w=t||v.doneHeader(),D=n||v.clearHeader(),P=this.isSelected(!0)?v.dateFieldSelected():"";return{buttonText:w,clearButtonText:D,closeAnalytics:I,currentPrice:r,datePickerContent:a,doneAnalytics:x,doubleMonths:o,endSelectedMsg:this.isSelected(!1)?v.dateFieldSelected():"",firstDayOfWeek:l,firstValidDate:this.firstValidDate,footerText:c,formattedEndSelection:O,formattedStartSelection:R,holidays:u,labels:{end:i.endLabel,start:i.startLabel},lastValidDate:this.lastValidDate,nextPageAnalytics:C,onDoneButtonClickCB:h,onSelectEndMode:this.onSelectEndMode,onSelectStartMode:this.onSelectStartMode,previousPageAnalytics:k,renderType:p,selection:y,selectionClassNames:this.selectionClassNames,singleMode:f,startSelectedMsg:P,submitDisabled:g,today:this.today,updateDatePicker:this.updateDatePicker}}setFirstValidDate(e){if(this.firstValidDate=this.today,e.validStartDate){try{this.firstValidDate=e.l10n.parseLocalDateString(e.validStartDate,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(t){console.error(t)}this.firstValidDate<this.today&&(this.firstValidDate=this.today)}}setInitialDates(){const{cutoffDate:e,daysBookableInAdvance:t,endDate:n,l10n:r,midnightBookingOffset:i,singleMode:a,startDate:o}=this.props;if(this.today=new Date,this.today.setHours(12),this.today.setMinutes(0),this.today.setSeconds(0),this.today.setMilliseconds(0),this.lastValidDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()+t),e)try{this.lastValidDate=r.parseLocalDateString(e,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(s){console.error(s)}if(this.setFirstValidDate(this.props),this.tomorrow=new Date,this.tomorrow.setDate(this.firstValidDate.getDate()+1),i){(new Date).getHours()<i&&this.today.setDate(this.today.getDate()-1)}return n&&!a&&(this.preselectedEnd=n),o&&(this.preselectedStart=o),{firstValidDate:this.firstValidDate,lastValidDate:this.lastValidDate}}updateViewport(e){this.isDialog=e}updateStateWithProps(e){const{l10n:t,singleMode:n,triggeredSelector:r}=e,{selection:i}=this.state;if(this.preselectedStart){let e=this.firstValidDate;try{e=t.parseLocalDateString(this.preselectedStart,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(a){console.error(a)}e.setHours(12),e>=this.firstValidDate?i.start=e:(this.clearDatePicker(),this.preselectedStart=null,this.preselectedEnd=null)}if(this.preselectedEnd){let e=this.tomorrow;try{e=t.parseLocalDateString(this.preselectedEnd,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(a){console.error(a)}e.setHours(12),i.end=e}this.preselectedStart||this.preselectedEnd||(i.start=null,i.end=null),n&&delete i.end,r&&i.setCurrentTrigger(r)}resetLiveAnnounce(){(0,u.liveAnnounce)("",u.Level.POLITE)}openDatePicker(e,t=!0){const{props:n}=this;this.isOpenInternallyDriven=t,"start"===e?this.onSelectStartMode(!0):this.onSelectEndMode(!0),this.setState({name:e}),n.onOpenCB&&n.onOpenCB(e,this.isDialog)}isSelected(e){const{selection:t}=this.state;return e&&t.isSelectingStart||!e&&t.isSelectingEnd||e&&!t.isSelectingStart&&!t.isSelectingEnd}selectionClassNames(e){return T("uitk-date-picker-top-bar-selection",{selected:this.isSelected(e)})}createCustomEvent(e,t){const n=new CustomEvent("change"),r=document.createElement("input");r.value=e,r.addEventListener("change",(e=>{t(e)})),r.dispatchEvent(n)}updateDatePicker(){const{localizedText:e,selection:t}=this.state,{onStartDateResultSelection:n,onEndDateResultSelection:r}=this.props;n&&this.createCustomEvent(t.start,n),r&&this.createCustomEvent(t.end,r),this.setState({localizedText:e,selection:t})}clearDatePicker(){const{localizedText:e,selection:t}=this.state;t.start=null,t.end=null,(0,u.liveAnnounce)(e.clearedDates()),this.updateDatePicker()}focusOnTrigger(e){var t;const n="start"===e?this.startDomRef:this.endDomRef;(0,u.isElementVisible)(n.current)&&(null===(t=null==n?void 0:n.current)||void 0===t||t.focus())}render(){const{dialogWrapper:e,dateFieldProps:t,doubleMonths:n,onChangeEndDateCB:i,onChangeMonthCB:a,onChangeStartDateCB:o,onScrollHandler:s,preventAutoFocus:l,singleMode:c,triggeredSelector:u,useClearDates:d,useSingleTrigger:h}=this.props,{name:p,selection:f}=this.state,{dateFieldWrapperClasses:m,dateFormat:g,endAnalytics:v,endId:y,endInvalid:E,endLabel:b,endName:S,endPlaceholder:O,mediumDateFormatProp:_,onChange:I,useCustomTrigger:x,routerLinkWrapper:C,showDatePicker:k,space:w,stacked:D,startAnalytics:P,startId:A,startInvalid:L,startLabel:N,startName:j,startPlaceholder:M}=t;let F,U;U=e||(e=>(0,r.jsx)("div",{id:"date-picker",className:T("uitk-dialog-layer","uitk-dialog-layer-responsive"),children:e}));const B={dateFieldWrapperClasses:m,dateFormat:g,dialogWrapper:U,mediumDateFormatProp:_,onChange:I,onChangeEndDate:i,onChangeMonth:a,onChangeStartDate:o,onClearDates:this.onClearDates,onDismiss:this.onDismiss,onScrollHandler:s,onSubmit:this.onSubmit,openDatePicker:this.openDatePicker,preventAutoFocus:l,routerLinkWrapper:C,showDatePicker:k,singleMode:c,space:w,stacked:D,triggeredField:u||p,useCustomTrigger:x,useClearDates:d,useSingleTrigger:h},G=this.getDatePickerProps(),$={analytics:P,dateType:R.START,domRef:this.startDomRef,doubleMonths:n,id:A,invalid:L,label:N,name:j||"startDate",placeholder:M,value:f.start},H=Object.assign({datePickerProps:G,endProps:F,startProps:$,updateViewport:this.updateViewport},B);return c||(F={analytics:v,dateType:R.END,domRef:this.endDomRef,doubleMonths:n,id:y,invalid:E,label:b,name:S||"endDate",placeholder:O,value:f.end},H.endProps=F),(0,r.jsx)(z,Object.assign({},H))}}_.defaultProps={daysBookableInAdvance:500,midnightBookingOffset:4,preventAutoFocus:!1,singleMode:!1};const I=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(_,Object.assign({l10n:t},e))};I.displayName="DatePickerFooterAdditionalText";const x=u.classNames.bind(f());class C extends o.Component{constructor(e){super(e),this.elementRef=o.createRef(),this.state={localizedText:{cancelButton:()=>e.l10n.formatText("datePicker.cancelButton.a11yLabel"),datePickerOpened:()=>e.l10n.formatText("datePicker.datePickerOpened.liveAnnounce"),doneButtonFare:(t,n,r,i)=>t<=1?e.l10n.formatText("datePicker.doneButtonFareWithSummary.single.a11yLabel",r,n):e.l10n.formatText("datePicker.doneButtonFareWithSummary.multiple.a11yLabel",r,i,n),clearInstructions:()=>e.l10n.formatText("datePicker.clearInstructions.a11yLabel"),doneInstructions:()=>e.l10n.formatText("datePicker.doneInstructions.a11yLabel"),hiddenDoneButton:(t,n,r)=>t<=1?e.l10n.formatText("datePicker.doneButtonWithSummary.single.a11yLabel",n):e.l10n.formatText("datePicker.doneButtonWithSummary.multiple.a11yLabel",n,r)}},this.onClickTopStart=this.onClickTopStart.bind(this),this.onClickTopEnd=this.onClickTopEnd.bind(this),this.onSubmitDates=this.onSubmitDates.bind(this),this.onChangeMonth=this.onChangeMonth.bind(this),this.onChangeStartDate=this.onChangeStartDate.bind(this),this.onChangeEndDate=this.onChangeEndDate.bind(this),this.focusOnElement=this.focusOnElement.bind(this),this.hiddenDoneButton=this.hiddenDoneButton.bind(this)}componentDidMount(){const{formattedStartSelection:e,labels:t,preventAutoFocus:n,startSelectedMsg:r}=this.props,{localizedText:i}=this.state;if(this.elementRef&&this.elementRef.current){const e=this.elementRef.current.getElementsByTagName("button")[0];n||this.focusOnElement(e)}const a=i.datePickerOpened();(0,u.liveAnnounce)(`${a}, \n      ${e} ${t.start} ${r}`)}shouldComponentUpdate(e){const{selection:t}=this.props;return e&&e.holidays&&e.holidays.length>0&&t.configureHolidays(e.holidays),!0}onClickTopStart(){const{onSelectStartMode:e}=this.props;e()}onClickTopEnd(){const{onSelectEndMode:e}=this.props;e()}onSubmitDates(){const{onSubmit:e,onDoneButtonClickCB:t}=this.props;if(t){const{selection:e}=this.props,{start:n,end:r}=e;t(n,r)}else e()}onChangeMonth(e){const{onChangeMonth:t}=this.props;t&&t(e,!1)}onChangeStartDate(e){const{onChangeStartDate:t}=this.props;t&&t(e,!1)}onChangeEndDate(e){const{onChangeEndDate:t}=this.props;t&&t(e,!1)}focusOnElement(e){(0,u.isElementVisible)(e)&&e.focus()}hiddenDoneButton(){const{formattedStartSelection:e,formattedEndSelection:t,selection:n}=this.props,{localizedText:i}=this.state,a=n.numberOfNights,o=i.hiddenDoneButton(a,e,t);return(0,r.jsx)("button",{type:"button",className:x("is-visually-hidden"),onClick:this.onSubmitDates,children:o})}render(){const{buttonText:e,clearButtonText:t,currentPrice:n,datePickerContent:i,doneAnalytics:a,doubleMonths:o,endSelectedMsg:s,firstDayOfWeek:l,firstValidDate:u,footerText:d,formattedEndSelection:p,formattedStartSelection:f,holidays:v,labels:b,lastValidDate:S,nextPageAnalytics:T,onClearDates:R,previousPageAnalytics:O,selection:_,selectionClassNames:I,singleMode:C,startSelectedMsg:k,submitDisabled:w,updateDatePicker:D,useClearDates:P}=this.props,{localizedText:A}=this.state,L=o?2:1,N=C?_.start:_.start&&_.end;return(0,r.jsxs)("div",{className:x("uitk-date-picker","date-picker-menu"),ref:this.elementRef,children:[(0,r.jsxs)(c.i,{alignItems:"center",className:x("uitk-date-picker-selection-bar","uitk-date-picker-selection-bar-top"),tag:"section",children:[(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:I(!0),isDialog:!1,onClick:this.onClickTopStart,selectionDate:f,selectionDateMsg:`${b.start} ${k}`,selection:_.start,singleMode:C})}),!C&&(0,r.jsx)(c.j,{className:x("uitk-date-picker-selection-icon"),children:(0,r.jsx)(y.a,{name:"arrow_forward",size:y.E.SMALL})}),!C&&(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:I(!1),isDialog:!1,onClick:this.onClickTopEnd,selectionDate:p,selectionDateMsg:`${b.end} ${s}`,selection:_.end})}),this.hiddenDoneButton()]}),(0,r.jsx)(h.E,{buttonText:e,datePickerContent:i,firstMonth:_.start||u,monthsToRender:L,isDialog:!1,selection:_,selectionStart:_.start,selectionEnd:_.end,startDate:u,endDate:S,updateDatePicker:D,firstDayOfWeek:l,singleMode:C,nextPageAnalytics:T,previousPageAnalytics:O,holidays:v,onChangeMonth:this.onChangeMonth,onChangeStartDate:this.onChangeStartDate,onChangeEndDate:this.onChangeEndDate}),(0,r.jsxs)(c.i,{className:x("uitk-date-picker-menu-footer"),children:[!n&&(d||_.holidaysConfigured&&""!==_.holidaysName)&&[(0,r.jsx)(c.j,{className:x("uitk-date-picker-footer-text"),children:(0,r.jsxs)("div",{children:[_.holidaysConfigured&&""!==_.holidaysName&&(0,r.jsx)("p",{children:_.holidaysName},"holiday"),d&&(0,r.jsx)("p",{children:d},"legal")]})},"0")],d&&n&&(0,r.jsx)(c.j,{children:(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("p",{className:x("uitk-date-picker-footer-text-current-price"),children:n}),d&&(0,r.jsx)("p",{className:x("uitk-date-picker-footer-text-price-summary"),children:d},"legal")]})},"1"),(0,r.jsx)(c.j,{className:x("dialog-done"),shrink:0,children:(0,r.jsxs)("div",{children:[P&&(0,r.jsx)(E.b,{margin:{inline:"three"},children:(0,r.jsx)(m.E,{"aria-label":A.clearInstructions(),disabled:!N,onClick:R,"data-stid":"clear-date-picker",children:t})}),(0,r.jsx)(g.E,{"aria-label":A.doneInstructions(),analytics:a,onClick:this.onSubmitDates,"data-stid":"apply-date-picker",disabled:w,children:e})]})})]})]})}}C.displayName="DatePickerFooterAdditionalTextMenuView";const k=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(C,Object.assign({l10n:t},e))};k.displayName="DatePickerFooterAdditionalTextMenuView";const w=u.classNames.bind(f());class D extends o.Component{constructor(e){super(e),this.uid=Math.random().toString(36).substring(7),this.doneButtonRef=o.createRef(),this.state={localizedText:{cancelButton:()=>e.l10n.formatText("datePicker.cancelButton.a11yLabel"),datePickerOpened:()=>e.l10n.formatText("datePicker.datePickerOpened.liveAnnounce"),doneButtonFare:(t,n,r,i)=>t<=1?e.l10n.formatText("datePicker.doneButtonFareWithSummary.single.a11yLabel",r,n):e.l10n.formatText("datePicker.doneButtonFareWithSummary.multiple.a11yLabel",r,i,n),clearInstructions:()=>e.l10n.formatText("datePicker.clearInstructions.a11yLabel"),doneInstructions:()=>e.l10n.formatText("datePicker.doneInstructions.a11yLabel"),hiddenDoneButton:(t,n,r)=>t<=1?e.l10n.formatText("datePicker.doneButtonWithSummary.single.a11yLabel",n):e.l10n.formatText("datePicker.doneButtonWithSummary.multiple.a11yLabel",n,r),nightSummary:t=>e.l10n.formatText("datePicker.nightSummary",t)||(t<=1?e.l10n.formatText("datePicker.nightSummary.single",t):e.l10n.formatText("datePicker.nightSummary.multiple",t)),skipToButton:t=>e.l10n.formatText("datePicker.skipToButton",t)},selection:e.selection},this.onClickTopStart=this.onClickTopStart.bind(this),this.onClickTopEnd=this.onClickTopEnd.bind(this),this.onSubmitClick=this.onSubmitClick.bind(this),this.onDismissClick=this.onDismissClick.bind(this),this.onSelectDate=this.onSelectDate.bind(this),this.internallyUpdateDatePicker=this.internallyUpdateDatePicker.bind(this),this.onChangeStartDate=this.onChangeStartDate.bind(this),this.onChangeEndDate=this.onChangeEndDate.bind(this),this.hiddenDoneButton=this.hiddenDoneButton.bind(this),this.skipToDoneButton=this.skipToDoneButton.bind(this)}componentDidMount(){const{localizedText:e}=this.state;(0,u.liveAnnounce)(e.datePickerOpened(),u.Level.ASSERTIVE)}shouldComponentUpdate(e){if(e&&e.holidays&&e.holidays.length>0){const{selection:t}=this.props;t.configureHolidays(e.holidays)}return!0}onClickTopStart(){const{onSelectStartMode:e}=this.props;e(),this.internallyUpdateDatePicker()}onClickTopEnd(){const{onSelectEndMode:e}=this.props;e(),this.internallyUpdateDatePicker()}onSubmitClick(){const{onSubmit:e,onDoneButtonClickCB:t}=this.props;if(t){const{selection:e}=this.props,{start:n,end:r}=e;t(n,r)}else e()}onDismissClick(){const{onDismiss:e}=this.props;e()}onChangeStartDate(e){const{onChangeStartDate:t}=this.props;t&&t(e,!0)}onChangeEndDate(e){const{onChangeEndDate:t}=this.props;t&&t(e,!1)}onSelectDate(){this.internallyUpdateDatePicker()}internallyUpdateDatePicker(){this.setState(this.state)}skipToDoneButton(){const{localizedText:e}=this.state;return(0,r.jsx)("button",{type:"button",className:w("is-visually-hidden","uitk-date-picker-skip-to-done"),onClick:()=>{this.doneButtonRef&&this.doneButtonRef.current&&this.doneButtonRef.current.focus()},children:e.skipToButton(this.buttonText)})}hiddenDoneButton(){const{formattedStartSelection:e,formattedEndSelection:t,selection:n}=this.props,{localizedText:i}=this.state,a=n.numberOfNights,o=e,s=t,l=i.hiddenDoneButton(a,o,s);return(0,r.jsx)("button",{type:"button",className:w("is-visually-hidden"),onClick:this.onSubmitClick,children:l})}renderApplyButton(e,t){const{localizedText:n}=this.state,{submitDisabled:i}=this.props;return(0,r.jsx)(g.E,{analytics:e,"data-stid":"apply-date-picker",disabled:i,domRef:this.doneButtonRef,onClick:this.onSubmitClick,size:v.E.LARGE,"aria-label":n.doneInstructions(),className:w("dialog-done-additional"),children:t})}render(){const{buttonText:e,clearButtonText:t,currentPrice:n,footerText:i,closeAnalytics:a,datePickerContent:o,doneAnalytics:s,endSelectedMsg:l,firstDayOfWeek:u,formattedStartSelection:d,lastValidDate:p,onScrollHandler:f,selectionClassNames:m,startSelectedMsg:g,singleMode:v,updateDatePicker:E,labels:T,l10n:R,holidays:O,firstValidDate:_,useClearDates:I,onClearDates:x}=this.props;this.buttonText=e;const{selection:C}=this.state,k=C.start,D=C.end,P=v?k:k&&D,A=k?R.formatDate(k,{dateFormat:"full",skeleton:"MMMEd"}):d,L=D?R.formatDate(D,{dateFormat:"full",skeleton:"MMMEd"}):R.formatText("datePicker.dateInput.endDate.placeholder"),{localizedText:N}=this.state,j=!(!C.holidaysConfigured||""===C.holidaysName),M=!(i||C.holidaysConfigured),F=w({"uitk-calendar-scrim":M}),U=`clear-date-picker-${this.uid}`;return C.holidaysName||(C.holidaysName=[]),(0,r.jsxs)(c.i,{direction:"column",className:w("uitk-date-picker","date-picker-dialog"),children:[(0,r.jsx)(c.j,{children:(0,r.jsx)(S.b,Object.assign(Object.assign({className:w("uitk-date-picker-toolbar"),navigationContent:{navIconLabel:N.cancelButton(),onClick:this.onDismissClick,onClickAnalytics:a}},I&&{toolbarActionContent:(0,r.jsx)(S.e,{"aria-label":N.clearInstructions(),buttonId:U,disabled:!P,onClick:x,children:t})}),{children:(0,r.jsxs)(c.i,{alignItems:"center",className:w("uitk-date-picker-selection-bar","uitk-date-picker-selection-bar-top"),tag:"section",children:[(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:m(!0),isDialog:!0,onClick:this.onClickTopStart,selectionDate:A,selectionDateMsg:`${T.start} ${g}`,selection:C.start,singleMode:v})}),!v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.j,{className:w("uitk-date-picker-selection-icon"),children:(0,r.jsx)(y.a,{name:"arrow_forward",size:y.E.SMALL})}),(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:m(!1),isDialog:!0,onClick:this.onClickTopEnd,selectionDate:L,selectionDateMsg:`${T.end} ${l}`,selection:C.end})})]}),this.hiddenDoneButton()]})}))}),(0,r.jsx)(c.j,{children:(0,r.jsx)(h.E,{buttonText:e,className:F,firstMonth:_,skipToDoneButton:this.skipToDoneButton,datePickerContent:o,isDialog:!0,selection:C,selectionStart:C.start,selectionEnd:C.end,startDate:_,endDate:p,updateDatePicker:E,firstDayOfWeek:u,onSelectDate:this.onSelectDate,singleMode:v,holidays:O,onChangeStartDate:this.onChangeStartDate,onChangeEndDate:this.onChangeEndDate,onScrollHandler:f})}),(0,r.jsxs)(c.j,{children:[M&&(0,r.jsx)(b.E,{type:b.a.BUTTON,className:w("uitk-date-picker-footer"),children:this.renderApplyButton(s,e)}),!M&&(0,r.jsxs)("div",{className:w("uitk-date-picker-footer-opaque-additional"),children:[j&&(0,r.jsx)("div",{className:w("uitk-date-picker-footer-text"),children:(0,r.jsx)("p",{children:C.holidaysName})}),!n&&i&&(0,r.jsx)("p",{className:w("uitk-date-picker-footer-text",{"uitk-date-picker-footer-text-center":!j}),children:i}),i&&n&&(0,r.jsx)(c.j,{className:w("uitk-date-picker-footer-summary"),children:(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("p",{className:w("uitk-date-picker-footer-text-current-price"),children:n}),i&&(0,r.jsx)("p",{className:w("uitk-date-picker-footer-text-price-summary"),children:i},"legal")]})},"1"),this.renderApplyButton(s,e)]})]})]})}}D.displayName="DatePickerFooterAdditionalTextDialogView";const P=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(D,Object.assign({l10n:t},e))};P.displayName="DatePickerFooterAdditionalTextDialogView";const A=u.classNames.bind(f());var L;!function(e){e.YMD="yyyy-MM-dd"}(L||(L={}));const N=e=>Object.assign(Object.assign({},e.datePickerProps),{onChangeEndDate:e.onChangeEndDate,onChangeMonth:e.onChangeMonth,onChangeStartDate:e.onChangeStartDate,onClearDates:e.onClearDates,onDismiss:e.onDismiss,onScrollHandler:e.onScrollHandler,onSubmit:e.onSubmit,preventAutoFocus:e.preventAutoFocus,singleMode:e.singleMode&&!e.useSingleTrigger,useClearDates:e.useClearDates,useSingleTrigger:e.useSingleTrigger}),j=(e,t,n,i)=>{const a={dateFormat:"medium",skeleton:null!=i?i:"MMMd"},o={dateFormat:"iso-date",raw:n},{value:s,placeholder:l}=t;return{value:e.formatDate(s,o),formattedBtnText:s?e.formatDate(s,a):l,accessibleFormattedText:s?e.formatDate(s,a):l,label:(0,r.jsx)("span",{"aria-hidden":"true",children:t.label})}},M=e=>{const{updateViewport:t}=e;(0,o.useEffect)((()=>{t&&t(!0)}),[]);const n=N(e);return(0,r.jsx)(s.e,{dialogShow:!0,animation:s.E.SLIDEUP,children:(0,r.jsx)(P,Object.assign({},n))})},F=e=>{const{updateViewport:t}=e;(0,o.useEffect)((()=>{t&&t(!1)}),[]);const n=N(e);return(0,r.jsx)(k,Object.assign({},n))};M.displayName="CustomTriggerDialog";const U=e=>{const{dateFormat:t,endProps:n,l10n:i,mediumDateFormatProp:a,onChange:s,routerLinkWrapper:c,openDatePicker:u}=e,[d,h]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{h(!0)}),[]),!n)return null;const{value:p,accessibleFormattedText:f,formattedBtnText:m,label:g}=j(i,n,t,a),v=`${n.label} ${f}`,y=A({"is-hidden":d});return(0,r.jsx)(l.b,{id:n.id,name:n.name,className:y,label:g,placeholder:n.placeholder,value:p,onChange:s,"data-stid":"input-date",icon:"today",invalid:n.invalid,children:d&&c&&c((0,r.jsx)(l.a,{"aria-label":v,className:A("uitk-form-field-trigger"),domRef:n.domRef,"data-name":n.name,id:`${n.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{u(n.dateType)},analytics:n.analytics,children:m}))})};U.displayName="DialogEndDateField";const B=e=>{const{updateViewport:t}=e,[n,i]=(0,o.useState)(!1);(0,o.useEffect)((()=>{i(!0),t&&t(!0)}),[]);const{dateFieldWrapperClasses:a,dateFormat:u,dialogWrapper:d,l10n:h,mediumDateFormatProp:p,onChange:f,routerLinkWrapper:m,showDatePicker:g,singleMode:v,space:y,stacked:E,startProps:b,endProps:S,triggeredField:T,useSingleTrigger:R,openDatePicker:O}=e,{value:_,formattedBtnText:I,accessibleFormattedText:x,label:C}=j(h,b,u,p);let k=_,w=I,D=`${b.label}`;if(x&&(D+=` ${x}`),R&&S){const{value:e,formattedBtnText:t,accessibleFormattedText:n}=j(h,S,u,p);e&&(k+=` - ${e}`),t&&(w+=` - ${t}`),n&&(D=`${b.label} ${h.formatText("datepicker.buttonLabel.endAccessibleFormattedText",x,n)}`)}const L=E&&!v&&!R,M=A({"uitk-date-field-wrapper":!L}),F=L?"column":"row",B=A("egds-team-date-picker-with-footer-additional-text",{[`${a}`]:a},"uitk-date-fields-wrapper"),G=N(e),$=A({"is-hidden":n});return(0,r.jsx)(c.j,{className:B,grow:1,children:(0,r.jsxs)(c.i,{className:A("uitk-date-fields"),direction:F,space:y,children:[g&&T&&d((0,r.jsx)(s.e,{dialogShow:!0,animation:s.E.SLIDEUP,children:(0,r.jsx)(P,Object.assign({},G))}),T),(0,r.jsx)(c.j,{className:M,grow:1,minWidth:"zero",maxWidth:v||R||E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsx)(l.b,{id:b.id,name:b.name,className:$,label:C,placeholder:b.placeholder,value:k,onChange:f,"data-stid":"input-date",icon:"today",invalid:b.invalid,children:n&&m&&m((0,r.jsx)(l.a,{"aria-label":D,className:A("uitk-form-field-trigger"),domRef:b.domRef,"data-name":b.name,id:`${b.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{O(b.dateType)},analytics:b.analytics,children:w}))})})}),!v&&!R&&(0,r.jsx)(c.j,{className:M,grow:1,minWidth:"zero",maxWidth:E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsx)(U,Object.assign({},e))})})]})})};B.displayName="DialogDateFields";const G=e=>{const{dateFormat:t,mediumDateFormatProp:n,endProps:i,l10n:a,onChange:s,onSubmit:c,showDatePicker:u,triggeredField:h,openDatePicker:p}=e,[f,m]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{m(!0)}),[]),!i)return null;const{value:g,formattedBtnText:v,accessibleFormattedText:y,label:E}=j(a,i,t,n),b=`${i.label} ${y}`,S=f&&u,T=A("uitk-date-picker-menu-container",{"uitk-date-picker-menu-container-single":!i.doubleMonths,"uitk-date-picker-menu-container-double":i.doubleMonths}),R=N(e),O=A({"is-hidden":f});return(0,r.jsxs)(d.E,{isOpen:S,className:A("uitk-date-picker-menu"),onDismiss:c,children:[(0,r.jsx)(d.b,{children:(0,r.jsx)(l.b,{className:O,id:i.id,name:i.name,label:E,placeholder:i.placeholder,value:g,onChange:s,"data-stid":"input-date",icon:"today",invalid:i.invalid,children:f&&(0,r.jsx)(l.a,{"aria-label":b,className:A("uitk-form-field-trigger"),domRef:i.domRef,"data-name":i.name,id:`${i.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{p(i.dateType)},analytics:i.analytics,children:v})})}),u&&"end"===h&&(0,r.jsx)(d.c,{position:d.P.LEFT,className:T,autoPosition:!0,children:(0,r.jsx)(k,Object.assign({},R))})]})};G.displayName="MenuEndDateField";const $=e=>{const{updateViewport:t,openDatePicker:n}=e,[i,a]=(0,o.useState)(!1);(0,o.useEffect)((()=>{a(!0),t&&t(!1)}),[]);const{dateFieldWrapperClasses:s,dateFormat:u,l10n:h,mediumDateFormatProp:p,onChange:f,onSubmit:m,showDatePicker:g,singleMode:v,space:y,stacked:E,startProps:b,endProps:S,triggeredField:T,useSingleTrigger:R}=e,{value:O,formattedBtnText:_,accessibleFormattedText:I,label:x}=j(h,b,u,p);let C=O,w=_,D=`${b.label}`;if(I&&(D+=` ${I}`),R&&S){const{value:e,formattedBtnText:t,accessibleFormattedText:n}=j(h,S,u,p);e&&(C+=` - ${e}`),t&&(w+=` - ${t}`),n&&(D=`${b.label} ${h.formatText("datepicker.buttonLabel.endAccessibleFormattedText",I,n)}`)}const P=g,L=A("uitk-date-picker-menu-container",{"uitk-date-picker-menu-container-single":!b.doubleMonths,"uitk-date-picker-menu-container-double":b.doubleMonths}),M=N(e),F=E&&!v&&!R,U=A({"uitk-date-field-wrapper":!F}),B=F?"column":"row",$=A("egds-team-date-picker-with-footer-additional-text",{[`${s}`]:s},"uitk-date-fields-wrapper"),H=A({"is-hidden":i});return(0,r.jsx)(c.j,{className:$,grow:1,children:(0,r.jsxs)(c.i,{className:A("uitk-date-fields"),space:y,direction:B,children:[(0,r.jsx)(c.j,{className:U,grow:1,minWidth:"zero",maxWidth:v||R||E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsxs)(d.E,{isOpen:P,className:A("uitk-date-picker-menu"),onDismiss:m,children:[(0,r.jsx)(d.b,{children:(0,r.jsx)(l.b,{className:H,id:b.id,name:b.name,label:x,placeholder:b.placeholder,value:C,onChange:f,"data-stid":"input-date",icon:"today",invalid:b.invalid,children:i&&(0,r.jsx)(l.a,{"aria-label":D,className:A("uitk-form-field-trigger"),domRef:b.domRef,"data-name":b.name,id:`${b.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{n(b.dateType)},analytics:b.analytics,children:w})})}),g&&"start"===T&&(0,r.jsx)(d.c,{position:d.P.LEFT,className:L,autoPosition:!0,children:(0,r.jsx)(k,Object.assign({},M))})]})})}),!v&&!R&&(0,r.jsx)(c.j,{className:U,grow:1,minWidth:"zero",maxWidth:E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsx)(G,Object.assign({},e))})})]})})};$.displayName="MenuDateFields";class H extends o.Component{render(){const{useCustomTrigger:e,datePickerProps:t}=this.props;if(e)switch(t.renderType){case O.DIALOG:return(0,r.jsx)(M,Object.assign({},this.props));case O.MENU:return(0,r.jsx)(F,Object.assign({},this.props));default:return(0,r.jsxs)(a.LM,{children:[(0,r.jsx)(a.NP,{children:(0,r.jsx)(M,Object.assign({},this.props))}),(0,r.jsx)(a.zQ,{children:(0,r.jsx)(F,Object.assign({},this.props))})]})}switch(t.renderType){case O.DIALOG:return(0,r.jsx)(B,Object.assign({},this.props));case O.MENU:return(0,r.jsx)($,Object.assign({},this.props));default:return(0,r.jsxs)(a.LM,{children:[(0,r.jsx)(a.NP,{children:(0,r.jsx)(B,Object.assign({},this.props))}),(0,r.jsx)(a.zQ,{children:(0,r.jsx)($,Object.assign({},this.props))})]})}}}H.displayName="UitkDateField",H.defaultProps={dateFormat:L.YMD,space:"three",triggeredField:"start"};const z=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(H,Object.assign({l10n:t},e))};z.displayName="EGDSDateField"},92758:function(e,t,n){n.d(t,{XQ:function(){return T}});var r=n(96540),i=n(44591),a=n(95005),o=n(40679),s=n(6690),l=n(94495),c=n(39867),u=n(74),d=n(77488),h=n(15144),p=n(68963),f=n(67045),m=n(82960),g=n(33685),v=n(21181),y={250:()=>{}},E={};function b(e){var t=E[e];if(void 0!==t)return t.exports;var n=E[e]={exports:{}};return y[e](n,n.exports,b),n.exports}b.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return b.d(t,{a:t}),t},b.d=(e,t)=>{for(var n in t)b.o(t,n)&&!b.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},b.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;if(!(e="file:///app/node_modules/@egds/react-one-graph/dist/index.esm.js"))throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),b.p=e})();var S={};(()=>{b.d(S,{Eh:()=>W,mw:()=>he,mZ:()=>le,vZ:()=>R,tQ:()=>ne,aT:()=>Q});const e=(t={Fragment:()=>r.Fragment,createContext:()=>r.createContext,createElement:()=>r.createElement,default:()=>r,forwardRef:()=>r.forwardRef,useCallback:()=>r.useCallback,useContext:()=>r.useContext,useEffect:()=>r.useEffect,useImperativeHandle:()=>r.useImperativeHandle,useRef:()=>r.useRef,useState:()=>r.useState},n={},b.d(n,t),n);var t,n;const y=(O={UitkLayoutGrid:()=>i.o,UitkLayoutGridItem:()=>a.d},_={},b.d(_,O),_),E=(e=>{var t={};return b.d(t,e),t})({UitkLayoutFlex:()=>o.d}),T=(e=>{var t={};return b.d(t,e),t})({UitkSlider:()=>s.N}),R=({src:t,zoomHeading:n,containerSize:r=500,maxZoom:i=100,sensitivity:a=.01,onEdit:o,disabled:s=!1,onDragEnd:l,onZoomEnd:c,displayZoomValue:u=!0})=>{const[d,h]=(0,e.useState)(0),[p,f]=(0,e.useState)(!1),[m,g]=(0,e.useState)({x:0,y:0}),v=(0,e.useRef)(null);let b,S;const R=()=>{if(v.current){const e=v.current,t=e.naturalWidth/e.naturalHeight,[n,i]=(e=>{const t=e<1,n=r*(t?1:e)*(d*a+1),i=r*(t?1/e:1)*(d*a+1);return[Math.max(0,(n-r)/2),Math.max(0,(i-r)/2)]})(t);let o=e.offsetLeft,s=e.offsetTop;const l=t>1?-(r*t-r)/2:0,c=t>1?0:-(r/t-r)/2;o>n+l?o=n+l:o<-n+l&&(o=-n+l),s>i+c?s=i+c:s<-i+c&&(s=-i+c),e.style.left=`${o}px`,e.style.top=`${s}px`}},O=()=>{const e=v.current;if(e){const{offsetLeft:t,offsetTop:n,naturalWidth:i,naturalHeight:s}=e,l=i/s,c=d*a+1,u=l<1;S=r*(u?1:l),b=r*(u?1/l:1);const h=Math.min(i/S,s/b),p={x:i/2,y:s/2},f=r*h/c,m=(t-(l>1?-(r*l-r)/2:0))*h,g=(n-(l>1?0:-(r/l-r)/2))*h,v=p.x-f/2-m/c,y=p.y-f/2-g/c,E=f,T=document.createElement("canvas");T.width=E,T.height=E;const R=T.getContext("2d");if(R){R.drawImage(e,v,y,E,E,0,0,E,E);const t="image/jpeg";T.toBlob((e=>{if(e){const n=new File([e],"cropped-image.jpeg",{type:t});o&&o(n)}else console.error("Failed to create Blob from Canvas")}),t)}}};(0,e.useEffect)((()=>{if(v.current){const e=v.current;e.crossOrigin="anonymous",e.style.transform=`scale(${d*a+1})`,e.style.transformOrigin="center center"}R()}),[d]);const _=e=>{if(p){let t,n;"touches"in e?(t=e.touches[0].clientX,n=e.touches[0].clientY):(t=e.clientX,n=e.clientY);const r=t-m.x,i=n-m.y;if(v.current){const e=v.current;e.style.left=`${e.offsetLeft+r}px`,e.style.top=`${e.offsetTop+i}px`}g({x:t,y:n})}},I=e=>{let t,n;e.preventDefault(),f(!0),"touches"in e?(t=e.touches[0].clientX,n=e.touches[0].clientY):(t=e.clientX,n=e.clientY),g({x:t,y:n})},x=()=>{f(!1),R(),O(),l&&l()},C=()=>{c&&c(),O()};(0,e.useEffect)((()=>(p?(document.addEventListener("mousemove",_),document.addEventListener("mouseup",x),document.addEventListener("touchmove",_),document.addEventListener("touchend",x)):(document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",x)),()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",x)})),[p,m]);const k={width:r,height:r,backgroundColor:"white",position:"relative",overflow:"hidden",cursor:"all-scroll"};return e.default.createElement(E.UitkLayoutFlex,{justifyContent:"center"},e.default.createElement(y.UitkLayoutGrid,{space:"twelve"},e.default.createElement(y.UitkLayoutGridItem,null,e.default.createElement(y.UitkLayoutGrid,{style:k,"data-testid":"image-container",onMouseDown:I,onTouchStart:I},t&&e.default.createElement("img",{style:{position:"relative",overflow:"visible"},alt:"Unavailable",src:t,ref:v,onLoad:()=>{const e=v.current;if(e){const t=e.naturalWidth/e.naturalHeight,n=t<1;S=r*(n?1:t)*(d*a+1),b=r*(n?1/t:1)*(d*a+1);const i=Math.max(0,(S-r)/2),o=Math.max(0,(b-r)/2);e.style.left=`-${i}px`,e.style.top=`-${o}px`,e.style.width=`${S}px`,e.style.height=`${b}px`}O()},crossOrigin:"anonymous"}),e.default.createElement("div",{style:{height:"100%",position:"absolute",top:"0",left:"0",width:"100%"}},e.default.createElement("div",{style:{position:"absolute",content:"''",aspectRatio:"1",height:"100%",zIndex:1,top:"0",left:"50%",borderRadius:"50%",transform:"translateX(-50%)",boxShadow:"0px 0px 0px 145px rgba(0, 0, 0, 0.5)"}})))),e.default.createElement(y.UitkLayoutGridItem,null,e.default.createElement("div",{role:"button","aria-hidden":!n,tabIndex:0,onMouseUp:C,onTouchEnd:C},e.default.createElement(T.UitkSlider,{id:"slider",name:"slider",min:0,max:i,step:1,handleChange:h,value:d,formatValueForDisplay:e=>n?u?`${n}: ${e}`:`${n}`:`${e}`,disabled:s})))))};var O,_;R.displayName="ImageEditor";var I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I.apply(this,arguments)};function x(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function C(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=this===window?void 0:this,i=0,a=e;i<a.length;i++){var o=a[i];if(o){var s=typeof o;if("string"===s){var l=o.split(" ");r&&l.length>1?n.push(C.apply(r,l)):n.push((null==r?void 0:r[o])||o)}else if(Array.isArray(o))[].concat.apply([],o).filter(Boolean).length&&n.push(C.apply(null!=r?r:null,o));else if("object"===s)if(o.toString===Object.prototype.toString)for(var c in o)({}).hasOwnProperty.call(o,c)&&o[c]&&n.push((null==r?void 0:r[c])||c);else n.push(o.toString())}}return n.join(" ")}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var k=e.createContext({context:null}),w=function(){document.body.classList.contains("uitk-no-outline")||(document.body.classList.add("uitk-no-outline"),document.body.removeEventListener("mousedown",w),document.body.addEventListener("keydown",D))},D=function(){document.body.classList.contains("uitk-no-outline")&&(document.body.classList.remove("uitk-no-outline"),document.body.removeEventListener("keydown",D),document.body.addEventListener("mousedown",w))};w();var P=b(250),A=b.n(P),L=new Map([[100,"uitk-type-100"],[200,"uitk-type-200"],[300,"uitk-type-300"],[400,"uitk-type-400"],[500,"uitk-type-500"],[600,"uitk-type-600"],[700,"uitk-type-700"],[800,"uitk-type-800"],[900,"uitk-type-900"]]),N=new Map([["regular","uitk-type-regular"],["medium","uitk-type-medium"],["bold","uitk-type-bold"]]),j=new Map([["left","uitk-type-start"],["right","uitk-type-end"],["center","uitk-type-center"]]),M=new Map([["wrap","overflow-wrap"],["truncate","truncate"],["truncate-2-lines","truncate-lines-2"],["truncate-3-lines","truncate-lines-3"],["truncate-4-lines","truncate-lines-4"]]),F=new Map([["none","hyphens-none"],["manual","hyphens-manual"],["auto","hyphens-auto"]]),U=(new Map([[1,"uitk-heading-1"],[2,"uitk-heading-2"],[3,"uitk-heading-3"],[4,"uitk-heading-4"],[5,"uitk-heading-5"],[6,"uitk-heading-6"],[7,"uitk-heading-7"],[8,"uitk-heading-8"]]),new Map([[1,"uitk-paragraph-1"],[2,"uitk-paragraph-2"],[3,"uitk-paragraph-3"]]),new Map([["half","uitk-text-spacing-half"],["one","uitk-text-spacing-one"],["two","uitk-text-spacing-two"],["three","uitk-text-spacing-three"],["four","uitk-text-spacing-four"],["six","uitk-text-spacing-six"]])),B=[["h1","h1"],["h2","h2"],["h3","h3"],["h4","h4"],["h5","h5"],["h6","h6"]],G=(new Map(B),x(x([],B,!0),[["p","p"]],!1)),$=(new Map(G),new Map([["positive","uitk-text-positive-theme"],["negative","uitk-text-negative-theme"],["emphasis","uitk-text-emphasis-theme"],["default","uitk-text-default-theme"],["loyalty","uitk-text-loyalty-theme"],["global-loyalty","uitk-text-global-loyalty-theme"],["inverse","uitk-text-inverse-theme"],["light","uitk-text-light-theme"],["standard","uitk-text-standard-theme"],["secondary","uitk-text-secondary-theme"]])),H=new Map([["normal","uitk-text-white-space-normal"],["nowrap","uitk-text-white-space-nowrap"],["pre","uitk-text-white-space-pre"],["pre-wrap","uitk-text-white-space-pre-wrap"],["pre-line","uitk-text-white-space-pre-line"],["break-spaces","uitk-text-white-space-break-spaces"]]),z=(new Map([["b","b"],["em","em"],["s","s"],["small","small"],["i","i"],["mark","mark"],["strong","strong"],["q","q"],["sub","sub"],["sup","sup"]]),C.bind(A())),V=function(t){var n,r=t.align,i=t.children,a=t.inline,o=t.size,s=t.spacing,l=t.overflow,c=t.weight,u=t.whiteSpace,d=t.className,h=t.theme,p=void 0===h?"default":h,f=t.wordBreak,m=void 0!==f&&f,g=t.dataTestId,v=t.hyphens,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["align","children","inline","size","spacing","overflow","weight","whiteSpace","className","theme","wordBreak","dataTestId","hyphens"]),E=a&&"string"==typeof a,b=E||o?o:300;n=a&&"boolean"==typeof a?"span":E?a:"div";var S=e.useContext(k).data,T=null!=S?S:{},R=T.bottomScrimContext,O=T.overlayScrimContext,_=T.contextClassNames,x=z("uitk-text",r&&j.get(r),s&&U.get(s),l&&!a&&M.get(l),m&&!a&&M.get("wrap"),v&&F.get(v),!R&&b&&L.get(b),!R&&c&&N.get(c),u&&H.get(u),R&&"in-bottom-scrim",O&&"in-overlay-scrim",!(R||O)&&p&&$.get(p),null==_?void 0:_.UitkText,d);return i?e.createElement(n,I({className:x},g?{"data-test-id":g}:{},y),i):null};V.displayName="UitkText";const W=({text:t,diameter:n=530})=>{const r={width:`${n}px`,height:`${n}px`,borderRadius:"50%",display:"flex",backgroundColor:"#4d5167",justifyContent:"center",alignItems:"center"};return e.default.createElement(y.UitkLayoutGrid,{style:r},e.default.createElement(V,{size:900,weight:"medium",theme:"light"},t))};W.displayName="AvatarCustom";const Y=(e=>{var t={};return b.d(t,e),t})({EGDSIcon:()=>l.a,EGDSIconSize:()=>l.E}),q=(e=>{var t={};return b.d(t,e),t})({VideoCustom:()=>c.V5,VideoCustomClickAction:()=>c.Hq}),K=(e=>{var t={};return b.d(t,e),t})({EGDSButtonSize:()=>u.E,EGDSIcon:()=>l.a,EGDSIconSize:()=>l.E,EGDSLayout:()=>d.E,EGDSLayoutFlex:()=>h.i,EGDSSheet:()=>p.e,EGDSSheetContent:()=>p.f,EGDSSheetTransition:()=>p.h,EGDSTertiaryButton:()=>f.E,EGDSTransparentToolbar:()=>m.d,analyticsTracker:()=>g.a}),Q={videoResource:{src:"",thumbnail:""},footerContent:{customFooter:void 0,controlBarProps:{useScrim:!1,useDefaultCTAButton:!1,hasPlayButton:!1,hasMuteButton:!1,hasClosedCaptionsButton:!1,hasFullscreenButton:!1,controlButtonsInactivityTimeout:3}},preserveAspectRatio:!1,videoClickAction:q.VideoCustomClickAction.NONE},X={display:"inline-flex",position:"relative"},Z={display:"flex",position:"absolute",top:"1.5rem",right:"1.5rem",zIndex:2},J={display:"flex",position:"fixed",top:"1.5rem",right:"1.5rem",zIndex:2},ee={background:"rgb(0,0,0,0.3)",margin:"0 12px",color:"white"},te={background:"rgb(0,0,0,0.3)",color:"white"},ne=(0,e.forwardRef)(((t,n)=>{var r,i,a,o,s,l,c,u;const d=(0,e.useRef)(null),[h,p]=(0,e.useState)(!1),[f,m]=(0,e.useState)(!0),[g,v]=(0,e.useState)(!1),{analytics:y}=t,E=()=>{d.current&&d.current.toggleMuteUnmute(),f?(m(!1),(null==y?void 0:y.unmuteAnalytics)&&(0,K.analyticsTracker)(null==y?void 0:y.unmuteAnalytics)):(m(!0),(null==y?void 0:y.muteAnalytics)&&(0,K.analyticsTracker)(null==y?void 0:y.muteAnalytics))};return(0,e.useImperativeHandle)(n,(()=>({toggleMuteUnmute:()=>{E()},setShowControlButtons:e=>v(e)}))),e.default.createElement("div",{style:X},g&&e.default.createElement("div",{style:t.isMobile?J:Z},t.enablePauseButton&&e.default.createElement(K.EGDSTertiaryButton,{id:"pause-play-button",type:"button",onClick:()=>{console.log("accessibility video gesture controls",t.accessibility),d.current&&d.current.togglePlayPause(),h?(p(!1),(null==y?void 0:y.playAnalytics)&&(0,K.analyticsTracker)(null==y?void 0:y.playAnalytics)):(p(!0),(null==y?void 0:y.pauseAnalytics)&&(0,K.analyticsTracker)(null==y?void 0:y.pauseAnalytics))},style:ee,size:K.EGDSButtonSize.MEDIUM,"aria-label":h?null===(i=null===(r=t.accessibility)||void 0===r?void 0:r.videoControls)||void 0===i?void 0:i.videoPausedAccessibility:null===(o=null===(a=t.accessibility)||void 0===a?void 0:a.videoControls)||void 0===o?void 0:o.videoPlayingAccessibility},e.default.createElement(Y.EGDSIcon,{name:h?"play_arrow":"pause",theme:"inverse",size:Y.EGDSIconSize.MEDIUM})),t.enableMuteButton&&e.default.createElement(K.EGDSTertiaryButton,{id:"mute-unmute-button",type:"button",onClick:()=>{(null==t?void 0:t.muteUnmuteAllVideos)?t.muteUnmuteAllVideos(f):E()},style:te,size:K.EGDSButtonSize.MEDIUM,"aria-label":f?null===(l=null===(s=t.accessibility)||void 0===s?void 0:s.videoControls)||void 0===l?void 0:l.soundOffAccessibility:null===(u=null===(c=t.accessibility)||void 0===c?void 0:c.videoControls)||void 0===u?void 0:u.soundOnAccessibility},e.default.createElement(Y.EGDSIcon,{name:f?"volume_off":"volume_up",theme:"inverse",size:Y.EGDSIconSize.MEDIUM}))),e.default.createElement(q.VideoCustom,Object.assign(Object.assign(Object.assign({ref:d},Q),t),{onVideoLoading:e=>{v(!e)}})))}));ne.displayName="VideoGestureControls";var re=e.createContext({openedDialogs:[],open:function(){},close:function(){}}),ie=function(t){return function(n){return e.createElement(e.Fragment,null,t&&n.children)}},ae={useDialogControl:function(e,t,n,r){return{ComponentFactory:ie(n),actions:{openDialog:function(e){return r(!0,null==e?void 0:e.closeAllDialogs)},closeDialog:function(e){return r(!1,null==e?void 0:e.closeAllDialogs)},toggleDialog:function(e){return r(!n,null==e?void 0:e.closeAllDialogs)}}}}},oe=e.createContext(ae);const se=b.p+"./styles/egds-one-graph-carousel-vertical-navigation.css",le=({children:t,isOpen:n=!0,isMobile:r=!1,startIndex:i=0,onCloseClicked:a,onUpClicked:o,onDownClicked:s,addCarouselElements:l,accessibility:c})=>{var u,d;const h="scroll-up",p="scroll-down",[f]=(0,e.useState)(e.default.Children.toArray(t)),[m,g]=function(t,n,r){void 0===n&&(n="pwaDialog"),void 0===r&&(r=!0);var i=e.useContext(re),a=i.openedDialogs,o=i.open,s=i.close,l=e.useContext(oe).useDialogControl,c="".concat(t,"_").concat(n),u=a.includes(c),d=e.useCallback((function(e,t){t&&a.forEach((function(e){s(e)})),e?o(c):e||t||s(c)}),[o,s,c,a]),h=l(t,n,u,d,r,void 0);return[u,h.actions,h.ComponentFactory]}("full-sheet-necessary-dialog-layer"),[v,y]=(0,e.useState)(n),[E,b]=(0,e.useState)(i),[S,T]=(0,e.useState)(0),[R,O]=(0,e.useState)(0===i),[_,I]=(0,e.useState)(i===f.length-1),x=(0,e.useRef)([]),k=e.default.useRef(null),w=(0,e.useRef)([]),D=C.bind(se),P=D("button-container"),A=D("closeButton"),L=D("upButton"),N=(D("upButtonDisabled"),D("downButton")),j=D("video-reel"),M=D("button-container-wrapper"),F=D("container"),U=D("content"),B=()=>{y(!1),g.closeDialog(),a&&a()};(0,e.useEffect)((()=>{var e;b(e=i),x.current[e]&&x.current[e].scrollIntoView({behavior:"auto",block:"start"})}),[i]);const G=e=>{const t=f.length-1;b((n=>{let r=n;return e===h&&n>0?(null==o||o(),r=n-1):e===p&&n<t&&(n===t-2&&(null==l||l()),null==s||s(),r=n+1),O(0===r),I(r===t),setTimeout((()=>{var e;e=r,x.current[e]&&x.current[e].scrollIntoView({behavior:"smooth",block:"start"})}),0),r}))};return(0,e.useEffect)((()=>{const e=e=>{switch(e.key){case"ArrowUp":R||G(h);break;case"ArrowDown":_||G(p);break;case"Escape":B()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[R,_,E]),e.default.createElement(e.default.Fragment,null,e.default.createElement(K.EGDSSheetTransition,{isVisible:v},e.default.createElement(K.EGDSSheet,{liveAnnounceString:"Full Sheet has opened",type:"full",isVisible:m,triggerRef:k,theme:"dark",className:F,autoFocus:!0},!r&&e.default.createElement(K.EGDSTransparentToolbar,{overlay:!0,navigationContent:{onClick:B,navIconLabel:(null==c?void 0:c.closeAccessibility)||"Close Travel Videos"}}),e.default.createElement(K.EGDSSheetContent,{className:U,fullSheetContentMaxWidth:"extra-large"},f.length>1&&e.default.createElement(K.EGDSLayoutFlex,{className:M},e.default.createElement(K.EGDSLayoutFlex,{className:P},e.default.createElement(K.EGDSTertiaryButton,{className:` ${L}`,type:"button",onClick:()=>G(h),id:"car-up-button",title:"Scroll up",size:K.EGDSButtonSize.MEDIUM,"aria-label":null===(u=null==c?void 0:c.pagingControls)||void 0===u?void 0:u.previousAccessibility,disabled:R},e.default.createElement(K.EGDSIcon,{name:"arrow_upward_iOS",size:K.EGDSIconSize.MEDIUM})),e.default.createElement(K.EGDSTertiaryButton,{className:` ${N}`,type:"button",onClick:()=>G(p),id:"car-down-button",title:"Scroll down",size:K.EGDSButtonSize.MEDIUM,"aria-label":null===(d=null==c?void 0:c.pagingControls)||void 0===d?void 0:d.nextAccessibility,disabled:_},e.default.createElement(K.EGDSIcon,{name:"arrow_downward_iOS",size:K.EGDSIconSize.MEDIUM})))),r&&e.default.createElement(K.EGDSTertiaryButton,{className:A,type:"button",onClick:B,id:"mobile-close-button",title:"mobile-close-button",size:K.EGDSButtonSize.MEDIUM,"aria-label":c.closeAccessibility},e.default.createElement(K.EGDSIcon,{name:"close",size:K.EGDSIconSize.MEDIUM})),e.default.createElement(K.EGDSLayout,null,f.map(((t,n)=>e.default.isValidElement(t)?e.default.createElement("div",{key:`index=${n}`,className:j,id:`carousel-item-${n}`,ref:e=>{x.current[n]=e}},e.default.cloneElement(t,{ref:e=>{e&&(w.current[n]=e)}})):null)))))))};le.displayName="CarouselVerticalNavigation";const ce=(e=>{var t={};return b.d(t,e),t})({classNames:()=>v.classNames}),ue=b.p+"./styles/egds-one-graph-avatar-themed.css",de=ce.classNames.bind(ue),he=t=>{const{border:n,size:r,image:i,text:a,icon:o,className:s,theme:l}=t,c="uitk-avatar",u=de(c,{[`${c}-${r}`]:r},{[`${c}-hasborder`]:n},s);return i?e.createElement("img",{className:de(u,`${c}-image`),src:i.src,alt:i.alt}):a?e.createElement("div",{className:de(u,`${c}-text`,`${c}-text-${r}`,`${c}-text-${l}`)},a):o?e.createElement("div",{className:de(u,`${c}-icon`,`${c}-icon-${r}`,`${c}-icon-${l}`)},e.createElement(Y.EGDSIcon,{name:o,size:r})):e.createElement("div",{className:de(u,`${c}-placeholder`)})};he.defaultProps={size:"medium",border:!1},he.displayName="AvatarThemed"})();var T=S.mw},15430:function(e,t,n){n.d(t,{Tm:function(){return f},tr:function(){return d}});var r=n(96540),i=n(21181),a=n(83003),o=n.n(a),s=n(90808),l=n.n(s),c=(n(1192),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n});const u=i.classNames.bind(o()),d=e=>{const{children:t,checked:n,className:i,disabled:a,id:o,name:s,onChange:l}=e,d=c(e,["children","checked","className","disabled","id","name","onChange"]),h="button-toggle-custom-content",p=u(h,i,{[`${h}-is-checked`]:n,[`${h}-is-disabled`]:a}),f=u(`${h}-container`),m=u(`${h}-input`,"is-visually-hidden");return r.createElement("div",{className:p},r.createElement("label",{className:f,htmlFor:o},r.createElement("input",Object.assign({id:o,name:s,type:"checkbox",onChange:l,className:m,disabled:a,checked:n,"aria-checked":n,value:n?"true":"false"},d)),t))};d.displayName="ButtonToggleCustomContent";const h=new Map([["default","calendar-date-background-default"],["positive","calendar-date-background-positive"],["negative","calendar-date-background-negative"],["neutral","calendar-date-background-neutral"]]),p=i.classNames.bind(l()),f=e=>{const{children:t,className:n,dataTestId:i,theme:a,backgroundShape:o}=e,s=p("calendar-date-background",{"calendar-date-background-flat":"default"===a||"flat"===o},{"calendar-date-background-rounded":"rounded"===o},{"calendar-date-background-circle":"circle"===o},h.get(a),n);return r.createElement("div",{className:s,"data-test-id":i},t)};f.displayName="CalendarDateBackground"},48979:function(e,t,n){n.d(t,{S:function(){return h}});var r=n(96540),i=n(13783),a=n(21181),o=n(94495),s=n(49273),l=n.n(s),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const u=a.classNames.bind(l()),d=({active:e,altText:t,checked:n=!1,className:i,disabled:a,icon:s,id:l,name:c,onChange:d,selected:h,text:p,value:f})=>{const m="single-select-pill",g=u(m,i,{[`${m}-disabled`]:a}),v=u(`${m}-content`,{[`${m}-active`]:e,[`${m}-selected`]:h}),y=null!=f?f:`${n}`;return r.createElement("div",{className:g},r.createElement("input",{id:l,name:c,checked:n,"aria-checked":n,type:"radio",onChange:d,className:u(`${m}-standard is-visually-hidden`),disabled:a,value:y}),r.createElement("label",{className:v,htmlFor:l,"aria-label":t},s&&r.createElement(o.a,{className:u(`${m}-icon`),name:s}),r.createElement("span",{className:u(`${m}-text`)},p)))};d.displayName="SingleSelectPill";const h=({data:e,handleSelectedPill:t,wrap:n=!1,align:o})=>{const s=e=>{const n=e.target.value;t(n)},u=a.classNames.bind(l());return r.createElement(i.c,{className:u("single-select-pill-wrapper"),wrap:n,align:o},e.map((e=>{var{id:t,selected:n}=e,i=c(e,["id","selected"]);return r.createElement(d,Object.assign(Object.assign({id:t,key:t},i),{selected:n,checked:n,onChange:s}))})))};h.displayName="SingleSelectPillWrapper"},61623:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=["hasClearButton","required","value","domRef","handleClear","onChange","id","name","children","label","hasBorder","hasFloatedLabel","hasVisibleLabel","icon","instruction","invalid","placeholder","disabled","readOnly","predictiveText"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=n(1192),d=n(96540),h=n(43636),p=n(12286),f=n(21181),m=n(39462);function g(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var y=v(d),E=g(m),b=f.classNames.bind(E.default),S=function(e){var t=e.hasClearButton,n=void 0!==t&&t,r=e.required,a=void 0!==r&&r,s=e.value,c=void 0===s?"":s,d=e.domRef,f=void 0===d?y.createRef():d,m=e.handleClear,g=e.onChange,v=e.id,E=e.name,S=e.children,T=e.label,R=e.hasBorder,O=e.hasFloatedLabel,_=e.hasVisibleLabel,I=void 0!==_&&_,x=e.icon,C=e.instruction,k=e.invalid,w=e.placeholder,D=e.disabled,P=e.readOnly,A=e.predictiveText,L=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,i),N=u.useLocalization(),j=l(y.useState(A),2),M=j[0],F=j[1];y.useEffect((function(){F(A)}),[A,M]);var U=n&&!!c,B={labelClassName:b(U&&"has-typeahead-custom-text-input-cta"),disabled:D,hasBorder:R,hasFloatedLabel:O,hasVisibleLabel:I,icon:x,id:v,instruction:C,invalid:k,label:T,placeholder:w,readOnly:P,required:a},G=b("uitk-field-input",U&&"has-typeahead-custom-text-input-cta","typeahead-custom-text-input"),$=function(){if(y.isValidElement(T)){var e,t=T.props;return null!==(e=null==t?void 0:t.children)&&void 0!==e?e:""}return T}(),H=N.formatText("clear"),z=U?[H,$].join(" "):"";return y.createElement(h.EGDSField,o({},B),y.createElement("input",o(o({},L),{},{value:c,onChange:g,className:G,"aria-describedby":k?"".concat(v,"-error"):void 0,placeholder:w,ref:f,id:v,"aria-required":a,"aria-invalid":!!k,type:"text"})),S,M&&y.createElement("input",o(o({},L),{},{className:b("predictive-text","uitk-field-input",U&&"has-typeahead-custom-text-input-cta","typeahead-custom-text-input"),value:M,readOnly:!0})),U&&y.createElement("button",{className:b("uitk-clear-button","typeahead-custom-text-input-cta"),onClick:function(){var e;null==g||g({target:{value:"",name:E}}),null==f||null===(e=f.current)||void 0===e||e.focus(),null==m||m(),F("")},type:"button"},y.createElement(p.EGDSIcon,{name:"cancel",size:p.EGDSIconSize.SMALL,title:z,id:"".concat(v,"-clear-input-button")})))};S.displayName="TypeaheadCustomTextInput",t.TypeaheadCustomTextInput=S},77027:function(e,t,n){var r=n(61623);n(1192),n(96540),n(43636),n(12286),n(21181),n(39462),t.K=r.TypeaheadCustomTextInput},66862:function(e,t,n){var r=n(8869);n(21181),r.ESSAdapter,t.ck=r.GOOGLEMAPS_CATEGORY,r.GoogleAdapter,r.ThirdPartyAdapter,r.ThirdPartyAdapterFactory,r.appendQueryObject,r.appendQueryParam,t.we=r.filterTypeaheadResults,t.BZ=r.getSelectedResult,t.g=r.getSizeOfTypeaheadResults},10252:function(e,t,n){n.d(t,{E:function(){return h},T:function(){return u}});var r=n(21181);class i{constructor(e){this.locale=e}toEssResult(e,t,n){const r=e;let i="",a="";const o=(r||"").split(",");return o.length<2?i=o[0].trim():(i=o[0],a=o.slice(1).map((e=>e.trim())).join(", ").trim()),{category:this.category,coordinates:void 0,index:n,regionNames:{displayName:r,fullName:e,lastSearchName:e,primaryDisplayName:i,secondaryDisplayName:a},sourceId:t,sourceName:this.sourceName,type:this.type}}}const a="GOOGLEMAPS";var o;!function(e){e.INVALID_REQUEST="INVALID_REQUEST",e.OK="OK",e.OVER_QUERY_LIMIT="OVER_QUERY_LIMIT",e.REQUEST_DENIED="REQUEST_DENIED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.ZERO_RESULTS="ZERO_RESULTS"}(o||(o={}));class s extends i{constructor(e,t,n){super(e),this.category=a,this.sourceName="GPA",this.type="ADDRESS",this.version=n;const i={accessToken:t,locale:e,version:n},o=new Promise(((e,t)=>{setTimeout((()=>{t(new Error("Timeout: Map API initialization took too long"))}),1e4)}));this.ready=Promise.race([(0,r.initGoogleMapsApi)(!1,i,!1),o]).then((()=>(this.google=window.google,this.initGooglePlacesService(),!0))).catch((e=>(console.error(e),!1)))}static getInstance(e,t,n){const r=e||"en_US",i=t||"AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68";return r in this.instances||(this.instances[r]=new s(r,i,n)),this.instances[r]}isReady(){return this.ready}initGooglePlacesService(){if(this.google&&this.google.maps&&this.google.maps.places){const{AutocompleteService:e,PlacesService:t}=this.google.maps.places;this.googleAutoCompleteService=new e,this.placesService=new t(document.createElement("div"))}}fetchResults(e){const t={input:e.q,type:"ADDRESS_AUTOCOMPLETE"===e.rc?["geocode"]:void 0};return new Promise((n=>{this.googleAutoCompleteService?this.googleAutoCompleteService.getPlacePredictions(t,((t,r)=>{if(r===o.OK){const r=(i=this.handleResponse(t),{q:e.q,rc:e.rc,rid:e.rid,sr:i});n(r)}else n(e);var i})):n(e)}))}fetchLocation(e){return this.isReady().then((t=>new Promise(((n,r)=>{if(!1==!t)try{const t={placeId:e,fields:["geometry"]};this.placesService.getDetails(t,((t,i)=>{var a;if(i===o.OK){const e=null===(a=null==t?void 0:t.geometry)||void 0===a?void 0:a.location;n(e?{lat:e.lat().toFixed(5),lng:e.lng().toFixed(5)}:void 0)}else i===o.ZERO_RESULTS?n(void 0):r(new Error(`Failed to fetch location for placeId ${e}: ${i}`))}))}catch(i){r(new Error(`Failed to fetch location for placeId ${e}: ${i.message}`))}else r(new Error(`Unable to fetch location for placeId ${e}: PlacesService is not initialized`))}))))}handleResponse(e){const t=[];return e.forEach(((e,n)=>{t.push(this.toEssResult(e.description,e.place_id,n))})),t}}s.instances={};const l={google:s};class c{static getInstance(e,t,n,r){return l[e].getInstance(t,n,r)}static filterThirdPartyAdapterFromEssConfig(e){return e.filter((e=>e in l))}}var u,d;!function(e){e.HOTEL="HOTEL",e.AIRPORT="AIRPORT",e.MULTICITY="MULTICITY",e.POI="POI",e.METROCODE="METROCODE",e.METROSTATION="METROSTATION",e.TRAINSTATION="TRAINSTATION",e.ADDRESS="ADDRESS",e.NEIGHBORHOOD="NEIGHBORHOOD",e.CURRENT_LOCATION="CURRENT_LOCATION",e.PREMISE="PREMISE",e.BUSSTATION="BUSSTATION",e.ACTIVITY="ACTIVITY",e.ATTRACTION="ATTRACTION",e.CITY="CITY"}(u||(u={})),function(e){e.GOOGLE="google",e.CONSISTENT_DISPLAY="consistent_display"}(d||(d={}));class h{constructor(e){this.viewSize=0,this.isGeoLocationAllowed=!0,this.config=e,this.config.getDevice=this.getDevice}setTypeaheadCategories(){const{formatText:e}=this.l10n;this.ESSCategories={ACTIVITY:e("typeahead.ess.attraction"),ADDRESS:e("typeahead.ess.address"),AIRPORT:e("typeahead.ess.airport"),ATTRACTION:e("typeahead.ess.attraction"),BUSSTATION:e("typeahead.ess.transit"),CITY:e("typeahead.ess.city"),HOTEL:e("typeahead.ess.hotel"),LISTING:e("typeahead.ess.property"),METROCODE:e("typeahead.ess.city"),METROSTATION:e("typeahead.ess.transit"),MULTICITY:e("typeahead.ess.city"),MULTIREGION:e("typeahead.ess.city"),NEIGHBORHOOD:e("typeahead.ess.city"),POI:e("typeahead.ess.attraction"),PREMISE:e("typeahead.ess.property"),TRAINSTATION:e("typeahead.ess.transit"),CURRENT_LOCATION:""}}isHistoryDetailEnabled(){return!0===this.config.historyDetail}getConfig(){return this.config}getTypeaheadCategories(){return this.ESSCategories}addToESSCategories(e){this.ESSCategories=Object.assign(Object.assign({},this.ESSCategories),e)}setL10n(e){this.l10n=e}createURLParams(e){return Object.entries(e).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}fetchDeleteRecentSearch(e){const t=`${this.config.domain.endsWith("/")?this.config.domain:`${this.config.domain}/`}api/v1/deletehistory`,n={lob:this.config.lob,locale:this.config.locale,guid:this.config.guid,expuserid:this.config.expuserid,siteId:this.config.siteId,dest:this.config.dest},r=`${t}?${this.createURLParams(n)}`,i=new Headers({accept:"application/json","Content-Type":"application/json"});if(""!==e){const t={gaiaIds:[e]};return fetch(r,{body:JSON.stringify(t),headers:i,method:"POST"}).then((e=>e.json())).catch((e=>{console.error(`Error while deleting recent searches: ${e}`)}))}return Promise.resolve([])}constructURL(e,t){let n=this.config.domain?this.config.domain:"";n=n.endsWith("/")?n:`${n}/`,n.endsWith("/")&&(n=n.slice(0,-1));const r=(()=>"AIRLINE"===this.config.domainId?`${n}/api/v2/suggest`:`${n}/api/v4/typeahead`)();if(void 0!==this.config.browser&&null!==this.config.browser||(this.config.browser=this.getBrowser(window.navigator.userAgent)),void 0!==this.config.device&&null!==this.config.device||(this.config.device=this.getDevice(window.navigator.userAgent)),"AIRLINE"===this.config.domainId){const t={domainId:this.config.domainId,lob:this.config.lob,maxResults:this.config.maxResults,siteid:this.config.siteId,locale:this.config.locale};return`${r}?query=${e}&${this.createURLParams(t)}`}const i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({browser:this.config.browser,client:this.config.client,dest:this.config.dest,device:this.config.device,expuserid:this.config.expuserid?this.config.expuserid:-1,features:this.config.features,format:"json",guid:this.config.guid,listing:!!this.config.listing,lob:this.config.lob,locale:this.config.locale,maxresults:this.config.maxResults,personalize:!!this.config.personalize&&this.config.personalize},this.config.regionId?{rid:this.config.regionId}:{}),{regiontype:this.config.regionType,siteid:this.config.siteId,ignorePrefillSearchTermForAlternateDestinationsRequest:this.config.ignorePrefillSearchTermForAlternateDestinationsRequest}),this.config.packageType?{pt:this.config.packageType}:{}),this.config.latLong?{latlong:this.config.latLong}:{}),this.config.lastSearchRegionId?{lsrid:this.config.lastSearchRegionId}:{}),this.config.lastSearchTimestamp?{lstime:this.config.lastSearchTimestamp}:{}),this.config.lastSearchLatLong?{lslatlong:this.config.lastSearchLatLong}:{}),this.config.lastSearchElapseTime?{lsetime:this.config.lastSearchElapseTime}:{}),this.config.googleApiKey?{googleApiKey:this.config.googleApiKey}:{}),this.config.googleApiVersion?{googleApiVersion:this.config.googleApiVersion}:{}),this.config.alternate&&t?{alternate:!0}:{}),this.config.debounceVariant?{ab:this.config.debounceVariant}:{}),this.config.trending?{trending:this.config.trending}:{}),this.config.alternateSecondVariant?{alternateSecondVariant:this.config.alternateSecondVariant}:{}),this.config.drivable?{drivable:this.config.drivable}:{}),this.config.fetchLocation?{fetchLocation:this.config.fetchLocation}:{}),this.config.popularFilter?{popularFilter:this.config.popularFilter}:{});return""===e?`${r}/?${this.createURLParams(i)}`:`${r}/${e}?${this.createURLParams(i)}`}fetchResponse(e,t){var n,r;const i=this.config&&this.config.personalize;return""===e&&i||""!==e?(null===(r=(n=this.config).logRequest)||void 0===r||r.call(n,e),fetch(this.constructURL(e,t),Object.assign({method:"AIRLINE"===this.config.domainId?"POST":"GET"},this.config.xPageId&&{headers:{"x-page-id":this.config.xPageId}})).then((e=>e.json()))):Promise.resolve([])}fetchResults(e,t){const n=t?"":e;return this.fetchResponse(n,t).then((e=>this.handleEssResponse(e))).then((e=>this.logResponse(e))).then((e=>this.adaptResponseToTypeaheadResults(e,n,this.config.historyDetail,this.config.historyDetailFormatVariant))).then((e=>this.categorizeOnFocusResponse(e,t)))}fetchRecentSearchResults(){return this.fetchResults("")}fetchAlternativeResults(e){return this.fetchResults(e,this.config.alternate||this.config.ignorePrefillSearchTermForAlternateDestinationsRequest)}fetchResultsCategorized(e){return this.fetchResponse(e).then((e=>this.handleEssResponse(e))).then((e=>this.logResponse(e))).then((t=>this.adaptResponseToTypeaheadResults(t,e,this.config.historyDetail,this.config.historyDetailFormatVariant))).then((e=>this.categorizeResponse(e)))}fetchRecentSearchResultsCategorized(){return this.fetchResultsCategorized("")}categorizeResponse(e){const t=new Map,n=[];let r=0;if(e&&e.length>0){e.forEach((e=>{var n;const r=(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)?this.ESSCategories[e.data.type]:"";t[r]||(t[r]=[]),t[r].push(e)}));for(const[e,i]of Object.entries(t)){i.forEach((e=>{e.data.index=r,r++}));const t={heading:e,typeaheadResults:i};n.push(t)}}return n}onFocusCategories(){const{formatText:e}=this.l10n;return Object.assign({CURRENTLOCATION:"",POPULAR:e("typeahead.ess.popular")||"Explore popular destinations",DRIVABLE:e("typeahead.ess.nearby")||"Nearby locations"},this.config.alternateSecondVariant?{USERHISTORY:e("typeahead.ess.history")||"Recent searches",ALTERNATE:e("typeahead.ess.alternate")||"People also searched"}:{ALTERNATE:e("typeahead.ess.alternate")||"People also searched",USERHISTORY:e("typeahead.ess.history")||"Recent searches"})}categorizeOnFocusResponse(e,t){var n,r;if(e&&e.length>0){const i=e[0];if("ALTERNATE"===i.data.category||"CURRENTLOCATION"===i.data.category||"POPULAR"===i.data.category||"DRIVABLE"===i.data.category&&this.config.drivable||"USERHISTORY"===i.data.category&&this.config.alternate&&t){const i=new Map,a=[],o=this.onFocusCategories();let s=0;e.forEach((e=>{if(e.data.category){const t=e.data.category;i[t]||(i[t]=[]),i[t].push(e)}}));for(const[e,t]of Object.entries(o)){const n=i[e];if(n&&n.length>0){n.forEach((e=>{e.data.index=s,e.data.displayType="CATEGORIZED",s+=1}));const e={heading:t,typeaheadResults:n};a.push(e)}}return(t||this.config.showCurrentLocation)&&(this.response.sr=a.flatMap((e=>e.typeaheadResults.map((e=>e.data)))),null===(r=(n=this.config).logResponse)||void 0===r||r.call(n,this.response)),a}}return e}onItemSelection(e){return(null==e?void 0:e.type)===u.CURRENT_LOCATION?this.handleCurrentLocationSelection(e):this.config.fetchLocation&&(null==e?void 0:e.type)===u.ADDRESS&&e.category===a&&e.sourceId&&"function"==typeof this.thirdPartyFallbackAdapter.fetchLocation?this.fillLocation(this.thirdPartyFallbackAdapter.fetchLocation.bind(this.thirdPartyFallbackAdapter),e.sourceId,e):Promise.resolve(e)}handleCurrentLocationSelection(e){if(this.isGeoLocationAllowed)return this.readCurrentLocation().then((({coords:{latitude:t,longitude:n}})=>Object.assign(Object.assign({},e),{location:{lat:t.toFixed(5),long:n.toFixed(5)}}))).catch((e=>{throw this.isGeoLocationAllowed=!1,e}));const t=this.l10n.formatText("typeahead.currentLocation.blocked.message");return window.alert(t),Promise.reject(t)}fillLocation(e,t,n){return e(t).then((e=>{if(e){const{lat:t,lng:r}=e;return Object.assign({location:{lat:t,long:r}},n)}return n}))}readCurrentLocation(){return new Promise(((e,t)=>{window.navigator.geolocation.getCurrentPosition(e,t)}))}handleEssResponse(e){return e.sr=e.sr||e.suggestions||[],this.thirdPartyFallbackAdapter||this.setThirdPartyAdapter(),!this.thirdPartyFallbackAdapter||"GOOGLE_AUTOCOMPLETE"!==e.rc&&"ADDRESS_AUTOCOMPLETE"!==e.rc?Promise.resolve(e):this.thirdPartyFallbackAdapter.fetchResults(e)}setThirdPartyAdapter(){const e=c.filterThirdPartyAdapterFromEssConfig(this.config.features.split("|"));let t;if(e.length>0){const n=e[0];t=c.getInstance(n,this.config.locale,"google"===n?this.config.googleApiKey:void 0,"google"===n?this.config.googleApiVersion:void 0),this.thirdPartyFallbackAdapter=t}}logResponse(e){var t,n;return null===(n=(t=this.config).logResponse)||void 0===n||n.call(t,e),this.response=e,Promise.resolve(e)}adaptResponseToTypeaheadResults(e,t,n,r){const i=(e,t,n,i)=>i?e("typeahead.recentHistory.travelers",n):r?e("typeahead.recentHistory.travelersRooms",n,t):e("typeahead.recentHistory.roomsTravelers",t,n),a=e=>"LISTING"===(null==e?void 0:e.type)&&e.listingProps?e.listingProps.headline:void 0,o=e=>"LISTING"===(null==e?void 0:e.type)&&e.listingProps?{subtext:`${e.listingProps.listingId} - ${e.listingProps.baseLocation}`}:void 0,s=(e,a)=>{let o,s;if("USERHISTORY"===e&&n&&void 0!==this.l10n&&a&&a.searchDetail&&a.searchDetail.lob&&!t){let e="";const t=a.searchDetail,{formatDateString:n,formatText:l}=this.l10n,c=t.roomCount,u=t.lob,d=a.searchDetail.totalTravelerCount?Number(a.searchDetail.totalTravelerCount):null;if(a.searchDetail.startDate&&a.searchDetail.endDate){const a=new Date(t.startDate),h=6e4*a.getTimezoneOffset(),p=n(new Date(a.getTime()+h),{skeleton:"MMMd"}),f=new Date(t.endDate),m=6e4*f.getTimezoneOffset(),g=n(new Date(f.getTime()+m),{skeleton:"MMMd"}),v=l("datePicker.nightSummary",(Number(t.endDate)-Number(t.startDate))/864e5);o=`${p} - ${g}`,s=l("typeahead.recentHistory.aceessibility.dates",p,g),1!==c||"Lodging"!==u&&"Package"!==u?"Lodging"!==u&&"Package"!==u||(r?o=`${p} - ${g}`:(o=`${p} - ${g} | ${v}`,s=s.concat(`, ${v}`))):(e=i(l,c,d,this.config.excludeRoomsLabelForRecentHistory),r?(o=`${p} - ${g} â¢ ${e}`,s=s.concat(`, ${e}`)):(o=`${p} - ${g} | ${v} | ${e}`,s=s.concat(`, ${v}, ${e}`)))}else a.searchDetail.startDate||a.searchDetail.endDate||1!==c||"Lodging"!==u&&"Package"!==u||(o=i(l,c,d,this.config.excludeRoomsLabelForRecentHistory))}return{subtext:o,a11yLabel:s}},l=e=>{var t,n,r,i,l;const{subtext:c,a11yLabel:u}=s(e.category,e)||o(e);if(this.config.features.indexOf(d.CONSISTENT_DISPLAY)<0){return{primaryText:(null===(t=e.regionNames)||void 0===t?void 0:t.displayName)||(null===(n=e.names)||void 0===n?void 0:n.displayName)||a(e),subtext:c,a11yLabel:u}}const h=(null===(r=e.regionNames)||void 0===r?void 0:r.primaryDisplayName)||(null===(i=e.names)||void 0===i?void 0:i.displayName)||a(e);if(c)return{primaryText:`${h}`,subtext:c,a11yLabel:u};return{primaryText:`${h}`,subtext:(null===(l=e.regionNames)||void 0===l?void 0:l.secondaryDisplayName)||o(e)||""}},c=(e,t,n,r,i)=>{if("AIRLINE"===e)return"";if(n&&!r)return"subdirectory_arrow_right";if("USERHISTORY"===i)return"history";if("FLIGHTS"===this.config.lob)return"lob_flights";switch(e){case"HOTEL":return"lob_hotels";case"AIRPORT":return"lob_flights";case"ADDRESS":return"RENTALLOCATION"===t?"lob_cars":"place";case"METROSTATION":case"TRAINSTATION":return"train";default:return"place"}},u=(e,n,r)=>{var i,a,o,s,u,d,h,p,f,m,g,v,y,E;const b=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("nearby")>-1,S=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("child")>-1||b,{primaryText:T,subtext:R,a11yLabel:O}=l(n),_=Object.assign(Object.assign({data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.category?{category:n.category}:{}),!t&&n.searchDetail?{searchDetail:n.searchDetail}:{}),n.userHistoryType?{userHistoryType:n.userHistoryType}:{}),(null===(i=n.ids)||void 0===i?void 0:i.id)?{id:n.ids.id}:{}),n.coordinates?{location:{lat:n.coordinates.lat,long:n.coordinates.long}}:{}),n.regionId?{regionId:n.regionId}:n.gaiaId?{regionId:n.gaiaId}:{}),n.cityId?{cityId:n.cityId}:{}),n.regionNames?{regionNames:n.regionNames}:{}),n.type?{type:n.type}:{}),n.subtype?{subtype:n.subtype}:{}),n.hotelId?{selected:n.hotelId}:{}),n.hierarchyInfo?{hierarchyInfo:n.hierarchyInfo}:{}),"LISTING"===n.type&&n.listingProps?{listing:n.listingProps}:{}),n.sourceId?{sourceId:n.sourceId}:{}),n.essId?{essId:{sourceId:n.essId.sourceId,sourceName:n.essId.sourceName}}:{}),{dest:this.config.dest}),{index:r+1}),icon:c(n.type||n.domainId,n.subtype,S,b,n.category)},S?{isChild:!0}:{}),{imageUrl:n.imageUrl,name:T,subtext:R,a11yLabel:O,title:(null===(a=n.regionNames)||void 0===a?void 0:a.lastSearchName)||(null===(o=n.regionNames)||void 0===o?void 0:o.shortName)||(null===(s=n.regionNames)||void 0===s?void 0:s.fullName)||(null===(u=n.listingProps)||void 0===u?void 0:u.listingId)||(null===(d=n.ids)||void 0===d?void 0:d.id),value:(null===(h=n.regionNames)||void 0===h?void 0:h.lastSearchName)||(null===(p=n.regionNames)||void 0===p?void 0:p.shortName)||(null===(f=n.regionNames)||void 0===f?void 0:f.fullName)||(null===(m=n.listingProps)||void 0===m?void 0:m.listingId)||(null===(g=n.names)||void 0===g?void 0:g.displayName)});return e.push(_),(null==n?void 0:n.filterRefinements)&&(null===(v=null==n?void 0:n.filterRefinements)||void 0===v?void 0:v.length)>0&&(null===(E=null===(y=null==n?void 0:n.filterRefinements.find((e=>{var t,n;return"popularFilter"===(null===(t=null==e?void 0:e.category)||void 0===t?void 0:t.legacyId)||"popular_group"===(null===(n=null==e?void 0:e.category)||void 0===n?void 0:n.externalId)})))||void 0===y?void 0:y.arrayOfValues)||void 0===E||E.forEach((t=>{e.push(Object.assign(Object.assign({},_),{data:Object.assign(Object.assign({},_.data),{popularFilter:[t]}),subtext:`<strong>${null==t?void 0:t.displayName}</strong>`,icon:"subdirectory_arrow_right"}))}))),e},h=""===t&&this.shouldShowCurrentLocation()?[this.getCurrentLocationItem()]:[];return(null===(f=null===(p=e.sr)||void 0===p?void 0:p.reduce)||void 0===f?void 0:f.call(p,u,h))||h;var p,f}shouldShowCurrentLocation(){return Boolean(this.config.showCurrentLocation&&"geolocation"in navigator)}getCurrentLocationItem(){const e=this.isGeoLocationAllowed?this.l10n.formatText("typeahead.currentLocation.available.item"):this.l10n.formatText("typeahead.currentLocation.blocked.item");return{data:{category:"CURRENTLOCATION",hierarchyInfo:{relation:["current"]},index:-1,enabled:this.isGeoLocationAllowed,regionNames:{fullName:"CurrentLocation"},type:u.CURRENT_LOCATION},icon:"my_location",name:e,title:e,value:e}}getBrowser(e){let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE":"Chrome"===n[1]&&(t=e.match(/\b(OPR|Edge?)\/(\d+)/),null!==t)?t.slice(1,-1).join(" ").replace("OPR","Opera").replace("Edg ","Edge "):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],t=e.match(/version\/(\d+)/i),null!==t&&n.splice(1,1,t[1]),n[0])}getDevice(e){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(e)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(e)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"Mobile":"Desktop"}}},8869:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t=h(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var E,b=n(21181),S=function(){return g((function e(t){f(this,e),v(this,"locale",void 0),v(this,"category",void 0),v(this,"sourceName",void 0),v(this,"type",void 0),v(this,"apiKey",void 0),v(this,"version",void 0),this.locale=t}),[{key:"toEssResult",value:function(e,t,n){var r=e,i="",a="",o=(r||"").split(",");return o.length<2?i=o[0].trim():(i=o[0],a=o.slice(1).map((function(e){return e.trim()})).join(", ").trim()),{category:this.category,coordinates:void 0,index:n,regionNames:{displayName:r,fullName:e,lastSearchName:e,primaryDisplayName:i,secondaryDisplayName:a},sourceId:t,sourceName:this.sourceName,type:this.type}}}])}(),T="GOOGLEMAPS";t.PlacesServiceStatus=void 0,(E=t.PlacesServiceStatus||(t.PlacesServiceStatus={})).INVALID_REQUEST="INVALID_REQUEST",E.OK="OK",E.OVER_QUERY_LIMIT="OVER_QUERY_LIMIT",E.REQUEST_DENIED="REQUEST_DENIED",E.UNKNOWN_ERROR="UNKNOWN_ERROR",E.ZERO_RESULTS="ZERO_RESULTS";var R=function(e){function n(e,t,r){var i;f(this,n),v(i=u(this,n,[e]),"google",void 0),v(i,"googleAutoCompleteService",void 0),v(i,"placesService",void 0),v(i,"ready",void 0),i.category=T,i.sourceName="GPA",i.type="ADDRESS",i.version=r;var a={accessToken:t,locale:e,version:r},o=new Promise((function(e,t){setTimeout((function(){t(new Error("Timeout: Map API initialization took too long"))}),1e4)}));return i.ready=Promise.race([b.initGoogleMapsApi(!1,a,!1),o]).then((function(){return i.google=window.google,i.initGooglePlacesService(),!0})).catch((function(e){return console.error(e),!1})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(n,e),g(n,[{key:"isReady",value:function(){return this.ready}},{key:"initGooglePlacesService",value:function(){if(this.google&&this.google.maps&&this.google.maps.places){var e=this.google.maps.places,t=e.AutocompleteService,n=e.PlacesService;this.googleAutoCompleteService=new t,this.placesService=new n(document.createElement("div"))}}},{key:"fetchResults",value:function(e){var n=this,r={input:e.q,type:"ADDRESS_AUTOCOMPLETE"===e.rc?["geocode"]:void 0};return new Promise((function(i){n.googleAutoCompleteService?n.googleAutoCompleteService.getPlacePredictions(r,(function(r,a){if(a===t.PlacesServiceStatus.OK){var o=(s=n.handleResponse(r),{q:e.q,rc:e.rc,rid:e.rid,sr:s});i(o)}else i(e);var s})):i(e)}))}},{key:"fetchLocation",value:function(e){var n=this;return this.isReady().then((function(r){return new Promise((function(i,a){if(!1==!r)try{var o={placeId:e,fields:["geometry"]};n.placesService.getDetails(o,(function(n,r){if(r===t.PlacesServiceStatus.OK){var o,s=null==n||null===(o=n.geometry)||void 0===o?void 0:o.location;i(s?{lat:s.lat().toFixed(5),lng:s.lng().toFixed(5)}:void 0)}else r===t.PlacesServiceStatus.ZERO_RESULTS?i(void 0):a(new Error("Failed to fetch location for placeId ".concat(e,": ").concat(r)))}))}catch(s){a(new Error("Failed to fetch location for placeId ".concat(e,": ").concat(s.message)))}else a(new Error("Unable to fetch location for placeId ".concat(e,": PlacesService is not initialized")))}))}))}},{key:"handleResponse",value:function(e){var t=this,n=[];return e.forEach((function(e,r){n.push(t.toEssResult(e.description,e.place_id,r))})),n}}],[{key:"getInstance",value:function(e,t,r){var i=e||"en_US",a=t||"AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68";return i in this.instances||(this.instances[i]=new n(i,a,r)),this.instances[i]}}])}(S);v(R,"instances",{});var O,_,I={google:R},x=function(){return g((function e(){f(this,e)}),null,[{key:"getInstance",value:function(e,t,n,r){return I[e].getInstance(t,n,r)}},{key:"filterThirdPartyAdapterFromEssConfig",value:function(e){return e.filter((function(e){return e in I}))}}])}();t.TypeaheadLocationType=void 0,(O=t.TypeaheadLocationType||(t.TypeaheadLocationType={})).HOTEL="HOTEL",O.AIRPORT="AIRPORT",O.MULTICITY="MULTICITY",O.POI="POI",O.METROCODE="METROCODE",O.METROSTATION="METROSTATION",O.TRAINSTATION="TRAINSTATION",O.ADDRESS="ADDRESS",O.NEIGHBORHOOD="NEIGHBORHOOD",O.CURRENT_LOCATION="CURRENT_LOCATION",O.PREMISE="PREMISE",O.BUSSTATION="BUSSTATION",O.ACTIVITY="ACTIVITY",O.ATTRACTION="ATTRACTION",O.CITY="CITY",function(e){e.GOOGLE="google",e.CONSISTENT_DISPLAY="consistent_display"}(_||(_={}));var C=function(){return g((function e(t){f(this,e),v(this,"config",void 0),v(this,"thirdPartyFallbackAdapter",void 0),v(this,"l10n",void 0),v(this,"viewSize",0),v(this,"ESSCategories",void 0),v(this,"isGeoLocationAllowed",!0),v(this,"response",void 0),this.config=t,this.config.getDevice=this.getDevice}),[{key:"setTypeaheadCategories",value:function(){var e=this.l10n.formatText;this.ESSCategories={ACTIVITY:e("typeahead.ess.attraction"),ADDRESS:e("typeahead.ess.address"),AIRPORT:e("typeahead.ess.airport"),ATTRACTION:e("typeahead.ess.attraction"),BUSSTATION:e("typeahead.ess.transit"),CITY:e("typeahead.ess.city"),HOTEL:e("typeahead.ess.hotel"),LISTING:e("typeahead.ess.property"),METROCODE:e("typeahead.ess.city"),METROSTATION:e("typeahead.ess.transit"),MULTICITY:e("typeahead.ess.city"),MULTIREGION:e("typeahead.ess.city"),NEIGHBORHOOD:e("typeahead.ess.city"),POI:e("typeahead.ess.attraction"),PREMISE:e("typeahead.ess.property"),TRAINSTATION:e("typeahead.ess.transit"),CURRENT_LOCATION:""}}},{key:"isHistoryDetailEnabled",value:function(){return!0===this.config.historyDetail}},{key:"getConfig",value:function(){return this.config}},{key:"getTypeaheadCategories",value:function(){return this.ESSCategories}},{key:"addToESSCategories",value:function(e){this.ESSCategories=c(c({},this.ESSCategories),e)}},{key:"setL10n",value:function(e){this.l10n=e}},{key:"createURLParams",value:function(e){return Object.entries(e).map((function(e){var t=a(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(encodeURIComponent(r))})).join("&")}},{key:"fetchDeleteRecentSearch",value:function(e){var t=this.config.domain.endsWith("/")?this.config.domain:"".concat(this.config.domain,"/"),n="".concat(t,"api/v1/deletehistory"),r={lob:this.config.lob,locale:this.config.locale,guid:this.config.guid,expuserid:this.config.expuserid,siteId:this.config.siteId,dest:this.config.dest},i="".concat(n,"?").concat(this.createURLParams(r)),a=new Headers({accept:"application/json","Content-Type":"application/json"});if(""!==e){var o={gaiaIds:[e]};return fetch(i,{body:JSON.stringify(o),headers:a,method:"POST"}).then((function(e){return e.json()})).catch((function(e){console.error("Error while deleting recent searches: ".concat(e))}))}return Promise.resolve([])}},{key:"constructURL",value:function(e,t){var n=this,r=this.config.domain?this.config.domain:"";(r=r.endsWith("/")?r:"".concat(r,"/")).endsWith("/")&&(r=r.slice(0,-1));var i="AIRLINE"===n.config.domainId?"".concat(r,"/api/v2/suggest"):"".concat(r,"/api/v4/typeahead");if(void 0!==this.config.browser&&null!==this.config.browser||(this.config.browser=this.getBrowser(window.navigator.userAgent)),void 0!==this.config.device&&null!==this.config.device||(this.config.device=this.getDevice(window.navigator.userAgent)),"AIRLINE"===this.config.domainId){var a={domainId:this.config.domainId,lob:this.config.lob,maxResults:this.config.maxResults,siteid:this.config.siteId,locale:this.config.locale};return"".concat(i,"?query=").concat(e,"&").concat(this.createURLParams(a))}var o=c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c({browser:this.config.browser,client:this.config.client,dest:this.config.dest,device:this.config.device,expuserid:this.config.expuserid?this.config.expuserid:-1,features:this.config.features,format:"json",guid:this.config.guid,listing:!!this.config.listing,lob:this.config.lob,locale:this.config.locale,maxresults:this.config.maxResults,personalize:!!this.config.personalize&&this.config.personalize},this.config.regionId?{rid:this.config.regionId}:{}),{},{regiontype:this.config.regionType,siteid:this.config.siteId,ignorePrefillSearchTermForAlternateDestinationsRequest:this.config.ignorePrefillSearchTermForAlternateDestinationsRequest},this.config.packageType?{pt:this.config.packageType}:{}),this.config.latLong?{latlong:this.config.latLong}:{}),this.config.lastSearchRegionId?{lsrid:this.config.lastSearchRegionId}:{}),this.config.lastSearchTimestamp?{lstime:this.config.lastSearchTimestamp}:{}),this.config.lastSearchLatLong?{lslatlong:this.config.lastSearchLatLong}:{}),this.config.lastSearchElapseTime?{lsetime:this.config.lastSearchElapseTime}:{}),this.config.googleApiKey?{googleApiKey:this.config.googleApiKey}:{}),this.config.googleApiVersion?{googleApiVersion:this.config.googleApiVersion}:{}),this.config.alternate&&t?{alternate:!0}:{}),this.config.debounceVariant?{ab:this.config.debounceVariant}:{}),this.config.trending?{trending:this.config.trending}:{}),this.config.alternateSecondVariant?{alternateSecondVariant:this.config.alternateSecondVariant}:{}),this.config.drivable?{drivable:this.config.drivable}:{}),this.config.fetchLocation?{fetchLocation:this.config.fetchLocation}:{}),this.config.popularFilter?{popularFilter:this.config.popularFilter}:{});return""===e?"".concat(i,"/?").concat(this.createURLParams(o)):"".concat(i,"/").concat(e,"?").concat(this.createURLParams(o))}},{key:"fetchResponse",value:function(e,t){var n,r,i=this.config&&this.config.personalize;return""===e&&i||""!==e?(null===(n=(r=this.config).logRequest)||void 0===n||n.call(r,e),fetch(this.constructURL(e,t),c({method:"AIRLINE"===this.config.domainId?"POST":"GET"},this.config.xPageId&&{headers:{"x-page-id":this.config.xPageId}})).then((function(e){return e.json()}))):Promise.resolve([])}},{key:"fetchResults",value:function(e,t){var n=this,r=t?"":e;return this.fetchResponse(r,t).then((function(e){return n.handleEssResponse(e)})).then((function(e){return n.logResponse(e)})).then((function(e){return n.adaptResponseToTypeaheadResults(e,r,n.config.historyDetail,n.config.historyDetailFormatVariant)})).then((function(e){return n.categorizeOnFocusResponse(e,t)}))}},{key:"fetchRecentSearchResults",value:function(){return this.fetchResults("")}},{key:"fetchAlternativeResults",value:function(e){return this.fetchResults(e,this.config.alternate||this.config.ignorePrefillSearchTermForAlternateDestinationsRequest)}},{key:"fetchResultsCategorized",value:function(e){var t=this;return this.fetchResponse(e).then((function(e){return t.handleEssResponse(e)})).then((function(e){return t.logResponse(e)})).then((function(n){return t.adaptResponseToTypeaheadResults(n,e,t.config.historyDetail,t.config.historyDetailFormatVariant)})).then((function(e){return t.categorizeResponse(e)}))}},{key:"fetchRecentSearchResultsCategorized",value:function(){return this.fetchResultsCategorized("")}},{key:"categorizeResponse",value:function(e){var t=this,n=new Map,r=[],i=0;if(e&&e.length>0){e.forEach((function(e){var r,i=null!=e&&null!==(r=e.data)&&void 0!==r&&r.type?t.ESSCategories[e.data.type]:"";n[i]||(n[i]=[]),n[i].push(e)}));for(var o=0,s=Object.entries(n);o<s.length;o++){var l=a(s[o],2),c=l[0],u=l[1];u.forEach((function(e){e.data.index=i,i++}));var d={heading:c,typeaheadResults:u};r.push(d)}}return r}},{key:"onFocusCategories",value:function(){var e=this.l10n.formatText;return c({CURRENTLOCATION:"",POPULAR:e("typeahead.ess.popular")||"Explore popular destinations",DRIVABLE:e("typeahead.ess.nearby")||"Nearby locations"},this.config.alternateSecondVariant?{USERHISTORY:e("typeahead.ess.history")||"Recent searches",ALTERNATE:e("typeahead.ess.alternate")||"People also searched"}:{ALTERNATE:e("typeahead.ess.alternate")||"People also searched",USERHISTORY:e("typeahead.ess.history")||"Recent searches"})}},{key:"categorizeOnFocusResponse",value:function(e,t){if(e&&e.length>0){var n=e[0];if("ALTERNATE"===n.data.category||"CURRENTLOCATION"===n.data.category||"POPULAR"===n.data.category||"DRIVABLE"===n.data.category&&this.config.drivable||"USERHISTORY"===n.data.category&&this.config.alternate&&t){var r,i,o=new Map,s=[],l=this.onFocusCategories(),c=0;e.forEach((function(e){if(e.data.category){var t=e.data.category;o[t]||(o[t]=[]),o[t].push(e)}}));for(var u=0,d=Object.entries(l);u<d.length;u++){var h=a(d[u],2),p=h[0],f=h[1],m=o[p];if(m&&m.length>0){m.forEach((function(e){e.data.index=c,e.data.displayType="CATEGORIZED",c+=1}));var g={heading:f,typeaheadResults:m};s.push(g)}}if(t||this.config.showCurrentLocation)this.response.sr=s.flatMap((function(e){return e.typeaheadResults.map((function(e){return e.data}))})),null===(r=(i=this.config).logResponse)||void 0===r||r.call(i,this.response);return s}}return e}},{key:"onItemSelection",value:function(e){return(null==e?void 0:e.type)===t.TypeaheadLocationType.CURRENT_LOCATION?this.handleCurrentLocationSelection(e):this.config.fetchLocation&&(null==e?void 0:e.type)===t.TypeaheadLocationType.ADDRESS&&e.category===T&&e.sourceId&&"function"==typeof this.thirdPartyFallbackAdapter.fetchLocation?this.fillLocation(this.thirdPartyFallbackAdapter.fetchLocation.bind(this.thirdPartyFallbackAdapter),e.sourceId,e):Promise.resolve(e)}},{key:"handleCurrentLocationSelection",value:function(e){var t=this;if(this.isGeoLocationAllowed)return this.readCurrentLocation().then((function(t){var n=t.coords,r=n.latitude,i=n.longitude;return c(c({},e),{},{location:{lat:r.toFixed(5),long:i.toFixed(5)}})})).catch((function(e){throw t.isGeoLocationAllowed=!1,e}));var n=this.l10n.formatText("typeahead.currentLocation.blocked.message");return window.alert(n),Promise.reject(n)}},{key:"fillLocation",value:function(e,t,n){return e(t).then((function(e){return e?c({location:{lat:e.lat,long:e.lng}},n):n}))}},{key:"readCurrentLocation",value:function(){return new Promise((function(e,t){window.navigator.geolocation.getCurrentPosition(e,t)}))}},{key:"handleEssResponse",value:function(e){return e.sr=e.sr||e.suggestions||[],this.thirdPartyFallbackAdapter||this.setThirdPartyAdapter(),!this.thirdPartyFallbackAdapter||"GOOGLE_AUTOCOMPLETE"!==e.rc&&"ADDRESS_AUTOCOMPLETE"!==e.rc?Promise.resolve(e):this.thirdPartyFallbackAdapter.fetchResults(e)}},{key:"setThirdPartyAdapter",value:function(){var e,t=x.filterThirdPartyAdapterFromEssConfig(this.config.features.split("|"));if(t.length>0){var n=t[0];e=x.getInstance(n,this.config.locale,"google"===n?this.config.googleApiKey:void 0,"google"===n?this.config.googleApiVersion:void 0),this.thirdPartyFallbackAdapter=e}}},{key:"logResponse",value:function(e){var t,n;return null===(t=(n=this.config).logResponse)||void 0===t||t.call(n,e),this.response=e,Promise.resolve(e)}},{key:"adaptResponseToTypeaheadResults",value:function(e,t,n,r){var i,a,o=this,s=function(e,t,n,i){return i?e("typeahead.recentHistory.travelers",n):r?e("typeahead.recentHistory.travelersRooms",n,t):e("typeahead.recentHistory.roomsTravelers",t,n)},l=function(e){return"LISTING"===(null==e?void 0:e.type)&&e.listingProps?e.listingProps.headline:void 0},u=function(e){return"LISTING"===(null==e?void 0:e.type)&&e.listingProps?{subtext:"".concat(e.listingProps.listingId," - ").concat(e.listingProps.baseLocation)}:void 0},d=function(e){var i,a,c,d,h,p=function(e,i){var a,l;if("USERHISTORY"===e&&n&&void 0!==o.l10n&&i&&i.searchDetail&&i.searchDetail.lob&&!t){var c="",u=i.searchDetail,d=o.l10n,h=d.formatDateString,p=d.formatText,f=u.roomCount,m=u.lob,g=i.searchDetail.totalTravelerCount?Number(i.searchDetail.totalTravelerCount):null;if(i.searchDetail.startDate&&i.searchDetail.endDate){var v=new Date(u.startDate),y=6e4*v.getTimezoneOffset(),E=h(new Date(v.getTime()+y),{skeleton:"MMMd"}),b=new Date(u.endDate),S=6e4*b.getTimezoneOffset(),T=h(new Date(b.getTime()+S),{skeleton:"MMMd"}),R=p("datePicker.nightSummary",(Number(u.endDate)-Number(u.startDate))/864e5);a="".concat(E," - ").concat(T),l=p("typeahead.recentHistory.aceessibility.dates",E,T),1!==f||"Lodging"!==m&&"Package"!==m?"Lodging"!==m&&"Package"!==m||(r?a="".concat(E," - ").concat(T):(a="".concat(E," - ").concat(T," | ").concat(R),l=l.concat(", ".concat(R)))):(c=s(p,f,g,o.config.excludeRoomsLabelForRecentHistory),r?(a="".concat(E," - ").concat(T," â¢ ").concat(c),l=l.concat(", ".concat(c))):(a="".concat(E," - ").concat(T," | ").concat(R," | ").concat(c),l=l.concat(", ".concat(R,", ").concat(c))))}else i.searchDetail.startDate||i.searchDetail.endDate||1!==f||"Lodging"!==m&&"Package"!==m||(a=s(p,f,g,o.config.excludeRoomsLabelForRecentHistory))}return{subtext:a,a11yLabel:l}}(e.category,e)||u(e),f=p.subtext,m=p.a11yLabel;if(o.config.features.indexOf(_.CONSISTENT_DISPLAY)<0)return{primaryText:(null===(d=e.regionNames)||void 0===d?void 0:d.displayName)||(null===(h=e.names)||void 0===h?void 0:h.displayName)||l(e),subtext:f,a11yLabel:m};var g=(null===(i=e.regionNames)||void 0===i?void 0:i.primaryDisplayName)||(null===(a=e.names)||void 0===a?void 0:a.displayName)||l(e);if(f)return{primaryText:"".concat(g),subtext:f,a11yLabel:m};var v=(null===(c=e.regionNames)||void 0===c?void 0:c.secondaryDisplayName)||u(e)||"";return{primaryText:"".concat(g),subtext:v}},h=function(e,t,n,r,i){if("AIRLINE"===e)return"";if(n&&!r)return"subdirectory_arrow_right";if("USERHISTORY"===i)return"history";if("FLIGHTS"===o.config.lob)return"lob_flights";switch(e){case"HOTEL":return"lob_hotels";case"AIRPORT":return"lob_flights";case"ADDRESS":return"RENTALLOCATION"===t?"lob_cars":"place";case"METROSTATION":case"TRAINSTATION":return"train";default:return"place"}},p=function(e,n,r){var i,a,s,l,u,p,f,m,g,v,y,E,b,S=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("nearby")>-1,T=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("child")>-1||S,R=d(n),O=R.primaryText,_=R.subtext,I=R.a11yLabel,x=c(c({data:c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c({},n.category?{category:n.category}:{}),!t&&n.searchDetail?{searchDetail:n.searchDetail}:{}),n.userHistoryType?{userHistoryType:n.userHistoryType}:{}),null!==(i=n.ids)&&void 0!==i&&i.id?{id:n.ids.id}:{}),n.coordinates?{location:{lat:n.coordinates.lat,long:n.coordinates.long}}:{}),n.regionId?{regionId:n.regionId}:n.gaiaId?{regionId:n.gaiaId}:{}),n.cityId?{cityId:n.cityId}:{}),n.regionNames?{regionNames:n.regionNames}:{}),n.type?{type:n.type}:{}),n.subtype?{subtype:n.subtype}:{}),n.hotelId?{selected:n.hotelId}:{}),n.hierarchyInfo?{hierarchyInfo:n.hierarchyInfo}:{}),"LISTING"===n.type&&n.listingProps?{listing:n.listingProps}:{}),n.sourceId?{sourceId:n.sourceId}:{}),n.essId?{essId:{sourceId:n.essId.sourceId,sourceName:n.essId.sourceName}}:{}),{dest:o.config.dest}),{index:r+1}),icon:h(n.type||n.domainId,n.subtype,T,S,n.category)},T?{isChild:!0}:{}),{},{imageUrl:n.imageUrl,name:O,subtext:_,a11yLabel:I,title:(null===(a=n.regionNames)||void 0===a?void 0:a.lastSearchName)||(null===(s=n.regionNames)||void 0===s?void 0:s.shortName)||(null===(l=n.regionNames)||void 0===l?void 0:l.fullName)||(null===(u=n.listingProps)||void 0===u?void 0:u.listingId)||(null===(p=n.ids)||void 0===p?void 0:p.id),value:(null===(f=n.regionNames)||void 0===f?void 0:f.lastSearchName)||(null===(m=n.regionNames)||void 0===m?void 0:m.shortName)||(null===(g=n.regionNames)||void 0===g?void 0:g.fullName)||(null===(v=n.listingProps)||void 0===v?void 0:v.listingId)||(null===(y=n.names)||void 0===y?void 0:y.displayName)});(e.push(x),null!=n&&n.filterRefinements&&(null==n||null===(E=n.filterRefinements)||void 0===E?void 0:E.length)>0)&&(null==n||null===(b=n.filterRefinements.find((function(e){var t,n;return"popularFilter"===(null==e||null===(t=e.category)||void 0===t?void 0:t.legacyId)||"popular_group"===(null==e||null===(n=e.category)||void 0===n?void 0:n.externalId)})))||void 0===b||null===(b=b.arrayOfValues)||void 0===b||b.forEach((function(t){e.push(c(c({},x),{},{data:c(c({},x.data),{},{popularFilter:[t]}),subtext:"<strong>".concat(null==t?void 0:t.displayName,"</strong>"),icon:"subdirectory_arrow_right"}))})));return e},f=""===t&&this.shouldShowCurrentLocation()?[this.getCurrentLocationItem()]:[];return(null===(i=e.sr)||void 0===i||null===(a=i.reduce)||void 0===a?void 0:a.call(i,p,f))||f}},{key:"shouldShowCurrentLocation",value:function(){return Boolean(this.config.showCurrentLocation&&"geolocation"in navigator)}},{key:"getCurrentLocationItem",value:function(){var e=this.isGeoLocationAllowed?this.l10n.formatText("typeahead.currentLocation.available.item"):this.l10n.formatText("typeahead.currentLocation.blocked.item");return{data:{category:"CURRENTLOCATION",hierarchyInfo:{relation:["current"]},index:-1,enabled:this.isGeoLocationAllowed,regionNames:{fullName:"CurrentLocation"},type:t.TypeaheadLocationType.CURRENT_LOCATION},icon:"my_location",name:e,title:e,value:e}}},{key:"getBrowser",value:function(e){var t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE":"Chrome"===n[1]&&null!==(t=e.match(/\b(OPR|Edge?)\/(\d+)/))?t.slice(1,-1).join(" ").replace("OPR","Opera").replace("Edg ","Edge "):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n[0])}},{key:"getDevice",value:function(e){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(e)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(e)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"Mobile":"Desktop"}}])}(),k=function(e,t,n){if(""===n||null===n)return e;var r=/\?/.test(e)?"&":"?",i=encodeURIComponent(t);return void 0!==n&&""!==n&&(i=i.concat("=",encodeURIComponent(n))),e+r+i};t.ESSAdapter=C,t.GOOGLEMAPS_CATEGORY=T,t.GoogleAdapter=R,t.ThirdPartyAdapter=S,t.ThirdPartyAdapterFactory=x,t.appendQueryObject=function(e,t){if(null==t)return e;var n=e;return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n=k(n,e,r))})),n},t.appendQueryParam=k,t.filterTypeaheadResults=function(e,t){switch(e.type){case"categorized":return c(c({},e),{},{items:e.items.map((function(e){return c(c({},e),{},{typeaheadResults:e.typeaheadResults.filter((function(e){return!t.includes(e.value)}))})}))});case"uncategorized":return c(c({},e),{},{items:e.items.filter((function(e){return!t.includes(e.value)}))})}},t.getSelectedResult=function(e,t){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e.push.apply(e,i(t.typeaheadResults)),e}),[])[t];case"uncategorized":return e.items[t]}},t.getSizeOfTypeaheadResults=function(e){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e+t.typeaheadResults.length}),0);case"uncategorized":return e.items.length}}},612:function(e,t,n){n.d(t,{V:function(){return s}});var r=n(96540),i=n(21181),a=n(86080),o=n.n(a);const s=({children:e,className:t,adSlot:n=!1,canvasTheme:a="primary",layout:s="fullwidth",paddedViewRow:l=!0,maxWidth:c=!1})=>{const u=i.classNames.bind(o())("view-row",`view-row-theme-${a}`,`view-row-layout-${s}`,`view-row-padded-${l}`,!c&&`view-row-adslot-${n}`,t);return r.createElement("div",{className:u,"data-testid":"view-row"},e)};s.displayName="ViewRow"},8572:function(e,t,n){n.d(t,{Rg:function(){return k}});var r=n(74848),i=n(21181),a=n(1192),o=n(96540),s=n(73700),l=n(23359),c=n.n(l),u=n(94220),d=n(48747),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const p=(e,{threshold:t=0,root:n=null,rootMargin:r="0%"})=>{const[i,a]=(0,o.useState)([]),s=JSON.stringify(e.map((e=>e.id))),l={threshold:t,root:n,rootMargin:r},c=JSON.stringify(l);return(0,o.useEffect)((()=>{if(!Boolean(window.IntersectionObserver))return;const t=[];return e.forEach(((e,n)=>{t[n]=new IntersectionObserver((e=>(([e],t)=>{a((n=>{const r=[...n];return r[t]=e,r}))})(e,n)),l),t[n].observe(e)})),e?()=>{t.forEach((e=>{e.disconnect()}))}:void 0}),[s,c]),i},f=i.classNames.bind(c()),m=e=>{const{children:t,wrapItems:n}=e;if(!o.isValidElement(t))return null;const i={className:f(`${t.props.className} egds-team-carousel-item`),"data-testid":"carousel-item"};return(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)("div",Object.assign(Object.assign({},i),{children:t})):o.cloneElement(t,i)})};m.displayName="EGDSTeamCarouselItem",m.defaultProps={wrapItems:!0};const g=i.classNames.bind(c()),v=e=>{const{children:t,carouselListRef:n,wrapItems:i,spacing:a}=e;return(0,r.jsx)(u.b,Object.assign(Object.assign({},a),{children:(0,r.jsx)("div",{className:g("egds-team-carousel-item-container"),ref:n,"data-testid":"carousel-list",children:o.Children.map(t,((e,t)=>(0,r.jsx)(m,{wrapItems:i,children:e},t)))})}))};v.displayName="EGDSTeamCarouselItemList";const y=i.classNames.bind(c());var E;!function(e){e.clickLeft="clickLeft",e.clickRight="clickRight",e.scrollLeft="scrollLeft",e.scrollRight="scrollRight"}(E||(E={}));const b=e=>{const{analytics:t,buttonText:n,carouselName:i,currentIndex:a,currentLastIndex:l,itemCount:c,itemsVisible:u,fullSheetVisible:h,loop:p,navigationIconId:f,onNextCb:m,onPrevCb:g,pagingOverlay:v,size:b,isRtl:S,hideNavOnScrollEnd:T,itemsVisibleAuto:R,isVisible:O}=e,_=null!=R?R:u[b],I=o.useRef(null),x=o.useRef(null),C="ontouchstart"in window?50:0,k=t&&Object.assign({localAnalyticsId:`${i}.Carousel.${E.clickLeft}`},t),w=t&&Object.assign({localAnalyticsId:`${i}.Carousel.${E.clickRight}`},t),D=e=>{(null==e?void 0:e.current)&&e.current.focus()},P=(0,s.s)(C,(()=>{null==g||g(),_>0&&1===a&&D(x)})),A=(0,s.s)(C,(()=>{null==m||m(),_>0&&a===c-_-1&&D(I)})),L=o.useCallback((e=>{S?"ArrowLeft"===e.key?A():"ArrowRight"===e.key&&P():"ArrowLeft"===e.key?P():"ArrowRight"===e.key&&A()}),[S,A,P]);if(o.useEffect((()=>{if(h)return document.body.addEventListener("keydown",L),()=>{document.body.removeEventListener("keydown",L)}}),[h,L]),c<=_)return null;const N=!p&&0===a,j=!p&&a===c-_||l===c-1,M=!1===O||T&&N,F=!1===O||T&&j,U=y("egds-team-carousel-button-paging","egds-team-carousel-button-prev",M&&"egds-team-carousel-button-hidden"),B=y("egds-team-carousel-button-paging","egds-team-carousel-button-next",F&&"egds-team-carousel-button-hidden");return(0,r.jsxs)("div",{className:y("egds-team-carousel-controls"),children:[(0,r.jsx)(d.b,{analytics:k,className:U,iconId:null==f?void 0:f.prev,iconTitle:n.prevButton,onClick:P,domRef:x,"data-testid":"carousel-nav-prev","aria-disabled":N||M,"aria-label":n.prevButton,tabIndex:N||M?-1:0,pagingOverlay:v}),(0,r.jsx)(d.a,{analytics:w,className:B,iconId:null==f?void 0:f.next,iconTitle:n.nextButton,onClick:A,domRef:I,"data-testid":"carousel-nav-next","aria-disabled":j||F,"aria-label":n.nextButton,tabIndex:j||F?-1:0,pagingOverlay:v})]})};b.displayName="EGDSTeamCarouselNav";new Map([["sm","sm"],["md","md"],["lg","lg"],["xl","xl"]]);const S=new Map([["h1","h1"],["h2","h2"],["h3","h3"],["h4","h4"],["h5","h5"],["h6","h6"]]),T=i.classNames.bind(c());var R;!function(e){e.clickLeft="clickLeft",e.clickRight="clickRight",e.scrollLeft="scrollLeft",e.scrollRight="scrollRight"}(R||(R={}));const O=e=>{var t,n,a;const{buttonText:l,carouselHeaderLevel:c,carouselHeaderText:u,carouselHeaderVisible:d,carouselName:h,children:f,className:m,domRef:g,fullSheetVisible:y,hideNav:E,itemsVisible:O,itemsMaxHeight:_,l10n:I,navigationIconId:x,onChange:C,onIndexChange:k,pagingInset:w,pagingOverlay:D,startIndex:P,wrapItems:A,hideNavOnScrollEnd:L,itemViewedCallback:N,onNextButtonClick:j,onPrevButtonClick:M,onScrollEnd:F,isPopoverOpenList:U,spacing:B}=e,[G,$]=o.useState(!1),[H,z]=o.useState(!1),[V,W]=o.useState(!1),[Y,q]=o.useState("sm"),[K,Q]=o.useState(!1),[X,Z]=o.useState(!1),[J,ee]=o.useState(0),te=o.useRef(!1),ne=o.useRef(!1),re=o.useRef(!1),ie=o.useRef(null);let ae=48,oe=8;const se=null!=g?g:ie,le=o.useRef(null),ce=o.useRef(null),ue=[...null!==(n=null===(t=ce.current)||void 0===t?void 0:t.children)&&void 0!==n?n:[]],de=p(ue,{}).map((e=>Boolean(null==e?void 0:e.isIntersecting))),he=p(ue,{threshold:.99}).map((e=>Boolean(null==e?void 0:e.isIntersecting))),pe=de.reduce(((e,t)=>t?e+1:e),0),fe=null!==(a=null==U?void 0:U.some(Boolean))&&void 0!==a&&a,me=null==ue?void 0:ue.length,ge=o.useRef([]),ve=o.useRef(0),ye=o.useRef(!0),Ee=o.useRef(0),be=o.useRef(0),Se=o.useRef(0),Te=o.useRef(0),Re=o.useRef(!1),Oe=()=>{Re.current||(clearTimeout(Te.current),Z(!0),Te.current=window.setTimeout((()=>Z(!1)),2e3))},_e=e=>V?-1*e:e,Ie=e=>{if(!le.current)return;let t;const n=le.current,r=_e(n.scrollLeft),i=e-r,a=o=>{t||(t=o);const{done:s,position:l}=((e,t,n,r)=>{const i=e>=350;var a;return{done:i,position:i?t:n+r*((a=e/350)<.5?2*Math.pow(a,2):1-Math.pow(-2*a+2,2)/2)}})(o-t,e,r,i);n.scrollLeft=_e(l),s||(Se.current=window.requestAnimationFrame(a))};re.current?(re.current=!1,n.scrollLeft=_e(e),$(!0)):(window.cancelAnimationFrame(Se.current),Se.current=window.requestAnimationFrame(a))},xe=()=>{const e=null==ce?void 0:ce.current;if(e){let t=getComputedStyle(e).getPropertyValue("--size")||"sm";"xl"!==t||O.xl||(t="lg"),q(t),K||Q(!0)}},Ce=(e,t)=>{if(!ce.current||!le.current)return;const{width:n,left:r}=ce.current.getBoundingClientRect(),{width:i}=le.current.getBoundingClientRect(),{left:a,right:o}=ue[e].getBoundingClientRect(),{right:s}=ue[0].getBoundingClientRect();let l=0;V?e===me-1?l=s-a-i:t===R.scrollRight&&e>0?l=Math.ceil(s-(a+o)/2):t===R.scrollLeft&&(l=Math.floor(s-i-(a+o)/2)):e===me-1?l=Math.ceil(n-i):t===R.scrollRight?l=Math.ceil((a+o)/2-i-r):t===R.scrollLeft&&e>0&&(l=Math.floor((a+o)/2-r)),te.current=!0,Ie(l)},ke=JSON.stringify(de);o.useEffect((()=>{Ee.current=V?de.lastIndexOf(!0):de.indexOf(!0),be.current=V?de.indexOf(!0):de.lastIndexOf(!0),de.forEach(((e,t)=>{e&&!ge.current[t]&&(null==N||N(t),ge.current[t]=!0)}))}),[ke]),o.useEffect((()=>{G&&(()=>{if(le.current){const e=le.current.querySelectorAll('\n          .egds-team-carousel-item:not([data-hidden="true"]) h1:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h2:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h3:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h4:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h5:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h6:not([aria-hidden="true"])\n        '),t=Array.from(e).map((e=>e.innerText||e.textContent));t.length>0?setTimeout((()=>{(0,i.liveAnnounce)(I.formatText("carousel.cardChange",t.join(", ")),i.Level.POLITE)}),200):setTimeout((()=>{(0,i.liveAnnounce)(I.formatText("gallerycarousel.imageChange",Ee.current+1,me,""),i.Level.POLITE)}),200)}})(),null==k||k(Ee.current)}),[K]),o.useEffect((()=>{xe(),le.current&&(le.current.scrollLeft=0),P?re.current=!0:$(!0),(()=>{const e=se.current;e&&(ae=16*parseInt(getComputedStyle(e).getPropertyValue("--peek-width"),10)||ae,oe=16*parseInt(getComputedStyle(e).getPropertyValue("--item-padding"),10)||oe)})(),"ontouchstart"in window&&z(!0),"rtl"===document.querySelector("html").getAttribute("dir")&&W(!0),(0,i.liveAnnounce)("")}),[K]),o.useEffect((()=>{let e=window.innerWidth;const t=(0,s.s)(200,(()=>{e!==window.innerWidth&&(e=window.innerWidth,xe())}));return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[Y]),o.useEffect((()=>{null==C||C(le),(()=>{if(le.current){const e=le.current.querySelectorAll(".egds-team-carousel-item");Array.from(e).forEach((e=>{const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Array.from(t).filter((e=>!e.hasAttribute("aria-hidden"))).forEach((t=>t[e.hasAttribute("aria-hidden")?"setAttribute":"removeAttribute"]("tabindex","-1")))}))}})()})),o.useEffect((()=>{ee(fe?-ve.current:0)}),[fe]);const we=o.useCallback((e=>{e.key&&(te.current=!0,ne.current=!1)}),[]);o.useEffect((()=>(document.body.addEventListener("keydown",we),()=>{document.body.removeEventListener("keydown",we)})),[we]);const De=he[he.length-1],Pe=de[de.length-1],Ae=o.useRef(!0);o.useEffect((()=>{Ae.current&&De?(null==F||F(),Ae.current=!1):Pe||(Ae.current=!0)}),[De,Pe]);const Le={marginInlineStart:J};Le["--carousel-item-count"]=O[Y],Le["--carousel-item-count-sm"]=O.sm,Le["--carousel-item-count-md"]=O.md,Le["--carousel-item-count-lg"]=O.lg,Le["--carousel-item-count-xl"]=O.xl?O.xl:O.lg;const Ne=T("egds-team-carousel","no-peek",!w&&"no-inset",!H&&"no-touch",_&&"items-max-height",m,{[Y]:!!Y&&!0},fe&&"popover-sheet-open"),je={buttonText:l,carouselName:h,currentIndex:V?be.current:Ee.current,currentLastIndex:V?Ee.current:be.current,itemCount:me,itemsVisible:O,fullSheetVisible:y,navigationIconId:x,onNextCb:()=>{null==j||j(),V?(Ee.current=Math.min(Ee.current+1,me-1),Ce(Ee.current,R.scrollLeft)):(be.current=Math.min(be.current+1,me-1),Ce(be.current,R.scrollRight))},onPrevCb:()=>{null==M||M(),V?(be.current=Math.max(be.current-1,0),Ce(be.current,R.scrollRight)):(Ee.current=Math.max(Ee.current-1,0),Ce(Ee.current,R.scrollLeft))},pagingOverlay:D,size:Y,isRtl:V,hideNavOnScrollEnd:L,itemsVisibleAuto:pe,isVisible:X},Me=c&&S.get(c)||S.get("h3");return(0,r.jsxs)("div",{className:Ne,ref:se,"data-testid":"carousel-wrapper",children:[u&&(0,r.jsx)(Me,{className:T({"is-visually-hidden":!d}),children:u}),(0,r.jsx)("div",{className:T(""+(fe?"":"egds-team-carousel-container")),"aria-label":u,ref:le,onScroll:()=>{if(!le.current)return;const e=_e(le.current.scrollLeft);e>ve.current?ye.current=!0:ye.current=!1,ve.current=e,Oe()},"data-testid":"carousel-container",style:Le,onClick:Oe,onKeyDown:Oe,onMouseEnter:()=>{"sm"!==Y&&(Re.current=!0,clearTimeout(Te.current),Z(!0))},onMouseLeave:()=>{"sm"!==Y&&(Re.current=!1,Te.current=window.setTimeout((()=>Z(!1)),2e3))},children:(0,r.jsx)(v,{wrapItems:A,carouselListRef:ce,spacing:B,children:f})}),!E&&(0,r.jsx)(b,Object.assign({},je))]})},_=e=>{const t=(0,a.useLocalization)();return(0,r.jsx)(O,Object.assign({l10n:t},e))};_.displayName="EGDSTeamCarouselAutoWidth",_.defaultProps={hideNav:!1,itemsMaxHeight:!1,navigationIconId:{next:"next-button",prev:"prev-button"},pagingInset:!1,pagingOverlay:!1,startIndex:0,wrapItems:!0,hideNavOnScrollEnd:!1};const I=i.classNames.bind(c()),x=e=>{const{analytics:t,buttonText:n,carouselHeaderLevel:a,carouselHeaderText:l,carouselHeaderVisible:c,carouselName:u,carouselRef:d,children:h,className:p,domRef:f,fullSheetVisible:m,hideNav:g,itemsVisible:y,itemsMaxHeight:T,l10n:R,loop:O,navigationIconId:_,onChange:x,onIndexChange:C,pageBy:k=1,pagingInset:w,pagingOverlay:D,peek:P,shouldSnapOnScroll:A,startIndex:L,stretchToFill:N,wrapItems:j,hideNavOnScrollEnd:M}=e,[F,U]=o.useState(!1),[B,G]=o.useState(0),[$,H]=o.useState(!1),[z,V]=o.useState(!1),[W,Y]=o.useState("sm"),[q,K]=o.useState(!1),Q=o.useRef(!1),X=o.useRef(!1),Z=o.useRef(!1),J=o.useRef(null);let ee=48,te=12;const ne=o.Children.count(h),re=null!=f?f:J,ie=o.useRef(null),ae=o.useRef(null),oe=y[W],se=o.useRef([]),le=o.useRef(0),ce=o.useRef(0),ue=o.useRef(!0),de=()=>{let n=oe;P&&(n+=1);for(let r=0;r<n&&B+r<o.Children.count(h);++r)se.current[B+r]||(se.current[B+r]=!0,"function"==typeof e.itemViewedCallback&&e.itemViewedCallback(B+r),t&&(0,i.analyticsTracker)(t,`${u}.Carousel.itemViewed.${B+r}`,""))},he=o.useCallback((e=>{t&&(0,i.analyticsTracker)(t,`${u}.Carousel.${e?E.scrollRight:E.scrollLeft}`,"")}),[t,u]),pe=()=>{if(ie.current){const e=ie.current,{scrollLeft:t,scrollWidth:n}=e,r=e.getBoundingClientRect().width,i=le.current,a=Math.abs(t),o=ne>1&&a>Math.round(n-r-5)?1:0;return Math.floor(a/i)+o}return 0},fe=e=>{const t=ne-oe,n=(e=>!0===ue.current?e+1:e)(e);return n>t?t:n},me=e=>z?-1*e:e,ge=e=>{let t;if(ie.current){const n=ie.current,r=me(n.scrollLeft),i=e-r,a=o=>{t||(t=o);const{done:s,position:l}=((e,t,n,r)=>{const i=e>=350;var a;return{done:i,position:i?t:n+r*((a=e/350)<.5?2*Math.pow(a,2):1-Math.pow(-2*a+2,2)/2)}})(o-t,e,r,i);n.scrollLeft=me(l),s||window.requestAnimationFrame(a)};Z.current?(Z.current=!1,n.scrollLeft=me(e),U(!0)):window.requestAnimationFrame(a),he(i>0),ce.current=e}},ve=o.useCallback((0,s.s)(200,(()=>{if(X.current)return X.current=!1,!1;if(ie.current){const e=ie.current,t=me(e.scrollLeft);if(Math.abs(t-ce.current)<1||Q.current)return;t>ce.current?ue.current=!0:ue.current=!1;const n=le.current,r=fe(pe()),i=n*r,a=i-t,o=e.scrollWidth-e.clientWidth;if(0===a&&t>0&&t<o)return;if(A){ge(i-(P&&0!==r?(ee+te)/2:0))}else(()=>{if(ie.current){const e=ie.current.scrollLeft,t=e-ce.current>0;he(t),ce.current=e}})();G(r)}})),[W,z]),ye=o.useCallback((e=>{e.key&&(Q.current=!0,X.current=!1)}),[W,z]);o.useEffect((()=>(document.body.addEventListener("keydown",ye),()=>{document.body.removeEventListener("keydown",ye)})),[ye]);const Ee=()=>{if(ie.current){const e=ie.current.getBoundingClientRect().width,t=P?te+ee:0;le.current=(e-(oe-1)*te-t)/oe+te}},be=()=>{const e=null==ae?void 0:ae.current;if(e){Ee();let t=getComputedStyle(e).getPropertyValue("--size")||"sm";"xl"!==t||y.xl||(t="lg"),Y(t),q||K(!0)}},Se=e=>{const t=k>oe?oe:k;let n=1===e?B+Number(t):B-Number(t);const r=ne-oe;n<0?n=O?ne-1:0:n===r?n=r:n>r&&(n=O?0:r),Q.current=!0,G(n)},Te=()=>{Se(-1)},Re=()=>{Se(1)},Oe=e=>{let t;Q.current=!0;const n=ne-oe;t=e<0?0:e>=n?n:e,G(t)};return o.useEffect((()=>{if(F&&(()=>{if(ie.current){const e=ie.current.querySelectorAll('\n          .egds-team-carousel-item:not([data-hidden="true"]) h1:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h2:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h3:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h4:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h5:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([data-hidden="true"]) h6:not([aria-hidden="true"])\n        '),t=Array.from(e).map((e=>e.innerText||e.textContent));t.length>0?setTimeout((()=>{(0,i.liveAnnounce)(R.formatText("carousel.cardChange",t.join(", ")),i.Level.POLITE)}),200):setTimeout((()=>{(0,i.liveAnnounce)(R.formatText("gallerycarousel.imageChange",B+1,ne,""),i.Level.POLITE)}),200)}})(),q&&de(),Q.current){Q.current=!1,X.current=!0;const e=P&&0!==B?(ee+te)/2/B:0;ge(B*(le.current-e))}C&&C(B)}),[B,q]),o.useEffect((()=>{be(),ie.current&&(ie.current.scrollLeft=0),L?(Z.current=!0,Oe(L)):U(!0),(()=>{const e=re.current;e&&(ee=16*parseInt(getComputedStyle(e).getPropertyValue("--peek-width"),10)||ee,te=16*parseInt(getComputedStyle(e).getPropertyValue("--item-padding"),10)||te)})(),"ontouchstart"in window&&H(!0),"rtl"===document.querySelector("html").getAttribute("dir")&&V(!0),(0,i.liveAnnounce)(""),q&&de()}),[q]),o.useEffect((()=>{let e=window.innerWidth;const t=(0,s.s)(200,(()=>{if(e===window.innerWidth)return;e=window.innerWidth,be();const t=pe();G(t);const n=P&&0!==t?(ee+te)/2/t:0;ge(t*(le.current-n))}));return window.addEventListener("resize",t),Ee(),()=>window.removeEventListener("resize",t)}),[W,B]),o.useEffect((()=>{x&&x(ie),(()=>{if(ie.current){const e=ie.current.querySelectorAll(".egds-team-carousel-item");Array.from(e).forEach((e=>{const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Array.from(t).filter((e=>!e.hasAttribute("aria-hidden"))).forEach((t=>t[e.hasAttribute("aria-hidden")?"setAttribute":"removeAttribute"]("tabindex","-1")))}))}})()})),o.useImperativeHandle(d,(()=>({changeIndex:e=>Oe(e)}))),(()=>{const e={};e["--carousel-item-count"]=y[W],e["--carousel-item-count-sm"]=y.sm,e["--carousel-item-count-md"]=y.md,e["--carousel-item-count-lg"]=y.lg,e["--carousel-item-count-xl"]=y.xl?y.xl:y.lg;const i=I("egds-team-carousel",(!P||!(oe<ne))&&"no-peek",!w&&"no-inset",!$&&"no-touch",T&&"items-max-height",p,{[W]:!!W&&!0}),o={analytics:t,buttonText:n,carouselName:u,currentIndex:B,itemCount:ne,itemsVisible:y,fullSheetVisible:m,loop:O,navigationIconId:_,onNextCb:Re,onPrevCb:Te,pagingOverlay:D,size:W,isRtl:z,hideNavOnScrollEnd:M},s=a&&S.get(a)||S.get("h3");return(0,r.jsxs)("div",{className:i,ref:re,"data-testid":"carousel-wrapper",children:[l&&(0,r.jsx)(s,{className:I({"is-visually-hidden":!c}),children:l}),(0,r.jsx)("div",{className:I("egds-team-carousel-container"),"aria-label":l,ref:ie,onScroll:ve,"data-testid":"carousel-container",style:e,tabIndex:0,children:(0,r.jsx)(v,{itemsVisible:y,size:W,currentIndex:B,peek:P,wrapItems:j,stretchToFill:N,carouselListRef:ae,children:h})}),!g&&(0,r.jsx)(b,Object.assign({},o))]})})()},C=e=>{const t=(0,a.useLocalization)();return(0,r.jsx)(x,Object.assign({l10n:t},e))};C.displayName="EGDSTeamCarouselFixedWidth",C.defaultProps={hideNav:!1,itemsMaxHeight:!1,navigationIconId:{next:"next-button",prev:"prev-button"},pagingInset:!1,pagingOverlay:!1,shouldSnapOnScroll:!1,startIndex:0,stretchToFill:!0,wrapItems:!0,hideNavOnScrollEnd:!1};const k=e=>{const{itemsVisible:t,children:n}=e,i=h(e,["itemsVisible","children"]);return"auto"===t.sm&&"auto"===t.md&&"auto"===t.lg&&"auto"===t.xl?(0,r.jsx)(_,Object.assign(Object.assign({},i),{itemsVisible:t,children:n})):"auto"===t.sm||"auto"===t.md||"auto"===t.lg||"auto"===t.xl?null:(0,r.jsx)(C,Object.assign(Object.assign({},i),{itemsVisible:t,children:n}))};k.displayName="CarouselInnerSpacingAndOverflow",k.defaultProps={hideNav:!1,itemsMaxHeight:!1,navigationIconId:{next:"next-button",prev:"prev-button"},pagingInset:!1,pagingOverlay:!1,shouldSnapOnScroll:!1,startIndex:0,stretchToFill:!0,wrapItems:!0,hideNavOnScrollEnd:!1};i.classNames.bind(c())},16471:function(e){function t(e){e=e||{},this.startDate=e.startDate,this.endDate=e.endDate,this.siblingMonths=e.siblingMonths,this.weekNumbers=e.weekNumbers,this.weekStart=e.weekStart,void 0===this.weekStart&&(this.weekStart=0)}t.prototype.getCalendar=function(e,n){var r=new Date(Date.UTC(e,n,1,0,0,0,0));e=r.getUTCFullYear(),n=r.getUTCMonth();for(var i,a,o,s,l,c=[],u=r.getUTCDay(),d=-(7-this.weekStart+u)%7,h=t.daysInMonth(e,n),p=(h-d)%7,f=t.daysInMonth(e,n-1),m=d,g=h-m+(0!=p?7-p:0)+d,v=null;m<g;)i=((m<1?7+m:m)+u)%7,(a=m+1)<1||a>h?this.siblingMonths?(a<1?(l=e,(s=n-1)<0&&(s=11,l--),a=f+a):a>h&&(l=e,(s=n+1)>11&&(s=0,l++),a=m-h+1),o={day:a,weekDay:i,month:s,year:l,siblingMonth:!0}):o=!1:o={day:a,weekDay:i,month:n,year:e},o&&this.weekNumbers&&(null===v?v=t.calculateWeekNumber(o):1==i&&52==v?v=1:1==i&&v++,o.weekNumber=v),o&&this.startDate&&(o.selected=this.isDateSelected(o)),c.push(o),m++;return c},t.prototype.isDateSelected=function(e){return e.year==this.startDate.year&&e.month==this.startDate.month&&e.day==this.startDate.day||!!this.endDate&&(!(e.year==this.startDate.year&&e.month==this.startDate.month&&e.day<this.startDate.day)&&(!(e.year==this.endDate.year&&e.month==this.endDate.month&&e.day>this.endDate.day)&&(!(e.year==this.startDate.year&&e.month<this.startDate.month)&&(!(e.year==this.endDate.year&&e.month>this.endDate.month)&&(!(e.year<this.startDate.year)&&!(e.year>this.endDate.year))))))},t.prototype.setStartDate=function(e){this.startDate=e},t.prototype.setEndDate=function(e){this.endDate=e},t.prototype.setDate=t.prototype.setStartDate,t.diff=function(e,t){return e=new Date(Date.UTC(e.year,e.month,e.day,0,0,0,0)),t=new Date(Date.UTC(t.year,t.month,t.day,0,0,0,0)),Math.ceil((e.getTime()-t.getTime())/864e5)},t.interval=function(e,n){return Math.abs(t.diff(e,n))+1},t.compare=function(e,t){if("object"!=typeof e||"object"!=typeof t||null===e||null===t)throw new TypeError("dates must be objects");return e.year<t.year?-1:e.year>t.year?1:e.month<t.month?-1:e.month>t.month?1:e.day<t.day?-1:e.day>t.day?1:0},t.daysInMonth=function(e,t){return new Date(e,t+1,0).getDate()},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.calculateWeekNumber=function(e){var t=new Date(Date.UTC(e.year,e.month,e.day,0,0,0,0)),n=new Date(t.valueOf()),r=(t.getUTCDay()+6)%7;n.setUTCDate(n.getUTCDate()-r+3);var i=n.valueOf();return n.setUTCMonth(0,1),4!=n.getUTCDay()&&n.setUTCMonth(0,1+(4-n.getUTCDay()+7)%7),1+Math.ceil((i-n)/6048e5)},e.exports={Calendar:t}},8065:function(e,t,n){n.d(t,{W5:function(){return s},_A:function(){return l}});var r=n(96540),i=function(e){return e.type||null},a={library:new Map,onUnsupportedComponent:function(){return null},libraryKeyResolver:i},o=(0,r.createContext)(a);o.displayName="ExperienceTemplateRendererContext";var s=function(e){var t=e.children,n=e.library,a=e.wrapper,s=e.onUnsupportedComponent,l=e.libraryKeyResolver,c=(0,r.useMemo)((function(){return{library:n,wrapper:a,onUnsupportedComponent:s,libraryKeyResolver:l||i}}),[n,a,s,l]);return(0,r.createElement)(o.Provider,{value:c},t)},l=function(e){var t=(0,r.useContext)(o),n=t.library,i=t.wrapper,a=t.onUnsupportedComponent,s=t.libraryKeyResolver,l=e.templateComponents,c=e.wrapper,u=Array.from(n.keys()),d=l.map((function(e,t){var o=e.metadata,l=s(e,u);if(!l)return null;var d=n.get(l);if(!d)return a&&a(l),null;var h=(null==o?void 0:o.id)||t;return i&&c?(0,r.createElement)(i,{key:h,templateComponent:e},(0,r.createElement)(c,{templateComponent:e},(0,r.createElement)(d,{templateComponent:e}))):i?(0,r.createElement)(i,{key:h,templateComponent:e},(0,r.createElement)(d,{templateComponent:e})):c?(0,r.createElement)(c,{key:h,templateComponent:e},(0,r.createElement)(d,{templateComponent:e})):(0,r.createElement)(d,{key:h,templateComponent:e})}));return(0,r.createElement)(r.Fragment,null,d)}},31579:function(e,t){t.__esModule=!0;var n={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},r={button:!0,fieldset:!0,reset:!0,submit:!0},i={checkbox:!0,radio:!0},a=/^\s+|\s+$/g,o=Array.prototype.slice,s=Object.prototype.toString;function l(e){var t=arguments.length<=1||void 0===arguments[1]?{trim:!1}:arguments[1];if(!e)throw new Error("A form is required by getFormData, was given form="+e);for(var n={},i=void 0,a=[],o={},s=0,l=e.elements.length;s<l;s++){var u=e.elements[s];r[u.type]||u.disabled||(i=u.name||u.id)&&!o[i]&&(a.push(i),o[i]=!0)}for(s=0,l=a.length;s<l;s++){var d=c(e,i=a[s],t);null!=d&&(n[i]=d)}return n}function c(e,t){var r=arguments.length<=2||void 0===arguments[2]?{trim:!1}:arguments[2];if(!e)throw new Error("A form is required by getNamedFormElementData, was given form="+e);if(!t&&"[object String]"!==s.call(t))throw new Error("A form element name is required by getNamedFormElementData, was given elementName="+t);var i=e.elements[t];if(!i||i.disabled)return null;if(!n[s.call(i)])return u(i,r.trim);for(var a=[],o=!0,l=0,c=i.length;l<c;l++)if(!i[l].disabled){o&&"radio"!==i[l].type&&(o=!1);var d=u(i[l],r.trim);null!=d&&(a=a.concat(d))}return o&&1===a.length?a[0]:a.length>0?a:null}function u(e,t){var n=null,r=e.type;if("select-one"===r)return e.options.length&&(n=e.options[e.selectedIndex].value),n;if("select-multiple"===r){n=[];for(var s=0,l=e.options.length;s<l;s++)e.options[s].selected&&n.push(e.options[s].value);return 0===n.length&&(n=null),n}return"file"===r&&"files"in e?(e.multiple?0===(n=o.call(e.files)).length&&(n=null):n=e.files[0],n):(i[r]?e.checked&&(n=e.value):n=t?e.value.replace(a,""):e.value,n)}l.getNamedFormElementData=c,t.default=l,e.exports=t.default},20181:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=Object.prototype.toString,h=Math.max,p=Math.min,f=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||o.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,a,o,s,l,c=0,u=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function E(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=a}function b(){var e=f();if(E(e))return S(e);s=setTimeout(b,function(e){var n=t-(e-l);return d?p(n,a-(e-c)):n}(e))}function S(e){return s=void 0,v&&r?y(e):(r=i=void 0,o)}function T(){var e=f(),n=E(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(b,t),u?y(e):o}(l);if(d)return s=setTimeout(b,t),y(l)}return void 0===s&&(s=setTimeout(b,t)),o}return t=g(t)||0,m(n)&&(u=!!n.leading,a=(d="maxWait"in n)?h(g(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),T.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},T.flush=function(){return void 0===s?o:S(f())},T}},2543:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,d=128,h=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",h]],y="[object Arguments]",E="[object Array]",b="[object Boolean]",S="[object Date]",T="[object Error]",R="[object Function]",O="[object GeneratorFunction]",_="[object Map]",I="[object Number]",x="[object Object]",C="[object Promise]",k="[object RegExp]",w="[object Set]",D="[object String]",P="[object Symbol]",A="[object WeakMap]",L="[object ArrayBuffer]",N="[object DataView]",j="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",B="[object Int32Array]",G="[object Uint8Array]",$="[object Uint8ClampedArray]",H="[object Uint16Array]",z="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Q=RegExp(q.source),X=RegExp(K.source),Z=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,Ee=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Te=/($^)/,Re=/['\n\r\u2028\u2029\\]/g,Oe="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ie="\\u2700-\\u27bf",xe="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",ke="\\ufe0e\\ufe0f",we="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",De="['â]",Pe="["+Oe+"]",Ae="["+we+"]",Le="["+_e+"]",Ne="\\d+",je="["+Ie+"]",Me="["+xe+"]",Fe="[^"+Oe+we+Ne+Ie+xe+Ce+"]",Ue="\\ud83c[\\udffb-\\udfff]",Be="[^"+Oe+"]",Ge="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Ce+"]",ze="\\u200d",Ve="(?:"+Me+"|"+Fe+")",We="(?:"+He+"|"+Fe+")",Ye="(?:['â](?:d|ll|m|re|s|t|ve))?",qe="(?:['â](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Le+"|"+Ue+")"+"?",Qe="["+ke+"]?",Xe=Qe+Ke+("(?:"+ze+"(?:"+[Be,Ge,$e].join("|")+")"+Qe+Ke+")*"),Ze="(?:"+[je,Ge,$e].join("|")+")"+Xe,Je="(?:"+[Be+Le+"?",Le,Ge,$e,Pe].join("|")+")",et=RegExp(De,"g"),tt=RegExp(Le,"g"),nt=RegExp(Ue+"(?="+Ue+")|"+Je+Xe,"g"),rt=RegExp([He+"?"+Me+"+"+Ye+"(?="+[Ae,He,"$"].join("|")+")",We+"+"+qe+"(?="+[Ae,He+Ve,"$"].join("|")+")",He+"?"+Ve+"+"+Ye,He+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Ze].join("|"),"g"),it=RegExp("["+ze+Oe+_e+ke+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[j]=lt[M]=lt[F]=lt[U]=lt[B]=lt[G]=lt[$]=lt[H]=lt[z]=!0,lt[y]=lt[E]=lt[L]=lt[b]=lt[N]=lt[S]=lt[T]=lt[R]=lt[_]=lt[I]=lt[x]=lt[k]=lt[w]=lt[D]=lt[A]=!1;var ct={};ct[y]=ct[E]=ct[L]=ct[N]=ct[b]=ct[S]=ct[j]=ct[M]=ct[F]=ct[U]=ct[B]=ct[_]=ct[I]=ct[x]=ct[k]=ct[w]=ct[D]=ct[P]=ct[G]=ct[$]=ct[H]=ct[z]=!0,ct[T]=ct[R]=ct[A]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===gt,Et=yt&&pt.process,bt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||Et&&Et.binding&&Et.binding("util")}catch(t){}}(),St=bt&&bt.isArrayBuffer,Tt=bt&&bt.isDate,Rt=bt&&bt.isMap,Ot=bt&&bt.isRegExp,_t=bt&&bt.isSet,It=bt&&bt.isTypedArray;function xt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function wt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Pt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function At(e,t){return!!(null==e?0:e.length)&&Ht(e,t,0)>-1}function Lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function jt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Yt("length");function Gt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function $t(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Ht(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):$t(e,Vt,n)}function zt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Vt(e){return e!=e}function Wt(e,t){var n=null==e?0:e.length;return n?Qt(e,t)/n:m}function Yt(e){return function(t){return null==t?i:t[e]}}function qt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Qt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,gn(e)+1).replace(oe,""):e}function Jt(e){return function(t){return e(t)}}function en(e,t){return Nt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Ht(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Ht(t,e[n],0)>-1;);return n}var an=qt({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),on=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Bt(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n,r=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,ot))).Array,se=t.Date,Oe=t.Error,_e=t.Function,Ie=t.Math,xe=t.Object,Ce=t.RegExp,ke=t.String,we=t.TypeError,De=r.prototype,Pe=_e.prototype,Ae=xe.prototype,Le=t["__core-js_shared__"],Ne=Pe.toString,je=Ae.hasOwnProperty,Me=0,Fe=(n=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ue=Ae.toString,Be=Ne.call(xe),Ge=mt._,$e=Ce("^"+Ne.call(je).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=yt?t.Buffer:i,ze=t.Symbol,Ve=t.Uint8Array,We=He?He.allocUnsafe:i,Ye=un(xe.getPrototypeOf,xe),qe=xe.create,Ke=Ae.propertyIsEnumerable,Qe=De.splice,Xe=ze?ze.isConcatSpreadable:i,Ze=ze?ze.iterator:i,Je=ze?ze.toStringTag:i,nt=function(){try{var e=ha(xe,"defineProperty");return e({},"",{}),e}catch(t){}}(),it=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,ut=se&&se.now!==mt.Date.now&&se.now,pt=t.setTimeout!==mt.setTimeout&&t.setTimeout,ft=Ie.ceil,gt=Ie.floor,vt=xe.getOwnPropertySymbols,Et=He?He.isBuffer:i,bt=t.isFinite,Bt=De.join,qt=un(xe.keys,xe),En=Ie.max,bn=Ie.min,Sn=se.now,Tn=t.parseInt,Rn=Ie.random,On=De.reverse,_n=ha(t,"DataView"),In=ha(t,"Map"),xn=ha(t,"Promise"),Cn=ha(t,"Set"),kn=ha(t,"WeakMap"),wn=ha(xe,"create"),Dn=kn&&new kn,Pn={},An=Fa(_n),Ln=Fa(In),Nn=Fa(xn),jn=Fa(Cn),Mn=Fa(kn),Fn=ze?ze.prototype:i,Un=Fn?Fn.valueOf:i,Bn=Fn?Fn.toString:i;function Gn(e){if(ns(e)&&!Vo(e)&&!(e instanceof Vn)){if(e instanceof zn)return e;if(je.call(e,"__wrapped__"))return Ua(e)}return new zn(e)}var $n=function(){function e(){}return function(t){if(!ts(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Hn(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Vn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Qn(e){var t=this.__data__=new Yn(e);this.size=t.size}function Xn(e,t){var n=Vo(e),r=!n&&zo(e),i=!n&&!r&&Ko(e),a=!n&&!r&&!i&&us(e),o=n||r||i||a,s=o?Xt(e.length,ke):[],l=s.length;for(var c in e)!t&&!je.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ea(c,l))||s.push(c);return s}function Zn(e){var t=e.length;return t?e[Kr(0,t-1)]:i}function Jn(e,t){return Na(wi(e),lr(t,0,e.length))}function er(e){return Na(wi(e))}function tr(e,t,n){(n!==i&&!Go(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];je.call(e,t)&&Go(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Go(e[n][0],t))return n;return-1}function ir(e,t,n,r){return pr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&Di(t,Ps(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,a=t.length,o=r(a),s=null==e;++n<a;)o[n]=s?i:xs(e,t[n]);return o}function lr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function cr(e,t,n,r,a,o){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ts(e))return e;var d=Vo(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&je.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return wi(e,s)}else{var h=ma(e),p=h==R||h==O;if(Ko(e))return Oi(e,l);if(h==x||h==y||p&&!a){if(s=c||p?{}:va(e),!l)return c?function(e,t){return Di(e,fa(e),t)}(e,function(e,t){return e&&Di(t,As(t),e)}(s,e)):function(e,t){return Di(e,pa(e),t)}(e,ar(s,e))}else{if(!ct[h])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case L:return _i(e);case b:case S:return new r(+e);case N:return function(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case M:case F:case U:case B:case G:case $:case H:case z:return Ii(e,n);case _:return new r;case I:case D:return new r(e);case k:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case w:return new r;case P:return i=e,Un?xe(Un.call(i)):{}}var i}(e,h,l)}}o||(o=new Qn);var f=o.get(e);if(f)return f;o.set(e,s),ss(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):rs(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,o))}));var m=d?i:(u?c?aa:ia:c?As:Ps)(e);return kt(m||e,(function(r,i){m&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,o))})),s}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=xe(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new we(a);return Da((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=At,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=Nt(t,Jt(n))),r?(a=Lt,o=!1):t.length>=200&&(a=tn,o=!1,t=new Kn(t));e:for(;++i<s;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,o&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else a(t,d,r)||l.push(u)}return l}Gn.templateSettings={escape:Z,evaluate:J,interpolate:ee,variable:"",imports:{_:Gn}},Gn.prototype=Hn.prototype,Gn.prototype.constructor=Gn,zn.prototype=$n(Hn.prototype),zn.prototype.constructor=zn,Vn.prototype=$n(Hn.prototype),Vn.prototype.constructor=Vn,Wn.prototype.clear=function(){this.__data__=wn?wn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(wn){var n=t[e];return n===o?i:n}return je.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return wn?t[e]!==i:je.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=wn&&t===i?o:t,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,!0)},Yn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Yn.prototype.has=function(e){return rr(this.__data__,e)>-1},Yn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(In||Yn),string:new Wn}},qn.prototype.delete=function(e){var t=ua(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ua(this,e).get(e)},qn.prototype.has=function(e){return ua(this,e).has(e)},qn.prototype.set=function(e,t){var n=ua(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,o),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Qn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Qn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Qn.prototype.get=function(e){return this.__data__.get(e)},Qn.prototype.has=function(e){return this.__data__.has(e)},Qn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!In||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var pr=Li(Sr),fr=Li(Tr,!0);function mr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(l===i?s==s&&!cs(s):n(s,l)))var l=s,c=o}return c}function vr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ya),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):jt(i,s):r||(i[i.length]=s)}return i}var Er=Ni(),br=Ni(!0);function Sr(e,t){return e&&Er(e,t,Ps)}function Tr(e,t){return e&&br(e,t,Ps)}function Rr(e,t){return Pt(t,(function(t){return Zo(e[t])}))}function Or(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[Ma(t[n++])];return n&&n==r?e:i}function _r(e,t,n){var r=t(e);return Vo(e)?r:jt(r,n(e))}function Ir(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in xe(e)?function(e){var t=je.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(o){}var a=Ue.call(e);r&&(t?e[Je]=n:delete e[Je]);return a}(e):function(e){return Ue.call(e)}(e)}function xr(e,t){return e>t}function Cr(e,t){return null!=e&&je.call(e,t)}function kr(e,t){return null!=e&&t in xe(e)}function wr(e,t,n){for(var a=n?Lt:At,o=e[0].length,s=e.length,l=s,c=r(s),u=1/0,d=[];l--;){var h=e[l];l&&t&&(h=Nt(h,Jt(t))),u=bn(h.length,u),c[l]=!n&&(t||o>=120&&h.length>=120)?new Kn(l&&h):i}h=e[0];var p=-1,f=c[0];e:for(;++p<o&&d.length<u;){var m=h[p],g=t?t(m):m;if(m=n||0!==m?m:0,!(f?tn(f,g):a(d,g,n))){for(l=s;--l;){var v=c[l];if(!(v?tn(v,g):a(e[l],g,n)))continue e}f&&f.push(g),d.push(m)}}return d}function Dr(e,t,n){var r=null==(e=Ca(e,t=bi(t,e)))?e:e[Ma(Qa(t))];return null==r?i:xt(r,e,n)}function Pr(e){return ns(e)&&Ir(e)==y}function Ar(e,t,n,r,a){return e===t||(null==e||null==t||!ns(e)&&!ns(t)?e!=e&&t!=t:function(e,t,n,r,a,o){var s=Vo(e),l=Vo(t),c=s?E:ma(e),u=l?E:ma(t),d=(c=c==y?x:c)==x,h=(u=u==y?x:u)==x,p=c==u;if(p&&Ko(e)){if(!Ko(t))return!1;s=!0,d=!1}if(p&&!d)return o||(o=new Qn),s||us(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!a(new Ve(e),new Ve(t)));case b:case S:case I:return Go(+e,+t);case T:return e.name==t.name&&e.message==t.message;case k:case D:return e==t+"";case _:var s=cn;case w:var l=1&r;if(s||(s=hn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=na(s(e),s(t),r,i,a,o);return o.delete(e),u;case P:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var f=d&&je.call(e,"__wrapped__"),m=h&&je.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return o||(o=new Qn),a(g,v,n,r,o)}}if(!p)return!1;return o||(o=new Qn),function(e,t,n,r,a,o){var s=1&n,l=ia(e),c=l.length,u=ia(t),d=u.length;if(c!=d&&!s)return!1;var h=c;for(;h--;){var p=l[h];if(!(s?p in t:je.call(t,p)))return!1}var f=o.get(e),m=o.get(t);if(f&&m)return f==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);var v=s;for(;++h<c;){var y=e[p=l[h]],E=t[p];if(r)var b=s?r(E,y,p,t,e,o):r(y,E,p,e,t,o);if(!(b===i?y===E||a(y,E,n,r,o):b)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var S=e.constructor,T=t.constructor;S==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof T&&T instanceof T||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,n,r,a,o)}(e,t,n,r,Ar,a))}function Lr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=xe(e);a--;){var l=n[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var c=(l=n[a])[0],u=e[c],d=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var h=new Qn;if(r)var p=r(u,d,c,e,t,h);if(!(p===i?Ar(d,u,3,r,h):p))return!1}}return!0}function Nr(e){return!(!ts(e)||(t=e,Fe&&Fe in t))&&(Zo(e)?$e:ye).test(Fa(e));var t}function jr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Vo(e)?$r(e[0],e[1]):Gr(e):pl(e)}function Mr(e){if(!Oa(e))return qt(e);var t=[];for(var n in xe(e))je.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var n in xe(e))t.push(n);return t}(e);var t=Oa(e),n=[];for(var r in e)("constructor"!=r||!t&&je.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function Br(e,t){var n=-1,i=Yo(e)?r(e.length):[];return pr(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Gr(e){var t=da(e);return 1==t.length&&t[0][2]?Ia(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function $r(e,t){return Sa(e)&&_a(t)?Ia(Ma(e),t):function(n){var r=xs(n,e);return r===i&&r===t?Cs(n,e):Ar(t,r,3)}}function Hr(e,t,n,r,a){e!==t&&Er(t,(function(o,s){if(a||(a=new Qn),ts(o))!function(e,t,n,r,a,o,s){var l=ka(e,n),c=ka(t,n),u=s.get(c);if(u)return void tr(e,n,u);var d=o?o(l,c,n+"",e,t,s):i,h=d===i;if(h){var p=Vo(c),f=!p&&Ko(c),m=!p&&!f&&us(c);d=c,p||f||m?Vo(l)?d=l:qo(l)?d=wi(l):f?(h=!1,d=Oi(c,!0)):m?(h=!1,d=Ii(c,!0)):d=[]:as(c)||zo(c)?(d=l,zo(l)?d=ys(l):ts(l)&&!Zo(l)||(d=va(c))):h=!1}h&&(s.set(c,d),a(d,c,r,o,s),s.delete(c));tr(e,n,d)}(e,t,s,n,Hr,r,a);else{var l=r?r(ka(e,s),o,s+"",e,t,a):i;l===i&&(l=o),tr(e,s,l)}}),As)}function zr(e,t){var n=e.length;if(n)return Ea(t+=t<0?n:0,n)?e[t]:i}function Vr(e,t,n){t=t.length?Nt(t,(function(e){return Vo(e)?function(t){return Or(t,1===e.length?e[0]:e)}:e})):[il];var r=-1;t=Nt(t,Jt(ca()));var i=Br(e,(function(e,n,i){var a=Nt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var l=xi(i[r],a[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Or(e,o);n(s,o)&&ei(a,bi(o,e),s)}return a}function Yr(e,t,n,r){var i=r?zt:Ht,a=-1,o=t.length,s=e;for(e===t&&(t=wi(t)),n&&(s=Nt(e,Jt(n)));++a<o;)for(var l=0,c=t[a],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Qe.call(s,l,1),Qe.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;Ea(i)?Qe.call(e,i,1):hi(e,i)}}return e}function Kr(e,t){return e+gt(Rn()*(t-e+1))}function Qr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Pa(xa(e,t,il),e+"")}function Zr(e){return Zn(Gs(e))}function Jr(e,t){var n=Gs(e);return Na(n,lr(t,0,n.length))}function ei(e,t,n,r){if(!ts(e))return e;for(var a=-1,o=(t=bi(t,e)).length,s=o-1,l=e;null!=l&&++a<o;){var c=Ma(t[a]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var d=l[c];(u=r?r(d,c,l):i)===i&&(u=ts(d)?d:Ea(t[a+1])?[]:{})}nr(l,c,u),l=l[c]}return e}var ti=Dn?function(e,t){return Dn.set(e,t),e}:il,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ri(e){return Na(Gs(e))}function ii(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,il,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,l=null===t,c=cs(t),u=t===i;a<o;){var d=gt((a+o)/2),h=n(e[d]),p=h!==i,f=null===h,m=h==h,g=cs(h);if(s)var v=r||m;else v=u?m&&(r||p):l?m&&p&&(r||!f):c?m&&p&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);v?a=d+1:o=d}return bn(o,4294967294)}function li(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Go(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:cs(e)?m:+e}function ui(e){if("string"==typeof e)return e;if(Vo(e))return Nt(e,ui)+"";if(cs(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=At,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=Lt;else if(a>=200){var c=t?null:Qi(e);if(c)return hn(c);o=!1,i=tn,l=new Kn}else l=t?[]:s;e:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,o&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}function hi(e,t){return null==(e=Ca(e,t=bi(t,e)))||delete e[Ma(Qa(t))]}function pi(e,t,n,r){return ei(e,t,n(Or(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function mi(e,t){var n=e;return n instanceof Vn&&(n=n.value()),Mt(t,(function(e,t){return t.func.apply(t.thisArg,jt([e],t.args))}),n)}function gi(e,t,n){var i=e.length;if(i<2)return i?di(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=e[a],l=-1;++l<i;)l!=a&&(o[a]=hr(o[a]||s,e[l],t,n));return di(yr(o,1),t,n)}function vi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var l=r<o?t[r]:i;n(s,e[r],l)}return s}function yi(e){return qo(e)?e:[]}function Ei(e){return"function"==typeof e?e:il}function bi(e,t){return Vo(e)?e:Sa(e,t)?[e]:ja(Es(e))}var Si=Xr;function Ti(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Ri=it||function(e){return mt.clearTimeout(e)};function Oi(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function _i(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Ii(e,t){var n=t?_i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function xi(e,t){if(e!==t){var n=e!==i,r=null===e,a=e==e,o=cs(e),s=t!==i,l=null===t,c=t==t,u=cs(t);if(!l&&!u&&!o&&e>t||o&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!u&&e<t||u&&n&&a&&!r&&!o||l&&n&&a||!s&&a||!c)return-1}return 0}function Ci(e,t,n,i){for(var a=-1,o=e.length,s=n.length,l=-1,c=t.length,u=En(o-s,0),d=r(c+u),h=!i;++l<c;)d[l]=t[l];for(;++a<s;)(h||a<o)&&(d[n[a]]=e[a]);for(;u--;)d[l++]=e[a++];return d}function ki(e,t,n,i){for(var a=-1,o=e.length,s=-1,l=n.length,c=-1,u=t.length,d=En(o-l,0),h=r(d+u),p=!i;++a<d;)h[a]=e[a];for(var f=a;++c<u;)h[f+c]=t[c];for(;++s<l;)(p||a<o)&&(h[f+n[s]]=e[a++]);return h}function wi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Di(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),a?or(n,l,c):nr(n,l,c)}return n}function Pi(e,t){return function(n,r){var i=Vo(n)?Ct:ir,a=t?t():{};return i(n,e,ca(r,2),a)}}function Ai(e){return Xr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&ba(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=xe(t);++r<a;){var l=n[r];l&&e(t,l,r,o)}return t}))}function Li(e,t){return function(n,r){if(null==n)return n;if(!Yo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=xe(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Ni(e){return function(t,n,r){for(var i=-1,a=xe(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}function ji(e){return function(t){var n=ln(t=Es(t))?mn(t):i,r=n?n[0]:t.charAt(0),a=n?Ti(n,1).join(""):t.slice(1);return r[e]()+a}}function Mi(e){return function(t){return Mt(Zs(zs(t).replace(et,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),r=e.apply(n,t);return ts(r)?r:n}}function Ui(e){return function(t,n,r){var a=xe(t);if(!Yo(t)){var o=ca(n,3);t=Ps(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Bi(e){return ra((function(t){var n=t.length,r=n,o=zn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new we(a);if(o&&!l&&"wrapper"==sa(s))var l=new zn([],!0)}for(r=l?r:n;++r<n;){var c=sa(s=t[r]),u="wrapper"==c?oa(s):i;l=u&&Ta(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[sa(u[0])].apply(l,u[3]):1==s.length&&Ta(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Vo(r))return l.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Gi(e,t,n,a,o,s,l,c,u,h){var p=t&d,f=1&t,m=2&t,g=24&t,v=512&t,y=m?i:Fi(e);return function d(){for(var E=arguments.length,b=r(E),S=E;S--;)b[S]=arguments[S];if(g)var T=la(d),R=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,T);if(a&&(b=Ci(b,a,o,g)),s&&(b=ki(b,s,l,g)),E-=R,g&&E<h){var O=dn(b,T);return qi(e,t,Gi,d.placeholder,n,b,O,c,u,h-E)}var _=f?n:this,I=m?_[e]:e;return E=b.length,c?b=function(e,t){var n=e.length,r=bn(t.length,n),a=wi(e);for(;r--;){var o=t[r];e[r]=Ea(o,n)?a[o]:i}return e}(b,c):v&&E>1&&b.reverse(),p&&u<E&&(b.length=u),this&&this!==mt&&this instanceof d&&(I=y||Fi(I)),I.apply(_,b)}}function $i(e,t){return function(n,r){return function(e,t,n,r){return Sr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Hi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=ci(n),r=ci(r)),a=e(n,r)}return a}}function zi(e){return ra((function(t){return t=Nt(t,Jt(ca())),Xr((function(n){var r=this;return e(t,(function(e){return xt(e,r,n)}))}))}))}function Vi(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Qr(t,e):t;var r=Qr(t,ft(e/fn(t)));return ln(t)?Ti(mn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,n,a){return a&&"number"!=typeof a&&ba(t,n,a)&&(n=a=i),t=fs(t),n===i?(n=t,t=0):n=fs(n),function(e,t,n,i){for(var a=-1,o=En(ft((t-e)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=e,e+=n;return s}(t,n,a=a===i?t<n?1:-1:fs(a),e)}}function Yi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function qi(e,t,n,r,a,o,s,l,d,h){var p=8&t;t|=p?c:u,4&(t&=~(p?u:c))||(t&=-4);var f=[e,t,a,p?o:i,p?s:i,p?i:o,p?i:s,l,d,h],m=n.apply(i,f);return Ta(e)&&wa(m,f),m.placeholder=r,Aa(m,e,t)}function Ki(e){var t=Ie[e];return function(e,n){if(e=vs(e),(n=null==n?0:bn(ms(n),292))&&bt(e)){var r=(Es(e)+"e").split("e");return+((r=(Es(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Qi=Cn&&1/hn(new Cn([,-0]))[1]==p?function(e){return new Cn(e)}:cl;function Xi(e){return function(t){var n=ma(t);return n==_?cn(t):n==w?pn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(e,t,n,o,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new we(a);var y=o?o.length:0;if(y||(t&=-97,o=p=i),m=m===i?m:En(ms(m),0),g=g===i?g:ms(g),y-=p?p.length:0,t&u){var E=o,b=p;o=p=i}var S=v?i:oa(e),T=[e,t,n,o,p,E,b,f,m,g];if(S&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==d&&8==n||r==d&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Ci(c,l,t[4]):l,e[4]=c?dn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?ki(c,l,t[6]):l,e[6]=c?dn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&d&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(T,S),e=T[0],t=T[1],n=T[2],o=T[3],p=T[4],!(g=T[9]=T[9]===i?v?0:e.length:En(T[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)R=8==t||t==l?function(e,t,n){var a=Fi(e);return function o(){for(var s=arguments.length,l=r(s),c=s,u=la(o);c--;)l[c]=arguments[c];var d=s<3&&l[0]!==u&&l[s-1]!==u?[]:dn(l,u);return(s-=d.length)<n?qi(e,t,Gi,o.placeholder,i,l,d,i,i,n-s):xt(this&&this!==mt&&this instanceof o?a:e,this,l)}}(e,t,g):t!=c&&33!=t||p.length?Gi.apply(i,T):function(e,t,n,i){var a=1&t,o=Fi(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,d=r(u+l),h=this&&this!==mt&&this instanceof t?o:e;++c<u;)d[c]=i[c];for(;l--;)d[c++]=arguments[++s];return xt(h,a?n:this,d)}}(e,t,n,o);else var R=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Aa((S?ti:wa)(R,T),e,t)}function Ji(e,t,n,r){return e===i||Go(e,Ae[n])&&!je.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ts(e)&&ts(t)&&(o.set(t,e),Hr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return as(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var h=-1,p=!0,f=2&n?new Kn:i;for(o.set(e,t),o.set(t,e);++h<l;){var m=e[h],g=t[h];if(r)var v=s?r(g,m,h,t,e,o):r(m,g,h,e,t,o);if(v!==i){if(v)continue;p=!1;break}if(f){if(!Ut(t,(function(e,t){if(!tn(f,t)&&(m===e||a(m,e,n,r,o)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!a(m,g,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function ra(e){return Pa(xa(e,i,Va),e+"")}function ia(e){return _r(e,Ps,pa)}function aa(e){return _r(e,As,fa)}var oa=Dn?function(e){return Dn.get(e)}:cl;function sa(e){for(var t=e.name+"",n=Pn[t],r=je.call(Pn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function la(e){return(je.call(Gn,"placeholder")?Gn:e).placeholder}function ca(){var e=Gn.iteratee||al;return e=e===al?jr:e,arguments.length?e(arguments[0],arguments[1]):e}function ua(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function da(e){for(var t=Ps(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,_a(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Nr(n)?n:i}var pa=vt?function(e){return null==e?[]:(e=xe(e),Pt(vt(e),(function(t){return Ke.call(e,t)})))}:gl,fa=vt?function(e){for(var t=[];e;)jt(t,pa(e)),e=Ye(e);return t}:gl,ma=Ir;function ga(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,a=!1;++r<i;){var o=Ma(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&es(i)&&Ea(o,i)&&(Vo(e)||zo(e))}function va(e){return"function"!=typeof e.constructor||Oa(e)?{}:$n(Ye(e))}function ya(e){return Vo(e)||zo(e)||!!(Xe&&e&&e[Xe])}function Ea(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function ba(e,t,n){if(!ts(n))return!1;var r=typeof t;return!!("number"==r?Yo(n)&&Ea(t,n.length):"string"==r&&t in n)&&Go(n[t],e)}function Sa(e,t){if(Vo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in xe(t))}function Ta(e){var t=sa(e),n=Gn[t];if("function"!=typeof n||!(t in Vn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(_n&&ma(new _n(new ArrayBuffer(1)))!=N||In&&ma(new In)!=_||xn&&ma(xn.resolve())!=C||Cn&&ma(new Cn)!=w||kn&&ma(new kn)!=A)&&(ma=function(e){var t=Ir(e),n=t==x?e.constructor:i,r=n?Fa(n):"";if(r)switch(r){case An:return N;case Ln:return _;case Nn:return C;case jn:return w;case Mn:return A}return t});var Ra=Le?Zo:vl;function Oa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function _a(e){return e==e&&!ts(e)}function Ia(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in xe(n)))}}function xa(e,t,n){return t=En(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=En(i.length-t,0),s=r(o);++a<o;)s[a]=i[t+a];a=-1;for(var l=r(t+1);++a<t;)l[a]=i[a];return l[t]=n(s),xt(e,this,l)}}function Ca(e,t){return t.length<2?e:Or(e,ii(t,0,-1))}function ka(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var wa=La(ti),Da=pt||function(e,t){return mt.setTimeout(e,t)},Pa=La(ni);function Aa(e,t,n){var r=t+"";return Pa(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return kt(v,(function(n){var r="_."+n[0];t&n[1]&&!At(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function La(e){var t=0,n=0;return function(){var r=Sn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Na(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Kr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var ja=function(e){var t=No(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function Ma(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fa(e){if(null!=e){try{return Ne.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ua(e){if(e instanceof Vn)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=wi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ba=Xr((function(e,t){return qo(e)?hr(e,yr(t,1,qo,!0)):[]})),Ga=Xr((function(e,t){var n=Qa(t);return qo(n)&&(n=i),qo(e)?hr(e,yr(t,1,qo,!0),ca(n,2)):[]})),$a=Xr((function(e,t){var n=Qa(t);return qo(n)&&(n=i),qo(e)?hr(e,yr(t,1,qo,!0),i,n):[]}));function Ha(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=En(r+i,0)),$t(e,ca(t,3),i)}function za(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ms(n),a=n<0?En(r+a,0):bn(a,r-1)),$t(e,ca(t,3),a,!0)}function Va(e){return(null==e?0:e.length)?yr(e,1):[]}function Wa(e){return e&&e.length?e[0]:i}var Ya=Xr((function(e){var t=Nt(e,yi);return t.length&&t[0]===e[0]?wr(t):[]})),qa=Xr((function(e){var t=Qa(e),n=Nt(e,yi);return t===Qa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?wr(n,ca(t,2)):[]})),Ka=Xr((function(e){var t=Qa(e),n=Nt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?wr(n,i,t):[]}));function Qa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xa=Xr(Za);function Za(e,t){return e&&e.length&&t&&t.length?Yr(e,t):e}var Ja=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return qr(e,Nt(t,(function(e){return Ea(e,n)?+e:e})).sort(xi)),r}));function eo(e){return null==e?e:On.call(e)}var to=Xr((function(e){return di(yr(e,1,qo,!0))})),no=Xr((function(e){var t=Qa(e);return qo(t)&&(t=i),di(yr(e,1,qo,!0),ca(t,2))})),ro=Xr((function(e){var t=Qa(e);return t="function"==typeof t?t:i,di(yr(e,1,qo,!0),i,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,(function(e){if(qo(e))return t=En(e.length,t),!0})),Xt(t,(function(t){return Nt(e,Yt(t))}))}function ao(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:Nt(n,(function(e){return xt(t,i,e)}))}var oo=Xr((function(e,t){return qo(e)?hr(e,t):[]})),so=Xr((function(e){return gi(Pt(e,qo))})),lo=Xr((function(e){var t=Qa(e);return qo(t)&&(t=i),gi(Pt(e,qo),ca(t,2))})),co=Xr((function(e){var t=Qa(e);return t="function"==typeof t?t:i,gi(Pt(e,qo),i,t)})),uo=Xr(io);var ho=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ao(e,n)}));function po(e){var t=Gn(e);return t.__chain__=!0,t}function fo(e,t){return t(e)}var mo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Vn&&Ea(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fo,args:[a],thisArg:i}),new zn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var go=Pi((function(e,t,n){je.call(e,n)?++e[n]:or(e,n,1)}));var vo=Ui(Ha),yo=Ui(za);function Eo(e,t){return(Vo(e)?kt:pr)(e,ca(t,3))}function bo(e,t){return(Vo(e)?wt:fr)(e,ca(t,3))}var So=Pi((function(e,t,n){je.call(e,n)?e[n].push(t):or(e,n,[t])}));var To=Xr((function(e,t,n){var i=-1,a="function"==typeof t,o=Yo(e)?r(e.length):[];return pr(e,(function(e){o[++i]=a?xt(t,e,n):Dr(e,t,n)})),o})),Ro=Pi((function(e,t,n){or(e,n,t)}));function Oo(e,t){return(Vo(e)?Nt:Br)(e,ca(t,3))}var _o=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Io=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ba(e,t[0],t[1])?t=[]:n>2&&ba(t[0],t[1],t[2])&&(t=[t[0]]),Vr(e,yr(t,1),[])})),xo=ut||function(){return mt.Date.now()};function Co(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Zi(e,d,i,i,i,i,t)}function ko(e,t){var n;if("function"!=typeof t)throw new we(a);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var wo=Xr((function(e,t,n){var r=1;if(n.length){var i=dn(n,la(wo));r|=c}return Zi(e,r,t,n,i)})),Do=Xr((function(e,t,n){var r=3;if(n.length){var i=dn(n,la(Do));r|=c}return Zi(t,r,e,n,i)}));function Po(e,t,n){var r,o,s,l,c,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new we(a);function m(t){var n=r,a=o;return r=o=i,d=t,l=e.apply(a,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||p&&e-d>=s}function v(){var e=xo();if(g(e))return y(e);c=Da(v,function(e){var n=t-(e-u);return p?bn(n,s-(e-d)):n}(e))}function y(e){return c=i,f&&r?m(e):(r=o=i,l)}function E(){var e=xo(),n=g(e);if(r=arguments,o=this,u=e,n){if(c===i)return function(e){return d=e,c=Da(v,t),h?m(e):l}(u);if(p)return Ri(c),c=Da(v,t),m(u)}return c===i&&(c=Da(v,t)),l}return t=vs(t)||0,ts(n)&&(h=!!n.leading,s=(p="maxWait"in n)?En(vs(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),E.cancel=function(){c!==i&&Ri(c),d=0,r=u=o=c=i},E.flush=function(){return c===i?l:y(xo())},E}var Ao=Xr((function(e,t){return dr(e,1,t)})),Lo=Xr((function(e,t,n){return dr(e,vs(t)||0,n)}));function No(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new we(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(No.Cache||qn),n}function jo(e){if("function"!=typeof e)throw new we(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}No.Cache=qn;var Mo=Si((function(e,t){var n=(t=1==t.length&&Vo(t[0])?Nt(t[0],Jt(ca())):Nt(yr(t,1),Jt(ca()))).length;return Xr((function(r){for(var i=-1,a=bn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return xt(e,this,r)}))})),Fo=Xr((function(e,t){var n=dn(t,la(Fo));return Zi(e,c,i,t,n)})),Uo=Xr((function(e,t){var n=dn(t,la(Uo));return Zi(e,u,i,t,n)})),Bo=ra((function(e,t){return Zi(e,h,i,i,i,t)}));function Go(e,t){return e===t||e!=e&&t!=t}var $o=Yi(xr),Ho=Yi((function(e,t){return e>=t})),zo=Pr(function(){return arguments}())?Pr:function(e){return ns(e)&&je.call(e,"callee")&&!Ke.call(e,"callee")},Vo=r.isArray,Wo=St?Jt(St):function(e){return ns(e)&&Ir(e)==L};function Yo(e){return null!=e&&es(e.length)&&!Zo(e)}function qo(e){return ns(e)&&Yo(e)}var Ko=Et||vl,Qo=Tt?Jt(Tt):function(e){return ns(e)&&Ir(e)==S};function Xo(e){if(!ns(e))return!1;var t=Ir(e);return t==T||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Zo(e){if(!ts(e))return!1;var t=Ir(e);return t==R||t==O||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jo(e){return"number"==typeof e&&e==ms(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ns(e){return null!=e&&"object"==typeof e}var rs=Rt?Jt(Rt):function(e){return ns(e)&&ma(e)==_};function is(e){return"number"==typeof e||ns(e)&&Ir(e)==I}function as(e){if(!ns(e)||Ir(e)!=x)return!1;var t=Ye(e);if(null===t)return!0;var n=je.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==Be}var os=Ot?Jt(Ot):function(e){return ns(e)&&Ir(e)==k};var ss=_t?Jt(_t):function(e){return ns(e)&&ma(e)==w};function ls(e){return"string"==typeof e||!Vo(e)&&ns(e)&&Ir(e)==D}function cs(e){return"symbol"==typeof e||ns(e)&&Ir(e)==P}var us=It?Jt(It):function(e){return ns(e)&&es(e.length)&&!!lt[Ir(e)]};var ds=Yi(Ur),hs=Yi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Yo(e))return ls(e)?mn(e):wi(e);if(Ze&&e[Ze])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ze]());var t=ma(e);return(t==_?cn:t==w?hn:Gs)(e)}function fs(e){return e?(e=vs(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ms(e){var t=fs(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?lr(ms(e),0,g):0}function vs(e){if("number"==typeof e)return e;if(cs(e))return m;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=ve.test(e);return n||Ee.test(e)?ht(e.slice(2),n?2:8):ge.test(e)?m:+e}function ys(e){return Di(e,As(e))}function Es(e){return null==e?"":ui(e)}var bs=Ai((function(e,t){if(Oa(t)||Yo(t))Di(t,Ps(t),e);else for(var n in t)je.call(t,n)&&nr(e,n,t[n])})),Ss=Ai((function(e,t){Di(t,As(t),e)})),Ts=Ai((function(e,t,n,r){Di(t,As(t),e,r)})),Rs=Ai((function(e,t,n,r){Di(t,Ps(t),e,r)})),Os=ra(sr);var _s=Xr((function(e,t){e=xe(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&ba(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=As(o),l=-1,c=s.length;++l<c;){var u=s[l],d=e[u];(d===i||Go(d,Ae[u])&&!je.call(e,u))&&(e[u]=o[u])}return e})),Is=Xr((function(e){return e.push(i,ea),xt(Ns,i,e)}));function xs(e,t,n){var r=null==e?i:Or(e,t);return r===i?n:r}function Cs(e,t){return null!=e&&ga(e,t,kr)}var ks=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),tl(il)),ws=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),je.call(e,t)?e[t].push(n):e[t]=[n]}),ca),Ds=Xr(Dr);function Ps(e){return Yo(e)?Xn(e):Mr(e)}function As(e){return Yo(e)?Xn(e,!0):Fr(e)}var Ls=Ai((function(e,t,n){Hr(e,t,n)})),Ns=Ai((function(e,t,n,r){Hr(e,t,n,r)})),js=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),Di(e,aa(e),n),r&&(n=cr(n,7,ta));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Ms=ra((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return Cs(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Nt(aa(e),(function(e){return[e]}));return t=ca(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Us=Xi(Ps),Bs=Xi(As);function Gs(e){return null==e?[]:en(e,Ps(e))}var $s=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?Hs(t):t)}));function Hs(e){return Xs(Es(e).toLowerCase())}function zs(e){return(e=Es(e))&&e.replace(Se,an).replace(tt,"")}var Vs=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ws=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=ji("toLowerCase");var qs=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ks=Mi((function(e,t,n){return e+(n?" ":"")+Xs(t)}));var Qs=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xs=ji("toUpperCase");function Zs(e,t,n){return e=Es(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Js=Xr((function(e,t){try{return xt(e,i,t)}catch(n){return Xo(n)?n:new Oe(n)}})),el=ra((function(e,t){return kt(t,(function(t){t=Ma(t),or(e,t,wo(e[t],e))})),e}));function tl(e){return function(){return e}}var nl=Bi(),rl=Bi(!0);function il(e){return e}function al(e){return jr("function"==typeof e?e:cr(e,1))}var ol=Xr((function(e,t){return function(n){return Dr(n,e,t)}})),sl=Xr((function(e,t){return function(n){return Dr(e,n,t)}}));function ll(e,t,n){var r=Ps(t),i=Rr(t,r);null!=n||ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Rr(t,Ps(t)));var a=!(ts(n)&&"chain"in n&&!n.chain),o=Zo(e);return kt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=wi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,jt([this.value()],arguments))})})),e}function cl(){}var ul=zi(Nt),dl=zi(Dt),hl=zi(Ut);function pl(e){return Sa(e)?Yt(Ma(e)):function(e){return function(t){return Or(t,e)}}(e)}var fl=Wi(),ml=Wi(!0);function gl(){return[]}function vl(){return!1}var yl=Hi((function(e,t){return e+t}),0),El=Ki("ceil"),bl=Hi((function(e,t){return e/t}),1),Sl=Ki("floor");var Tl,Rl=Hi((function(e,t){return e*t}),1),Ol=Ki("round"),_l=Hi((function(e,t){return e-t}),0);return Gn.after=function(e,t){if("function"!=typeof t)throw new we(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Gn.ary=Co,Gn.assign=bs,Gn.assignIn=Ss,Gn.assignInWith=Ts,Gn.assignWith=Rs,Gn.at=Os,Gn.before=ko,Gn.bind=wo,Gn.bindAll=el,Gn.bindKey=Do,Gn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vo(e)?e:[e]},Gn.chain=po,Gn.chunk=function(e,t,n){t=(n?ba(e,t,n):t===i)?1:En(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,l=r(ft(a/t));o<a;)l[s++]=ii(e,o,o+=t);return l},Gn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Gn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return jt(Vo(n)?wi(n):[n],yr(t,1))},Gn.cond=function(e){var t=null==e?0:e.length,n=ca();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new we(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(xt(i[0],this,n))return xt(i[1],this,n)}}))},Gn.conforms=function(e){return function(e){var t=Ps(e);return function(n){return ur(n,e,t)}}(cr(e,1))},Gn.constant=tl,Gn.countBy=go,Gn.create=function(e,t){var n=$n(e);return null==t?n:ar(n,t)},Gn.curry=function e(t,n,r){var a=Zi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Gn.curryRight=function e(t,n,r){var a=Zi(t,l,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Gn.debounce=Po,Gn.defaults=_s,Gn.defaultsDeep=Is,Gn.defer=Ao,Gn.delay=Lo,Gn.difference=Ba,Gn.differenceBy=Ga,Gn.differenceWith=$a,Gn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},Gn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},Gn.dropRightWhile=function(e,t){return e&&e.length?fi(e,ca(t,3),!0,!0):[]},Gn.dropWhile=function(e,t){return e&&e.length?fi(e,ca(t,3),!0):[]},Gn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ba(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ms(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ms(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Gn.filter=function(e,t){return(Vo(e)?Pt:vr)(e,ca(t,3))},Gn.flatMap=function(e,t){return yr(Oo(e,t),1)},Gn.flatMapDeep=function(e,t){return yr(Oo(e,t),p)},Gn.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),yr(Oo(e,t),n)},Gn.flatten=Va,Gn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,p):[]},Gn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ms(t)):[]},Gn.flip=function(e){return Zi(e,512)},Gn.flow=nl,Gn.flowRight=rl,Gn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Gn.functions=function(e){return null==e?[]:Rr(e,Ps(e))},Gn.functionsIn=function(e){return null==e?[]:Rr(e,As(e))},Gn.groupBy=So,Gn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Gn.intersection=Ya,Gn.intersectionBy=qa,Gn.intersectionWith=Ka,Gn.invert=ks,Gn.invertBy=ws,Gn.invokeMap=To,Gn.iteratee=al,Gn.keyBy=Ro,Gn.keys=Ps,Gn.keysIn=As,Gn.map=Oo,Gn.mapKeys=function(e,t){var n={};return t=ca(t,3),Sr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Gn.mapValues=function(e,t){var n={};return t=ca(t,3),Sr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Gn.matches=function(e){return Gr(cr(e,1))},Gn.matchesProperty=function(e,t){return $r(e,cr(t,1))},Gn.memoize=No,Gn.merge=Ls,Gn.mergeWith=Ns,Gn.method=ol,Gn.methodOf=sl,Gn.mixin=ll,Gn.negate=jo,Gn.nthArg=function(e){return e=ms(e),Xr((function(t){return zr(t,e)}))},Gn.omit=js,Gn.omitBy=function(e,t){return Fs(e,jo(ca(t)))},Gn.once=function(e){return ko(2,e)},Gn.orderBy=function(e,t,n,r){return null==e?[]:(Vo(t)||(t=null==t?[]:[t]),Vo(n=r?i:n)||(n=null==n?[]:[n]),Vr(e,t,n))},Gn.over=ul,Gn.overArgs=Mo,Gn.overEvery=dl,Gn.overSome=hl,Gn.partial=Fo,Gn.partialRight=Uo,Gn.partition=_o,Gn.pick=Ms,Gn.pickBy=Fs,Gn.property=pl,Gn.propertyOf=function(e){return function(t){return null==e?i:Or(e,t)}},Gn.pull=Xa,Gn.pullAll=Za,Gn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,ca(n,2)):e},Gn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,i,n):e},Gn.pullAt=Ja,Gn.range=fl,Gn.rangeRight=ml,Gn.rearg=Bo,Gn.reject=function(e,t){return(Vo(e)?Pt:vr)(e,jo(ca(t,3)))},Gn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ca(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return qr(e,i),n},Gn.rest=function(e,t){if("function"!=typeof e)throw new we(a);return Xr(e,t=t===i?t:ms(t))},Gn.reverse=eo,Gn.sampleSize=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:ms(t),(Vo(e)?Jn:Jr)(e,t)},Gn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Gn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Gn.shuffle=function(e){return(Vo(e)?er:ri)(e)},Gn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ba(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},Gn.sortBy=Io,Gn.sortedUniq=function(e){return e&&e.length?li(e):[]},Gn.sortedUniqBy=function(e,t){return e&&e.length?li(e,ca(t,2)):[]},Gn.split=function(e,t,n){return n&&"number"!=typeof n&&ba(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=Es(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ui(t))&&ln(e)?Ti(mn(e),0,n):e.split(t,n):[]},Gn.spread=function(e,t){if("function"!=typeof e)throw new we(a);return t=null==t?0:En(ms(t),0),Xr((function(n){var r=n[t],i=Ti(n,0,t);return r&&jt(i,r),xt(e,this,i)}))},Gn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Gn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},Gn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},Gn.takeRightWhile=function(e,t){return e&&e.length?fi(e,ca(t,3),!1,!0):[]},Gn.takeWhile=function(e,t){return e&&e.length?fi(e,ca(t,3)):[]},Gn.tap=function(e,t){return t(e),e},Gn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new we(a);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Po(e,t,{leading:r,maxWait:t,trailing:i})},Gn.thru=fo,Gn.toArray=ps,Gn.toPairs=Us,Gn.toPairsIn=Bs,Gn.toPath=function(e){return Vo(e)?Nt(e,Ma):cs(e)?[e]:wi(ja(Es(e)))},Gn.toPlainObject=ys,Gn.transform=function(e,t,n){var r=Vo(e),i=r||Ko(e)||us(e);if(t=ca(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ts(e)&&Zo(a)?$n(Ye(e)):{}}return(i?kt:Sr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Gn.unary=function(e){return Co(e,1)},Gn.union=to,Gn.unionBy=no,Gn.unionWith=ro,Gn.uniq=function(e){return e&&e.length?di(e):[]},Gn.uniqBy=function(e,t){return e&&e.length?di(e,ca(t,2)):[]},Gn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?di(e,i,t):[]},Gn.unset=function(e,t){return null==e||hi(e,t)},Gn.unzip=io,Gn.unzipWith=ao,Gn.update=function(e,t,n){return null==e?e:pi(e,t,Ei(n))},Gn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:pi(e,t,Ei(n),r)},Gn.values=Gs,Gn.valuesIn=function(e){return null==e?[]:en(e,As(e))},Gn.without=oo,Gn.words=Zs,Gn.wrap=function(e,t){return Fo(Ei(t),e)},Gn.xor=so,Gn.xorBy=lo,Gn.xorWith=co,Gn.zip=uo,Gn.zipObject=function(e,t){return vi(e||[],t||[],nr)},Gn.zipObjectDeep=function(e,t){return vi(e||[],t||[],ei)},Gn.zipWith=ho,Gn.entries=Us,Gn.entriesIn=Bs,Gn.extend=Ss,Gn.extendWith=Ts,ll(Gn,Gn),Gn.add=yl,Gn.attempt=Js,Gn.camelCase=$s,Gn.capitalize=Hs,Gn.ceil=El,Gn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=vs(n))==n?n:0),t!==i&&(t=(t=vs(t))==t?t:0),lr(vs(e),t,n)},Gn.clone=function(e){return cr(e,4)},Gn.cloneDeep=function(e){return cr(e,5)},Gn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:i)},Gn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:i)},Gn.conformsTo=function(e,t){return null==t||ur(e,t,Ps(t))},Gn.deburr=zs,Gn.defaultTo=function(e,t){return null==e||e!=e?t:e},Gn.divide=bl,Gn.endsWith=function(e,t,n){e=Es(e),t=ui(t);var r=e.length,a=n=n===i?r:lr(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Gn.eq=Go,Gn.escape=function(e){return(e=Es(e))&&X.test(e)?e.replace(K,on):e},Gn.escapeRegExp=function(e){return(e=Es(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Gn.every=function(e,t,n){var r=Vo(e)?Dt:mr;return n&&ba(e,t,n)&&(t=i),r(e,ca(t,3))},Gn.find=vo,Gn.findIndex=Ha,Gn.findKey=function(e,t){return Gt(e,ca(t,3),Sr)},Gn.findLast=yo,Gn.findLastIndex=za,Gn.findLastKey=function(e,t){return Gt(e,ca(t,3),Tr)},Gn.floor=Sl,Gn.forEach=Eo,Gn.forEachRight=bo,Gn.forIn=function(e,t){return null==e?e:Er(e,ca(t,3),As)},Gn.forInRight=function(e,t){return null==e?e:br(e,ca(t,3),As)},Gn.forOwn=function(e,t){return e&&Sr(e,ca(t,3))},Gn.forOwnRight=function(e,t){return e&&Tr(e,ca(t,3))},Gn.get=xs,Gn.gt=$o,Gn.gte=Ho,Gn.has=function(e,t){return null!=e&&ga(e,t,Cr)},Gn.hasIn=Cs,Gn.head=Wa,Gn.identity=il,Gn.includes=function(e,t,n,r){e=Yo(e)?e:Gs(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=En(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ht(e,t,n)>-1},Gn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=En(r+i,0)),Ht(e,t,i)},Gn.inRange=function(e,t,n){return t=fs(t),n===i?(n=t,t=0):n=fs(n),function(e,t,n){return e>=bn(t,n)&&e<En(t,n)}(e=vs(e),t,n)},Gn.invoke=Ds,Gn.isArguments=zo,Gn.isArray=Vo,Gn.isArrayBuffer=Wo,Gn.isArrayLike=Yo,Gn.isArrayLikeObject=qo,Gn.isBoolean=function(e){return!0===e||!1===e||ns(e)&&Ir(e)==b},Gn.isBuffer=Ko,Gn.isDate=Qo,Gn.isElement=function(e){return ns(e)&&1===e.nodeType&&!as(e)},Gn.isEmpty=function(e){if(null==e)return!0;if(Yo(e)&&(Vo(e)||"string"==typeof e||"function"==typeof e.splice||Ko(e)||us(e)||zo(e)))return!e.length;var t=ma(e);if(t==_||t==w)return!e.size;if(Oa(e))return!Mr(e).length;for(var n in e)if(je.call(e,n))return!1;return!0},Gn.isEqual=function(e,t){return Ar(e,t)},Gn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Ar(e,t,i,n):!!r},Gn.isError=Xo,Gn.isFinite=function(e){return"number"==typeof e&&bt(e)},Gn.isFunction=Zo,Gn.isInteger=Jo,Gn.isLength=es,Gn.isMap=rs,Gn.isMatch=function(e,t){return e===t||Lr(e,t,da(t))},Gn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Lr(e,t,da(t),n)},Gn.isNaN=function(e){return is(e)&&e!=+e},Gn.isNative=function(e){if(Ra(e))throw new Oe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Gn.isNil=function(e){return null==e},Gn.isNull=function(e){return null===e},Gn.isNumber=is,Gn.isObject=ts,Gn.isObjectLike=ns,Gn.isPlainObject=as,Gn.isRegExp=os,Gn.isSafeInteger=function(e){return Jo(e)&&e>=-9007199254740991&&e<=f},Gn.isSet=ss,Gn.isString=ls,Gn.isSymbol=cs,Gn.isTypedArray=us,Gn.isUndefined=function(e){return e===i},Gn.isWeakMap=function(e){return ns(e)&&ma(e)==A},Gn.isWeakSet=function(e){return ns(e)&&"[object WeakSet]"==Ir(e)},Gn.join=function(e,t){return null==e?"":Bt.call(e,t)},Gn.kebabCase=Vs,Gn.last=Qa,Gn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ms(n))<0?En(r+a,0):bn(a,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):$t(e,Vt,a,!0)},Gn.lowerCase=Ws,Gn.lowerFirst=Ys,Gn.lt=ds,Gn.lte=hs,Gn.max=function(e){return e&&e.length?gr(e,il,xr):i},Gn.maxBy=function(e,t){return e&&e.length?gr(e,ca(t,2),xr):i},Gn.mean=function(e){return Wt(e,il)},Gn.meanBy=function(e,t){return Wt(e,ca(t,2))},Gn.min=function(e){return e&&e.length?gr(e,il,Ur):i},Gn.minBy=function(e,t){return e&&e.length?gr(e,ca(t,2),Ur):i},Gn.stubArray=gl,Gn.stubFalse=vl,Gn.stubObject=function(){return{}},Gn.stubString=function(){return""},Gn.stubTrue=function(){return!0},Gn.multiply=Rl,Gn.nth=function(e,t){return e&&e.length?zr(e,ms(t)):i},Gn.noConflict=function(){return mt._===this&&(mt._=Ge),this},Gn.noop=cl,Gn.now=xo,Gn.pad=function(e,t,n){e=Es(e);var r=(t=ms(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Vi(gt(i),n)+e+Vi(ft(i),n)},Gn.padEnd=function(e,t,n){e=Es(e);var r=(t=ms(t))?fn(e):0;return t&&r<t?e+Vi(t-r,n):e},Gn.padStart=function(e,t,n){e=Es(e);var r=(t=ms(t))?fn(e):0;return t&&r<t?Vi(t-r,n)+e:e},Gn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Tn(Es(e).replace(oe,""),t||0)},Gn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ba(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fs(e),t===i?(t=e,e=0):t=fs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=Rn();return bn(e+a*(t-e+dt("1e-"+((a+"").length-1))),t)}return Kr(e,t)},Gn.reduce=function(e,t,n){var r=Vo(e)?Mt:Kt,i=arguments.length<3;return r(e,ca(t,4),n,i,pr)},Gn.reduceRight=function(e,t,n){var r=Vo(e)?Ft:Kt,i=arguments.length<3;return r(e,ca(t,4),n,i,fr)},Gn.repeat=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:ms(t),Qr(Es(e),t)},Gn.replace=function(){var e=arguments,t=Es(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Gn.result=function(e,t,n){var r=-1,a=(t=bi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Ma(t[r])];o===i&&(r=a,o=n),e=Zo(o)?o.call(e):o}return e},Gn.round=Ol,Gn.runInContext=e,Gn.sample=function(e){return(Vo(e)?Zn:Zr)(e)},Gn.size=function(e){if(null==e)return 0;if(Yo(e))return ls(e)?fn(e):e.length;var t=ma(e);return t==_||t==w?e.size:Mr(e).length},Gn.snakeCase=qs,Gn.some=function(e,t,n){var r=Vo(e)?Ut:ai;return n&&ba(e,t,n)&&(t=i),r(e,ca(t,3))},Gn.sortedIndex=function(e,t){return oi(e,t)},Gn.sortedIndexBy=function(e,t,n){return si(e,t,ca(n,2))},Gn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Go(e[r],t))return r}return-1},Gn.sortedLastIndex=function(e,t){return oi(e,t,!0)},Gn.sortedLastIndexBy=function(e,t,n){return si(e,t,ca(n,2),!0)},Gn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Go(e[n],t))return n}return-1},Gn.startCase=Ks,Gn.startsWith=function(e,t,n){return e=Es(e),n=null==n?0:lr(ms(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},Gn.subtract=_l,Gn.sum=function(e){return e&&e.length?Qt(e,il):0},Gn.sumBy=function(e,t){return e&&e.length?Qt(e,ca(t,2)):0},Gn.template=function(e,t,n){var r=Gn.templateSettings;n&&ba(e,t,n)&&(t=i),e=Es(e),t=Ts({},t,r,Ji);var a,o,s=Ts({},t.imports,r.imports,Ji),l=Ps(s),c=en(s,l),u=0,d=t.interpolate||Te,h="__p += '",p=Ce((t.escape||Te).source+"|"+d.source+"|"+(d===ee?fe:Te).source+"|"+(t.evaluate||Te).source+"|$","g"),f="//# sourceURL="+(je.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(p,(function(t,n,r,i,s,l){return r||(r=i),h+=e.slice(u,l).replace(Re,sn),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),h+="';\n";var m=je.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new Oe("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(V,""):h).replace(W,"$1").replace(Y,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Js((function(){return _e(l,f+"return "+h).apply(i,c)}));if(g.source=h,Xo(g))throw g;return g},Gn.times=function(e,t){if((e=ms(e))<1||e>f)return[];var n=g,r=bn(e,g);t=ca(t),e-=g;for(var i=Xt(r,t);++n<e;)t(n);return i},Gn.toFinite=fs,Gn.toInteger=ms,Gn.toLength=gs,Gn.toLower=function(e){return Es(e).toLowerCase()},Gn.toNumber=vs,Gn.toSafeInteger=function(e){return e?lr(ms(e),-9007199254740991,f):0===e?e:0},Gn.toString=Es,Gn.toUpper=function(e){return Es(e).toUpperCase()},Gn.trim=function(e,t,n){if((e=Es(e))&&(n||t===i))return Zt(e);if(!e||!(t=ui(t)))return e;var r=mn(e),a=mn(t);return Ti(r,nn(r,a),rn(r,a)+1).join("")},Gn.trimEnd=function(e,t,n){if((e=Es(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ui(t)))return e;var r=mn(e);return Ti(r,0,rn(r,mn(t))+1).join("")},Gn.trimStart=function(e,t,n){if((e=Es(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ui(t)))return e;var r=mn(e);return Ti(r,nn(r,mn(t))).join("")},Gn.truncate=function(e,t){var n=30,r="...";if(ts(t)){var a="separator"in t?t.separator:a;n="length"in t?ms(t.length):n,r="omission"in t?ui(t.omission):r}var o=(e=Es(e)).length;if(ln(e)){var s=mn(e);o=s.length}if(n>=o)return e;var l=n-fn(r);if(l<1)return r;var c=s?Ti(s,0,l).join(""):e.slice(0,l);if(a===i)return c+r;if(s&&(l+=c.length-l),os(a)){if(e.slice(l).search(a)){var u,d=c;for(a.global||(a=Ce(a.source,Es(me.exec(a))+"g")),a.lastIndex=0;u=a.exec(d);)var h=u.index;c=c.slice(0,h===i?l:h)}}else if(e.indexOf(ui(a),l)!=l){var p=c.lastIndexOf(a);p>-1&&(c=c.slice(0,p))}return c+r},Gn.unescape=function(e){return(e=Es(e))&&Q.test(e)?e.replace(q,vn):e},Gn.uniqueId=function(e){var t=++Me;return Es(e)+t},Gn.upperCase=Qs,Gn.upperFirst=Xs,Gn.each=Eo,Gn.eachRight=bo,Gn.first=Wa,ll(Gn,(Tl={},Sr(Gn,(function(e,t){je.call(Gn.prototype,t)||(Tl[t]=e)})),Tl),{chain:!1}),Gn.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Gn[e].placeholder=Gn})),kt(["drop","take"],(function(e,t){Vn.prototype[e]=function(n){n=n===i?1:En(ms(n),0);var r=this.__filtered__&&!t?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Vn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),kt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Vn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ca(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),kt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Vn.prototype[e]=function(){return this[n](1).value()[0]}})),kt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Vn.prototype[e]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(il)},Vn.prototype.find=function(e){return this.filter(e).head()},Vn.prototype.findLast=function(e){return this.reverse().find(e)},Vn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Vn(this):this.map((function(n){return Dr(n,e,t)}))})),Vn.prototype.reject=function(e){return this.filter(jo(ca(e)))},Vn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Vn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Vn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vn.prototype.toArray=function(){return this.take(g)},Sr(Vn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Gn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Gn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof Vn,c=s[0],u=l||Vo(t),d=function(e){var t=a.apply(Gn,jt([e],s));return r&&h?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=o&&!h,m=l&&!p;if(!o&&u){t=m?t:new Vn(this);var g=e.apply(t,s);return g.__actions__.push({func:fo,args:[d],thisArg:i}),new zn(g,h)}return f&&m?e.apply(this,s):(g=this.thru(d),f?r?g.value()[0]:g.value():g)})})),kt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=De[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Gn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Vo(i)?i:[],e)}return this[n]((function(n){return t.apply(Vo(n)?n:[],e)}))}})),Sr(Vn.prototype,(function(e,t){var n=Gn[t];if(n){var r=n.name+"";je.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[Gi(i,2).name]=[{name:"wrapper",func:i}],Vn.prototype.clone=function(){var e=new Vn(this.__wrapped__);return e.__actions__=wi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=wi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=wi(this.__views__),e},Vn.prototype.reverse=function(){if(this.__filtered__){var e=new Vn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Vo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=bn(t,e+o);break;case"takeRight":e=En(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,c=r?s:o-1,u=this.__iteratees__,d=u.length,h=0,p=bn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return mi(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var m=-1,g=e[c+=t];++m<d;){var v=u[m],y=v.iteratee,E=v.type,b=y(g);if(2==E)g=b;else if(!b){if(1==E)continue e;break e}}f[h++]=g}return f},Gn.prototype.at=mo,Gn.prototype.chain=function(){return po(this)},Gn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Gn.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Gn.prototype.plant=function(e){for(var t,n=this;n instanceof Hn;){var r=Ua(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Gn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vn){var t=e;return this.__actions__.length&&(t=new Vn(this)),(t=t.reverse()).__actions__.push({func:fo,args:[eo],thisArg:i}),new zn(t,this.__chain__)}return this.thru(eo)},Gn.prototype.toJSON=Gn.prototype.valueOf=Gn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Gn.prototype.first=Gn.prototype.head,Ze&&(Gn.prototype[Ze]=function(){return this}),Gn}();mt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},74786:function(){},77529:function(){},69616:function(){},68415:function(){},28446:function(){},51507:function(){},91424:function(){},49965:function(){},15683:function(){},82820:function(){},28513:function(){},72295:function(){},83003:function(){},90808:function(){},49273:function(){},39462:function(){},86080:function(){},23359:function(){},5085:function(){},26477:function(){},97237:function(){},98973:function(){},53453:function(){},39297:function(){},44285:function(){},83357:function(){},92649:function(){},19509:function(){},41717:function(){},93525:function(){},59993:function(){},44329:function(){},31749:function(){},41245:function(){},31349:function(){},98603:function(){},98387:function(){},93671:function(){},10905:function(){},82271:function(){},37581:function(){},35141:function(){},28545:function(){},90123:function(){},59009:function(){},5245:function(){},23323:function(){},78225:function(){},27517:function(){},98669:function(e,t,n){t.I7=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(96540),a=d(i),o=d(n(5556)),s=n(88579),l=d(n(77334)),c=d(n(71047)),u=d(n(84567));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=0,g=0,v=0,y=0,E="data-lazyload-listened",b=[],S=[],T=!1;try{var R=Object.defineProperty({},"passive",{get:function(){T=!0}});window.addEventListener("test",null,R)}catch(D){}var O=!!T&&{capture:!1,passive:!0},_=function(e){var t=e.ref;if(t instanceof HTMLElement){var n=(0,l.default)(t),r=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=e.ref,r=void 0,i=void 0,a=void 0,o=void 0;try{var s=t.getBoundingClientRect();r=s.top,i=s.left,a=s.height,o=s.width}catch(D){r=m,i=g,a=y,o=v}var l=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,u=Math.max(r,0),d=Math.max(i,0),h=Math.min(l,r+a)-u,p=Math.min(c,i+o)-d,f=void 0,E=void 0,b=void 0,S=void 0;try{var T=n.getBoundingClientRect();f=T.top,E=T.left,b=T.height,S=T.width}catch(D){f=m,E=g,b=y,S=v}var R=f-u,O=E-d,_=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return R-_[0]<=h&&R+b+_[1]>=0&&O-_[0]<=p&&O+S+_[1]>=0}(e,n):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,r=void 0;try{var i=t.getBoundingClientRect();n=i.top,r=i.height}catch(D){n=m,r=y}var a=window.innerHeight||document.documentElement.clientHeight,o=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-o[0]<=a&&n+r+o[1]>=0}(e);r?e.visible||(e.props.once&&S.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},I=function(){S.forEach((function(e){var t=b.indexOf(e);-1!==t&&b.splice(t,1)})),S=[]},x=function(){for(var e=0;e<b.length;++e){var t=b[e];_(t)}I()},C=void 0,k=null,w=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n.setRef=n.setRef.bind(n),n}return f(t,e),r(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===C||"debounce"===C&&void 0===this.props.debounce;if(n&&((0,s.off)(e,"scroll",k,O),(0,s.off)(window,"resize",k,O),k=null),k||(void 0!==this.props.debounce?(k=(0,c.default)(x,"number"==typeof this.props.debounce?this.props.debounce:300),C="debounce"):void 0!==this.props.throttle?(k=(0,u.default)(x,"number"==typeof this.props.throttle?this.props.throttle:300),C="throttle"):k=x),this.props.overflow){var r=(0,l.default)(this.ref);if(r&&"function"==typeof r.getAttribute){var i=+r.getAttribute(E)+1;1===i&&r.addEventListener("scroll",k,O),r.setAttribute(E,i)}}else if(0===b.length||n){var a=this.props,o=a.scroll,d=a.resize;o&&(0,s.on)(e,"scroll",k,O),d&&(0,s.on)(window,"resize",k,O)}b.push(this),_(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,l.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(E)-1;0===t?(e.removeEventListener("scroll",k,O),e.removeAttribute(E)):e.setAttribute(E,t)}}var n=b.indexOf(this);-1!==n&&b.splice(n,1),0===b.length&&((0,s.off)(window,"resize",k,O),(0,s.off)(window,"scroll",k,O))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.children,r=e.placeholder,i=e.className,o=e.classNamePrefix,s=e.style;return a.default.createElement("div",{className:o+"-wrapper "+i,ref:this.setRef,style:s},this.visible?n:r||a.default.createElement("div",{style:{height:t},className:o+"-placeholder"}))}}]),t}(i.Component);w.propTypes={className:o.default.string,classNamePrefix:o.default.string,once:o.default.bool,height:o.default.oneOfType([o.default.number,o.default.string]),offset:o.default.oneOfType([o.default.number,o.default.arrayOf(o.default.number)]),overflow:o.default.bool,resize:o.default.bool,scroll:o.default.bool,children:o.default.node,throttle:o.default.oneOfType([o.default.number,o.default.bool]),debounce:o.default.oneOfType([o.default.number,o.default.bool]),placeholder:o.default.node,scrollContainer:o.default.oneOfType([o.default.string,o.default.object]),unmountIfInvisible:o.default.bool,style:o.default.object},w.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.Ay=w,t.I7=x},71047:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=function l(){var c=+new Date-o;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(a,i),r||(a=null,i=null)))};return function(){a=this,i=arguments,o=+new Date;var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(a,i),a=null,i=null),s}}},88579:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,r){r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,r){r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}},77334:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,r=e;r;){if(!r.parentNode)return e.ownerDocument||document.documentElement;var i=window.getComputedStyle(r),a=i.position,o=i.overflow,s=i["overflow-x"],l=i["overflow-y"];if("static"===a&&t)r=r.parentNode;else{if(n.test(o)&&n.test(s)&&n.test(l))return r;r=r.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},84567:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,i;return t||(t=250),function(){var a=n||this,o=+new Date,s=arguments;r&&o<r+t?(clearTimeout(i),i=setTimeout((function(){r=o,e.apply(a,s)}),t)):(r=o,e.apply(a,s))}}},34222:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientMetricsLogger=void 0;var i=n(8337),a=n(63107),o=n(75541),s=function(){function e(t){this.clientLogger=t,e.pm&&e.im||this.initMetrics()}return e.prototype.initLogger=function(t){var n=t.client,r=t.lob,i=t.locale,a=t.siteId,o=t.personalize,s=t.inputId,l=t.getDevice,c=t.variants;e.metadata={client:n,lob:r,locale:i,siteId:a,personalize:o,inputId:s,getDevice:l,variants:c}},e.prototype.logTypeaheadOpen=function(t){e.im.logTypeaheadOpen(t)},e.prototype.logTypeaheadRequest=function(t){e.im.logTypeaheadRequest(t),e.pm.logTypeaheadRequest(t)},e.prototype.logResponse=function(t){e.pm.logResponse(t)},e.prototype.logTypeaheadResponse=function(t){e.pm.logTypeaheadResponse(t)},e.prototype.logSuggestionShown=function(t){e.pm.logSuggestionShown(t.q),e.im.logSuggestionShown(t)},e.prototype.logSuggestionSelected=function(t,n){e.im.logTypeaheadSelection(t),e.im.logTypeaheadEventMessage(n)},e.prototype.logError=function(t,n){e.pm.logError(t,n)},e.prototype.logTypeaheadClientMetrics=function(){if(this.clientLogger&&"function"==typeof this.clientLogger.getLoggerWithIdentifier){var t=this.clientLogger.getLoggerWithIdentifier("uitk-react-typeahead");t&&"function"==typeof t.logEvent&&t.logEvent(new o.SystemEvent(o.SystemEventLevel.INFO,"TypeaheadInteraction"),r(r({},e.im.getMetrics(e.metadata)),e.pm.getMetrics()))}this.initMetrics()},e.prototype.initMetrics=function(){e.im=new i.InteractionMetrics,e.pm=new a.PerformanceMetrics},e}();t.ClientMetricsLogger=s},92192:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EssClientLogger=void 0;var r=n(34222),i=n(59094),a=n(69503),o=n(72841),s=function(){function e(e,t,n,s){try{i.Experiments.init(s),o.Utils.init(t),this.tel=new a.TypeaheadEventLogger(e,n),this.cml=new r.ClientMetricsLogger(t)}catch(l){o.Utils.logError(l)}}return e.prototype.initLogger=function(e){this.metadata=e},e.prototype.logTypeaheadOpen=function(e){var t,n,r,i;try{null===(t=this.tel)||void 0===t||t.initLogger(this.metadata),null===(n=this.cml)||void 0===n||n.initLogger(this.metadata),null===(r=this.tel)||void 0===r||r.logTypeaheadOpen(e),null===(i=this.cml)||void 0===i||i.logTypeaheadOpen(e)}catch(a){o.Utils.logError(a)}},e.prototype.logTypeaheadRequest=function(e){var t,n;try{null===(t=this.tel)||void 0===t||t.logTypeaheadRequest(e),null===(n=this.cml)||void 0===n||n.logTypeaheadRequest(e)}catch(r){o.Utils.logError(r)}},e.prototype.logTypeaheadResponse=function(e){var t;try{this.prevResponse=this.response,this.response=e,null===(t=this.cml)||void 0===t||t.logTypeaheadResponse(e)}catch(n){o.Utils.logError(n)}},e.prototype.logSuggestionShown=function(e){var t,n,r,i;try{this.shownResponse=e===(null===(t=this.response)||void 0===t?void 0:t.q)?this.response:e===(null===(n=this.prevResponse)||void 0===n?void 0:n.q)?this.prevResponse:void 0,this.shownResponse&&(null===(r=this.tel)||void 0===r||r.logTypeaheadResponse(this.shownResponse),null===(i=this.cml)||void 0===i||i.logSuggestionShown(this.shownResponse))}catch(a){o.Utils.logError(a)}},e.prototype.logSuggestionSelected=function(e){var t,n,r;try{if(this.shownResponse&&e){"CATEGORIZED"===e.displayType&&(e.index+=1);var i=null===(t=this.tel)||void 0===t?void 0:t.logSuggestionSelected(e);null===(n=this.cml)||void 0===n||n.logSuggestionSelected(e,i),this.resetResponse()}e||null===(r=this.tel)||void 0===r||r.isResolveNoSuggestionSelected(!0)}catch(a){o.Utils.logError(a)}},e.prototype.logResponse=function(e){var t,n;try{e.ok||null===(t=this.cml)||void 0===t||t.logError(e.status,e.statusText),null===(n=this.cml)||void 0===n||n.logResponse(e)}catch(r){o.Utils.logError(r)}},e.prototype.logTypeaheadBlurEvent=function(){var e,t;try{null===(e=this.tel)||void 0===e||e.logTypeaheadBlurEvent(),null===(t=this.cml)||void 0===t||t.logTypeaheadClientMetrics(),this.resetResponse()}catch(n){o.Utils.logError(n)}},e.prototype.logWizardSubmitEvent=function(){var e;try{null===(e=this.tel)||void 0===e||e.logWizardSubmitEvent()}catch(t){o.Utils.logError(t)}},e.prototype.resetResponse=function(){this.prevResponse=this.response=this.shownResponse=void 0},e}();t.EssClientLogger=s},59094:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Experiments=t.Experiment=void 0,function(e){e[e.EGTA_BEX_ML_V0=36094]="EGTA_BEX_ML_V0",e[e.EGTA_uTA_Demo=32216]="EGTA_uTA_Demo",e[e.ESS_Two_Line_Display=33686]="ESS_Two_Line_Display",e[e.PWA_ESS_Feedback_Loop_Enable=31052]="PWA_ESS_Feedback_Loop_Enable",e[e.EGTA_Rollout_Feature_Gate_for_Hotel_Property_Name_Filter=37339]="EGTA_Rollout_Feature_Gate_for_Hotel_Property_Name_Filter",e[e.BEX_Driveable_destination_Web=41955]="BEX_Driveable_destination_Web"}(n=t.Experiment||(t.Experiment={}));var r=function(){function e(){}return e.init=function(e){var t=this;e&&Object.keys(n).forEach((function(r){var i,a=e[r];if("number"==typeof a?i=a:a&&"number"==typeof a.bucket&&(i=a.bucket),void 0!==i){var o=n[r];t.experimentMap[o]={id:o,name:r,bucket:i}}}))},e.isBucketed=function(e,t){return void 0===t&&(t=1),e in this.experimentMap&&t===this.experimentMap[e].bucket},e.getClientVariants=function(){var e=this,t=[];return Object.keys(this.experimentMap).forEach((function(n){t.push(n+"."+e.experimentMap[n].bucket)})),t.join("|")},e.experimentMap={},e}();t.Experiments=r},8337:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionMetrics=void 0;var i=n(59094),a=function(){function e(){this.query="",this.response=void 0,this.mostRecentSelectedSuggestion=void 0}return e.getSuggestionTypes=function(e){if(e&&e.length>0)return e.map((function(e){return"GOOGLEMAPS"===e.category?"GPA":e.type})).join(",")},e.getSuggestionIds=function(e){if(e&&e.length>0)return e.map((function(e){return"GOOGLEMAPS"===e.category?e.sourceName+":"+e.sourceId:e.essId?e.essId.sourceName+":"+e.essId.sourceId:"-:-"})).join(",")},e.prototype.logTypeaheadOpen=function(e){this.interactionStart=Date.now(),this.prefill=e},e.prototype.logTypeaheadRequest=function(e){this.query=e||"",this.mostRecentSelectedSuggestion=void 0,this.response=void 0},e.prototype.logSuggestionShown=function(e){this.response=e},e.prototype.logTypeaheadSelection=function(e){this.mostRecentSelectedSuggestion=this.response.sr[e.index-1]},e.prototype.logTypeaheadEventMessage=function(e){this.selectionTypeaheadEventMessage=e},e.prototype.getMetrics=function(t){var n=this.query===this.prefill?"":this.query,a=this.response&&this.response.sr&&this.response.sr.length>0&&"GOOGLEMAPS"===this.response.sr[0].category,o=t.getDevice&&"function"==typeof t.getDevice?t.getDevice(window.navigator.useragent):void 0;return r({contentFlavor:"uitk",deviceType:o,inputLength:n?n.length:0,interactionTime:this.interactionStart?Date.now()-this.interactionStart:void 0,isAddrAutocomplete:a,lob:t.lob,locale:t.locale,pageId:t.client,pointOfSale:window.location.hostname,selectionDepth:this.getSelectionDepth(),siteId:t.siteId+"",suggestionIds:this.response&&e.getSuggestionIds(this.response.sr),suggestionSelected:!!this.mostRecentSelectedSuggestion,suggestionShown:!!(this.response&&this.response.sr&&this.response.sr.length>0),suggestionTypes:this.response&&e.getSuggestionTypes(this.response.sr),textInputElementId:t.inputId,timestamp:Date.now(),type:"TypeaheadInteraction",userAgent:window.navigator.userAgent,userTypedQuery:n,variants:[this.response&&this.response.activeABTests,i.Experiments.getClientVariants()].filter(Boolean).join("|"),zeroResults:this.response&&this.response.sr&&0===this.response.sr.length},this.selectionTypeaheadEventMessage)},e.prototype.getSelectionDepth=function(){return this.mostRecentSelectedSuggestion&&void 0!==this.mostRecentSelectedSuggestion.index?(parseInt(this.mostRecentSelectedSuggestion.index,10)+1).toString():"undefined"},e}();t.InteractionMetrics=a},63107:function(e,t){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceMetrics=void 0;var r=function(){function e(){this.entries=[],this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING=10,this.essErrorCount=0,this.TRIGGER_TYPE_FOCUS="focus",this.TRIGGER_TYPE_INPUT="input",this.errorCodes=[],this.proxyRegion=""}return e.isStatusCodeInRange=function(e,t,n){return!isNaN(e)&&(t<=e&&e<=n)},e.prototype.logTypeaheadRequest=function(e){var t=0===e.trim().length?this.TRIGGER_TYPE_FOCUS:this.TRIGGER_TYPE_INPUT,n={query:e,timestamp:Date.now(),triggerType:t};this.entries.push({request:n,responseShown:!1})},e.prototype.logResponse=function(e){var t;this.proxyRegion=(null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t.get("x-proxy-region"))||""},e.prototype.logTypeaheadResponse=function(e){if(e){var t=e.q,n=e.sr?e.sr.length:0,r=this.getRequestMetricEntry(t);if(r){var i=Date.now();r.response={latency:i-r.request.timestamp,query:t,suggestionCount:n,timestamp:i}}}},e.prototype.logSuggestionShown=function(e){var t=this.getResponseMetricEntry(e);t&&(t.responseShown=!0)},e.prototype.logError=function(t,n){e.isStatusCodeInRange(t,200,299)||this.essErrorCount++,this.errorCodes.push(t)},e.prototype.getMetrics=function(){var e;if(this.entries.length){for(var t={},n=this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING<this.entries.length?this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING:this.entries.length,r=0;r<n;r++){var i=this.entries[r];i.response&&(t["latency"+r]=i.response.latency,0===r&&(t.query0=i.response.query))}t.latencyMedian=this.getMedianLatency();var a=this.getWorstLatencyMetric();t.queryWorst=a?a.response&&a.response.query:void 0,t.latencyWorst=a?a.response&&a.response.latency:void 0;var o=this.entries[this.entries.length-1];return t.queryLast=o.request.query,t.latencyLast=o.response?o.response.latency:void 0,t.totalTriggers=this.entries.length,t.totalSuccess=this.getSuccessMetrics().length,t.totalOnePlusCharTypeaheadShown=this.entries.filter((function(e){return e.request.query&&e.responseShown})).length,t.onFocusTypeaheadShown=(null===(e=this.getResponseMetricEntry(""))||void 0===e?void 0:e.responseShown)||!1,this.essErrorCount>0&&(t.essErrorCount=this.essErrorCount),this.errorCodes.length>0&&(t.error=this.errorCodes.join(",")),t.proxyRegion=this.proxyRegion,t}},e.prototype.getRequestMetricEntry=function(e){var t,r;try{for(var i=n(this.entries),a=i.next();!a.done;a=i.next()){var o=a.value;if(o.request.query===e&&!o.response)return o}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.getResponseMetricEntry=function(e){var t,r;try{for(var i=n(this.entries),a=i.next();!a.done;a=i.next()){var o=a.value;if(o.request.query===e&&o.response)return o}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.getWorstLatencyMetric=function(){var e,t,r;try{for(var i=n(this.entries),a=i.next();!a.done;a=i.next()){var o=a.value;o.response&&(!r||r.response&&r.response.latency<o.response.latency)&&(r=o)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},e.prototype.latencySortFunction=function(e,t){return e.response&&t.response?e.response.latency-t.response.latency:e.response?-1:t.response?1:0},e.prototype.getMedianLatency=function(){var e,t=this.getSuccessMetrics();if(t.sort(this.latencySortFunction),t.length){var n=Math.floor(t.length/2),r=t[n].response.latency;if(t.length%2)e=r;else e=(t[n-1].response.latency+r)/2}return e},e.prototype.getSuccessMetrics=function(){return this.entries.filter((function(e){return e.response}))},e}();t.PerformanceMetrics=r},20439:function(e,t){var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendationEvent=void 0,function(e){e.CLICK="recommendation_module.selected",e.SEEN="recommendation_module.presented"}(n||(n={})),function(e){e.SEEN="Impression",e.CLICK="Interaction"}(r||(r={}));var i="destination-typeahead-input",a="allRecommendations",o={ALTERNATE:"People also searched",POPULAR:"Popular destinations"},s=["POPULAR","ALTERNATE"],l=function(){function e(){}return e.getRecommendationSeenMessage=function(e,t){if(e&&e.sr&&e.sr.length>0){var o=e.sr.filter((function(e){return s.includes(e.category)}));if(o&&o.length>0){var l={eventType:r.SEEN,eventName:n.SEEN,egRecommendationResponseId:this.getEgRecommendationResponseId(e.recId),recommendationTitle:this.getRecommendationTitle(o[0].category),component:i,componentElement:t,recommendations:this.getRecommendations(o)};return{schemaName:a,messageContent:l}}}},e.getRecommendationClickedMessage=function(e,t,o){var l,c;if(e&&s.includes(e.category)){var u=e.index;if(t&&t.sr&&t.sr.length>0)for(var d=t.sr.filter((function(t){return t.category===e.category})),h=0;h<d.length;h++)if((null===(l=d[h].essId)||void 0===l?void 0:l.sourceId)===(null===(c=e.essId)||void 0===c?void 0:c.sourceId)){u=h;break}var p={eventType:r.CLICK,eventName:n.CLICK,egRecommendationResponseId:this.getEgRecommendationResponseId(),recommendationTitle:this.getRecommendationTitle(e.category),component:i,componentElement:o,recommendations:this.getSelectedRecommendations(e,u)};return{schemaName:a,messageContent:p}}},e.getEgRecommendationResponseId=function(e){return e&&(this.egRecommendationResponseId=e),this.egRecommendationResponseId},e.getRecommendationTitle=function(e){return this.recommendationTitle||(this.recommendationTitle=o[e]),this.recommendationTitle},e.getRecommendations=function(e){var t=this,n=[],r=0;return e&&e.length>0&&(e.forEach((function(e){n.push(t.getRecommendation(e,r)),r++})),n.push()),n},e.getSelectedRecommendations=function(e,t){var n=[];return e&&n.push(this.getRecommendation(e,t)),n},e.getRecommendation=function(e,t){var n;return{recommendationId:null===(n=e.essId)||void 0===n?void 0:n.sourceId,rank:t,presentationDetails:{name:e.regionNames.primaryDisplayName}}},e}();t.RecommendationEvent=l},75541:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SystemEvent=t.SystemEventLevel=void 0,function(e){e.CRITICAL="CRITICAL",e.ERROR="ERROR",e.WARN="WARN",e.INFO="INFO",e.UNKNOWN="UNKNOWN"}(t.SystemEventLevel||(t.SystemEventLevel={}));var n=function(){function e(e,t){this.level=e,this.name=t}return e.prototype.toString=function(){return"SystemEvent(level="+this.level.toString()+" name="+this.name+")"},e}();t.SystemEvent=n},93459:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadEvent=t.EventName=void 0;var r,i,a,o,s,l=n(72841);!function(e){e.FOCUS="typeaheadFocused",e.BLUR="typeaheadBlurred",e.SELECT="typeaheadSuggestionSelected",e.CURRENT_LOCATION="currentLocation"}(r=t.EventName||(t.EventName={})),function(e){e.TYPEAHEAD_INTERACTION="typeaheadInteraction"}(i||(i={})),function(e){e.O="Origin",e.D="Destination",e.U="UNKNOWN"}(a||(a={})),function(e){e.GAIA="GAIA",e.LCM="LCM",e.GOOGLE="GOOGLE",e.UNKNOWN="UNKNOWN"}(o||(o={})),function(e){e.ALTERNATE="Alternate",e.CURRENT_LOCATION="CurrentLocation",e.POPULAR="Popular",e.GOOGLE="Google",e.NORMAL="Normal",e.RECENT_HISTORY="RecentHistory"}(s||(s={}));var c=function(){function e(e,t){var n,a,o=r.CURRENT_LOCATION===e;if(o&&(e=r.SELECT),this.typeaheadEvent={event:{name:e,type:i.TYPEAHEAD_INTERACTION},numberOfBackspaces:t.noOfBackspaces,page:{actionLocation:t.fieldName,lineOfBusiness:t.metadata.lob+this.getSublob(t.metadata.lob,t.metadata.subLob),pageName:this.getPageName(t.metadata.client||"",t.href)},searchField:this.getSearchField(t.fieldName),searchFieldContent:r.FOCUS===e?(null===(n=t.input)||void 0===n?void 0:n.value)||"":t.query===t.prefill?"":t.query||"",timestamps:{receivedAt:Date.now()}},r.FOCUS===e&&(t.isResolve=!1,t.focusTime=(new Date).toString()),[r.SELECT,r.BLUR].indexOf(e)>-1){if(t.response&&this.setSuggestionShownFields(t.response),t.selected&&(r.BLUR===e&&(this.typeaheadEvent.typeaheadSelection=!0,this.typeaheadEvent.charactersTyped=this.typeaheadEvent.searchFieldContent.length,this.calculateTimeSpendOnTypeaheadInput(t)),this.setSuggestionSelectedFields(t.selected)),void 0===t.selected&&r.BLUR===e){this.calculateTimeSpendOnTypeaheadInput(t),this.typeaheadEvent.typeaheadSelection=!1,this.typeaheadEvent.charactersTyped=this.typeaheadEvent.searchFieldContent.length;var s=null===(a=document.getElementsByName("regionId"))||void 0===a?void 0:a.item(0),l=(null==s?void 0:s.value)||"UNKNOWN";this.typeaheadEvent.searchDestination={id:t.isResolve?"UNKNOWN":l,sourceSystem:"UNKNOWN",fullName:t.isResolve?t.query:t.prefill||""}}o&&this.setCurrentLocationSelectedFields()}}return e.prototype.getTypeaheadEventMessage=function(){return{messageContent:this.typeaheadEvent,schemaName:"typeahead"}},e.prototype.getFlattenedJsonMessage=function(){var e,t,n;return{"ta.page.actionLocation":this.typeaheadEvent.page.actionLocation,"ta.page.lob":this.typeaheadEvent.page.lineOfBusiness,"ta.page.name":this.typeaheadEvent.page.pageName,"ta.searchField":this.typeaheadEvent.searchField,"ta.searchFieldContent":this.typeaheadEvent.searchFieldContent,"ta.timestamps.receivedAt":this.typeaheadEvent.timestamps.receivedAt,"ta.noOfSuggestions":this.typeaheadEvent.noOfSuggestions,"ta.requestId":this.typeaheadEvent.serviceRequestLogId,"ta.suggestionType":this.typeaheadEvent.suggestionType,"ta.searchDestination":(null===(e=this.typeaheadEvent.searchDestination)||void 0===e?void 0:e.sourceSystem)+":"+(null===(t=this.typeaheadEvent.searchDestination)||void 0===t?void 0:t.id),"ta.selectionDepth":this.typeaheadEvent.selectionDepth,"ta.suggestionList":null===(n=this.typeaheadEvent.suggestionList)||void 0===n?void 0:n.map((function(e){return e.sourceSystem+":"+e.id})).join(",")}},e.prototype.setSuggestionShownFields=function(e){this.typeaheadEvent.noOfSuggestions=e.sr.length,this.typeaheadEvent.serviceRequestLogId=e.rid,e.sr&&e.sr.length&&(this.typeaheadEvent.suggestionType=this.getSuggestionType(e.sr[0].category),this.typeaheadEvent.suggestionList=this.getSuggestionList(e.sr))},e.prototype.setSuggestionSelectedFields=function(e){this.typeaheadEvent.suggestionType=this.getSuggestionType(e.category),this.typeaheadEvent.searchDestination=this.getGeoEntity(e),this.typeaheadEvent.selectionDepth=parseInt(e.index,10),e&&"CATEGORIZED"!==e.displayType&&(this.typeaheadEvent.selectionDepth+=1)},e.prototype.setCurrentLocationSelectedFields=function(){this.typeaheadEvent.suggestionType=s.CURRENT_LOCATION,this.typeaheadEvent.typeaheadSelection=!0,this.typeaheadEvent.searchDestination={fullName:"CurrentLocation",id:"",type:s.CURRENT_LOCATION},this.typeaheadEvent.selectionDepth=1},e.prototype.getSearchField=function(e){return e?l.Utils.isOrigin(e)?a.O:l.Utils.isDestination(e)?a.D:a.U:a.U},e.prototype.getGeoEntity=function(e){return{fullName:e.regionNames.lastSearchName,id:this.getSourceId(e),shortName:e.regionNames.shortName,sourceSystem:this.getSourceSystem(e),type:e.type}},e.prototype.getSourceId=function(e){var t;return e.sourceId||(null===(t=e.essId)||void 0===t?void 0:t.sourceId)||e.hotelId||e.gaiaId||l.Utils.UNKNOWN},e.prototype.getSourceSystem=function(e){var t,n=e.sourceName||(null===(t=e.essId)||void 0===t?void 0:t.sourceName)||(e.hotelId?"LCM":e.gaiaId?"GAI":"");switch(n){case"GAI":return o.GAIA;case"LCM":return o.LCM;case"GPA":return o.GOOGLE;default:return n||o.UNKNOWN}},e.prototype.getSuggestionType=function(e){switch(e){case"GOOGLEMAPS":return s.GOOGLE;case"USERHISTORY":return s.RECENT_HISTORY;case"ALTERNATE":return s.ALTERNATE;case"POPULAR":return s.POPULAR;case"CURRENTLOCATION":return s.CURRENT_LOCATION;default:return s.NORMAL}},e.prototype.getSuggestionList=function(e){var t=this;return e.map((function(e){var n={id:t.getSourceId(e),sourceSystem:t.getSourceSystem(e),type:e.type};return e.hierarchyInfo&&e.hierarchyInfo.relation&&e.hierarchyInfo.relation.length&&(n.reason=e.hierarchyInfo.relation[0]),n}))},e.prototype.getSublob=function(e,t){return(t=l.Utils.getSubLob(e,t))?"."+t:""},e.prototype.getPageName=function(e,t){if(t=t.toLowerCase(),(e=e.toLowerCase())&&-1===e.indexOf("homepage")){var n=this.checkIfHomepage(t)?"Homepage":this.findPageName(e);return-1!==n.indexOf("UNKNOWN")?this.findPageName(t):n}return this.checkIfHomepage(t)?"Homepage":this.findPageName(t)},e.prototype.checkIfHomepage=function(e){return new RegExp("^(https:\\/\\/)[a-zA-Z]{2,}\\.[a-zA-Z0-9]{1,61}\\.[a-zA-Z.]{2,}((\\/\\?)|\\/$)").test(e)},e.prototype.findPageName=function(e){return-1!==e.indexOf("package")||-1!==e.indexOf("packagetype")?this.returnPageName("Packages",e):-1!==e.indexOf("flight")?this.returnPageName("Flights",e):-1!==e.indexOf("hotel")?this.returnPageName("Hotels",e):-1!==e.indexOf("car")?this.returnPageName("Cars",e):-1!==e.indexOf("lx")||-1!==e.indexOf("activities")||-1!==e.indexOf("things-to-do")?this.returnPageName("Activities",e):-1!==e.indexOf("rail")?this.returnPageName("Rails",e):"UNKNOWN"},e.prototype.returnPageName=function(e,t){return-1!==t.indexOf("search")?e+".Search":e+"LandingPage"},e.prototype.calculateTimeSpendOnTypeaheadInput=function(e){var t=e.focusTime;this.typeaheadEvent.timestamps.timeFromFocusToBlur=(new Date).getTime()-new Date(t).getTime()},e}();t.TypeaheadEvent=c},69503:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadEventLogger=t.LogType=void 0;var o,s=n(20439),l=n(93459),c=n(25626),u=n(72841);!function(e){e.TYPEAHEAD_FOCUS="typeahead-focus",e.TYPEAHEAD_SELECT="typeahead-select",e.TYPEAHEAD_BLUR="typeahead-blur",e.WIZARD_SUBMIT="wizard-submit",e.RECOMMENDATION_SEEN="recommendation-seen",e.RECOMMENDATION_SELECTED="recommendation-selected"}(o=t.LogType||(t.LogType={}));var d=function(){function e(t,n){this.analytics=t,this.isEgtaLoggingEnabled=!0,e.sessionStore||this.initSessionStore()}return e.prototype.initLogger=function(t){this.initSessionStore(),this.initializeInputField();var n=t.client,r=t.subLob,i=t.lob,a=t.locale,o=t.siteId,s=t.personalize,l=t.enableEgta;e.sessionStore.metadata={client:n,subLob:r,lob:i,locale:a,siteId:o,personalize:s,enableEgta:l}},e.prototype.logTypeaheadRequest=function(t){e.sessionStore&&(e.sessionStore.query=t)},e.prototype.logTypeaheadResponse=function(t){e.sessionStore.response=t,e.sessionStore.selected=void 0;var n=s.RecommendationEvent.getRecommendationSeenMessage(t,e.sessionStore.fieldName||"");n&&this.trackEventToUisPrime(this.getReferrerId(o.RECOMMENDATION_SEEN),o.RECOMMENDATION_SEEN,!1,[n])},e.prototype.logTypeaheadOpen=function(t){e.sessionStore.prefill=t,this.initializeInputField(),this.isEgtaLoggingEnabled&&this.trackEventToUisPrime(this.getReferrerId(o.TYPEAHEAD_FOCUS),o.TYPEAHEAD_FOCUS,!1,[new l.TypeaheadEvent(l.EventName.FOCUS,e.sessionStore).getTypeaheadEventMessage()])},e.prototype.logSuggestionSelected=function(t){var n="CURRENT_LOCATION"===(null==t?void 0:t.type);c.Optional.ofNullable(t).isPresent()&&this.essResponseIsNotEmpty()&&(e.sessionStore.selected=e.sessionStore.response.sr[t.index-1]);var r=n?l.EventName.CURRENT_LOCATION:l.EventName.SELECT,i=new l.TypeaheadEvent(r,e.sessionStore),a=s.RecommendationEvent.getRecommendationClickedMessage(e.sessionStore.selected,e.sessionStore.response,e.sessionStore.fieldName||"");if(this.isEgtaLoggingEnabled){var u=[i.getTypeaheadEventMessage()];a&&this.trackEventToUisPrime(this.getReferrerId(o.RECOMMENDATION_SELECTED),o.RECOMMENDATION_SELECTED,!1,[a]),this.trackEventToUisPrime(this.getReferrerId(),o.TYPEAHEAD_SELECT,!1,u)}return i.getFlattenedJsonMessage()},e.prototype.logTypeaheadBlurEvent=function(){var t,n=this.buildUisPrimeMessages();this.isEgtaLoggingEnabled&&n.push(new l.TypeaheadEvent(l.EventName.BLUR,e.sessionStore).getTypeaheadEventMessage()),this.trackEventToUisPrime(this.getReferrerId(),o.TYPEAHEAD_BLUR,!1,n),e.sessionStore.noOfBackspaces=0,null===(t=e.sessionStore.input)||void 0===t||t.removeEventListener("keydown",this.keyDown)},e.prototype.isResolveNoSuggestionSelected=function(t){e.sessionStore.isResolve=t},e.prototype.logWizardSubmitEvent=function(){this.resetLoggerState()},e.prototype.trackEventToUisPrime=function(e,t,n,i){var a,o;try{null===(a=this.analytics)||void 0===a||a.trackEvent(e,t,null===(o=this.analytics)||void 0===o?void 0:o.omnitureData,null,n,i)}catch(s){u.Utils.logError(r(r({},s),{message:"Failed typeahead event tracking to UIS Prime"}))}},e.prototype.buildUisPrimeMessages=function(){return u.Utils.isOrigin(e.sessionStore.fieldName||"")?e.leg.origin=r({},e.sessionStore):e.leg.dest=r({},e.sessionStore),a(this.getTrackingDataEvents(),[this.getSelectedSuggestionEvents()])},e.prototype.getTrackingDataEvents=function(){var t=this.getUserTypedQuery(e.sessionStore),n=t?t.length:0,r=[];return this.isASuggestionSelected()&&r.push(Object.freeze({messageContent:{name:"TypeaheadSelectionDepth",value:this.getSelectedSuggestionPosition()},schemaName:"events"})),e.sessionStore.response&&r.push(Object.freeze({messageContent:{name:"TypeaheadSearch",value:0},schemaName:"events"})),r.push(Object.freeze({messageContent:{name:"TypeaheadCharactersTyped",value:n},schemaName:"events"})),r},e.prototype.getSelectedSuggestionEvents=function(){var t=this.getSelectedSuggestionData("origin",e.leg.origin),n=this.getSelectedSuggestionData("dest",e.leg.dest);return Object.freeze({messageContent:{selectedSuggestions:[t,n]},schemaName:"allSelectedSuggestions"})},e.prototype.getSelectedSuggestionData=function(t,n){var r=null==n?void 0:n.selected,i="origin"!==t||n?(null==n?void 0:n.query)||(null==n?void 0:n.prefill)||"TANoneSelected":"OriginNotApplicable",a=this.getUserTypedQuery(e.sessionStore),o=r&&r.regionNames&&r.regionNames.lastSearchName||i;return{essRequestId:(e.sessionStore.response||{rid:"-"}).rid,lastSearchName:o,relation:r&&r.hierarchyInfo&&r.hierarchyInfo.relation&&r.hierarchyInfo.relation[0]||"-",searchField:t,sourceName:r?r.essId?r.essId.sourceName:r.sourceName?r.sourceName:"UNKNOWN":"UNKNOWN",stringSourceId:(r&&r.essId&&r.essId.sourceId||-1).toString(),suggestionType:r?r.type:"UNKNOWN",userHistory:!!r&&"USERHISTORY"===r.category,userTypedQuery:a}},e.prototype.getReferrerId=function(t){if(t===o.RECOMMENDATION_SEEN)return"TYPEAHEAD.EGREC.RecSeen";if(t===o.RECOMMENDATION_SELECTED)return"TYPEAHEAD.EGREC.RecSelected";var n=e.sessionStore.metadata||{},r=[];return r.push(this.getLaunchView(n.client||"")),r.push(this.getWizard(n.client||"")),r.push(n.lob||"Unknown"),r.push(this.getShortLob(n.lob||"",n.subLob)),r.push(n.locale||"-"),r.push(n.siteId||"-"),t===o.TYPEAHEAD_FOCUS?r.push("TAStart"):(r.push(this.getTypeaheadTrigger()),r.push.apply(r,a(this.getInstrumentationValue((n.lob||"").toLowerCase())))),r.join("|")},e.prototype.getLaunchView=function(e){return(e=e.toLowerCase()).indexOf("home")>-1?"Home":e.indexOf("flight")>-1?"FLT":e.indexOf("hotels.search")>-1?"":e.indexOf("hotel")>-1?"HTL":e.indexOf("vacationrental")>-1?"VR":e.indexOf("pack")>-1?"PKG":e.indexOf("car")>-1?"CAR":e.indexOf("cru")>-1?"CRU":e.indexOf("lx")>-1?"LX":e.indexOf("rail")>-1?"RAIL":e.indexOf("open")>-1?"OPEN":e},e.prototype.getWizard=function(e){switch(e.toLowerCase()){case"hotels.search":case"flights.search":case"open.search":case"cars.search":case"lx.Search":case"packages.search":return"UpdateSearch";default:return"CoreWzd"}},e.prototype.getShortLob=function(e,t){switch(e.toLowerCase()){case"flights":return"F."+u.Utils.getSubLob(e,t);case"hotels":return"H";case"packages":return u.Utils.getSubLob(e,t);case"activities":return"LX";case"cruises":return"CR";case"cars":return"C";default:return"-"}},e.prototype.getTypeaheadTrigger=function(){return this.essResponseIsNotEmpty()?""===e.sessionStore.response.q?this.isASuggestionSelected()?"TAShow.TAFocus":"TAShow.TANoSelection":this.isASuggestionSelected()?"TAShow.TASelection":"TAShow.TANoSelection":"TANoShow.TAPrevSearch"},e.prototype.getInstrumentationValue=function(t){var n=[],r="-";this.getSelectedSuggestionPosition()>=0&&(r=this.getSelectedSuggestionPosition().toString());var i=this.essResponseIsNotEmpty()?e.sessionStore.response.sr.length:0;return"flights"===t||"hotels"===t?n.push(this.getHierarchyType(e.sessionStore.selected)+"#"+r):n.push("L#"+r),n.push((this.getUserTypedQuery(e.sessionStore)&&e.sessionStore.metadata&&e.sessionStore.metadata.enableEgta?"EGTA":"ESS")+"#"+i),n.push("UH#"+this.getNumberOfUserHistorySuggestions()),n},e.prototype.getHierarchyType=function(e){if(c.Optional.ofNullable(e).isPresent()){if(this.isChild(e))return"CL";if(this.isParent(e))return"PL"}return"DL"},e.prototype.isChild=function(e){if(c.Optional.ofNullable(e).isNotPresent())return!1;var t=e&&e.hierarchyInfo&&e.hierarchyInfo.relation||[];return 0!==t.length&&t.indexOf("child")>=0},e.prototype.isParent=function(t){if(c.Optional.ofNullable(t).isNotPresent()||!this.essResponseIsNotEmpty())return!1;var n=parseInt(c.Optional.ofNullable(t.index).orElse("-1"),10);return!(n<0||e.sessionStore.response.sr.length<=n+1)&&this.isChild(e.sessionStore.response.sr[n+1])},e.prototype.getNumberOfUserHistorySuggestions=function(){return e.sessionStore.metadata&&e.sessionStore.metadata.personalize?this.essResponseIsNotEmpty()?e.sessionStore.response.sr.filter((function(e){return"USERHISTORY"===e.category})).length.toString():"0":"-"},e.prototype.essResponseIsNotEmpty=function(){return e.sessionStore.response&&e.sessionStore.response.sr&&e.sessionStore.response.sr.length>0},e.prototype.isASuggestionSelected=function(){return!!e.sessionStore.selected},e.prototype.getUserTypedQuery=function(e){return e.query===e.prefill?"":e.query},e.prototype.getSelectedSuggestionPosition=function(){if(!this.isASuggestionSelected()||c.Optional.ofNullable(e.sessionStore.selected.index).isNotPresent())return-1;try{return parseInt(e.sessionStore.selected.index,10)+1}catch(t){return-1}},e.prototype.resetLoggerState=function(){this.initSessionStore(),e.leg={}},e.prototype.keyDown=function(t){(t.key&&["Delete","Backspace"].indexOf(t.key)>-1||t.keyCode&&[8,46].indexOf(t.keyCode)>-1)&&(e.sessionStore.noOfBackspaces+=1)},e.prototype.initializeInputField=function(){var t,n;e.sessionStore.input=u.Utils.getDomElement(),e.sessionStore.fieldName=u.Utils.getInputElementId(e.sessionStore.input),null===(t=e.sessionStore.input)||void 0===t||t.removeEventListener("keydown",this.keyDown),null===(n=e.sessionStore.input)||void 0===n||n.addEventListener("keydown",this.keyDown)},e.prototype.initSessionStore=function(){e.sessionStore={metadata:{lob:u.Utils.UNKNOWN},noOfBackspaces:0,query:"",href:window.location.href}},e.leg={},e}();t.TypeaheadEventLogger=d},48182:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(92192),t),i(n(69503),t)},25626:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Optional=void 0;var n=function(){function e(e){this.value=e}return e.of=function(t){if(e.isEmpty(t))throw new Error("Optional.of doesn't accept undefined or null values. Use Optional.ofNullable instead");return new e(t)},e.ofNullable=function(t){return new e(t)},e.empty=function(){return new e(null)},e.isEmpty=function(e){return null==e||void 0===e},e.prototype.get=function(){if(this.isPresent())return this.value;throw new Error("Exception while trying to get the value of an empty Optional")},e.prototype.isPresent=function(){return!e.isEmpty(this.value)},e.prototype.isNotPresent=function(){return!this.isPresent()},e.prototype.orElse=function(e){return this.isPresent()?this.value:e},e}();t.Optional=n},72841:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var r=n(75541),i=function(){function e(){}return e.init=function(t){if(t&&"function"==typeof t.getLoggerWithIdentifier){var n=t.getLoggerWithIdentifier("uitk-react-typeahead");n&&"function"==typeof n.logEvent&&(e.logger=n)}},e.isOrigin=function(e){return(e=e.toLowerCase()).indexOf("origin")>-1||e.indexOf("from")>-1||e.indexOf("departure")>-1||e.indexOf("drop")>-1||e.indexOf("home")>-1||e.indexOf("loc2")>-1},e.isDestination=function(e){return(e=e.toLowerCase()).indexOf("dest")>-1||e.indexOf("to")>-1||e.indexOf("arrival")>-1||e.indexOf("near")>-1||e.indexOf("pick")>-1||0===e.indexOf("location")},e.getDomElement=function(){var e;return null===(e=document.querySelectorAll(".uitk-dialog-layer-responsive .uitk-typeahead-dialog, .uitk-typeahead-menu .uitk-menu-open")[0])||void 0===e?void 0:e.getElementsByTagName("input")[0]},e.logError=function(t){try{e.logger&&(t=t.stack?{message:t.message,stack:t.stack}:t,e.logger.logEvent(new r.SystemEvent(r.SystemEventLevel.ERROR,"TypeaheadLoggingError"),t))}catch(n){console.error("unable to log errors from typeahead-client-logger. Reason:"+n)}},e.getInputElementId=function(t){var n;return t&&((n=t.getAttribute("data-stid"))||e.logError({message:"Failed to retrieve input element id from 'data-stid'"})),n||e.UNKNOWN},e.getSubLob=function(e,t){t||(t=new URLSearchParams(window.location.search).get("pwaSubLOB")||"");switch(e.toLowerCase()){case"flights":switch(t&&t.toLowerCase()){case"oneway":return"OW";case"multicity":return"MD";default:return"RT"}case"packages":switch(t&&t.toLowerCase()){case"fhc":return"FHC";case"hc":return"HC";case"fc":return"FC";default:return"FH"}default:return""}},e.UNKNOWN="UNKNOWN",e}();t.Utils=i},70790:function(e,t,n){n.d(t,{Ik:function(){return p},KC:function(){return g},Yj:function(){return m},ai:function(){return h},bz:function(){return c},fc:function(){return d},lq:function(){return f},xL:function(){return v},zM:function(){return u}});var r=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};Symbol("brand");function i(e,t){return{reason:null==e?void 0:e.reason,validation:t.validation,origin:(null==e?void 0:e.origin)||"value",message:t.message,input:t.input,abortEarly:null==e?void 0:e.abortEarly,abortPipeEarly:null==e?void 0:e.abortPipeEarly}}function a(e,t){return{reason:t,origin:null==e?void 0:e.origin,abortEarly:null==e?void 0:e.abortEarly,abortPipeEarly:null==e?void 0:e.abortPipeEarly}}function o(e,t,n,r){if(!t||!t.length)return{output:e};let o,s,l=e;for(const c of t){const e=c(l);if(e.issue){o=o||a(n,r);const t=i(o,e.issue);if(s?s.push(t):s=[t],o.abortEarly||o.abortPipeEarly)break}else l=e.output}return s?{issues:s}:{output:l}}function s(e,t){return e&&"string"!=typeof e?[void 0,e]:[e,t]}function l(e,t,n,r,i,a){return{issues:[{reason:t,validation:n,origin:(null==e?void 0:e.origin)||"value",message:r,input:i,issues:a,abortEarly:null==e?void 0:e.abortEarly,abortPipeEarly:null==e?void 0:e.abortPipeEarly}]}}function c(e=[]){return{schema:"any",async:!1,_parse(t,n){return o(t,e,n,"any")}}}function u(e,t){const[n,r]=s(e,t);return{schema:"boolean",async:!1,_parse(e,t){return"boolean"!=typeof e?l(t,"type","boolean",n||"Invalid type",e):o(e,r,t,"boolean")}}}function d(e,t){return{schema:"native_enum",nativeEnum:e,async:!1,_parse(n,r){return Object.values(e).includes(n)?{output:n}:l(r,"type","native_enum",t||"Invalid type",n)}}}function h(e,t){const[n,r]=s(e,t);return{schema:"number",async:!1,_parse(e,t){return"number"!=typeof e?l(t,"type","number",n||"Invalid type",e):o(e,r,t,"number")}}}function p(e,t,n){const[r,i]=s(t,n);let a;return{schema:"object",object:e,async:!1,_parse(t,n){if(!t||"object"!=typeof t)return l(n,"type","object",r||"Invalid type",t);let s;a=a||Object.entries(e);const c={};for(const[e,r]of a){const i=t[e],a=r._parse(i,n);if(a.issues){const r={schema:"object",input:t,key:e,value:i};for(const e of a.issues)e.path?e.path.unshift(r):e.path=[r],null==s||s.push(e);if(s||(s=a.issues),null==n?void 0:n.abortEarly)break}else c[e]=a.output}return s?{issues:s}:o(c,i,n,"object")}}}function f(e){return{schema:"optional",wrapped:e,async:!1,_parse(t,n){return void 0===t?{output:t}:e._parse(t,n)}}}function m(e,t){const[n,r]=s(e,t);return{schema:"string",async:!1,_parse(e,t){return"string"!=typeof e?l(t,"type","string",n||"Invalid type",e):o(e,r,t,"string")}}}function g(e,t){return{schema:"union",union:e,async:!1,_parse(n,r){let i,a;for(const t of e){const e=t._parse(n,r);if(!e.issues){a=[e.output];break}if(i)for(const t of e.issues)i.push(t);else i=e.issues}return a?{output:a[0]}:l(r,"type","union",t||"Invalid type",n,i)}}}function v(e,t,n){const i=e._parse(t,n);return i.issues?{success:!1,error:new r(i.issues),issues:i.issues}:{success:!0,data:i.output,output:i.output}}}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/app-shared.a056c787f8de9d682f67.js.map
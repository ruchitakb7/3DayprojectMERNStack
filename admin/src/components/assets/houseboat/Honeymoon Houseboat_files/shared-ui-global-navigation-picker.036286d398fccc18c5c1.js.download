/*@license For license information please refer to shared-ui-global-navigation-picker.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9543],{98025:function(e,n,t){t.d(n,{LC:function(){return W},wv:function(){return K}});var r=t(96540),a=t(15043),l=t(1723),i=t(86663),c=t(69596),o=t(18518),u=t(74),m=t(67045),s=t(94495),d=t(15144),f=t(46198),g=t(1474),v=t(91214),p=t(68963),y=t(94220),E=t(90745),b=t(82960),k=t(36360),h=t(75826),N=t(10159),O=t(85625),P=t(68174),S=t(40051);function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){I(e,n,t[n])}))}return e}function A(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==t.return||t.return()}finally{if(c)throw a}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function w(){var e=L(["\n  fragment CurrencySelectorFragment on CurrencySelector {\n    disabled\n    heading\n    queryParameterName\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return w=function(){return e},e}function j(){var e=L(["\n  fragment LanguageSelectorFragment on LanguageSelector {\n    heading\n    queryParameterName\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return j=function(){return e},e}function x(){var e=L(["\n  fragment PosSelectorFragment on PosSelector {\n    heading\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return x=function(){return e},e}function D(){var e=L(["\n  fragment OneKeyMessagingFragment on Picker {\n    oneKeyMessagingHeading\n    oneKeyMessagingSubHeading\n  }\n"]);return D=function(){return e},e}function F(){var e=L(["\n  query LocalePreferencesQuery(\n    $context: ContextInput!\n    $lineOfBusiness: GlobalNavigationLineOfBusiness\n    $pickerTriggerPlacementType: PickerTriggerPlacementType\n    $selectedSiteId: Int\n  ) {\n    localePreferences(\n      context: $context\n      lineOfBusiness: $lineOfBusiness\n      pickerTriggerPlacementType: $pickerTriggerPlacementType\n      selectedSiteId: $selectedSiteId\n    ) {\n      heading\n      closeDialogText\n      submitText\n      bannerText\n      ...OneKeyMessagingFragment\n      urlToSubmit\n      queryParamsToSubmit {\n        key\n        value\n      }\n      trigger {\n        iconName\n        text\n        flagName\n        trackingEvent\n        displayType\n      }\n      preferences {\n        __typename\n        ...CurrencySelectorFragment\n        ...LanguageSelectorFragment\n        ...PosSelectorFragment\n      }\n      impressionAnalytics {\n        linkName\n        referrerId\n      }\n      saveAnalytics {\n        linkName\n        referrerId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}var K=function(e){return e.MENU_ITEM="MENU_ITEM",e.NAV_LINK="NAV_LINK",e}(K||{}),M=/\{value\}/g,z=function(e,n){var t=n.replace(/\s/,"");return e.replace(M,t)},B=(0,a.J1)(w()),R=function(e){var n=e.data,t=e.updateQueryParams,a=n.disabled,l=n.heading,i=n.queryParameterName,c=n.options,o=n.onChangeAnalytics,u=c.find((function(e){return!0===e.selected})),m=C(r.useState((null==u?void 0:u.value)||""),2),s=m[0],d=m[1],f=(0,h.KY)();r.useEffect((function(){return d((null==u?void 0:u.value)||"")}),[u]);return c.length?r.createElement(S.i,{id:"currency-selector",label:l,value:s,onChange:function(e){var n,r=e.target.value,a=(null==o?void 0:o.referrerId)?z(null==o?void 0:o.referrerId,r):"";f(a,null!==(n=null==o?void 0:o.linkName)&&void 0!==n?n:""),d(r),t(i,r,(null==u?void 0:u.value)||null)},disabled:a},c.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};R.displayName="CurrencySelector",R.fragment=A(T({},B),{__typename:"CurrencySelector"});var $=(0,a.J1)(j()),U=function(e){var n=e.data,t=e.updateQueryParams,a=n.heading,l=n.options,i=n.queryParameterName,c=n.onChangeAnalytics,o=l.find((function(e){return!0===e.selected})),u=C(r.useState((null==o?void 0:o.value)||""),2),m=u[0],s=u[1],d=(0,h.KY)();r.useEffect((function(){return s((null==o?void 0:o.value)||"")}),[o]);return l.length?r.createElement(S.i,{id:"language-selector",label:a,value:m,onChange:function(e){var n,r=e.target.options.selectedIndex,a=l[r].name,u=(null==c?void 0:c.referrerId)?z(null==c?void 0:c.referrerId,a):"";d(u,null!==(n=null==c?void 0:c.linkName)&&void 0!==n?n:"");var m=e.target.value;s(m),t(i,m,(null==o?void 0:o.value)||null)}},l.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};U.displayName="LanguageSelector",U.fragment=A(T({},$),{__typename:"LanguageSelector"});var q=(0,a.J1)(x()),H=function(e){var n=e.refetch,t=e.data,a=t.heading,l=t.options,i=t.onChangeAnalytics,c=l.find((function(e){return!0===e.selected})),o=C(r.useState((null==c?void 0:c.value)||""),2),u=o[0],m=o[1],s=(0,h.KY)();return l.length?r.createElement(S.i,{id:"site-selector","data-stid":"site-selector",label:a,value:u,onChange:function(e){var t,r=e.target.options.selectedIndex,a=l[r].name,c=(null==i?void 0:i.referrerId)?z(null==i?void 0:i.referrerId,a):"";s(c,null!==(t=null==i?void 0:i.linkName)&&void 0!==t?t:"");var o=e.target.value;m(o),n({selectedSiteId:Number(o)})}},l.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};H.displayName="PosSelector",H.fragment=A(T({},q),{__typename:"PosSelector"});var Q=(0,a.J1)(D()),V=function(e){var n=e.data,t=n.oneKeyMessagingHeading,a=n.oneKeyMessagingSubHeading;return r.createElement(r.Fragment,null,t&&r.createElement(y.b,{padding:{inline:"four",blockstart:"six"}},r.createElement(d.i,null,r.createElement(d.j,null,r.createElement(y.b,{margin:{inlinestart:"two",inlineend:"three"}},r.createElement(s.a,{name:"warning"}))),r.createElement(d.j,null,r.createElement("div",{"data-stid":"picker-one-key-heading"},r.createElement(E.E,{size:6},t))))),a&&r.createElement(y.b,{padding:{inline:"six",blockstart:"six"}},r.createElement("div",{"data-stid":"picker-one-key-subheading"},r.createElement(E.c,{size:400},a))))};V.displayName="OneKeyMessaging",V.fragment=Q;var J=(0,a.J1)(F(),R.fragment,U.fragment,H.fragment,V.fragment),G=[R,U,H],Y=function(e){var n=e.content;return r.createElement(c.E,{fullWidth:!0},r.createElement(y.b,{padding:{block:"one"}},r.createElement(d.i,{alignItems:"center",space:"two"},r.createElement(d.j,null,r.createElement(y.b,{margin:{inlinestart:"four",inlineend:"six"}},r.createElement(s.a,{name:"info_outline"}))),r.createElement(d.j,null,r.createElement("div",{"data-stid":"picker-banner-text"},r.createElement(E.c,null,n))))))},W=function(e){var n=e.skipSsr,t=e.lineOfBusiness,a=e.pickerTriggerPlacementType,c=e.inverseTheme,d={context:(0,k.R)().context,lineOfBusiness:t,pickerTriggerPlacementType:a},E=(0,l.I)(J,{variables:d,ssr:!n}),S=E.data,_=E.error,I=E.loading,A=E.refetch,L=E.networkStatus,w=C((0,N.useDialog)("disp-settings-picker"),3),j=w[0],x=w[1],D=w[2],F=r.useRef(null),K=(0,h.KY)(),M=(0,O.useExperiment)("Shared_UI_Remove_Deprecated_UITK_Nav_Button").exposure.bucket>0,z=r.useCallback((function(){x.closeDialog()}),[x]),B={},R=function(e,n,t){n===t?delete B[e]:B[e]=n},$=function(){var e,n,t;x.closeDialog();var r=null==S||null===(e=S.localePreferences)||void 0===e?void 0:e.saveAnalytics;(null==r?void 0:r.referrerId)&&K(r.referrerId,(null==r?void 0:r.linkName)||"Picker button");var a=null==S||null===(n=S.localePreferences)||void 0===n?void 0:n.urlToSubmit,l=(null==S||null===(t=S.localePreferences)||void 0===t?void 0:t.queryParamsToSubmit)||[],c={};l.forEach((function(e){c[e.key]=e.value}));var o=Object.keys(l).length>0,u=Object.keys(B).length>0;if(a||o||u)if(a){var m=i.stringify(T({},c,B));window.location.href=m?"".concat(a,"?").concat(m):a}else{var s=i.parse(window.location.search),d=i.stringify(T({},s,c,B));window.location.search=d}};if(I&&!(2===L||4===L)||_||!S)return null;var U=S.localePreferences,q=U.preferences,H=U.trigger,Q=U.heading,W=U.closeDialogText,X=U.submitText,Z=U.bannerText,ee=U.impressionAnalytics;if(!q||!q.length)return null;var ne,te,re=function(){K(H.trackingEvent,""),x.toggleDialog()},ae=r.createElement(r.Fragment,null,H.iconName&&r.createElement(y.b,{margin:{inlineend:"one"}},r.createElement(s.a,{name:H.iconName,size:s.E.SMALL})),r.createElement(y.b,{margin:{inline:"one"}},r.createElement("span",null,H.text)),H.flagName&&r.createElement(y.b,{margin:{inlinestart:"one"}},r.createElement(g.a,{name:H.flagName}))),le=r.createElement(r.Fragment,null,H.iconName&&r.createElement(y.b,{padding:{inlineend:"two"}},r.createElement(s.a,{name:H.iconName,size:s.E.SMALL})),H.text,H.flagName&&r.createElement(y.b,{padding:{inlinestart:"two"}},r.createElement(g.a,{name:H.flagName}))),ie=r.createElement(r.Fragment,null,H.iconName&&r.createElement(s.a,{name:H.iconName,size:s.E.SMALL}),H.text,H.flagName&&r.createElement(g.a,{name:H.flagName})),ce=r.createElement(p.h,{isVisible:j},r.createElement(D,null,r.createElement(P.LM,null,r.createElement(P.NP,null,r.createElement(p.e,{isVisible:j,returnFocusOnClose:!0,type:"full",triggerRef:F},r.createElement(b.b,{toolbarTitle:Q,key:"picker-dialog-toolbar",navigationContent:{onClick:z,navIconLabel:W,navType:"close"}}),Z&&r.createElement(Y,{content:Z}),r.createElement(V,{data:S.localePreferences}),r.createElement(p.f,null,q.map((function(e){if(!e)return null;var n=G.find((function(n){return n.fragment.__typename===e.__typename}));return n?r.createElement(y.b,{margin:{block:"three"},key:"selector-".concat(e.__typename)},r.createElement("div",null,r.createElement(n,{refetch:A,data:e,updateQueryParams:R}))):null})),r.createElement(v.E,{type:v.a.BUTTON},r.createElement(o.E,{isFullWidth:!0,size:u.E.LARGE,onClick:$},X))))),r.createElement(P.zQ,null,r.createElement(p.e,{isVisible:j,returnFocusOnClose:!0,type:"centered",centeredSheetSize:"small",triggerRef:F},r.createElement(b.b,{toolbarTitle:Q,key:"picker-dialog-toolbar",navigationContent:{onClick:z,navIconLabel:W,navType:"close"}}),Z&&r.createElement(Y,{content:Z}),r.createElement(V,{data:S.localePreferences}),r.createElement(p.f,null,q.map((function(e){if(!e)return null;var n=G.find((function(n){return n.fragment.__typename===e.__typename}));return n?r.createElement(y.b,{margin:{block:"three"},key:"selector-".concat(e.__typename)},r.createElement("div",null,r.createElement(n,{refetch:A,data:e,updateQueryParams:R}))):null})),r.createElement(o.E,{isFullWidth:!0,size:u.E.LARGE,onClick:$},X)))))));return r.createElement(r.Fragment,null,"GLOBAL_NAV_LINK"===H.displayType?r.createElement(y.b,{padding:{block:"three",inline:"six"}},r.createElement(f.E,{className:"uitk-list-item",onClick:re,"data-stid":"link-type-picker-trigger",domRef:F},r.createElement("button",{type:"button"},ie))):r.createElement(y.b,{margin:M?{small:{inline:"one"},large:{inline:"two"}}:void 0},r.createElement(m.E,{className:M?void 0:"global-navigation-nav-button",onClick:re,"data-stid":"button-type-picker-trigger",domRef:F,inverse:c},null===H.iconName?ae:le)),j&&((null==ee?void 0:ee.referrerId)?r.createElement(h.ee,{referrerId:null!==(ne=null==ee?void 0:ee.referrerId)&&void 0!==ne?ne:"",linkName:null!==(te=null==ee?void 0:ee.linkName)&&void 0!==te?te:""},ce):ce))};W.displayName="sharedui-Picker"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-global-navigation-picker.036286d398fccc18c5c1.js.map
/*@license For license information please refer to shared-ui-lodging-form.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[347],{26973:function(e,n,t){t.d(n,{E1:function(){return ae},Jf:function(){return ne},b7:function(){return un},g$:function(){return re},jx:function(){return se},ny:function(){return ue},p0:function(){return on},rB:function(){return de},vM:function(){return an},xJ:function(){return en},zf:function(){return be}});var r=t(96540),a=t(15043),o=t(36360),i=t(24355),u=t(75826),l=t(85625),c=t(1192),d=t(2619),s=t(77969),m=t(68963),f=t(10159),p=t(1723),v=t(71831),g=t(74),y=t(91040),h=t(29309),b=t(50138),E=t(40051),D=t(46198),I=t(90745),x=t(67045),A=t(18518),C=t(15144),R=t(94220),O=t(82960),k=t(21181),S=t(30313),_=t(83885);function P(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){T(e,n,t[n])}))}return e}function L(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function N(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function M(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,u=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(l){u=!0,a=l}finally{try{i||null==t.return||t.return()}finally{if(u)throw a}}return o}}(e,n)||B(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function j(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,n){if(e){if("string"==typeof e)return P(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?P(e,n):void 0}}function V(){var e=w(["\n  query FormQuery($context: ContextInput!, $propertyId: String!, $roomInput: [RoomInput!], $dateRange: PropertyDateRangeInput) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      searchForm(roomInput: $roomInput, dateRange: $dateRange) @client {\n        id\n        method\n        action\n      }\n    }\n  }\n"]);return V=function(){return e},e}function U(){var e=w(["\n  query DateFieldRatesQuery($context: ContextInput!, $propertyId: String!, $roomInput: [RoomInput!]!, $dateRange: PropertyDateRangeInput!) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      id\n      propertyCalendar(dateRange: $dateRange, roomInput: $roomInput) {\n        propertyCalendarRates {\n          date {\n            isoFormat\n          }\n          displayPrice\n          accessibilityLabel\n          theme\n        }\n        disclaimer {\n          value\n        }\n      }\n    }\n  }\n"]);return U=function(){return e},e}function $(){var e=w(["\n  fragment DateOrderValidationFragment on DateOrderValidation {\n    events\n    error\n  }\n"]);return $=function(){return e},e}function G(){var e=w(["\n  fragment EndDateRequiredValidationFragment on EndDateRequiredValidation {\n    events\n    error\n  }\n"]);return G=function(){return e},e}function J(){var e=w(["\n  fragment MaxDateRangeValidationFragment on MaxDateRangeValidation {\n    events\n    error\n    maxDateRange\n  }\n"]);return J=function(){return e},e}function H(){var e=w(["\n  fragment StartDateRequiredValidationFragment on StartDateRequiredValidation {\n    events\n    error\n  }\n"]);return H=function(){return e},e}function q(){var e=w(["\n  fragment DateFieldFragment on LodgingFormDateField {\n    startId\n    startName\n    startLabel\n    startPlaceholder\n    startInvalid\n\n    endId\n    endName\n    endLabel\n    endPlaceholder\n    endInvalid\n\n    buttonText\n    daysBookableInAdvance\n    midnightBookingOffset\n\n    validations {\n      ...DateOrderValidationFragment\n      ...MaxDateRangeValidationFragment\n      ...StartDateRequiredValidationFragment\n      ...EndDateRequiredValidationFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return q=function(){return e},e}function K(){var e=w(["\n  fragment SubmitButtonFragment on LodgingFormSubmitButton {\n    label\n  }\n"]);return K=function(){return e},e}function Y(){var e=w(["\n  query FormFieldQuery($context: ContextInput!, $propertyId: String!) {\n    propertyInfo(context: $context, propertyId: $propertyId) {\n      searchForm @client {\n        fields {\n          ...DateFieldFragment\n          ...SubmitButtonFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return Y=function(){return e},e}function z(){var e=w(["\n  fragment TravelersSummaryFragment on TravelersSummary {\n    roomsAndGuests\n  }\n"]);return z=function(){return e},e}function W(){var e=w(["\n  fragment ChildrenAgesFragment on ChildrenAges {\n    childAgeUpdatedLiveAnnounce\n    selectChildAgeLabel\n    youngestChildAgeText\n  }\n"]);return W=function(){return e},e}function Q(){var e=w(["\n  fragment TravelersStepInputFragment on StepInput {\n    title\n    increaseText\n    decreaseText\n    caption\n  }\n"]);return Q=function(){return e},e}function X(){var e=w(["\n  fragment RoomFragment on RoomField {\n    roomTitleAriaLabel\n    roomTitle\n    removeRoomButtonLabel\n    removeRoomButtonAriaLabel\n    roomRemovedLiveAnnounce\n\n    adultsStepInput {\n      ...TravelersStepInputFragment\n    }\n    childrenStepInput {\n      ...TravelersStepInputFragment\n    }\n\n    childrenAges {\n      ...ChildrenAgesFragment\n    }\n  }\n\n  ","\n  ","\n"]);return X=function(){return e},e}function Z(){var e=w(["\n  fragment RoomPickerFragment on LodgingFormTravelers {\n    roomPicker {\n      accessibility\n      toolBarIconLabel\n      toolBarTitle\n      addRoomText\n      doneLabel\n      roomAddedLiveAnnounce\n      room {\n        ...RoomFragment\n      }\n    }\n    travelersSummary {\n      ...TravelersSummaryFragment\n    }\n  }\n\n  ","\n  ","\n"]);return Z=function(){return e},e}function ee(){var e=w(["\n  fragment TravelersFieldFragment on LodgingFormTravelers {\n    label\n    travelersSummary {\n      ...TravelersSummaryFragment\n    }\n    ...RoomPickerFragment\n  }\n\n  ","\n  ","\n"]);return ee=function(){return e},e}var ne=function(e){return e.ON_CHANGE="ON_CHANGE",e.ON_LOAD="ON_LOAD",e.ON_SUBMIT="ON_SUBMIT",e}(ne||{}),te=r.createContext((function(){})),re=function(){return r.useContext(te)},ae=te.Provider,oe=r.createContext(null),ie=function(){return r.useContext(oe)},ue=function(e){var n=e.children,t=e.value,a=(0,o.R)().context;return r.createElement(oe.Provider,{value:L(F({},t),{context:a})},n)},le=r.createContext({addExecutor:function(e){return[e]}}),ce=le.Provider,de=((0,a.J1)(V()),function(e){var n=e.inputs,t=e.data,a=e.children,i=e.formRef,u=(0,o.R)().context,l=M(r.useState([]),2),c=l[0],d=l[1],s=r.useCallback((function(e){d(j(c).concat([e]))}),[c,d]),m=L(F({},n||{}),{context:u}),f=re(),p=r.useCallback((function(e){var n=new FormData(e.target);c.some((function(e){return!e(n,"ON_SUBMIT")}))?e.preventDefault():f({type:"submit",event:e,data:n})}),[f,c]);if(!t)return null;var v=t.method,g=t.action,y=t.id;return r.createElement("form",{method:v,action:g,id:y,onSubmit:p,"data-stid":"lodging-form",ref:i},r.createElement(ue,{value:m},r.createElement(ce,{value:{addExecutor:s}},a)))});de.displayName="sharedui-LodgingForm";var se=(0,r.createContext)({referrer:{pagePrefix:""}});function me(){return(0,r.useContext)(se)}var fe=(0,a.J1)(U()),pe=function(){return{}},ve=function(e){switch(e){case"AGGRESSIVE":return"negative";case"HIGHLIGHT":return"positive";default:return""}},ge=function(e,n){var t=new Set,r=n.map((function(e){return t.add(e.date.isoFormat),e}));return e.filter((function(e){return!t.has(e.date.isoFormat)})).forEach((function(e){r.push(e)})),r},ye=function(e,n){var t=n.fetchMoreResult;return t?!e||"object"==typeof e&&0===Object.keys(e).length?t:{propertyInfo:L(F({},e.propertyInfo),{propertyCalendar:L(F({},e.propertyInfo.propertyCalendar),{disclaimer:t.propertyInfo.propertyCalendar.disclaimer,propertyCalendarRates:ge(e.propertyInfo.propertyCalendar.propertyCalendarRates,t.propertyInfo.propertyCalendar.propertyCalendarRates)})})}:e},he=function(e,n){return function(t){var r=function(e,n){var t=new Date,r=new Date(e);r.setDate(e.getDate()-n/2);var a=r;r<t&&(a=t);var o=new Date(a);return o.setDate(o.getDate()+n),{startDate:a,endDate:o}}(t,90),a=r.startDate,o=r.endDate,i={checkInDate:{day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear()},checkOutDate:{day:o.getDate(),month:o.getMonth()+1,year:o.getFullYear()}},u=L(F({},n||{}),{dateRange:i});null==e||e({variables:u,updateQuery:ye})}},be=function(e){var n=L(F({},ie()),{roomInput:[{adults:2}]}),t=M((0,s._)(fe,{ssr:!1,variables:n||{}}),2),a=t[0],o=t[1],i=o.data,u=o.fetchMore;return r.useEffect((function(){e&&a()}),[a,e]),e?[function(e){if(e)return e.reduce((function(e,n){var t=F({},e);return t[n.date.isoFormat]={text:n.displayPrice,className:ve(n.theme),ariaLabel:n.accessibilityLabel},t}),{})}(null==i?void 0:i.propertyInfo.propertyCalendar.propertyCalendarRates),(null==i?void 0:i.propertyInfo.propertyCalendar.disclaimer.value)||"",he(u,n)]:[{},"",pe]},Ee=function(e,n,t){return{id:e,description:n,callback:function(){return t(e,n,!0)}}},De=function(e){return e},Ie=(0,a.J1)($());var xe=(0,a.J1)(G());var Ae=(0,a.J1)(J());var Ce=(0,a.J1)(H());function Re(e,n,t){return n&&n.length?n.reduce((function(n,r){var a,o,i,u=!0,l=null,c=j(n);if(!r.events.find((function(n){return n===e})))return c;switch(r.__typename){case"DateOrderValidation":var d;u=(d=M((o=(a=t).startDate,i=a.endDate,o&&i&&Se(o)&&Se(i)?[o<i,"end"]:[!0,"start"]),2))[0],l=d[1];break;case"MaxDateRangeValidation":var s;s=M(function(e,n){var t=n.startDate,r=n.endDate;if(!(t&&r&&Se(t)&&Se(r)))return[!0,"end"];var a=new Date(t);return a.setDate(a.getDate()+e.maxDateRange),[r<=a,"end"]}(r,t),2),u=s[0],l=s[1];break;case"StartDateRequiredValidation":var m;m=M(function(e,n){var t=n.startDate;return t&&Se(t)?[!0,"start"]:[!1,"start"]}(0,t),2),u=m[0],l=m[1];break;case"EndDateRequiredValidation":var f;f=M(function(e,n){var t=n.endDate;return t&&Se(t)?[!0,"start"]:[!1,"end"]}(0,t),2),u=f[0],l=f[1]}return u?c:(c.push({message:r.error,dateType:l}),j(c))}),[]):[]}var Oe=new Date,ke=(0,a.J1)(q(),Ie,Ae,Ce,xe),Se=function(e){return Boolean(e&&"Invalid Date"!==e.toDateString())},_e=function(e){if(e){var n=e.year,t=e.month,r=e.day;return new Date(n,t-1,r)}},Pe=function(e){return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},Te=function(e){var n;"function"==typeof(null==e||null===(n=e.current)||void 0===n?void 0:n.focus)&&e.current.focus()},Fe=function(e){var n,t,a,o,s,p,v,g,y=e.autoOpenCalendar,h=e.closeOnSubmit,b=void 0===h||h,E=e.data,D=e.endDateRef,I=e.fieldName,x=e.isOpenOverride,A=e.startDateRef,C=e.onDismiss,R=e.mediumDateFormatProp,O=e.showCalendar,k=E.buttonText,S=E.daysBookableInAdvance,_=E.midnightBookingOffset,P=E.validations,T=N(E,["buttonText","daysBookableInAdvance","midnightBookingOffset","validations"]),w=me().referrer,j=M(r.useState(!1),2),B=j[0],V=j[1],U=M(r.useState(T.startInvalid),2),$=U[0],G=U[1],J=M(r.useState(T.endInvalid),2),H=J[0],q=J[1],K=re(),Y=ie(),z=r.useContext(le).addExecutor,W=(0,c.useLocalization)(),Q=W.formatDateString,X=W.getWeekData,Z=(0,d.useLogger)().warning,ee=(0,u.KY)(),ne=r.useMemo((function(){var e;return _e(null==Y||null===(e=Y.dateRange)||void 0===e?void 0:e.checkInDate)}),[Y]),te=r.useMemo((function(){var e;return _e(null==Y||null===(e=Y.dateRange)||void 0===e?void 0:e.checkOutDate)}),[Y]),ae=r.useMemo((function(){return function(e,n,t){return{startAnalytics:Ee("".concat(e,":ChangeDatesCheckIn"),"Open Date Picker",n),endAnalytics:Ee("".concat(e,":ChangeDatesCheckOut"),"Open Date Picker",n),datePickerAnalytics:{closeAnalytics:Ee("".concat(e,":ChangeDatesClose"),"Close Date Picker",n),doneAnalytics:t?Ee("".concat(e,":ChangeDatesDone"),"Apply Date Picker",n):Ee("".concat(e,":Datepicker-Done-Button-Pressed"),"Search Date Picker",n),nextPageAnalytics:Ee("".concat(e,":NextMonthClick"),"Next Month Click",n),previousPageAnalytics:Ee("".concat(e,":PreviousMonthClick"),"Previous Month Click",n)}}}(w.pagePrefix,ee,Boolean(ne||te))}),[ee,ne,te,w]),oe=M((n=M((0,f.useDialog)("datepicker-start"),3),t=n[0],a=n[1],o=n[2],s=M((0,f.useDialog)("datepicker-end"),3),p=s[0],v=s[1],g=s[2],[function(e,n){return n===i.e.END?r.createElement(m.h,{isVisible:p},r.createElement(g,null,r.createElement(r.Fragment,null,e))):r.createElement(m.h,{isVisible:t},r.createElement(o,null,r.createElement(r.Fragment,null,e)))},function(e){e===i.e.END?v.openDialog():a.openDialog()},function(){p?v.closeDialog():a.closeDialog()}]),3),ue=oe[0],ce=oe[1],de=oe[2],se=(0,l.useExperiment)("AvailCal_High_and_Low_Web"),fe=se.exposure,pe=se.logExperiment,ve=r.useMemo((function(){return function(e,n,t){var r=Re(e,P,{startDate:n,endDate:t});if(r.length){var a;if(K({type:"error",field:I,errors:r}),"ON_LOAD"!==e)"start"===(null===(a=r[0])||void 0===a?void 0:a.dateType)?Te(A):Te(D);return r.forEach((function(e){"end"===e.dateType?q(e.message):G(e.message)})),!1}return!0}}),[P,K,I,A,D]),ge=M(be(Se(ne)&&Se(te)),3),ye=ge[0],he=ge[1],Ie=ge[2],xe=parseInt(i.j[X().firstDay.toUpperCase()],10);r.useEffect((function(){z((function(e,n){var t=new Date(e.get(E.startName)),r=new Date(e.get(E.endName));return ve(n,t,r)})),ne&&te&&ve("ON_LOAD",ne,te),y&&V(!0)}),[]),r.useEffect((function(){V(!!y)}),[y]);var Ae=L(F({},T),{endInvalid:H,startInvalid:$,routerLinkWrapper:De,showDatePicker:void 0!==x?x:B,startAnalytics:ae.startAnalytics,endAnalytics:ae.endAnalytics,mediumDateFormatProp:R}),Ce={analytics:ae.datePickerAnalytics,dateFieldProps:Ae,datePickerContent:ye,footerText:he,dialogWrapper:ue,onOpenCB:function(e,n){ne&&(null==Ie||Ie(ne)),n&&(ce(e),O&&O(!0)),pe(fe),ye&&Object.keys(ye).length>0&&ee("".concat(w.pagePrefix,".Property_Calendar.Rates"),"Calendar Rates visible to user"),V(!0)},onSubmitCB:function(e,n,t){t?(b&&de(),O&&O(!1)):V(!1),(null==e?void 0:e.toDateString())===(null==ne?void 0:ne.toDateString())&&(null==n?void 0:n.toDateString())===(null==te?void 0:te.toDateString())||(G(""),q(""),ve("ON_CHANGE",e,n)?K({type:"change",field:I,value:{dates:e&&n?{checkInDate:Pe(e),checkOutDate:Pe(n)}:void 0}}):t&&b&&de())},onDismissCB:function(e){if(!e||!C)return e?(de(),void(O&&O(!1))):void V(!1);C()},buttonText:k,startDate:ne&&Se(ne)?Q(ne,{raw:"yyyy-MM-dd"}):"",endDate:te&&Se(te)?Q(te,{raw:"yyyy-MM-dd"}):"",doubleMonths:!0,daysBookableInAdvance:S||void 0,firstDayOfWeek:xe,midnightBookingOffset:_||void 0,validStartDate:Q(Oe,{raw:"yyyy-MM-dd"}),startDateRef:A,endDateRef:D};return($||H)&&Z("SEARCH_FORM_DATE_RANGE_ERROR","".concat($," | ").concat(H),"startDate=".concat(ne," endDate=").concat(te)),r.createElement(i.h,F({},Ce))};Fe.displayName="DateField",(Fe.fragment=ke).__typename="LodgingFormDateField";var Le=(0,a.J1)(K()),Ne=function(e){var n=e.data,t=e.className,a=e.inputRef,o=n.label,i=M((0,r.useContext)(h.I),1)[0].amenitiesAdaptExSuccessEvents,c=me().referrer,d=(0,l.useExperiment)("Larger_image_mosaic_on_top_of_pdp").exposure,s=(0,l.useExperiment)("Adaptex_campaign_PDP_mosaic_for_small_screens").exposure,m=d.bucket>0||1===s.bucket,f=(0,r.useContext)(b.Rc).setAdaptExSuccessEvent,p=(0,u.KY)(),E=(0,u._q)().track;return r.createElement(v.E,{onClick:function(){p("".concat(c.pagePrefix,":Datepicker-Check-Availability"),"Check Availability"),j(i).forEach((function(e){E(u.p3.EVENT,{data:(0,y.rPv)(F({},e))})})),m&&f("ADAPTEX_MOSAIC_VIEW_CHECK_AVAILABILITY_FORM_EVENT")},className:t,type:"submit",domRef:a,isFullWidth:!0,size:g.E.LARGE},o)};(Ne.fragment=Le).__typename="LodgingFormSubmitButton",Ne.displayName="SubmitButton";var Me=(0,a.J1)(Y(),Fe.fragment,Ne.fragment);function we(e){var n=function(e){var n=function(n){var t,a=n.skipSsr,o=ie(),i=(0,p.I)(Me,{variables:o||{},ssr:!a}),u=i.data,l=i.error,c=i.loading;if(l||c)return null;var d=null==u||null===(t=u.propertyInfo.searchForm)||void 0===t?void 0:t.fields.find((function(n){return n.__typename===e.fragment.__typename}));return d?r.createElement(e,F({data:d},n)):null};return n.displayName="".concat(e.displayName,"Query"),n}(e),t=r.memo((function(t){var a=t.data;return void 0!==a?r.createElement(e,L(F({},t),{data:a})):r.createElement(n,F({},t))}));return t.displayName="".concat(e.displayName,"Isomorphic"),t}function je(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.replace(/({\d})/g,(function(e){var n=parseInt(e.slice(1,-1),10);return t[n]}))}var Be=r.createContext((function(){})),Ve=function(){return r.useContext(Be)},Ue=Be.Provider,$e=(0,a.J1)(z()),Ge=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.rooms,o=r.useMemo((function(){return a&&a.length>0?a.reduce((function(e,n){return e+(n.adults||0)}),0):0}),[a])+r.useMemo((function(){return a&&a.length>0?a.reduce((function(e,n){var t;return e+((null===(t=n.children)||void 0===t?void 0:t.length)||0)}),0):0}),[a]),i=(0,c.useLocalization)().formatText;if(!t)return o.toString();var u=a.length;return i(n.roomsAndGuests,u,o)},Je=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=e;return t.forEach((function(e,n){var t=new RegExp("\\{".concat(n,"\\}"),"g");a=a.replace(t,e.toString())})),a},He=(0,a.J1)(W()),qe=function(e){var n=e.childAge,t=e.childIndex,a=e.roomIndex,o=e.data,i=o.childAgeUpdatedLiveAnnounce,l=o.selectChildAgeLabel,c=o.youngestChildAgeText,d=Ve(),s=(0,u.KY)(),m=me().referrer,f=r.useMemo((function(){return function(e){for(var n=[],t=0;t<=17;t+=1){var r=0===t?je(e,1):t.toString();n.push({value:"".concat(t),name:r})}return n}(c)}),[c]),p="child-".concat(a,"-").concat(t),v="age-".concat(t);return r.createElement(E.i,{label:je(l,t+1),id:v,name:p,value:n.toString(),onChange:function(e){var n=parseInt(e.target.value,10);Number.isNaN(n)||d({type:"UPDATE_CHILD_AGE",roomIndex:a,childIndex:t,childAge:n}),s("".concat(m.pagePrefix,":ROOM.").concat(a,".Child.").concat(t,".AGE.").concat(n),"Child age update"),(0,k.liveAnnounce)(je(i,t,n),k.Level.POLITE)}},f.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)})))};qe.displayName="ChildrenAges",qe.fragment=He;var Ke=(0,a.J1)(Q()),Ye=function(e){var n,t=e.data,a=e.min,o=e.max,i=e.roomIndex,l=e.roomCount,c=e.room,d=e.travelerType,s=t.title,m=t.increaseText,f=t.decreaseText,p=t.caption,v=me().referrer,g=(0,u.KY)(),y=Ve(),h="adults"===d?"UPDATE_ADULTS_COUNT":"UPDATE_CHILDREN_COUNT",b=r.useMemo((function(){return{id:"".concat(v.pagePrefix,":Guest"),description:"Adjust guest count in change search",callback:function(e,n){return g(e,n)}}}),[g]),E="room-".concat(l,"-").concat(i,"-").concat(d),D="adults"===d?c.adults:null===(n=c.children)||void 0===n?void 0:n.length;return r.createElement(_.a,{label:s,incrementText:je(m,i+1),incrementId:"".concat(E,"-increase"),decrementText:je(f,i+1),decrementId:"".concat(E,"-decrease"),description:p||void 0,min:a,max:o,value:D,onChange:function(e){var n=parseInt(e.target.value,10);Number.isNaN(n)||y({type:h,roomIndex:i,count:n})},analytics:b,id:E})};Ye.displayName="TravelersStepInput",Ye.fragment=Ke;var ze=(0,a.J1)(X(),Ke,He),We=function(e){var n,t,a,o=e.headerRef,i=e.room,l=e.roomCount,c=e.roomIndex,d=e.singleUnit,s=e.totalTravelers,m=e.data,f=l===c+1,p=m.roomTitleAriaLabel,v=m.roomTitle,g=m.removeRoomButtonLabel,y=m.removeRoomButtonAriaLabel,h=m.adultsStepInput,b=m.childrenStepInput,E=m.childrenAges,D=m.roomRemovedLiveAnnounce,I=(0,u.KY)(),A=Ve(),O=me().referrer;return r.createElement(R.b,{key:"room-".concat(l,"-").concat(c),padding:d?{blockend:"three"}:{block:"three"},margin:d?{blockend:"three"}:{block:"three"},border:d?void 0:["blockend"]},r.createElement("div",null,r.createElement("h3",{tabIndex:-1,className:"uitk-type-200 uitk-type-medium","aria-label":je(p,c+1,l),ref:f?o:null},r.createElement("span",{"aria-hidden":"true"},je(v,c+1))),r.createElement(Ye,{travelerType:"adults",min:1,max:i.adults+14-s,roomIndex:c,roomCount:l,room:i,data:h}),r.createElement(Ye,{travelerType:"children",min:0,max:Math.min(6,((null===(n=i.children)||void 0===n?void 0:n.length)||0)+14-s),roomIndex:c,roomCount:l,room:i,data:b}),i.children&&(null===(t=i.children)||void 0===t?void 0:t.length)>0&&r.createElement(S.E,{space:"two",columns:2},null===(a=i.children)||void 0===a?void 0:a.map((function(e,n){var t=e.age;return r.createElement(qe,{key:n,childAge:t,childIndex:n,roomIndex:c,data:E})}))),0!==c&&r.createElement(R.b,{padding:{blockstart:"four"}},r.createElement(C.i,{justifyContent:"end"},r.createElement(C.j,null,r.createElement(x.E,{onClick:function(){A({type:"REMOVE_ROOM",roomIndex:c}),I("".concat(O.pagePrefix,":RemoveRoom"),"Remove room"),(0,k.liveAnnounce)(je(D,l))},"aria-label":Je(y,c+1,l)},g))))))};We.displayName="Room",We.fragment=ze;var Qe=(0,a.J1)(Z(),ze,$e),Xe=function(e){var n=e.data,t=e.onDismiss,a=e.onSave,o=e.onUpdate,i=e.submitDisabled,l=void 0!==i&&i,c=e.travelersInput,d=e.triggerRef,s=M(r.useReducer((function(e,n){var t=function(e,n){switch(n.type){case"ADD_ROOM":return L(F({},e),{rooms:e.rooms.concat([{adults:1}])});case"REMOVE_ROOM":var t=n.roomIndex;return L(F({},e),{rooms:e.rooms.filter((function(e,n){return n!==t}))});case"UPDATE_ADULTS_COUNT":var r=n.roomIndex,a=n.count;return L(F({},e),{rooms:e.rooms.map((function(e,n){return n===r?L(F({},e),{adults:a}):e}))});case"UPDATE_CHILDREN_COUNT":var o,i,u,l=n.roomIndex,c=n.count>(null!==(u=null===(i=e.rooms[l])||void 0===i||null===(o=i.children)||void 0===o?void 0:o.length)&&void 0!==u?u:0);return L(F({},e),{rooms:e.rooms.map((function(e,n){var t,r;return n===l?L(F({},e),{children:c?(null===(t=e.children)||void 0===t?void 0:t.concat([{age:0}]))||[{age:0}]:null===(r=e.children)||void 0===r?void 0:r.slice(0,-1)}):e}))});case"UPDATE_CHILD_AGE":var d=n.roomIndex,s=n.childIndex,m=n.childAge;return L(F({},e),{rooms:e.rooms.map((function(e,n){var t;return d===n?L(F({},e),{children:null===(t=e.children)||void 0===t?void 0:t.map((function(e,n){return s===n?{age:m}:e}))}):e}))});default:return e}}(e,n);return o&&o(t),t}),c),2),f=s[0],p=s[1],v=n.roomPicker,y=v.accessibility,h=v.toolBarIconLabel,b=v.toolBarTitle,E=v.addRoomText,D=v.doneLabel,I=v.room,S=v.roomAddedLiveAnnounce,_=r.useRef(null),P=me().referrer,T=(0,u.KY)();r.useEffect((function(){var e;E&&"function"==typeof(null==_||null===(e=_.current)||void 0===e?void 0:e.focus)&&_.current.focus()}),[f.rooms.length,E]);var N=function(){(0,k.liveAnnounce)("",k.Level.ASSERTIVE)},w=r.useMemo((function(){return{id:"".concat(P.pagePrefix,":ChangeRoomGuest"),description:"Close Room Picker",callback:function(e,n){return T(e,n)}}}),[T]),j=f.rooms.reduce((function(e,n){var t;return e+n.adults+((null===(t=n.children)||void 0===t?void 0:t.length)||0)}),0),B=f.rooms.length>=8||j>=14;return r.createElement(Ue,{value:p},r.createElement(m.e,{type:"centered",centeredSheetSize:"small",isVisible:!0,triggerRef:d},r.createElement(O.b,{toolbarTitleA11yText:y,toolbarTitle:b,navigationContent:{onClick:function(){t&&(N(),t())},onClickAnalytics:w,navType:"close",navIconLabel:h}}),r.createElement(R.b,{className:"uitk-scroll-vertical",padding:{inline:"four",blockstart:"half",blockend:"three"}},r.createElement("section",null,f.rooms.map((function(e,n){return r.createElement(We,{data:I,headerRef:_,key:n,room:e,roomCount:f.rooms.length,roomIndex:n,singleUnit:!E,totalTravelers:j})})),E&&r.createElement(R.b,{padding:{blockstart:"four",blockend:"twelve"}},r.createElement(C.i,{justifyContent:"end"},r.createElement(C.j,null,r.createElement(x.E,{onClick:function(){p({type:"ADD_ROOM"}),T("".concat(P.pagePrefix,":AddRoom"),"Add room"),(0,k.liveAnnounce)(je(S,f.rooms.length),k.Level.POLITE)},disabled:B},E)))),r.createElement(A.E,{size:g.E.LARGE,onClick:function(){a&&(N(),a(f))},disabled:l},D)))))};Xe.displayName="RoomPicker",Xe.fragment=Qe;var Ze=function(e){var n=function(e){return{adultsString:r.useMemo((function(){return e.map((function(e){return e.adults})).filter((function(e){return e>0})).join(",")}),[e]),childrenString:r.useMemo((function(){return e.map((function(e,n){var t;return null===(t=e.children)||void 0===t?void 0:t.map((function(e){return"".concat(n+1,"_").concat(e.age)})).join(",")})).filter((function(e){return e&&""!==e})).join(",")}),[e])}}(e.rooms),t=n.adultsString,a=n.childrenString;return r.createElement(r.Fragment,null,t&&r.createElement("input",{type:"hidden",name:"adults",value:t,readOnly:!0}),a&&r.createElement("input",{type:"hidden",name:"children",value:a,readOnly:!0}))};Ze.displayName="TravelersHiddenInput";var en=function(e){return e.INPUT="input",e.LINK="link",e}(en||{}),nn=(0,a.J1)(ee(),Qe,$e),tn=[{adults:2}],rn=function(e){var n=e.fieldName,t=e.className,a=e.data,o=e.closeOnSubmit,i=void 0===o||o,c=e.trigger,d=M(r.useState(!1),2),s=d[0],p=d[1],v=r.useRef(null),g=me().referrer,y=re(),h=ie(),b=M((0,f.useDialog)("travelerPicks"),3),x=b[0],A=b[1],C=A.closeDialog,R=A.openDialog,O=b[2],k=(0,u.KY)(),S=r.useRef(null),_=(null==h?void 0:h.roomInput)||tn,P=M(r.useState(_),2),T=P[0],N=P[1];r.useEffect((function(){_&&N(_)}),[_]);var w=a.label,j=a.travelersSummary,B={rooms:T},V=Ge(B,j,s),U=Ge({rooms:T},j,s);r.useEffect((function(){p(!0)}),[]);var $=function(){var e;"function"==typeof(null==v||null===(e=v.current)||void 0===e?void 0:e.focus)&&v.current.focus()},G=function(e){var t=e.rooms;N(t),y({type:"change",field:n,value:e}),k("".concat(g.pagePrefix,":ChangeRoomGuestDone"),"Apply Room Picker"),$(),i&&C()},J=function(){R(),k("".concat(g.pagePrefix,":ChangeRoomGuest"),"Open Room Picker")};if("link"===c)return r.createElement(r.Fragment,null,r.createElement(D.E,{onClick:J,inline:!0},r.createElement("button",{type:"button",ref:S},r.createElement(I.c,{size:300},U))),r.createElement(Ze,{rooms:T}),r.createElement(m.h,{isVisible:x},r.createElement(O,null,r.createElement(Xe,{travelersInput:B,onSave:G,onDismiss:C,data:a,triggerRef:S}))));var H={id:"travelers-field-id",label:w,icon:"person"},q=L(F({},H),{name:"adults"}),K=L(F({},H),{onChange:J,onClick:J,domRef:v}),Y=r.createElement(l.Experiment,{name:"Vrbex_pets_toggle"},r.createElement(l.ExperimentControl,null,r.createElement(E.b,L(F({},q),{value:U,domRef:S}))),r.createElement(l.ExperimentVariant,{bucket:1},r.createElement(E.b,L(F({},q),{value:V,domRef:S})))),z=r.createElement(l.Experiment,{name:"Vrbex_pets_toggle"},r.createElement(l.ExperimentControl,null,r.createElement(E.g,L(F({},K),{value:U,domRef:S}))),r.createElement(l.ExperimentVariant,{bucket:1},r.createElement(E.g,L(F({},K),{value:V,domRef:S}))));return r.createElement("div",{className:t},!s&&Y,s&&r.createElement(r.Fragment,null,z,r.createElement(Ze,{rooms:T})),r.createElement(m.h,{isVisible:x},r.createElement(O,null,r.createElement(Xe,{travelersInput:B,onSave:G,onDismiss:function(){C(),$()},data:a,triggerRef:S}))))};rn.displayName="TravelersField",rn.fragment=L(F({},nn),{__typename:"LodgingFormTravelers"});var an=we(Fe),on=we(rn),un=we(Ne)}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-lodging-form.600f0cdb905d6f3fbb6c.js.map
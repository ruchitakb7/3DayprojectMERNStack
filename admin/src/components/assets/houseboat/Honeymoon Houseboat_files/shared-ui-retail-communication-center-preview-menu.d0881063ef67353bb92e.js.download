/*@license For license information please refer to shared-ui-retail-communication-center-preview-menu.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9093],{70975:function(e,n,t){t.d(n,{t:function(){return je}});var i=t(96540),r=t(15043),a=t(70111),l=t(1723),o=t(36360),c=t(68174),u=t(93149),m=t(15144),d=t(46198),s=t(94220),v=t(90745),f=t(75826),E=t(77969),p=t(67045),y=t(74),g=t(94495),b=t(34638),k=t(70313),C=t(20917),h=t(85625),I=t(69596),x=t(26226),w=t(30313),N=t(67226),S=t(18518),_=t(16484),A=t(39938),O=t(71831);function z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){T(e,n,t[n])}))}return e}function L(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function j(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,a=[],l=!0,o=!1;try{for(t=t.call(e);!(l=(i=t.next()).done)&&(a.push(i.value),!n||a.length!==n);l=!0);}catch(c){o=!0,r=c}finally{try{l||null==t.return||t.return()}finally{if(o)throw r}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return z(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function P(){var e=B(["\n  fragment IconFragment on Icon {\n    title\n    description\n    id\n    token\n  }\n"]);return P=function(){return e},e}function D(){var e=B(["\n  fragment TertiaryButtonFragment on CommunicationCenterButton {\n    button {\n      ... on UITertiaryButton {\n        __typename\n        primary\n        accessibility\n        icon {\n          ...IconFragment\n        }\n        analytics {\n          eventType\n          linkName\n          referrerId\n        }\n      }\n    }\n    action {\n      ... on UILinkAction {\n        resource {\n          value\n        }\n      }\n    }\n  }\n  ","\n"]);return D=function(){return e},e}function U(){var e=B(["\n  fragment CommunicationCenterBannerFragment on CommunicationCenterBanner {\n    icon {\n      ...IconFragment\n    }\n    title\n    body\n    theme\n    action {\n      ...TertiaryButtonFragment\n    }\n  }\n\n  ","\n  ","\n"]);return U=function(){return e},e}function R(){var e=B(["\n  fragment EGDSStylizedTextFragment on EGDSStylizedText {\n    size\n    text\n    weight\n  }\n"]);return R=function(){return e},e}function M(){var e=B(["\n  fragment CommunicationCenterEmptyStateFragment on CommunicationCenterEmptyState {\n    __typename\n    title {\n      ...EGDSStylizedTextFragment\n    }\n    body {\n      ...EGDSStylizedTextFragment\n    }\n    image {\n      url\n      description\n    }\n    impressionAnalytics {\n      event\n      referrerId\n      linkName\n    }\n    emptyStateType\n    actions {\n      button {\n        ... on UIPrimaryButton {\n          __typename\n          primary\n          analytics {\n            linkName\n            referrerId\n          }\n        }\n      }\n      action {\n        ... on UILinkAction {\n          resource {\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return M=function(){return e},e}function $(){var e=B(["\n  fragment EGDSGraphicTextFragment on EGDSGraphicText {\n    graphic {\n      ...IconFragment\n    }\n    text\n  }\n  ","\n"]);return $=function(){return e},e}function G(){var e=B(["\n  fragment NotificationsLinkFragment on EGDSStandardLink {\n    __typename\n    text\n    size\n    action {\n      resource {\n        value\n      }\n      analytics {\n        linkName\n        referrerId\n      }\n    }\n  }\n"]);return G=function(){return e},e}function H(){var e=B(["\n  fragment NotificationsItemFragment on CommunicationCenterNotificationCard {\n    __typename\n    cardId\n    title {\n      ...EGDSStylizedTextFragment\n    }\n    body {\n      ...EGDSStylizedTextFragment\n    }\n    type\n    icon {\n      ...IconFragment\n    }\n    links {\n      ...NotificationsLinkFragment\n    }\n    impressionAnalytics {\n      event\n      referrerId\n      linkName\n    }\n    revealActions {\n      referrerId\n      linkName\n      eventType\n    }\n    userActions {\n      __typename\n      icon {\n        id\n        description\n      }\n      type\n      text {\n        size\n        text\n        weight\n      }\n      revealActions {\n        referrerId\n        linkName\n        eventType\n      }\n    }\n    timeStamp {\n      ...EGDSStylizedTextFragment\n    }\n    state\n  }\n  ","\n  ","\n  ","\n"]);return H=function(){return e},e}function J(){var e=B(["\n  mutation UpdateNotificationsInMenuMutation(\n    $contextInput: ContextInput!\n    $notificationIds: [String!]!\n    $state: CommunicationCenterNotificationState!\n  ) {\n    updateNotificationsState(context: $contextInput, notificationIds: $notificationIds, state: $state) {\n      notificationId\n      operationStatus\n    }\n  }\n"]);return J=function(){return e},e}function K(){var e=B(["\n  query CommunicationCenterPreviewQuery($context: ContextInput!, $optionalContext: OptionalContextInput) {\n    communicationCenterPreview(context: $context, optionalContext: $optionalContext) {\n      label {\n        ...EGDSStylizedTextFragment\n      }\n      notifications {\n        heading {\n          ...EGDSStylizedTextFragment\n        }\n        unseen\n        notifications {\n          ...NotificationsItemFragment\n        }\n        emptyState {\n          ...CommunicationCenterEmptyStateFragment\n        }\n        impressionAnalytics {\n          event\n          referrerId\n          linkName\n        }\n        clickToActionButton {\n          button {\n            ... on UIPrimaryButton {\n              primary\n              analytics {\n                linkName\n                referrerId\n              }\n            }\n          }\n          action {\n            ... on UILinkAction {\n              resource {\n                value\n              }\n            }\n          }\n        }\n        banner {\n          ...CommunicationCenterBannerFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return K=function(){return e},e}function Y(){var e=B(["\n  query CommunicationCenterPreviewMenuQuery($context: ContextInput!, $optionalContext: OptionalContextInput) {\n    communicationCenterEntryPoint(context: $context, optionalContext: $optionalContext) {\n      __typename\n      icon {\n        id\n        token\n        description\n      }\n      label\n      notificationUnseenCount\n      messageUnseenCount\n      defaultTab\n      clickAnalytics {\n        linkName\n        referrerId\n        eventType\n      }\n      impressionAnalytics {\n        event\n        referrerId\n        linkName\n      }\n    }\n  }\n"]);return Y=function(){return e},e}function W(){var e=B(["\n  query PreviewMenuGlobalHeaderQuery(\n    $context: ContextInput!\n    $viewSize: HeaderViewSize\n    $lineOfBusiness: GlobalNavigationLineOfBusiness\n    $layout: HeaderLayout\n    $marketing: HeaderMarketingInput\n    $minimal: Boolean = false\n    $theme: String\n  ) {\n    globalHeader(\n      context: $context\n      viewSize: $viewSize\n      lineOfBusiness: $lineOfBusiness\n      layout: $layout\n      marketing: $marketing\n      minimal: $minimal\n      theme: $theme\n    ) {\n      redDotState @client\n    }\n  }\n"]);return W=function(){return e},e}var V,q=function(e){var n=(0,f.KY)(),t=e.unseen,r=e.unread,a=e.label,l=e.impressionAnalytics,o=e.clickAnalytics,c=e.clickAnalyticsForMessage,E=null==o?void 0:o.referrerId,p=null==o?void 0:o.linkName,y=null==c?void 0:c.referrerId,g=null==c?void 0:c.linkName,b=t+r>0,k=j(i.useState(b),2),C=k[0],h=k[1],I=null==l?void 0:l.referrerId,x=(null==l?void 0:l.linkName)||"";return i.createElement("a",{href:"/inbox/notifications"},i.createElement(s.b,{padding:{block:"three",inline:"six"}},i.createElement(d.E,{onClick:function(){h(!1),E&&p&&n(E,p,void 0,[]),y&&g&&n(y,g,void 0,[])}},i.createElement("button",{type:"button"},i.createElement(m.i,null,i.createElement(m.j,null,i.createElement(v.c,{size:300,theme:"standard"},a)),i.createElement(m.j,null,I&&i.createElement(f.ee,{referrerId:I,linkName:x},C&&i.createElement(u.n,{visible:!0}))))))))};q.displayName="sharedui-CommunicationCenterPreviewMenuLinkContent";var Q,X=(T(V={},"BOLD","bold"),T(V,"MEDIUM","medium"),T(V,"REGULAR","regular"),V),Z={100:100,200:200,300:300,400:400,500:500,600:600,700:700,800:800,900:900},ee=(T(Q={},"ONE_ONE",N.E.R1_1),T(Q,"FOUR_THREE",N.E.R4_3),T(Q,"SIXTEEN_NINE",N.E.R16_9),T(Q,"THREE_TWO",N.E.R3_2),T(Q,"THREE_FOUR",N.E.R3_4),T(Q,"TWENTY_ONE_NINE",N.E.R21_9),T(Q,"FOUR_ONE",N.E.R4_1),{error:"error",critical:"critical"}),ne=(0,r.J1)(P()),te=function(e){var n=e.data,t=e.isIconOnly,r=e.onClick,a=n.id,l={name:a,id:a,title:n.title||a,description:n.description||a};if(t)return i.createElement(g.a,L(F({},l),{size:g.E.MEDIUM}));return i.createElement(p.E,{tag:"a",href:"#",onClick:function(){r&&r()}},i.createElement(g.a,F({},l)))};te.fragment=ne,te.displayName="Icon";var ie=(0,r.J1)(D(),te.fragment),re=function(e){var n=e.data,t=e.buttonSize,r=e.inverse,a=e.onClick,l=e.disabled,o=e.tag,c=n.button,u=n.action,m=(0,f.KY)(),d=F({href:null==u?void 0:u.resource.value,size:t,disabled:l,inverse:r,onClick:function(){if("UITertiaryButton"===(null==c?void 0:c.__typename)&&c.analytics){var e=c.analytics,n=e.referrerId,t=e.linkName;m(n,t)}null==a||a()},tag:o,target:o?"_blank":""},"UITertiaryButton"===(null==c?void 0:c.__typename)&&(null==c?void 0:c.accessibility)?{"aria-label":c.accessibility}:{});return i.createElement(i.Fragment,null,"UITertiaryButton"===(null==c?void 0:c.__typename)&&i.createElement(p.E,L(F({},d),{"data-stid":"tertiary-button"}),c.icon&&i.createElement(g.a,{name:c.icon.id}),c.primary))};re.fragment=ie,re.displayName="CommunicationCenterTertiaryButton";var ae=(0,r.J1)(U(),te.fragment,re.fragment),le=function(e){var n=e.data,t=e.onBannerClick,r=e.onComponentMountCallback,a=e.isFlexLayout,l=n.action,o=n.body,u=n.icon,f=n.title,E=n.theme;(0,i.useEffect)((function(){r&&r()}),[]);var p=function(){t&&t()},b=function(){var e,n;return o?i.createElement(I.E,{theme:ee[E]},i.createElement(m.i,{direction:"column"},i.createElement(m.j,null,i.createElement(v.c,{weight:"bold"},f)),i.createElement(m.j,null,i.createElement(v.c,{weight:"regular"},o)))):i.createElement(I.E,{theme:ee[E]},i.createElement(m.i,{direction:"column"},i.createElement(m.j,null,i.createElement(v.c,{weight:"medium"},f)),i.createElement(m.j,null,i.createElement(s.b,{padding:{blockend:"one",blockstart:"two"}},i.createElement(d.E,{theme:"default"},"UITertiaryButton"===(null==l||null===(e=l.button)||void 0===e?void 0:e.__typename)&&i.createElement("a",{href:null==l||null===(n=l.action)||void 0===n?void 0:n.resource.value,onClick:p},null==l?void 0:l.button.primary))))))};if(a){var k,C,h=i.createElement(d.E,{theme:"default",inline:!0},"UITertiaryButton"===(null==l||null===(k=l.button)||void 0===k?void 0:k.__typename)&&i.createElement("a",{href:null==l||null===(C=l.action)||void 0===C?void 0:C.resource.value,onClick:p},null==l?void 0:l.button.primary));return o&&(h=i.createElement(v.c,{weight:"medium"},o)),i.createElement(i.Fragment,null,n&&i.createElement(I.E,{theme:ee[E]},i.createElement(m.i,{alignItems:"center",space:"four"},i.createElement(x.E,null,i.createElement(g.a,{name:u.id,description:u.description})),i.createElement(m.j,null,i.createElement("div",null,i.createElement(v.c,{weight:"bold"},f),h)))))}return i.createElement(i.Fragment,null,n&&i.createElement(c.LM,null,i.createElement(c.NP,null,b()),i.createElement(c.rw,null,b()),i.createElement(c.zQ,null,function(){var e;return o?i.createElement(I.E,{theme:ee[E]},i.createElement(m.i,{alignItems:"center",space:"two"},i.createElement(m.j,null,i.createElement("div",null,i.createElement(g.a,{name:u.id,spotlight:{theme:"standard",background:!1}}))),i.createElement(m.j,null,i.createElement("div",null,i.createElement(v.c,{weight:"bold"},f),i.createElement(v.c,{weight:"regular"},o))))):i.createElement(I.E,{theme:ee[E]},i.createElement(w.E,{columns:["min-content","max-content","max-content"],areas:["icon text action"],alignItems:"center",space:{column:"four"}},i.createElement(w.a,{area:"icon"},i.createElement(g.a,{name:u.id,description:u.description})),i.createElement(w.a,{area:"text"},i.createElement(v.c,null,f)),i.createElement(w.a,{area:"action"},"UITertiaryButton"===(null==l||null===(e=l.button)||void 0===e?void 0:e.__typename)&&i.createElement(re,{buttonSize:y.E.MEDIUM,data:l,onClick:p,inverse:!0}))))}())))};le.displayName="CommunicationCenterBanner",le.fragment=L(F({},ae),{__typename:"CommunicationCenterBanner"});var oe=(0,r.J1)(R());function ce(e,n){return e||(n?X[n]:void 0)}var ue=function(e){var n=e.spacing,t=e.overflow,r=e.weightOverride,a=e.align,l=e.theme,o=e.isStriked,c=e.data,u=e.ariaLabelText,m=c.size,d=c.text,s=c.weight,f={align:a,overflow:t,size:m?Z[m]:void 0,spacing:n,weight:ce(r,s),inline:o?"s":void 0,theme:l};return u?i.createElement(i.Fragment,null,i.createElement(v.c,{className:"is-visually-hidden"},u),i.createElement(v.c,L(F({},f),{"aria-hidden":"true"}),d)):i.createElement(v.c,F({},f),d)};ue.fragment=oe,ue.displayName="EGDSStylizedText";var me=(0,r.J1)(M(),ue.fragment),de=function(e){var n,t,r,a=e.data,l=a.title,o=a.body,c=a.image,u=a.actions,d=a.impressionAnalytics,E=a.emptyStateType,p=null==o?void 0:o[0],g=null==u||null===(n=u[0])||void 0===n?void 0:n.button,b=null==g?void 0:g.analytics,k=null==b?void 0:b.referrerId,C=null==b?void 0:b.linkName,h=null==d?void 0:d.referrerId,I=(null==d?void 0:d.linkName)||"",x=(0,f.KY)(),w=j(i.useState(null==u||null===(r=u[0])||void 0===r||null===(t=r.action)||void 0===t?void 0:t.resource.value),2),A=w[0],O=w[1];return i.useEffect((function(){var e,n;"SIGN_IN"===E&&O(function(e){var n="";if(null!==window.location){var t=window.location.pathname?window.location.pathname:"",i=window.location.search?window.location.search:"",r=window.location.hash?window.location.hash:"",a=t.concat(i,r);n="?&uurl=".concat(encodeURIComponent("e3id=redr&rurl=".concat(a)))}return e+n}(null==u||null===(n=u[0])||void 0===n||null===(e=n.action)||void 0===e?void 0:e.resource.value))}),[u,E]),i.createElement(i.Fragment,null,h&&i.createElement(f.ee,{referrerId:h,linkName:I},i.createElement(m.i,{alignItems:"center",justifyContent:"center",direction:"column",blockSize:"full_size"},i.createElement(_.m,{padded:!1},i.createElement(s.b,{padding:{inlinestart:"four",inlineend:"four",blockend:"sixteen"}},i.createElement("div",null,i.createElement(m.j,{alignSelf:"center",grow:1,maxWidth:300},i.createElement("section",null,i.createElement(N.a,{imageFit:"contain"},i.createElement(N.b,{alt:null==c?void 0:c.description,src:null==c?void 0:c.url})),i.createElement(s.b,{padding:{blockstart:"four",blockend:"four"}},i.createElement(v.E,{align:"center",tag:"h1",size:5},null==l?void 0:l.text)),i.createElement(s.b,{padding:{blockstart:"four",blockend:"six"}},i.createElement("div",null,i.createElement(ue,{data:p,align:"center"}))),(null==g?void 0:g.primary)&&i.createElement(S.E,{tag:"a",href:A,size:y.E.LARGE,onClick:function(){k&&C&&x(k,C)}},null==g?void 0:g.primary)))))))))};de.fragment=me,de.displayName="CommunicationCenterEmptyState";var se=(0,r.J1)($(),te.fragment),ve=function(e){var n=e.data,t=e.theme,r=n.graphic,a=n.text;return i.createElement(i.Fragment,null,"Icon"===r.__typename&&i.createElement(s.b,{margin:{blockstart:"two"}},i.createElement(g.a,{theme:t,name:r.id,description:r.description})),i.createElement(s.b,{margin:{blockstart:"three"}},i.createElement(v.c,{theme:t},a)))};ve.fragment=se,ve.displayName="EGDSGraphicText";var fe=function(e,n){var t=function(e){var t,i,r=null===(i=n.payload)||void 0===i||null===(t=i.notificationsList)||void 0===t?void 0:t.find((function(n){return n.cardId===e.cardId}));return null!=r},i=function(n){return e.notificationsList.map((function(e){return t(e)?L(F({},e),{state:n}):e}))};switch(n.action){case 0:return L(F({},e),{notificationsList:i("SEEN"),unseenCount:0});case 1:return L(F({},e),{notificationsList:i("READ"),unseenCount:0});case 2:return L(F({},e),{notificationsList:e.notificationsList.filter((function(e){return!t(e)})),unseenCount:0});default:return{notificationsList:[],unseenCount:0}}},Ee={notificationsList:[],unseenCount:0},pe=(0,i.createContext)({state:Ee}),ye=function(e){var n=e.notificationsList,t=e.unseenCount,r=e.children,a=j((0,i.useReducer)(fe,L(F({},Ee),{notificationsList:n,unseenCount:t})),2),l=a[0],o=a[1];return i.createElement(pe.Provider,{value:{state:l,dispatch:o}},r||null)},ge=function(){return i.useContext(pe)},be=(0,i.createContext)({mutation:function(){},error:void 0,loading:!1}),ke=function(e){var n=e.mutationFunction,t=e.children,r=j((0,A.n)(n),2),a=r[0],l=r[1],o=l.error,c=l.loading;return i.createElement(be.Provider,{value:(0,i.useMemo)((function(){return{mutation:a,error:o,loading:c}}),[a,o,c])},t||null)},Ce=function(){return(0,i.useContext)(be)},he=(0,r.J1)(G()),Ie=function(e){var n,t,r,a,l,c=e.notification,u=e.data,m=e.children,d=(null==u||null===(t=u.action)||void 0===t||null===(n=t.resource)||void 0===n?void 0:n.value)?null==u||null===(a=u.action)||void 0===a||null===(r=a.resource)||void 0===r?void 0:r.value:"#",s=null==u||null===(l=u.action)||void 0===l?void 0:l.analytics,v=null==s?void 0:s.referrerId,E=null==s?void 0:s.linkName,p=(0,f.KY)(),y=(0,o.R)().context,g=Ce().mutation,b=ge().dispatch,k=null==c?void 0:c.cardId,C=null==c?void 0:c.state;return i.createElement("a",{href:d,target:"_blank",rel:"noopener",onClick:function(){v&&E&&p(v,E),"SEEN"===C&&(b({action:1,payload:{notificationsList:[c]}}),g({variables:{contextInput:y,notificationIds:[k],state:"READ"}}))}},m)};Ie.fragment=he,Ie.displayName="NotificationsLink";var xe=(0,r.J1)(H(),te.fragment,ue.fragment,Ie.fragment),we=function(e){var n,t,r,a,l,c,d,E,p,y,g,b,k,C,h,I,x,w,N,S=e.data,A=e.children,O=null==S||null===(n=S.impressionAnalytics)||void 0===n?void 0:n[0],z=null==O?void 0:O.referrerId,T=(null==O?void 0:O.linkName)||"",F=null==S||null===(r=S.links)||void 0===r||null===(t=r[0].action)||void 0===t?void 0:t.analytics,L=null==F?void 0:F.referrerId,j=null==F?void 0:F.linkName,B=null==S?void 0:S.cardId,P=null==S?void 0:S.state,D=(0,f.KY)(),U=(0,o.R)().context,R=Ce().mutation,M=ge().dispatch;return i.createElement(i.Fragment,null,z&&i.createElement(f.ee,{referrerId:z,linkName:T},i.createElement(m.i,null,i.createElement(m.j,{alignSelf:"start",grow:0},(null===(a=S.links)||void 0===a?void 0:a[0])&&i.createElement(Ie,{notification:S,data:null===(l=S.links)||void 0===l?void 0:l[0]},i.createElement(_.m,{padded:["blockstart","blockend","inlinestart"]},i.createElement(s.b,{margin:{blockstart:"two"}},i.createElement(u.o,{visible:"READ"!==S.state}))))),i.createElement(m.j,{alignSelf:"start",grow:0},(null===(c=S.links)||void 0===c?void 0:c[0])&&i.createElement(Ie,{notification:S,data:null===(d=S.links)||void 0===d?void 0:d[0]},i.createElement(_.m,{padded:["blockstart","blockend","inlinestart"]},S.icon&&i.createElement(te,{data:S.icon,isIconOnly:!0})))),i.createElement(m.j,{grow:1},i.createElement(_.m,{padded:["blockstart","blockend","inlinestart"]},i.createElement(_.q,null,i.createElement("a",{href:(null===(y=S.links)||void 0===y||null===(p=y[0].action)||void 0===p||null===(E=p.resource)||void 0===E?void 0:E.value)?null===(k=S.links)||void 0===k||null===(b=k[0].action)||void 0===b||null===(g=b.resource)||void 0===g?void 0:g.value:"#",target:"_blank",rel:"noopener",onClick:function(){L&&j&&D(L,j),"SEEN"===P&&(M({action:1,payload:{notificationsList:[S]}}),R({variables:{contextInput:U,notificationIds:[B],state:"READ"}}))}},null===(C=S.title)||void 0===C?void 0:C.text)),(null===(h=S.title)||void 0===h?void 0:h.text)&&i.createElement(v.E,{tag:"h2",size:5},S.title.text),(null===(x=S.body)||void 0===x||null===(I=x[0])||void 0===I?void 0:I.text)&&i.createElement(s.b,{padding:{blockstart:"two"}},i.createElement("div",null,i.createElement(ue,{data:null===(w=S.body)||void 0===w?void 0:w[0],overflow:"truncate-3-lines",weightOverride:"READ"===S.state?"regular":"bold"}))),(null===(N=S.timeStamp)||void 0===N?void 0:N.text)&&i.createElement(s.b,{padding:{blockstart:"two"}},i.createElement("div",null,i.createElement(ue,{data:S.timeStamp}))))),i.createElement(m.j,null,i.createElement(_.m,{padded:["blockstart","blockend","inlineend"]},A)))))};we.fragment=xe,we.displayName="NotificationsItem";var Ne=(0,r.J1)(J()),Se=function(e){var n,t,r,a,l,c=e.heading,u=e.emptyState,d=e.clickToActionButton,E=e.impressionAnalytics,p=(0,o.R)().context,y=(0,f.KY)(),g=null==E||null===(n=E[0])||void 0===n?void 0:n.referrerId,k=(null==E||null===(t=E[0])||void 0===t?void 0:t.linkName)||"",C=null==E||null===(r=E[1])||void 0===r?void 0:r.referrerId,h=(null==E||null===(a=E[1])||void 0===a?void 0:a.linkName)||"",I=null==d?void 0:d.button,x=null==I?void 0:I.analytics,w=null==x?void 0:x.referrerId,N=null==x?void 0:x.linkName,S=ge().state,A=Ce().mutation;return i.useEffect((function(){var e,n,t=(null===(e=S.notificationsList)||void 0===e?void 0:e.filter((function(e){return"UNSEEN"===e.state})))||[],i=(null==(n=t)?void 0:n.map((function(e){return e.cardId||""})).filter((function(e){return""!==e})))||[];t&&t.length>0&&A({variables:{contextInput:p,notificationIds:i,state:"SEEN"}})}),[S.notificationsList,p,A]),0===S.notificationsList.length?i.createElement(i.Fragment,null,i.createElement(_.m,{padded:!0,border:"bottom"},c&&i.createElement(v.E,{size:5,tag:"h1"},null==c?void 0:c.text)),i.createElement(s.b,{padding:{blockstart:"twelve"}},i.createElement("section",null,u&&i.createElement(de,{data:u})))):i.createElement(i.Fragment,null,g&&i.createElement(f.ee,{referrerId:g,linkName:k},i.createElement(_.m,{padded:!0,border:"bottom"},c&&i.createElement(v.E,{size:5,tag:"h1"},null==c?void 0:c.text)),i.createElement("section",null,null===(l=S.notificationsList)||void 0===l?void 0:l.map((function(e,n){return i.createElement("div",{key:"notifications-cell-".concat(n),"data-stid":"notifications-cell"},i.createElement(s.b,{padding:{block:"half",inlinestart:"one",inlineend:"half"}},i.createElement("div",null,i.createElement(we,{data:e}))))}))),d&&I&&I.primary&&i.createElement(i.Fragment,null,C&&i.createElement(f.ee,{referrerId:C,linkName:h},i.createElement(b.d,{display:"block",position:{bottom:"zero"},type:"absolute",style:{width:"100%"}},i.createElement(_.m,{padded:!0,border:"top"},i.createElement(m.i,{justifyContent:"center"},i.createElement(m.j,null,i.createElement(O.E,{tag:"a",href:"/inbox/notifications",onClick:function(){w&&N&&y(w,N)}},I.primary)))))))))};Se.displayName="CommunicationCenterPreviewMenuContent";var _e=function(e){var n=e.data,t=e.errorBannerAction,r=n.notifications,a=null==r?void 0:r.heading,l=null==r?void 0:r.emptyState,o=null==r?void 0:r.clickToActionButton,c=null==r?void 0:r.notifications,u=null==r?void 0:r.impressionAnalytics,m=null==r?void 0:r.banner;return m?i.createElement(le,{data:m,onBannerClick:function(){t&&t()},isFlexLayout:!0}):i.createElement(ye,{notificationsList:c||[],unseenCount:0},i.createElement(ke,{mutationFunction:Ne},i.createElement(Se,{heading:a,emptyState:l,clickToActionButton:o,impressionAnalytics:u})))};_e.displayName="sharedui-CommunicationCenterPreviewMenuContentWithContext";var Ae=(0,r.J1)(K(),ue.fragment,de.fragment,we.fragment,le.fragment),Oe=function(e){var n,t=(0,o.R)().context,r=(0,f.KY)(),a=e.unseen,l=e.unread,c=e.icon,d=e.impressionAnalytics,s=e.clickAnalytics,v=null==s?void 0:s.referrerId,I=null==s?void 0:s.linkName,x=j(i.useState(!1),2),w=x[0],N=x[1],S=a+l>0,_=j(i.useState(S),2),A=_[0],O=_[1],z=j(i.useState(!1),1)[0],T=null==d?void 0:d.referrerId,F=(null==d?void 0:d.linkName)||"",L=(0,h.useExperiment)("Shared_UI_Remove_Deprecated_UITK_Nav_Button").exposure.bucket>0,B=j((0,E._)(Ae,{variables:{context:t,optionalContext:{dropdownView:!0}},ssr:!1}),2),P=B[0],D=B[1],U=D.called,R=D.loading,M=D.data,$=D.error,G=D.refetch,H=L?"uitk-button-only-icon":"uitk-button-only-icon global-navigation-nav-button";return i.createElement(m.j,{minWidth:"zero",grow:0},i.createElement(C.E,{isOpen:w,onTriggerClick:function(){N(!w),a<4&&O(!1),U||P({context:t}),!w&&v&&I&&r(v,I,void 0,[])},disableBodyClickHandler:z},i.createElement(C.b,null,i.createElement(p.E,{className:H,size:y.E.LARGE},i.createElement(b.d,{display:"inline-block",type:"relative"},i.createElement(g.a,{name:c.id,size:g.E.LARGE,id:"".concat(c.id,"-icon"),title:null!==(n=c.description)&&void 0!==n?n:""}),i.createElement(b.d,{cloneElement:!0,position:{right:"zero",top:"zero"},type:"absolute"},i.createElement(b.d,{cloneElement:!0,position:{right:"zero",top:"zero"},type:"absolute"},T&&i.createElement(f.ee,{referrerId:T,linkName:F},A&&i.createElement(u.n,{visible:!0}))))))),i.createElement(C.c,{position:C.P.RIGHT,width:375,maxHeight:576},i.createElement("div",{style:{height:576},role:"menu"},(R||$)&&i.createElement(m.i,{justifyContent:"center",alignItems:"center",direction:"column",blockSize:"full_size"},i.createElement(m.j,null,i.createElement(k.E,null))),!R&&!$&&M&&M.communicationCenterPreview&&i.createElement(_e,{data:M.communicationCenterPreview,errorBannerAction:G})))))};Oe.displayName="sharedui-CommunicationCenterPreviewMenuContentWrapper";var ze=function(e){var n,t=(0,f.KY)(),r=e.unseen,a=e.unread,l=e.icon,o=e.impressionAnalytics,c=e.clickAnalytics,m=e.clickAnalyticsForMessage,d=null==c?void 0:c.referrerId,s=null==c?void 0:c.linkName,v=null==m?void 0:m.referrerId,E=null==m?void 0:m.linkName,k=r+a>0,C=j(i.useState(k),2),I=C[0],x=C[1],w=null==o?void 0:o.referrerId,N=(null==o?void 0:o.linkName)||"",S=(0,h.useExperiment)("Shared_UI_Remove_Deprecated_UITK_Nav_Button").exposure.bucket>0?"uitk-button-only-icon":"uitk-button-only-icon global-navigation-nav-button";return i.createElement("a",{href:"/inbox/notifications"},i.createElement(p.E,{className:S,size:y.E.LARGE,onClick:function(){x(!1),d&&s&&t(d,s,void 0,[]),v&&E&&t(v,E,void 0,[])}},i.createElement(b.d,{display:"inline-block",type:"relative"},i.createElement(g.a,{name:l.id,size:g.E.LARGE,id:"".concat(l.id,"-icon"),title:null!==(n=l.description)&&void 0!==n?n:""}),i.createElement(b.d,{cloneElement:!0,position:{right:"zero",top:"zero"},type:"absolute"},i.createElement(b.d,{cloneElement:!0,position:{right:"zero",top:"zero"},type:"absolute"},w&&i.createElement(f.ee,{referrerId:w,linkName:N},I&&i.createElement(u.n,{visible:!0})))))))};ze.displayName="CommunicationCenterPreviewMenuIconContent";var Te=function(e){var n=e.unseen,t=e.unread,r=e.icon,a=e.impressionAnalytics,l=e.clickAnalytics,o=e.clickAnalyticsForMessage;return e.isPreviewMenuView?i.createElement(Oe,{unseen:n||0,unread:t||0,icon:r,impressionAnalytics:a,clickAnalytics:l}):i.createElement(ze,{unseen:n||0,unread:t||0,icon:r,impressionAnalytics:a,clickAnalytics:l,clickAnalyticsForMessage:o})};Te.displayName="CommunicationCenterPreviewMenuWrapper";var Fe=(0,r.J1)(Y()),Le=(0,r.J1)(W()),je=function(e){var n,t,r,u=e.inputs,m=e.skipSsr,d=e.isPreviewMenuView,s=void 0!==d&&d,v=e.messageCountEnabled,f=void 0!==v&&v,E=u.lineOfBusiness,p=u.viewSize,y=(0,o.R)().context,g=(0,a.m)(),b=L(F({},u),{context:y,optionalContext:{messageCountEnabled:f}}),k=(0,l.I)(Fe,{variables:b,ssr:m,onCompleted:function(e){var n,t,i,r,a;(null!==(r=null==e||null===(n=e.communicationCenterEntryPoint)||void 0===n?void 0:n.notificationUnseenCount)&&void 0!==r?r:0)+(null!==(a=null==e||null===(t=e.communicationCenterEntryPoint)||void 0===t?void 0:t.messageUnseenCount)&&void 0!==a?a:0)>0&&"AUTHENTICATED"===(null==y||null===(i=y.identity)||void 0===i?void 0:i.authState)&&g.writeQuery({query:Le,data:{globalHeader:{redDotState:"VISIBLE"}},variables:{context:y,viewSize:p,lineOfBusiness:E,minimal:!1,theme:null}})}}),C=k.data,h=k.error;if(k.loading||h||!C)return null;var I=null==C?void 0:C.communicationCenterEntryPoint,x=null==I?void 0:I.label,w=null==I?void 0:I.icon,N=null==I?void 0:I.notificationUnseenCount,S=null==I?void 0:I.messageUnseenCount,_=null==I||null===(n=I.impressionAnalytics)||void 0===n?void 0:n[0],A=null==I||null===(t=I.clickAnalytics)||void 0===t?void 0:t[0],O=null==I||null===(r=I.clickAnalytics)||void 0===r?void 0:r[1];return i.createElement(c.LM,null,i.createElement(c.rw,null,i.createElement(Te,{isPreviewMenuView:s,unseen:N||0,unread:S||0,icon:w,impressionAnalytics:_,clickAnalytics:A,clickAnalyticsForMessage:O})),i.createElement(c.NP,null,i.createElement(q,{unseen:N||0,unread:S||0,label:x||"",impressionAnalytics:_,clickAnalytics:A,clickAnalyticsForMessage:O})))};je.displayName="sharedui-CommunicationCenterPreviewMenu"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-retail-communication-center-preview-menu.d0881063ef67353bb92e.js.map
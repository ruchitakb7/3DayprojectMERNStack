/*@license For license information please refer to shared-ui-retail-product-gallery.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4190],{50138:function(e,n,t){t.d(n,{$N:function(){return We},EW:function(){return Qe},Io:function(){return Se},MG:function(){return bn},Rc:function(){return Ce},Wx:function(){return Te}});var l=t(96540),a=t(15043),i=t(1723),r=t(36360),o=t(75826),c=t(49784),u=t(85625),m=t(26845),d=t(54235),s=t(15369),g=t(68963),v=t(94220),p=t(21181),f=t(10159),E=t(2619),y=t(13274),b=t(68174),I=t(67226),h=t(67781),k=t(94495),C=t(15144),S=t(34638),D=t(74),T=t(67286),x=t(91214),_=t(1192),O=t(30313),A=t(90745),w=t(82960),P=t(54206),L=t(48747),R=t(67811),M=t(80520),G=t(71831),N=t(16484),F=t(47576),V=t(85692),B=t(97076),j=t(63971),z=t(13783),U=t(88427),H=t(612),Y=t(86776),K=t(71034);function Q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function W(e,n,t,l,a,i,r){try{var o=e[i](r),c=o.value}catch(u){return void t(u)}o.done?n(c):Promise.resolve(c).then(l,a)}function J(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},l=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),l.forEach((function(n){J(e,n,t[n])}))}return e}function X(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function Z(e,n){if(null==e)return{};var t,l,a=function(e,n){if(null==e)return{};var t,l,a={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var l,a,i=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(l=t.next()).done)&&(i.push(l.value),!n||i.length!==n);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==t.return||t.return()}finally{if(o)throw a}}return i}}(e,n)||te(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function ne(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,n){if(e){if("string"==typeof e)return Q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Q(e,n):void 0}}function le(e,n){var t,l,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,l&&(a=2&i[0]?l.return:i[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,i[1])).done)return a;switch(l=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,l=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=n.call(e,r)}catch(o){i=[6,o],l=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}function ae(){var e=ee(["\n  fragment GalleryButtonsFragment on ProductImageGallery {\n    galleryButtons {\n      accessibility\n      icon {\n        description\n        id\n      }\n      action {\n        resource {\n          value\n        }\n      }\n    }\n  }\n"]);return ae=function(){return e},e}function ie(){var e=ee(["\n  fragment PropertyImageFragment on ProductImageInfo {\n    image {\n      url\n      description\n      analytics {\n        linkName\n        referrerId\n      }\n    }\n    lowResImage {\n      url\n    }\n    analytics {\n      trackingId\n      imageId\n      subjectId\n    }\n    description\n  }\n"]);return ie=function(){return e},e}function re(){var e=ee(["\n  fragment CarouselContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categoryIdAll\n    categorizedImages {\n      accessibilityLabel\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  ","\n  ","\n"]);return re=function(){return e},e}function oe(){var e=ee(["\n  fragment MosaicContainerFragment on ProductImageGallery {\n    accessibilityLabel\n    categorizedImages {\n      accessibilityLabel\n      clientSideAnalytics {\n        linkName\n        referrerId\n      }\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    ...GalleryButtonsFragment\n  }\n\n  ","\n  ","\n"]);return oe=function(){return e},e}function ce(){var e=ee(["\n  fragment SimilarImagesFallbackFragment on DialogView {\n    primary\n    secondary\n    analytics {\n      linkName\n      referrerId\n    }\n    closeButton {\n      primary\n      accessibility\n    }\n    icon {\n      token\n      description\n      id\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){var e=ee(["\n  fragment SimilarImagesDialogFragment on SimilarImageDialog {\n    primary\n    toolbar {\n      title\n      icon {\n        token\n        description\n        id\n      }\n      secondaryIcon {\n        id\n        token\n        description\n      }\n    }\n    trigger {\n      accessibilityLabel\n      clientSideAnalytics {\n        referrerId\n        linkName\n      }\n      dialogName\n      value\n      icon {\n        id\n        description\n        token\n      }\n    }\n    fallback {\n      ...SimilarImagesFallbackFragment\n    }\n  }\n  ","\n"]);return ue=function(){return e},e}function me(){var e=ee(["\n  fragment MediaGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      images {\n        ...PropertyImageFragment\n      }\n    }\n    mediaGalleryDialog {\n      toolbar {\n        icon {\n          id\n          description\n        }\n      }\n      similarImageDialog {\n        ...SimilarImagesDialogFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return me=function(){return e},e}function de(){var e=ee(["\n  fragment ThumbnailGalleryDialogFragment on ProductImageGallery {\n    categorizedImages {\n      categoryId\n      categoryName\n      images {\n        ...PropertyImageFragment\n      }\n      galleryButton {\n        button {\n          ... on UISecondaryButton {\n            accessibility\n            primary\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n      }\n    }\n    thumbnailGalleryDialog {\n      toolbar {\n        title\n        icon {\n          id\n          description\n        }\n      }\n      trigger {\n        accessibilityLabel\n        value\n      }\n      primaryButton {\n        button {\n          ... on UIPrimaryButton {\n            primary\n            accessibility\n            analytics {\n              referrerId\n              linkName\n            }\n          }\n        }\n        targetRef\n      }\n    }\n  }\n  ","\n"]);return de=function(){return e},e}function se(){var e=ee(["\n  fragment ProductGalleryImageContainerFragment on ProductImageGallery {\n    ...MosaicContainerFragment\n    ...CarouselContainerFragment\n    ...MediaGalleryDialogFragment\n    ...ThumbnailGalleryDialogFragment\n    ...GalleryButtonsFragment\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return se=function(){return e},e}function ge(){var e=ee(["\n  query ProductGalleryQuery($context: ContextInput!, $productIdentifier: ProductIdentifierInput!) {\n    productGallery(context: $context, productIdentifier: $productIdentifier) {\n      ...ProductGalleryImageContainerFragment\n    }\n  }\n\n  ","\n"]);return ge=function(){return e},e}var ve=(0,l.createContext)({isRandomAccessOne:!1,data:void 0,multiModuleUgcContentData:void 0}),pe=function(e){var n=e.data,t=e.children,a=e.multiModuleUgcContentData,i=(e.isRandomAccessOne,(0,l.useMemo)((function(){var e,t;return{isRandomAccessOne:!!(null==n||null===(t=n.randomAccessOne)||void 0===t||null===(e=t.mapping)||void 0===e?void 0:e.length),data:n,multiModuleUgcContentData:a}}),[n,a]));return l.createElement(ve.Provider,{value:i},t)};function fe(){var e=(0,y.zy)();return(0,l.useMemo)((function(){return new URLSearchParams(e.search)}),[e.search])}var Ee={VIDEO_SUCCESS:new E.SystemEvent(E.SystemEventLevel.INFO,"VIDEO_SUCCESS"),VIDEO_FAILED:new E.SystemEvent(E.SystemEventLevel.ERROR,"VIDEO_FAILED")},ye="Successful lookupVideo call for aerial view, propertyId=",be="lookupVideo call failed for aerial view, propertyId=",Ie=function(e,n){return{event:{event_name:e,event_type:n,event_version:"1.0.0",event_category:""},experience:{app_name:"shared-ui",app_version:"1.0.0",page_name:"PDP Page"}}};function he(e){var n,t,l,a,i,r,o,c,u;return{src:null!==(a=e.image.url)&&void 0!==a?a:"",caption:null!==(r=null!==(i=e.description)&&void 0!==i?i:e.image.description)&&void 0!==r?r:"",displayCaption:null!==(o=e.image.description)&&void 0!==o?o:"",alt:null!==(u=null!==(c=e.description)&&void 0!==c?c:e.image.description)&&void 0!==u?u:"",thumbnailClickAnalytics:null===(n=e.image)||void 0===n?void 0:n.analytics,trackingId:(null===(t=e.analytics)||void 0===t?void 0:t.trackingId)||null,imageId:(null===(l=e.analytics)||void 0===l?void 0:l.imageId)||null}}function ke(e){return e.map(he)}var Ce=(0,l.createContext)({useControlGalleryAdaptexCampaign:!1,setAdaptExState:function(){},eventType:void 0,setAdaptExSuccessEvent:function(){},data:void 0,setGalleryData:function(){}}),Se=function(e){var n=e.children,t=q((0,l.useState)(!1),2),a=t[0],i=t[1],r=q((0,l.useState)(void 0),2),o=r[0],c=r[1],u=q((0,l.useState)(void 0),2),m=u[0],d=u[1],s=(0,l.useMemo)((function(){return{useControlGalleryAdaptexCampaign:a,setAdaptExState:i,eventType:o,setAdaptExSuccessEvent:c,data:m,setGalleryData:d}}),[a,i,o,c,m,d]);return l.createElement(Ce.Provider,{value:s},n)};function De(e,n,t,l,a,i,r){var o=[{imageGalleryMetaTagValue:Date.now().toString(),imageGalleryMetaTagType:"DEVICE_TIME_STAMP"}];return r&&o.push({imageGalleryMetaTagValue:r,imageGalleryMetaTagType:"GALLERY_FILTER"}),[{schemaName:"allHotelProducts",messageContent:{hotelProducts:[$({imageGalleryAlgorithm:{name:"heroaesthetics.v20190411-hsc.v20190223"},algoMediaGuid:n},a?{productId:Number(a)}:{})]}},{schemaName:"imageTracking",messageContent:$({galleryName:i,galleryType:"GALLERY_TYPE_SINGLE",galleryMaxPosition:t,galleryPosition:e,repeatedGalleryIndex:null,imageGalleryMetaTagList:o},l?{images:[{id:l,galleryPosition:e}]}:{})}]}var Te=function(e){return e.ACTIVITY_ID="ACTIVITY_ID",e.CART_ID="CART_ID",e.CAR_OFFER_TOKEN="CAR_OFFER_TOKEN",e.CHECKOUT_SESSION_ID="CHECKOUT_SESSION_ID",e.ENTITY_ID="ENTITY_ID",e.LEGACY_ORDER_ID="LEGACY_ORDER_ID",e.OFFER_ID="OFFER_ID",e.ORDER_ID="ORDER_ID",e.PROPERTY_ID="PROPERTY_ID",e.SAILING_TOKEN="SAILING_TOKEN",e}(Te||{}),xe=function(e){var n=e.children;return e.aerialViewButton?l.createElement(o.E0,{eventData:Ie("aerial_view.presented","Impression")},n):n},_e=(0,a.J1)(ae()),Oe={position:{zindex:"layer2",bottom:"three",right:"three"},type:"absolute"},Ae=function(e){var n=e.data,t=e.onThumbnailGalleryClick,a=e.onVirtualTourClick,i=e.onAerialViewClick,r=e.thumbnailButtonText,c=e.thumbnailDialogTriggerAccessibilityLabel,u=e.propertyId,m=n.galleryButtons,d=(0,o.KY)(),s=(0,o.iQ)(),g=l.useCallback((function(e){var n,t,l,r,o,c,u,d;if("tour_360"===(null==m||null===(t=m[e])||void 0===t||null===(n=t.icon)||void 0===n?void 0:n.id)&&(null===(r=m[e])||void 0===r||null===(l=r.action)||void 0===l?void 0:l.resource)){var g,v,p,f=(null==m||null===(p=m[e])||void 0===p||null===(v=p.action)||void 0===v||null===(g=v.resource)||void 0===g?void 0:g.value)||"";a(f)}else if("visibility"===(null==m||null===(c=m[e])||void 0===c||null===(o=c.icon)||void 0===o?void 0:o.id)&&(null===(d=m[e])||void 0===d||null===(u=d.action)||void 0===u?void 0:u.resource)){var E,y,b,I=(null==m||null===(b=m[e])||void 0===b||null===(y=b.action)||void 0===y||null===(E=y.resource)||void 0===E?void 0:E.value)||"";s(Ie("aerial_view.selected","Interaction")),i(I.replace("#",""))}}),[m,s,a,i]),v=l.useMemo((function(){return{id:"HOT.HIS.PhotoGalleryTrigger",description:"Open Room Gallery dialog",callback:function(e,n){d(e,n,void 0,De(0,void 0,0,void 0,u,"PDP_FULL_IMAGE_GALLERY"))}}}),[d]);return l.createElement(S.d,$({},Oe),l.createElement(C.i,{space:"two",wrap:"nowrap"},null==m?void 0:m.map((function(e,n){var t,a,i,r;return l.createElement(xe,{aerialViewButton:"visibility"===(null==e||null===(t=e.icon)||void 0===t?void 0:t.id)&&(null==e||null===(a=e.action)||void 0===a?void 0:a.resource)},l.createElement(h.E,{key:"gallery-mosaic-action-".concat(null===(i=e.icon)||void 0===i?void 0:i.id),"aria-label":e.accessibility||"",role:"link",onClick:function(){return g(n)}},l.createElement(k.a,{name:(null===(r=e.icon)||void 0===r?void 0:r.id)||"",id:"gallery-mosaic-action-trigger"}),e.accessibility))})),l.createElement(h.E,{"aria-label":c||"",onClick:t,analytics:v},l.createElement(k.a,{name:"photo_library",id:"gallery-mosaic-thumbnail-trigger"}),r)))};Ae.displayName="GalleryButtons",Ae.fragment=_e;var we=function(e){var n,t,a=e.button,i=e.onClick,r=e.showTextLabel;return l.createElement(h.E,{"aria-label":(null==a?void 0:a.accessibility)||"",size:D.E.SMALL,onClick:i},l.createElement(k.a,{size:k.E.SMALL,name:(null==a||null===(n=a.icon)||void 0===n?void 0:n.id)||"",id:"PhotoGallery-".concat(null==a||null===(t=a.icon)||void 0===t?void 0:t.id)}),!r&&(null==a?void 0:a.accessibility))},Pe=function(e){var n,t,a=e.button,i=e.onClick,r=e.showTextLabel;return l.createElement(h.E,{"aria-label":(null==a?void 0:a.accessibility)||"",size:D.E.SMALL,onClick:i},l.createElement(k.a,{size:k.E.SMALL,name:(null==a||null===(n=a.icon)||void 0===n?void 0:n.id)||"",id:"PhotoGallery-".concat(null==a||null===(t=a.icon)||void 0===t?void 0:t.id)}),!r&&(null==a?void 0:a.accessibility))},Le=function(e){var n=e.uitkImages,t=e.handleMediaButtonClick,a=(0,_.useLocalization)().formatText;return l.createElement(h.E,{size:D.E.SMALL,onClick:t},l.createElement(k.a,{name:"photo_library",id:"photo_library-id",title:a("gallerycarousel.mediaGalleryButton",n.length)}),l.createElement("span",{"aria-hidden":"true"},String(n.length)))},Re=function(e){var n,t,a=e.ratio,i=e.uitkImages,o=e.controlAnalytics,c=e.label,u=e.handleIndexChange,m=e.handleImageClick,d=e.handleMediaButtonClick,s=e.onVirtualTourClick,g=e.onAerialViewClick,v=e.virtualTourButton,p=e.aerialViewButton,f=l.useRef(null),E=q(l.useState(0),2),y=E[0],b=E[1],h="MOBILE_PHONE"===(0,r.R)().context.device.type;return l.createElement(S.d,{type:"relative"},l.createElement(T.E,{carouselRef:f,analytics:o,carouselHeaderLevel:"h2",carouselHeaderText:c||"",carouselName:"PhotoGallery",itemsVisible:{sm:1,md:1,lg:1},onIndexChange:function(e){b(e),u(e)},hideNav:h,pagingPersistent:!h,pagingInset:!h,pagingOverlay:!h,peek:!1,wrapItems:!0,buttonText:{nextButton:"Show next card",prevButton:"Show previous card"}},i.map((function(e,n){return l.createElement(I.a,{ratio:a,key:n},l.createElement(I.b,{placeholderImage:!0,alt:e.alt,src:e.src,lazyLoading:"lazy"}),l.createElement(I.c,null,l.createElement("button",{type:"button",onClick:m},e.alt)))}))),(null===(n=f.current)||void 0===n?void 0:n.changeIndex)&&h&&l.createElement(x.E,{type:x.a.BOTTOM},l.createElement(T.f,{activeIndex:y,inset:!0,itemCount:i.length,changeIndex:null===(t=f.current)||void 0===t?void 0:t.changeIndex})),h?l.createElement(l.Fragment,null,l.createElement(S.d,{position:{bottom:"three",left:"three",zindex:"layer3"},type:"absolute"},v&&l.createElement(we,{button:v,onClick:s,showTextLabel:h}),p&&l.createElement(we,{button:p,onClick:g,showTextLabel:h})),l.createElement(S.d,{position:{bottom:"three",right:"three",zindex:"layer3"},type:"absolute"},l.createElement(Le,{uitkImages:i,handleMediaButtonClick:d}))):l.createElement(S.d,{position:{bottom:"three",right:"three",zindex:"layer3"},type:"absolute"},l.createElement(C.i,{space:"two"},l.createElement(C.j,null,v&&l.createElement(Pe,{button:v,onClick:s,showTextLabel:h}),p&&l.createElement(we,{button:p,onClick:g,showTextLabel:h})),l.createElement(C.j,null,l.createElement(Le,{uitkImages:i,handleMediaButtonClick:d})))))},Me=function(e){var n,t,a,i,r=e.imageIndex,c=e.images,u=e.propertyId,m=e.children;return l.createElement(o.ee,{tag:"span",referrerId:"HOT.HIS.MosaicTileImageImpression.".concat(r),linkName:"Mosaic Tile Image Impression",trackOnce:!0,additionalUisPrimeMicroMessages:De(r,null===(t=c[r])||void 0===t||null===(n=t.analytics)||void 0===n?void 0:n.trackingId,c.length,null===(i=c[r])||void 0===i||null===(a=i.analytics)||void 0===a?void 0:a.imageId,u,"PDP_MOSAIC")},m)},Ge=(0,a.J1)(ie()),Ne=function(e){var n=e.data,t=e.onClick,a=e.index,i=e.className,r=e.fetchPriority,c=e.galleryLength,m=e.propertyId,d=Z(e,["data","onClick","index","className","fetchPriority","galleryLength","propertyId"]),s=n.image,g=n.lowResImage,v=n.analytics,p=n.description,f=v||{},E=f.trackingId,y=f.imageId,b=null==s?void 0:s.analytics,h=(0,o.KY)(),k=(0,u.useExperiment)("Larger_image_mosaic_on_top_of_pdp",!0).exposure.bucket,C=l.useCallback((function(){b&&h(null==b?void 0:b.referrerId,null==b?void 0:b.linkName),t(a)}),[t,a,b]),S=l.createElement(l.Fragment,null,l.createElement(I.b,{alt:null!=p?p:"",placeholderImage:!0,src:(null==g?void 0:g.url)?g.url:s.url,additionalProps:{fetchPriority:r}}),l.createElement(I.c,null,l.createElement("button",{onClick:C,type:"button"},l.createElement("span",{className:"is-visually-hidden"},p))));return l.createElement(I.a,X($({},d),{className:i,ratio:2===k?I.E.R3_2:I.E.R16_9}),v?l.createElement(o.ee,{trackOnce:!0,referrerId:"HOT.HIS.MosaicTileImageImpression.".concat(a),linkName:"Mosaic Tile Image Impression",additionalUisPrimeMicroMessages:De(a,E,c,y,m,"PDP_MOSAIC")},S):S)};Ne.displayName="PropertyImage",Ne.fragment=Ge;var Fe=(0,a.J1)(re(),Ae.fragment,Ne.fragment),Ve=function(e){var n=e.data,t=e.allImages,a=e.onImageClick,i=e.onVirtualTourClick,c=e.onAerialViewClick,u=e.onTriggerClick,m=e.imageIndexState,d=e.propertyId,s=n.galleryButtons,g=n.accessibilityLabel,v=l.useContext(Ce),p=v.setAdaptExSuccessEvent,f=v.useControlGalleryAdaptexCampaign,E=(0,o.KY)(),y=(0,o.iQ)(),b=q(m,2),h=b[0],k=b[1],C="MOBILE_PHONE"===(0,r.R)().context.device.type;(0,l.useEffect)((function(){f&&p("ADAPTEX_MOSAIC_VIEW_ATTEMPT_EVENT")}),[]);var S=l.useMemo((function(){return{id:"HOT.HIS.Main",description:"Change image in gallery carousel",callback:function(e,n){var l,a,i,r,o=(a=h,i=t.length,(r=e).includes("clickRight")?a<i-1?a+1:0:r.includes("clickLeft")?a>0?a-1:i-1:a),c=(null===(l=t[o])||void 0===l?void 0:l.analytics)||{},u=c.trackingId,m=c.imageId;E(e,n,void 0,De(o,u,t.length,m,d,"PDP_MOSAIC"))}}}),[E]),D=l.useCallback((function(e){k(e)}),[k]),T=l.useCallback((function(){var e,n,l,i=t[h],r=null==i||null===(e=i.image)||void 0===e?void 0:e.analytics;r&&E(null==r?void 0:r.referrerId,null==r?void 0:r.linkName),E("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click",void 0,De(h,null==i||null===(n=i.analytics)||void 0===n?void 0:n.trackingId,t.length,null==i||null===(l=i.analytics)||void 0===l?void 0:l.imageId,d,"PDP_MOSAIC")),a()}),[E,a]),x=l.useCallback((function(){E("HOT.HIS.PhotoGalleryTrigger","Open Room Gallery dialog"),u()}),[E,u]),_=null==s?void 0:s.find((function(e){var n,t,l;return"tour_360"===(null===(n=e.icon)||void 0===n?void 0:n.id)?null===(l=e.action)||void 0===l||null===(t=l.resource)||void 0===t?void 0:t.value:null})),O=null==s?void 0:s.find((function(e){var n,t,l;return"visibility"===(null===(n=e.icon)||void 0===n?void 0:n.id)?null===(l=e.action)||void 0===l||null===(t=l.resource)||void 0===t?void 0:t.value:null})),A=l.useCallback((function(){(null==_?void 0:_.action)&&i(_.action.resource.value)}),[i,_]),w=l.useCallback((function(){if(null==O?void 0:O.action){var e,n,t=(null===(n=O.action)||void 0===n||null===(e=n.resource)||void 0===e?void 0:e.value)||"";y(Ie("aerial_view.selected","Interaction")),c(t.replace("#",""))}}),[y,c,O]),P=l.useMemo((function(){return t.map((function(e){var n,t,l,a,i;return{src:null!==(t=e.image.url)&&void 0!==t?t:"",caption:null!==(l=null===(n=e.image)||void 0===n?void 0:n.description)&&void 0!==l?l:"",alt:null!==(i=null!==(a=e.description)&&void 0!==a?a:e.image.description)&&void 0!==i?i:""}}))}),[t]),L=C?I.E.R3_2:I.E.R16_9;return l.createElement(xe,{aerialViewButton:O},l.createElement(Me,{propertyId:d,images:t,imageIndex:h},l.createElement(Re,{ratio:L,uitkImages:P,controlAnalytics:S,label:g,handleIndexChange:D,handleImageClick:T,handleMediaButtonClick:x,onVirtualTourClick:A,onAerialViewClick:w,virtualTourButton:_,aerialViewButton:O})))};Ve.displayName="CarouselContainer",Ve.fragment=Fe;var Be=(0,a.J1)(oe(),Ae.fragment,Ne.fragment);var je=function(e){var n,t=e.data,a=e.allImages,i=e.imagesToShow,r=e.onImageClick,c=e.propertyId,u=t.accessibilityLabel,m=l.useContext(Ce),d=m.setAdaptExSuccessEvent,s=m.useControlGalleryAdaptexCampaign,g=(0,o.KY)();(0,l.useEffect)((function(){s&&d("ADAPTEX_MOSAIC_VIEW_ATTEMPT_EVENT")}),[]);var v=l.useMemo((function(){var e=a.slice(0,i);return e.length%2==0&&e.pop(),e}),[a,i]),p=l.useCallback((function(e){var n,t=(null===(n=v[e])||void 0===n?void 0:n.analytics)||{},l=t.trackingId,a=t.imageId;g("HOT.HIS.ClickMosaicTileImage.".concat(e),"Property mosaic tile image click",void 0,De(e,l,v.length,a,c,"PDP_MOSAIC")),g("HOT.HIS.LaunchMainPhotoGallery","Launch Photo Gallery From Image Click",void 0,De(e,l,v.length,a,c,"PDP_MOSAIC")),r(e)}),[g,r]),f=function(e){switch(e){case 5:return 4;case 3:return 3;default:return 1}}(v.length);return l.createElement(S.d,{type:"relative"},l.createElement(O.E,{columns:f,rows:2,space:"half"},l.createElement("meta",{itemProp:"image",content:null===(n=v[0])||void 0===n?void 0:n.image.url}),l.createElement("h2",{className:"is-visually-hidden"},u),v.map((function(e,n){return l.createElement(O.a,{key:"mosaic-image-".concat(n),colSpan:0===n?2:1,rowSpan:0===n?2:1},l.createElement(Ne,{data:e,onClick:p,index:n,fetchPriority:0===n?"high":void 0,galleryLength:i,propertyId:c}))}))))};je.fragment=Be,je.displayName="MosaicContainer";var ze=function(e){var n=e.isDialogOpen,t=e.onDialogDismiss,a=e.triggerRef,i=e.aerialViewLandscape,r=e.aerialViewDescription,c=(0,o.KY)(),u=(0,o.iQ)(),m=l.useMemo((function(){return{id:"HOT.HIS.AerialViewTrigger",description:"Close aerial view dialog",callback:function(e,n){c(e,n),u(Ie("aerial_view.closed","Interaction"))}}}),[c,u]);return l.createElement(g.e,{isVisible:n,liveAnnounceString:"Full Sheet has opened",type:"full",triggerRef:a,theme:"dark"},l.createElement(w.d,{overlay:!0,navigationContent:{navButtonId:"UitkMediaGalleryImageToolbar",navType:"close",navIconLabel:"Close",onClick:t,onClickAnalytics:m}}),i.length>0&&l.createElement(g.f,{padded:!1},l.createElement(C.i,{justifyContent:"center",alignItems:"center",blockSize:"full_size",direction:"column"},l.createElement(C.j,{alignSelf:"center"},l.createElement(P.L9,{src:i,autoPlay:!0,muted:!0,controlsList:"nodownload"})),l.createElement(b.LM,null,l.createElement(b.NP,null,l.createElement(C.j,{alignSelf:"start"},l.createElement(v.b,{margin:"three"},l.createElement(A.c,{theme:"inverse",overflow:"wrap"},r)))),l.createElement(b.rw,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(C.i,{justifyContent:"space-between",alignItems:"end"},l.createElement(x.E,{type:x.a.BOTTOM},l.createElement(A.c,{theme:"inverse",overflow:"wrap"},r))))))))))};ze.displayName="AerialViewDialog";var Ue=function(e){var n,t=e.onSimilarImagesDialogOpen,a=e.selectedImage,i=e.similarImagesButton,r=1===(0,u.useExperiment)("Similar_images",!1).exposure.bucket,c=(0,o.KY)();if(!r||!i)return null;return l.createElement(R.E,{"aria-label":i.accessibilityLabel||"",inverse:!0,onClick:function(){if(a){var e=(null==i?void 0:i.clientSideAnalytics)||{},n=e.referrerId,l=e.linkName;n&&l&&c(n,l),t(a)}}},i.value,l.createElement(k.a,{name:(null===(n=i.icon)||void 0===n?void 0:n.id)||""}))},He=function(e){var n,t,a,i,r=e.onSimilarImagesDialogOpen,c=e.selectedImage,u=e.similarImagesButton,m=e.shouldShowAnimatedButton,d=(0,o.KY)(),s=(0,b.s5)((J(i={},b.OB.SMALL,!0),J(i,b.OB.MEDIUM,!1),i));if(!u)return null;var g={size:D.E.SMALL,onClick:function(){if(c){var e=(null==u?void 0:u.clientSideAnalytics)||{},n=e.referrerId,t=e.linkName;n&&t&&d(n,t),r(c)}}},v=l.createElement(h.E,X($({},g),{"aria-label":u.accessibilityLabel||""}),l.createElement(k.a,{name:(null===(n=u.icon)||void 0===n?void 0:n.id)||""})),p=l.createElement(h.E,X($({},g),{"aria-label":u.accessibilityLabel||""}),u.value,l.createElement(k.a,{name:(null===(t=u.icon)||void 0===t?void 0:t.id)||""})),f=s?v:p,E=l.createElement(P.ii,$({ariaLabel:u.accessibilityLabel||"",text:u.value||"",icon:(null===(a=u.icon)||void 0===a?void 0:a.id)||""},g));return m&&s?E:f},Ye="lodging_dated_pdp:similar_images",Ke=l.createContext({updatedSearchCriteria:void 0,setUpdatedSearchCriteria:function(){}}),Qe=function(){return l.useContext(Ke)},We=function(e){var n=e.children,t=q(l.useState(void 0),2),a=t[0],i=t[1],r=l.useMemo((function(){return{updatedSearchCriteria:a,setUpdatedSearchCriteria:i}}),[a,i]);return l.createElement(Ke.Provider,{value:r},n)},Je=(0,a.J1)(ce()),$e=function(e){var n,t,a,i,r=e.data,c=e.closeDialog,u=(0,b.s5)((J(i={},b.OB.SMALL,!0),J(i,b.OB.MEDIUM,!1),i));if(!r)return null;var m=r.analytics||{},d=m.referrerId,s=m.linkName,p=l.createElement(C.i,{justifyContent:"center",alignItems:"center",direction:"column",blockSize:"full_size"},l.createElement(C.j,null,l.createElement(v.b,{margin:{blockend:"four"}},l.createElement(C.i,{justifyContent:"center",alignItems:"center"},l.createElement(C.j,null,l.createElement(k.a,{name:(null==r||null===(n=r.icon)||void 0===n?void 0:n.id)||"",size:k.E.LARGE})),l.createElement(C.j,null,l.createElement(v.b,{margin:{inlinestart:"three"}},l.createElement(A.E,{tag:"h2",size:u?4:2},null==r?void 0:r.primary)))))),l.createElement(C.j,null,l.createElement(A.c,{size:u?400:500,align:"center"},null==r?void 0:r.secondary)),l.createElement(C.j,null,l.createElement(v.b,{margin:{blockstart:"six"}},l.createElement(G.E,{type:"button",onClick:c,"aria-label":(null==r||null===(t=r.closeButton)||void 0===t?void 0:t.accessibility)||"",size:D.E.MEDIUM},null==r||null===(a=r.closeButton)||void 0===a?void 0:a.primary))));return l.createElement(g.f,{padded:!1},d&&s?l.createElement(o.ee,{referrerId:d,linkName:s,cloneElement:!0,refAttrForCloneElement:"domRef"},p):p)};$e.displayName="SimilarImagesFallbackView",$e.fragment=Je;var Xe=function(){var e,n=(0,b.s5)((J(e={},b.OB.SMALL,!0),J(e,b.OB.MEDIUM,!1),e));return l.createElement("div",null,ne(Array(n?2:5)).map((function(e,t){return l.createElement(v.b,{key:t,margin:{blockend:"four"}},l.createElement(N.i,null,l.createElement(O.E,{rows:[n?"40x":"200px"],columns:n?1:2},l.createElement(O.a,{colStart:n?"all":1},l.createElement(v.b,{margin:{small:{blockend:"four"},medium:{blockend:"six"}}},l.createElement(I.a,{imageFit:"cover"},l.createElement(F.a,null)))),l.createElement(O.a,{colStart:n?"all":2},l.createElement(N.m,{padded:!0},l.createElement(F.b,{animation:!0,type:"primary"}),l.createElement(v.b,{margin:{small:{blockstart:"three",blockend:"six"},medium:{blockstart:"three",blockend:"twelve"}}},l.createElement(F.b,{animation:!0,type:"secondary"})))))))})))},Ze=(0,a.J1)(ue(),$e.fragment),qe=new Map([["expand_less","expand_up"],["close","close"]]),en=function(e){var n=e.isDialogOpen,t=e.triggerRef,a=e.toolbarComponent,i=e.sheetContent;return l.createElement(P.R3,{returnFocusOnClose:!0,isVisible:n,triggerRef:t,centeredSheetSize:"xxxlarge",height:1200},a,i)},nn=function(e){var n,t,a,i,r=e.data,o=e.onDialogDismiss,c=e.selectedSimilarImage,u=e.triggerRef,m=e.travelSearchCriteria,d=e.propertyId,s=q((0,f.useDialog)("property-similar-image","pwaSimilarImageDialog"),1)[0],p=r.toolbar,E=r.primary,h=r.fallback,k=(0,b.s5)((J(t={},b.OB.SMALL,!0),J(t,b.OB.MEDIUM,!1),t)),D=(0,M.WP)(),T=D.recommendationModulesStatus,x=D.setRecommendationModulesStatus,_=Qe().updatedSearchCriteria,P=q(l.useState("bottom"),2),L=P[0],R=P[1],G=fe(),N=(a=(0,y.Zp)(),i=(0,y.zy)(),(0,l.useCallback)((function(e,n){var t=new URLSearchParams(i.search);t.set(e,n),a("".concat(i.pathname,"?").concat(t),{replace:!0})}),[i,a]));if((0,l.useEffect)((function(){c.imageId&&(G.get("similarImageId")===c.imageId&&R("full"),N("similarImageId",c.imageId));return function(){x((function(e){return e.filter((function(e){return e.id!==Ye}))}))}}),[]),!r||!c)return null;var F,V,B=k&&"bottom"===L,j=null===(n=T.find((function(e){return e.id===Ye})))||void 0===n?void 0:n.status,z=j===M.Gs.ERROR||j===M.Gs.EMPTY,U=window.innerHeight/2,H=function(e,n,t){var l,a,i,r,o=null==n?void 0:n.imageId,c=null==e||null===(l=e.property)||void 0===l?void 0:l.primary,u=null==e||null===(i=e.property)||void 0===i||null===(a=i.primary)||void 0===a?void 0:a.dateRange,m=null==e||null===(r=e.property)||void 0===r?void 0:r.secondary,d=null==u?void 0:u.checkInDate,s=null==u?void 0:u.checkOutDate,g=null==c?void 0:c.rooms.map((function(e){var n;return X($({},e),{adults:e.adults,children:null===(n=e.children)||void 0===n?void 0:n.map((function(e){return e.age}))})}));return{contentSize:M.ps.LONG_FORM_FEATURED,offeringType:M.LQ.PRODUCT,strategy:M.D0.SIMILAR,containerType:M.ai.LIST,priceStrategy:M.Rv.LIVE,input:[M.bj.DISPLAYED_IMAGE],recommendationContext:{displayedImageId:o,outputLineOfBusiness:M.Ub.LODGING,pageId:"HIS",lodging:{propertyId:t,checkin:d,checkout:s,rooms:g,searchCriteria:{selections:null==m?void 0:m.selections}}},placementId:"210",configurationIdentifier:Ye}}(null!=_?_:m,c,d),Y=p&&l.createElement(w.b,{navigationContent:{onClick:function(){B&&!z?R("full"):o()},navIconLabel:B&&!z?null==p||null===(V=p.secondaryIcon)||void 0===V?void 0:V.description:null==p||null===(F=p.icon)||void 0===F?void 0:F.description,navType:function(){var e,n;return B&&!z?qe.get((null==p||null===(n=p.secondaryIcon)||void 0===n?void 0:n.id)||""):qe.get((null==p||null===(e=p.icon)||void 0===e?void 0:e.id)||"")}()},toolbarTitle:z?"":(null==p?void 0:p.title)||""}),K=l.createElement(O.E,{rows:["48px"],columns:["48px","1fr"],space:"three"},l.createElement(O.a,{colSpan:1},l.createElement(I.a,{ratio:I.E.R1_1,roundcorner:["max"]},l.createElement(I.b,{placeholderImage:!0,src:null==c?void 0:c.src,alt:null==c?void 0:c.alt}))),l.createElement(O.a,null,l.createElement(C.i,{space:"two",alignItems:"center"},l.createElement(C.j,null,l.createElement(A.E,{tag:"h3",size:k?5:4},E))))),Q=l.createElement(l.Fragment,null,l.createElement(v.b,{margin:{blockend:"four"}},K),l.createElement(M.PG,{inputs:H,LoadingPlaceholder:Xe,isSimilarImagesFeatureOn:!0,titleProps:{tag:"h3"}})),W=l.createElement(l.Fragment,null,l.createElement(v.b,{padding:{inlinestart:"six",blockstart:"six",blockend:"six"}},l.createElement(A.E,{tag:"h3",size:4},E)),l.createElement(g.f,{padded:!1},l.createElement(v.b,{padding:{inline:"six",blockend:"six"}},l.createElement(O.E,{columns:3,space:"six"},l.createElement(O.a,{colSpan:1},l.createElement("div",null,l.createElement(S.d,{type:"sticky",position:{top:"zero"},cloneElement:!0},l.createElement(I.a,{ratio:I.E.R16_9,roundcorner:{medium:["all"]}},l.createElement(I.b,{placeholderImage:!0,src:null==c?void 0:c.src,alt:null==c?void 0:c.alt}))))),l.createElement(O.a,{colSpan:"all",colStart:2},l.createElement("div",null,l.createElement(M.PG,{inputs:H,LoadingPlaceholder:Xe,isSimilarImagesFeatureOn:!0,titleProps:{tag:"h3"}})))))));return l.createElement(b.LM,null,l.createElement(b.NP,null,l.createElement(g.e,{returnFocusOnClose:!0,type:z?"bottom":L,isVisible:s,triggerRef:u,height:U},Y,l.createElement(g.f,null,z?l.createElement($e,{data:h,closeDialog:o}):Q))),l.createElement(b.rw,null,l.createElement(en,{isDialogOpen:s,triggerRef:u,toolbarComponent:Y,sheetContent:z?l.createElement($e,{data:h,closeDialog:o}):l.createElement(g.f,{padded:!0},Q)})),l.createElement(b.zQ,null,l.createElement(en,{isDialogOpen:s,triggerRef:u,toolbarComponent:Y,sheetContent:z?l.createElement($e,{data:h,closeDialog:o}):W})))};nn.displayName="SimilarImagesDialog",nn.fragment=Ze;var tn=(0,a.J1)(me(),Ne.fragment,nn.fragment),ln=function(e,n){return l.createElement(C.i,{justifyContent:"space-around",alignItems:"center"},l.createElement(C.j,null,l.createElement(L.b,{iconId:"prev-button-media-gallery",iconTitle:"Show previous card",onClick:function(){e.current&&e.current.changeIndex(n-1)}})),l.createElement(C.j,null,l.createElement(L.a,{iconId:"next-button-media-gallery",iconTitle:"Show next card",onClick:function(){e.current&&e.current.changeIndex(n+1)}})))},an=function(e){var n,t,a,i,r,c,m,d,s,p=e.data,f=e.allImages,E=e.isDialogOpen,y=e.onDialogDismiss,h=e.imageIndexState,k=e.categoryImageIndexState,S=e.categoryIndexState,D=e.propertyId,x=e.mediaGalleryStartIndexState,_=e.carouselRef,P=e.triggerRef,L=e.onSimilarImagesDialogOpen,R=p.categorizedImages,M=p.mediaGalleryDialog,G=null==M||null===(n=M.similarImageDialog)||void 0===n?void 0:n.trigger,N=q(h,2),F=(N[0],N[1]),V=q(k,2),B=V[0],j=V[1],z=q(S,1)[0],U=q(x,2),H=U[0],Y=(U[1],q(l.useState(H),2)),K=Y[0],Q=Y[1],W="Guest photos"===(null==R||null===(t=R[z])||void 0===t?void 0:t.categoryId),Z=(0,o.KY)(),ee=(0,b.s5)((J(s={},b.OB.SMALL,!0),J(s,b.OB.MEDIUM,!1),s)),ne=l.useMemo((function(){if(z<0)return ke(f);var e=R?R[z]:null;return ke((null==e?void 0:e.images)||[])}),[z,R,f]),te=l.useMemo((function(){var e={id:"HOT.HIS.PhotoGalleryTrigger",description:"Change image in media gallery",callback:function(e,n){var t,l,a=function(e,n,t){return t.includes("clickRight")||t.includes("scrollRight")?e<n-1?e+1:e:t.includes("clickLeft")||t.includes("scrollLeft")?e>0?e-1:0:t.includes("itemViewed")?parseInt((null==t?void 0:t.split(".")[(null==t?void 0:t.split(".").length)-1])||"0",10):e}(B,ne.length,e),i=(null===(l=((null==R||null===(t=R[z])||void 0===t?void 0:t.images)||f)[a])||void 0===l?void 0:l.analytics)||{},r=i.trackingId,o=i.imageId;Z(e,n,void 0,De(a,r,ne.length,o,D,"PDP_FULL_SCREEN_IMAGE_GALLERY"))}};return e}),[Z]),le=l.useMemo((function(){var e={id:"HOT.HIS.PhotoGalleryTrigger",description:"Close review gallery dialog",callback:function(e,n){var t,l,a=(null===(l=((null==R||null===(t=R[z])||void 0===t?void 0:t.images)||f)[B])||void 0===l?void 0:l.analytics)||{},i=a.trackingId,r=a.imageId;Z(e,n,void 0,De(B,i,ne.length,r,D,"PDP_FULL_SCREEN_IMAGE_GALLERY"))}};return e}),[Z]),ae={analytics:te,carouselHeaderText:"MediaGalleryCarousel",carouselName:"MediaGalleryCarousel",itemsVisible:{sm:1,md:1,lg:1,xl:1},onIndexChange:l.useCallback((function(e){Q(e),z<0?F(e):j(e)}),[z,j,F,Q]),pagingInset:!0,pagingPersistent:!0,stretchToFill:!1,navigationIconId:{next:"next-button-media-gallery",prev:"prev-button-media-gallery"},buttonText:{nextButton:"Show next card",prevButton:"Show previous card"},pageBy:1,peek:!1,hideNav:!0};if(!(null==ne?void 0:ne.length))return null;var ie,re=ne.map((function(e,n){return l.createElement(I.a,{key:n,ratio:I.E.R16_9},l.createElement(I.b,{alt:e.alt,src:e.src}))}));return l.createElement(g.e,{isVisible:E,liveAnnounceString:"Full Sheet has opened",type:"full",triggerRef:P,theme:"dark"},l.createElement(w.d,{overlay:!0,navigationContent:{navButtonId:"UitkMediaGalleryImageToolbar",navType:(ie=null==M||null===(i=M.toolbar)||void 0===i||null===(a=i.icon)||void 0===a?void 0:a.id,"arrow_back"===ie?"back":"close"),navIconLabel:null==M||null===(c=M.toolbar)||void 0===c||null===(r=c.icon)||void 0===r?void 0:r.description,onClick:y,onClickAnalytics:le}}),l.createElement(g.f,{padded:!1},l.createElement(C.i,{direction:"column",blockSize:"full_size"},l.createElement(b.LM,null,l.createElement(b.NP,null,l.createElement(l.Fragment,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{blockstart:"twelve"}},l.createElement(T.E,X($({},ae),{carouselRef:_,fullSheetVisible:E,startIndex:H,stretchToFill:!0}),re))),l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},ln(_,K))))),l.createElement(b.rw,null,l.createElement(l.Fragment,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{blockstart:"twelve"}},l.createElement(T.E,X($({},ae),{carouselRef:_,fullSheetVisible:E,startIndex:H}),re))),l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},ln(_,K))))),l.createElement(b.zQ,null,l.createElement(C.j,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(T.E,X($({},ae),{hideNav:!1,fullSheetVisible:E,startIndex:H}),re))))),l.createElement(C.j,null,l.createElement(u.Experiment,{name:"Similar_images",logExposure:!1},l.createElement(u.ExperimentControl,null,l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(C.i,{justifyContent:"space-between",alignItems:"end"},l.createElement(C.j,null,l.createElement(A.c,{theme:"inverse",overflow:"wrap"},null===(m=ne[K])||void 0===m?void 0:m.caption)),l.createElement(C.j,null,l.createElement(A.c,{theme:"inverse"},"".concat(String(K+1),"/").concat(String(ne.length))))))),l.createElement(u.ExperimentVariant,{bucket:1},l.createElement(v.b,{padding:{block:"four",inline:"three"}},l.createElement(O.E,{columns:{small:["auto","min-content"],large:["auto","min-content","max-content"]},alignItems:ee?"end":"center",space:"three"},l.createElement(O.a,{colSpan:1},l.createElement(A.c,{theme:"inverse",overflow:"wrap"},null===(d=ne[K])||void 0===d?void 0:d.caption)),l.createElement(O.a,{colSpan:1},l.createElement(C.i,{direction:"column",justifyContent:"end",alignItems:"end"},l.createElement(A.c,{theme:"inverse"},"".concat(String(K+1),"/").concat(String(ne.length))))),l.createElement(O.a,{colSpan:{small:2,large:1}},l.createElement(C.i,{justifyContent:"center"},l.createElement(v.b,{margin:{block:"two"}},l.createElement("div",null,G&&!W&&l.createElement(Ue,{onSimilarImagesDialogOpen:L,selectedImage:ne[K],similarImagesButton:G})))))))))))))};an.displayName="MediaGalleryDialog",an.fragment=tn;var rn=function(e){var n,t,a,i,r=e.images,c=e.onImageSelected,d=e.columns,s=e.space,g=e.imagesRatio,p=e.focusIndex,f=e.containerRef,E=e.propertyId,y=e.categoryId,I=e.similarImagesCTA,h=e.onSimilarImagesDialogOpen,k=e.travelSearchCriteria,C=1===(0,u.useExperiment)("Similar_images",!1).exposure.bucket&&"Guest photos"!==y,D=(0,l.useContext)(ve).multiModuleUgcContentData,T=1===(0,u.useExperiment)("PDP_Location_Highlights",!1).exposure.bucket,x=q((0,l.useState)(T&&"all"===y),2),_=x[0],w=x[1];(0,l.useEffect)((function(){w(!!(T&&"all"===y))}),[y]);var P=l.useCallback((function(e){return l.createElement(S.d,{position:{bottom:"three",right:"three",zindex:"layer1"},type:"absolute"},l.createElement(He,{onSimilarImagesDialogOpen:h,selectedImage:null==r?void 0:r[e],similarImagesButton:I,shouldShowAnimatedButton:e<10}))}),[r,I,h]);if(!(null==r?void 0:r.length))return null;var L=l.createElement(m.ug,{inputs:{featureId:"ugc_content_on_images_script_tpl",productIdentifier:{id:E,type:m.Wx.PROPERTY_ID,travelSearchCriteria:k}},batchKey:"default-product-details-experience-batch-key",mockData:D}),R="ugc_content_insert_position"===(null==D||null===(t=D.randomAccessOne)||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.id)?Number(null==D||null===(i=D.randomAccessOne)||void 0===i||null===(a=i.metadata)||void 0===a?void 0:a.name):2,M=l.createElement("div",{"data-stid":"multi-module-ugc-content"},L),G=function(e,n){return l.createElement(O.a,{key:n},l.createElement("div",{"data-stid":"image-thumbnail-view-with-label"},e.thumbnailClickAnalytics&&l.createElement(o.ee,{trackOnce:!0,referrerId:"HOT.HIS.ThumbnailImageImpression.".concat(y?"".concat(y,"."):"").concat(n),linkName:"Thumbnail Image Impression",additionalUisPrimeMicroMessages:De(n,e.trackingId,r.length,e.imageId,E,"PDP_FULL_IMAGE_GALLERY",y)},l.createElement(S.d,{cloneElement:!0,type:"relative"},l.createElement("div",null,l.createElement(K.f,X($({},e),{index:n,imagesRatio:g,onImageSelected:function(){return c(n)},focusIndex:p,containerRef:f})),C&&P(n)))),!e.thumbnailClickAnalytics&&l.createElement(S.d,{type:"relative"},l.createElement("div",null,l.createElement(K.f,X($({},e),{index:n,imagesRatio:g,onImageSelected:function(){return c(n)},focusIndex:p,containerRef:f})),C&&P(n))),l.createElement(v.b,{margin:{blockstart:"two",blockend:"three"}},l.createElement(A.c,{align:"left",overflow:"wrap","aria-hidden":"true"},e.displayCaption))))},N=function(e){return l.createElement(l.Fragment,null,_?r.map((function(n,t){return l.createElement(l.Fragment,null,t===R&&l.createElement(O.a,{colSpan:e},M),G(n,t))})):r.map((function(e,n){return G(e,n)})))};return l.createElement(Y.E,{bullet:"no-bullet",spacing:!1},l.createElement(O.E,{columns:d,space:s},l.createElement(b.LM,null,l.createElement(b.rw,null,N(2)),l.createElement(b.NP,null,N(1)))))};rn.displayName="MediaGalleryThumbnailView";var on=function(e){var n=e.categories,t=e.images,a=e.onImageClick,i=e.categoryIndexState,r=e.imageIndexState,c=e.propertyId,u=e.showImageNumber,m=void 0!==u&&u,d=e.refGallery,s=e.isSmallView,g=e.refContent,p=e.onPillSelect,f=e.onThumbnailGalleryButtonClick,E=e.similarImagesCTA,y=e.onSimilarImagesDialogOpen,h=e.travelSearchCriteria,k=q(r,1)[0],T=q(i,1)[0],x=!(null==n?void 0:n.length)||1===n.length,_=l.useRef(null),w=l.useRef({}),P=l.useRef(null),L=(0,o.KY)(),M=((0,b.eg)({viewSizes:b.pf}),b.pf.LARGE,q(l.useState(T>=0||!(null==n?void 0:n.length)?T:0),2)),G=M[0],N=M[1],F=q(l.useState([]),2),V=F[0],B=F[1];l.useEffect((function(){var e=new Array(null==n?void 0:n.length).fill(!1);e[0]=!e[0],B(e)}),[n]);var j=l.useCallback((function(e){if(e){var n=e.linkName,t=e.referrerId;L(t,n)}f&&f()}),[L,f]),Y=l.useCallback((function(e){var t,l,a,i,r;if(n){var o,c=e>=0?null===(o=n[e])||void 0===o?void 0:o.categoryName:"";L("HOT.HIS.Gallery.".concat(c,".").concat(e),"Selected gallery tab")}var u=new Array(V.length).fill(!1);u[e]=!0,B(u),N(e),p&&p(e);var m=(null===(t=w.current[e])||void 0===t?void 0:t.offsetTop)||0,s=(null===(a=P.current)||void 0===a||null===(l=a.offsetParent)||void 0===l?void 0:l.clientHeight)||0;null==d||null===(r=d.current)||void 0===r||null===(i=r.offsetParent)||void 0===i||i.scrollTo(0,m-s)}),[N,n,L,V.length,d]),K=l.useCallback((function(e){if(G){var l,i,r,o=(null==n?void 0:n[G])||{},u=o.categoryId,m=o.images,d=void 0===m?[]:m,s=(null===(l=d[e])||void 0===l?void 0:l.analytics)||{},g=s.trackingId,v=s.imageId,p=null===(r=d[e])||void 0===r||null===(i=r.image)||void 0===i?void 0:i.analytics,f=d.length;L("HOT.HIS.ClickThumbnailImage.".concat(u,".").concat(e),"Launch Thumbnail Gallery From Image Click",void 0,De(e,g,f,v,c,"PDP_FULL_IMAGE_GALLERY")),p&&L(null==p?void 0:p.referrerId,null==p?void 0:p.linkName),a(e,G)}else{var E,y,b,I=(null===(E=t[e])||void 0===E?void 0:E.analytics)||{},h=I.trackingId,k=I.imageId,C=null===(b=t[e])||void 0===b||null===(y=b.image)||void 0===y?void 0:y.analytics;L("HOT.HIS.ClickThumbnailImage.".concat(e),"Launch Thumbnail Gallery From Image Click",void 0,De(e,h,t.length,k,c,"PDP_FULL_IMAGE_GALLERY")),C&&L(null==C?void 0:C.referrerId,null==C?void 0:C.linkName),a(e,G)}}),[G,a,n,L,t,c]),Q=l.useCallback((function(e,n,t){return l.createElement(rn,{onSimilarImagesDialogOpen:y,imagesRatio:I.E.R16_9,images:e,onImageSelected:K,columns:n,space:"three",focusIndex:k,propertyId:c,categoryId:t,similarImagesCTA:E,travelSearchCriteria:h})}),[K,k,c]),W=l.useCallback((function(e,n,t,a,i,r,o,c){var u,m=c===G,d=(null==o?void 0:o.button)||{},s=d.analytics,g=d.primary,p=d.accessibility,f=l.createElement(l.Fragment,null,n&&l.createElement(v.b,{padding:{blockend:"three"}},l.createElement(A.E,{tag:r,size:i,id:"category-".concat(c)},l.createElement("div",{ref:(u=c,function(e){w.current[u]=e})},n))),g&&l.createElement(v.b,{margin:{blockend:"three"}},l.createElement(R.E,{"data-stid":"category-gallery-button","aria-label":null!=p?p:void 0,size:D.E.MEDIUM,onClick:function(){return j(s)}},g)),Q(e,a,t));if(m||x)return l.createElement(v.b,{padding:{blockend:"three",small:{inline:"three"},medium:{inline:"three"}}},l.createElement("div",null,f))}),[Q,G]),J=l.useCallback((function(e,n,t,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return l.createElement(b.LM,null,l.createElement(b.NP,null,W(e,n,t,1,4,"h4",a,i)),l.createElement(b.rw,null,W(e,n,t,2,3,"h3",a,i)),l.createElement(b.zQ,null,W(e,n,t,2,3,"h3",a,i)))}),[W,2]),$=l.useCallback((function(e,n){return J(ke(e.images),e.categoryName,e.categoryId,e.galleryButton||void 0,n)}),[J]);if(!(null==n?void 0:n.length)||1===n.length)return J(ke(t),void 0,void 0,void 0,0);var X=l.createElement(l.Fragment,null,l.createElement(S.d,{type:"sticky",position:{top:"zero",zindex:"layer2"},display:"block"},l.createElement(v.b,{padding:{small:{block:"one",inline:"three"},medium:{block:"one",inline:"three"},large:{block:"three",inline:"three"}}},l.createElement(H.V,{layout:"fullwidth",paddedViewRow:!1,canvasTheme:"primary"},l.createElement("div",{ref:P},l.createElement(U.E,{direction:"horizontal"},l.createElement(v.b,{padding:{small:{block:"three"},medium:{block:"three"},large:{block:"one"}}},l.createElement(S.d,{type:"relative"},l.createElement(C.i,null,n.map((function(e,n){var t=e.images.length,a=m?"".concat(null==e?void 0:e.categoryName," (").concat(t,")"):null==e?void 0:e.categoryName;return l.createElement(z.E,{key:"thumbail-gallery-pill-".concat(n),id:"thumbail-gallery-pill-".concat(n),checked:V[n],onChange:function(){return Y(n)},value:null==e?void 0:e.categoryName},a)})))))))))),s?l.createElement(O.E,{blockSize:"85vb"},l.createElement(U.E,{direction:"vertical"},l.createElement("div",{ref:g,style:{height:"1px"}}),n.map((function(e,n){return $(e,n)})))):n.map((function(e,n){return $(e,n)})));return x?J(ke(t)):l.createElement(l.Fragment,null,l.createElement("div",{ref:_}),l.createElement(S.d,{type:"sticky",position:{top:"zero",zindex:"layer2"},cloneElement:!0},X))},cn=(0,a.J1)(de(),Ne.fragment),un=function(e){var n,t,a,i,r,c,u,m=e.data,d=e.allImages,s=e.isDialogOpen,p=e.onDialogDismiss,f=e.onImageClick,E=e.categoryIndexState,y=e.imageIndexState,I=e.triggerRef,h=e.propertyId,k=e.onThumbnailGalleryButtonClick,D=e.onSimilarImagesDialogOpen,T=e.similarImagesCTA,x=e.travelSearchCriteria,_=m.categorizedImages,O=m.thumbnailGalleryDialog,L=null==O||null===(n=O.primaryButton)||void 0===n?void 0:n.button,R=(0,j.xC)().scrollTo,M=(0,j.OK)().getTargets,N=(0,V.Wx)({threshold:0}),F=N.ref,z=N.inView,U=N.entry,H=q((0,l.useState)(!1),2),Y=(H[0],H[1]),K=q(E,2),Q=K[0],W=K[1],J=l.useRef(null),Z=(0,o.KY)();(0,l.useEffect)((function(){!z&&(null==U?void 0:U.target)&&Y(!0)}),[z]);var ee,ne,te=function(){if(null==L?void 0:L.analytics){var e=L.analytics,n=e.linkName,t=e.referrerId,l="".concat(t,".Thumbnail_Gallery");Z(l,n)}setTimeout((function(){p(),setTimeout((function(){var e,n=null==O||null===(e=O.primaryButton)||void 0===e?void 0:e.targetRef;n&&(R(n,[{sectionName:"navigation"}]),setTimeout((function(){var e,t=M([n])[n];null==t||null===(e=t.current)||void 0===e||e.focus({preventScroll:!0})}),300))}),500)}),300)},le=(null==_||null===(t=_.find((function(e){return"all"===e.categoryId})))||void 0===t||t.images.length,L&&l.createElement(v.b,{padding:{blockend:"two"}},l.createElement(S.d,{type:"absolute",position:{bottom:"six",left:"center",zindex:"layer1"}},l.createElement(B.E,{onClick:te,"aria-label":null!==(ee=L.accessibility)&&void 0!==ee?ee:""},L.primary)))),ae=L&&l.createElement(G.E,{"aria-label":null!==(ne=L.accessibility)&&void 0!==ne?ne:"",onClick:te},l.createElement(A.c,{whiteSpace:"nowrap",theme:"light"},L.primary)),ie={id:"HOT.HIS.PhotoGalleryTrigger",description:"Close thumbnail gallery dialog",callback:function(e,n){var t,l,a,i=q(y,1)[0],r=null!==(a=null===(l=_[Q])||void 0===l||null===(t=l.images)||void 0===t?void 0:t.length)&&void 0!==a?a:d.length;Z(e,n,void 0,De(i,void 0,r,void 0,h,"PDP_FULL_IMAGE_GALLERY"))}},re=O&&l.createElement(v.b,{padding:{inlineend:"three"}},l.createElement(w.b,{navigationContent:{onClick:p,onClickAnalytics:ie,navType:null===(i=O.toolbar)||void 0===i||null===(a=i.icon)||void 0===a?void 0:a.id,navIconLabel:null===(c=O.toolbar)||void 0===c||null===(r=c.icon)||void 0===r?void 0:r.description},toolbarTitle:(null===(u=O.toolbar)||void 0===u?void 0:u.title)||"",toolbarActionContent:l.createElement(b.LM,null,l.createElement(b.rw,null,l.createElement(l.Fragment,null,ae)))})),oe={returnFocusOnClose:!0,isVisible:s,triggerRef:I},ce=function(e){W(e),Y(!0)},ue=function(e){return l.createElement(on,{categories:_,onSimilarImagesDialogOpen:D,images:d,onImageClick:f,categoryIndexState:E,imageIndexState:y,propertyId:h,showImageNumber:!0,refGallery:J,isSmallView:e,refContent:F,onPillSelect:ce,onThumbnailGalleryButtonClick:k,similarImagesCTA:T,travelSearchCriteria:x})},me=function(e){return l.createElement(l.Fragment,null,re,l.createElement(g.f,{padded:!1},l.createElement("div",{ref:J},ue(e))))};g.e,v.b,g.f,C.i,C.j,ue(!1);return l.createElement(b.LM,null,l.createElement(b.NP,null,l.createElement(g.e,X($({},oe),{type:"full"}),me(!0),le)),l.createElement(b.rw,null,l.createElement(P.R3,X($({},oe),{centeredSheetSize:"xxxlarge",height:1200}),me(!1))))};un.displayName="ThumbnailGalleryDialog",un.fragment=cn;var mn=function(e,n){var t=function(e){return(0,l.useMemo)((function(){var n,t;return(null==e||null===(t=e.categorizedImages)||void 0===t||null===(n=t.find((function(n){return n.categoryId===e.categoryIdAll})))||void 0===n?void 0:n.images)||[]}),[e])}(e);return(0,l.useMemo)((function(){if(!(null==n?void 0:n.length)||!t.length)return t;var e=t.map((function(e){var n,t,l;return X($({},e),{baseUrl:null!==(l=(null!==(t=null===(n=e.lowResImage)||void 0===n?void 0:n.url)&&void 0!==t?t:e.image.url).split("?")[0])&&void 0!==l?l:""})})),l=n.map((function(e){return X($({},e),{baseUrl:e.url.split("?")[0]})})),a=l.reduce((function(e,n,t){return X($({},e),J({},n.baseUrl,t))}),{}),i=l.reduce((function(e,n){return X($({},e),J({},n.baseUrl,n))}),{}),r=ne(e.filter((function(e){return i[e.baseUrl]})).map((function(e){var n,t;return X($({},e),{image:X($({},e.image),{url:(null===(n=i[e.baseUrl])||void 0===n?void 0:n.url)||e.image.url}),lowResImage:X($({},e.lowResImage),{url:(null===(t=i[e.baseUrl])||void 0===t?void 0:t.url)||""})})}))).sort((function(e,n){return(a[e.baseUrl]||-1)-(a[n.baseUrl]||-1)})).map((function(e){e.baseUrl;return Z(e,["baseUrl"])})),o=t.filter((function(n,t){var l,a;return!i[null!==(a=null===(l=e[t])||void 0===l?void 0:l.baseUrl)&&void 0!==a?a:""]}));return ne(r).concat(ne(o))}),[t,n])},dn=(0,a.J1)(se(),je.fragment,Ve.fragment,an.fragment,un.fragment,Ae.fragment),sn=function(e){var n,t,a,i,r,o,c,m,d,s,I,h=e.propertyId,k=e.data,C=e.placeholderData,S=e.className,D=(e.shoppingContext,e.travelSearchCriteria),T=e.onClickSeeAllReviewsButton,x=q((0,f.useDialog)("media-gallery","pwaDialogNested"),3),_=x[0],O=x[1],A=x[2],w=q((0,f.useDialog)("thumbnail-gallery","pwaThumbnailDialog"),3),P=w[0],L=w[1],R=w[2],M=q((0,f.useDialog)("aerial-view","pwaAerialDialog"),3),G=M[0],N=M[1],F=M[2],V=q((0,f.useDialog)("property-similar-image","pwaSimilarImageDialog"),3),B=V[0],j=V[1],z=V[2],U=l.useRef(null),H=l.useRef(null),Y=l.useRef(null),K=l.useState(0),Q=l.useState(-1),J=l.useState(0),X=l.useState(0),Z=q(K,2)[1],ee=q(Q,2)[1],ne=q(J,2)[1],te=q(X,2)[1],ae=q(l.useState(""),2),ie=ae[0],re=ae[1],oe=q(l.useState(),2),ce=oe[0],ue=oe[1],me=mn(k,C),de=(0,E.useLoggerEvents)(Ee),se=(0,l.useContext)(Ce),ge=se.useControlGalleryAdaptexCampaign,pe=(se.data,fe()),Ie=(s=(0,y.Zp)(),I=(0,y.zy)(),(0,l.useCallback)((function(e){var n=new URLSearchParams(I.search);n.delete(e),s("".concat(I.pathname,"?").concat(n),{replace:!0})}),[I,s])),ke=(0,u.useExperiment)("Larger_image_mosaic_on_top_of_pdp",!0).exposure.bucket,Se=(0,u.useExperiment)("Adaptex_campaign_PDP_mosaic_for_small_screens").exposure.bucket,De=(0,l.useContext)(ve).isRandomAccessOne,Te=null==k||null===(t=k.mediaGalleryDialog)||void 0===t||null===(n=t.similarImageDialog)||void 0===n?void 0:n.trigger;l.useEffect((function(){if((ke>0||1===Se)&&pe.get("imageIndex")){var e=Number(pe.get("imageIndex"));Z(e),Ie("imageIndex")}}),[ke,Se,Ie,pe,Z]);var xe,_e,Oe=l.useCallback((function(e){Z(e),ee(-1),U.current=document.activeElement,L.openDialog()}),[L,ee,Z]),we=l.useCallback((function(e){window.open(e)}),[]),Pe=l.useCallback((xe=function(e){return le(this,(function(n){return ie||function(e){return fetch("https://aerialview.googleapis.com/v1/videos:lookupVideo?key=".concat("AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68","&videoId=").concat(e),{method:"GET",headers:new Headers({"Content-Type":"application/json",Referer:"https://www.expedia.com/"})}).then((function(e){return e.json()}))}(e).then((function(e){var n,t;(null==e||null===(n=e.uris)||void 0===n?void 0:n.MP4_MEDIUM)?(re(e.uris.MP4_MEDIUM.landscapeUri),de.VIDEO_SUCCESS.log(ye+h)):(de.VIDEO_FAILED.log({message:be+h,error:null==e||null===(t=e.error)||void 0===t?void 0:t.message}),re("error"))})),N.openDialog(),[2]}))},_e=function(){var e=this,n=arguments;return new Promise((function(t,l){var a=xe.apply(e,n);function i(e){W(a,t,l,i,r,"next",e)}function r(e){W(a,t,l,i,r,"throw",e)}i(void 0)}))},function(e){return _e.apply(this,arguments)}),[N,re]),Le=null==k||null===(a=k.galleryButtons)||void 0===a?void 0:a.find((function(e){var n;return"visibility"===(null===(n=e.icon)||void 0===n?void 0:n.id)})),Re=null==Le||null===(i=Le.icon)||void 0===i?void 0:i.description,Me=pe.get("similarImageId"),Ge=null;if(null!==Me){var Ne=me.find((function(e){var n;return(null==e||null===(n=e.analytics)||void 0===n?void 0:n.imageId)===Me}));Ne&&(Ge=he(Ne))}var Fe=ce||Ge,Be=l.useCallback((function(){ee(-1),L.openDialog()}),[L,ee]),Ue=l.useCallback((function(e){if(e){var n=document.activeElement;Y.current=n,ue(e),j.openDialog()}}),[j]),He=l.useCallback((function(){j.closeDialog(),setTimeout((function(){var e;null===(e=Y.current)||void 0===e||e.focus()}),0)}),[j]),Ye=l.useCallback((function(e,n){H.current=document.activeElement,ee(n),ne(e),n<0&&Z(e),te(e),O.openDialog()}),[ee,ne,O,Z,te]),Ke=l.useCallback((function(){var e=document.activeElement;U.current=e,Z(0),ee(-1),L.openDialog()}),[L,Z,ee]),Qe=l.useCallback((function(){L.closeDialog(),setTimeout((function(){var e;null===(e=U.current)||void 0===e||e.focus()}),0)}),[L]),We=l.useCallback((function(){O.closeDialog(),setTimeout((function(){var e;null===(e=H.current)||void 0===e||e.focus()}),0)}),[O]),Je=l.useCallback((function(){N.closeDialog(),setTimeout((function(){var e;null===(e=U.current)||void 0===e||e.focus()}))}),[N]),$e=l.useRef(null);if(!k||!me.length)return null;var Xe={imageIndexState:K,categoryImageIndexState:J,categoryIndexState:Q,similarImagesCTA:Te,onSimilarImagesDialogOpen:Ue},Ze=$({onTriggerClick:Ke,onVirtualTourClick:we,onAerialViewClick:Pe,thumbnailDialogTriggerTitle:null==k||null===(o=k.thumbnailGalleryDialog)||void 0===o||null===(r=o.trigger)||void 0===r?void 0:r.value,thumbnailDialogTriggerAccessibilityLabel:null==k||null===(m=k.thumbnailGalleryDialog)||void 0===m||null===(c=m.trigger)||void 0===c?void 0:c.accessibilityLabel,propertyId:h,data:k,allImages:me},Xe),qe=function(e){return l.createElement(je,$({onImageClick:function(e){return Oe(e)},imagesToShow:e},Ze))},en=l.createElement(Ve,$({onImageClick:Be},Ze)),tn=function(e){return l.createElement(l.Fragment,null,l.createElement(u.Experiment,{name:"Larger_image_mosaic_on_top_of_pdp"},l.createElement(u.ExperimentControl,null,qe(e)),l.createElement(u.ExperimentVariant,{bucket:1},qe(e)),l.createElement(u.ExperimentVariant,{bucket:2},qe(e))),l.createElement(Ae,{data:k,onThumbnailGalleryClick:Ze.onTriggerClick,onVirtualTourClick:we,onAerialViewClick:Pe,thumbnailButtonText:Ze.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Ze.thumbnailDialogTriggerAccessibilityLabel,propertyId:h}))},ln=l.createElement(u.Experiment,{name:"Adaptex_campaign_PDP_mosaic_for_small_screens"},l.createElement(u.ExperimentControl,null,en),l.createElement(u.ExperimentVariant,{bucket:1},!ge&&l.createElement(Ae,{data:k,onThumbnailGalleryClick:Ze.onTriggerClick,onVirtualTourClick:we,onAerialViewClick:Pe,thumbnailButtonText:Ze.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Ze.thumbnailDialogTriggerAccessibilityLabel,propertyId:h}))),rn=l.createElement(l.Fragment,null,l.createElement(g.h,{isVisible:P},l.createElement(R,null,l.createElement(un,$({allImages:me,data:k,isDialogOpen:P,onDialogDismiss:Qe,onImageClick:Ye,triggerRef:U,propertyId:h,onThumbnailGalleryButtonClick:T,travelSearchCriteria:D},Xe)))),l.createElement(g.h,{isVisible:_},l.createElement(A,null,l.createElement(an,$({allImages:me,data:k,isDialogOpen:_,onDialogDismiss:We,propertyId:h,mediaGalleryStartIndexState:X,carouselRef:$e,triggerRef:H},Xe)))),l.createElement(g.h,{isVisible:G},l.createElement(F,null,l.createElement(ze,{isDialogOpen:G,onDialogDismiss:Je,triggerRef:U,aerialViewLandscape:ie,aerialViewDescription:Re}))),l.createElement(g.h,{isVisible:B},l.createElement(z,null,(null==k||null===(d=k.mediaGalleryDialog)||void 0===d?void 0:d.similarImageDialog)&&Fe&&l.createElement(nn,{data:k.mediaGalleryDialog.similarImageDialog,onDialogDismiss:He,selectedSimilarImage:Fe,triggerRef:Y,travelSearchCriteria:D,propertyId:h})))),on=l.createElement(b.LM,null,l.createElement(b.NP,null,ln),l.createElement(b.rw,null,tn(3)),l.createElement(b.zQ,null,tn(5))),cn=l.createElement(l.Fragment,null,l.createElement(b.LM,null,l.createElement(b.NP,null,en),l.createElement(b.rw,null,l.createElement(l.Fragment,null,qe(3),l.createElement(Ae,{data:k,onThumbnailGalleryClick:Ze.onTriggerClick,onVirtualTourClick:we,onAerialViewClick:Pe,thumbnailButtonText:Ze.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Ze.thumbnailDialogTriggerAccessibilityLabel,propertyId:h}))),l.createElement(b.zQ,null,l.createElement(l.Fragment,null,qe(5),l.createElement(Ae,{data:k,onThumbnailGalleryClick:Ze.onTriggerClick,onVirtualTourClick:we,onAerialViewClick:Pe,thumbnailButtonText:Ze.thumbnailDialogTriggerTitle,thumbnailDialogTriggerAccessibilityLabel:Ze.thumbnailDialogTriggerAccessibilityLabel,propertyId:h})))),l.createElement(p.EGDSThemeProvider,{config:{lightMode:{colorTheme:"bright-1"}},isColorThemeContainer:!0},l.createElement(v.b,{padding:"half"},l.createElement("div",{"data-stid":"luxury-ribbon"}))));return De||1!==ke&&1!==Se?l.createElement("div",{className:S},De?cn:on,rn):l.createElement("div",{className:S},on,rn)};sn.displayName="ProductGalleryImageContainer",sn.fragment=dn;var gn=function(e){var n=e.images,t=function(){var e=q((0,l.useState)(!1),2),n=e[0],t=e[1];return(0,l.useEffect)((function(){t(!0)}),[]),n}(),a=(0,l.useContext)(ve).isRandomAccessOne;return l.createElement(l.Fragment,null,t?l.createElement(fn,{images:n,isRandomAccessOne:a}):l.createElement(En,{images:n,isRandomAccessOne:a}))},vn=function(e){var n=e.additionalImage,t=e.className,a=e.style,i=e.isRandomAccessOne,r=e.isMobile?I.E.R3_2:I.E.R16_9;return l.createElement(I.a,{ratio:i?I.E.R16_9:r,className:t,style:a},l.createElement(I.b,{placeholderImage:!0,src:null==n?void 0:n.url,alt:null==n?void 0:n.description,additionalProps:{fetchPriority:(null==n?void 0:n.url)?"high":void 0}}))},pn=function(e){var n=function(e){var n=e.images,t=e.isRandomAccessOne;return l.createElement(b.LM,null,l.createElement(b.NP,null,l.createElement(vn,{additionalImage:null==n?void 0:n[0],isMobile:!0})),l.createElement(b.rw,null,l.createElement(O.E,{rows:2,columns:3,space:"half"},Array.from(Array(3)).map((function(e,a){return l.createElement(O.a,{rowSpan:0===a?2:1,colSpan:0===a?2:1,key:"gallery-placeholder-".concat(a)},l.createElement(vn,{additionalImage:null==n?void 0:n[a],isRandomAccessOne:t}))})))),l.createElement(b.zQ,null,l.createElement(O.E,{rows:2,columns:4,space:"half"},Array.from(Array(5)).map((function(e,a){return l.createElement(O.a,{rowSpan:0===a?2:1,colSpan:0===a?2:1,key:"gallery-placeholder-".concat(a)},l.createElement(vn,{additionalImage:null==n?void 0:n[a],isRandomAccessOne:t}))})))))};return n.displayName=e,n},fn=pn("CsrPlaceholder"),En=pn("SsrPlaceholder"),yn=(0,a.J1)(ge(),sn.fragment),bn=function(e){var n,t,a,g,v,p,f,E=e.inputs,y=e.skipSsr,b=e.placeholderData,I=e.batchKey,h=e.onClickSeeAllReviewsButton,k=(0,r.R)().context,C=(0,c.Yj)().publish,S="default-product-details-experience-batch-key",D=X($({},E),{context:k}),T=(0,d.kY)(),x=(0,u.useExperiment)("Luxury_PDP_Feature_Gate_Web").exposure.bucket,_=(0,u.useExperiment)("PDP_Location_Highlights",!1).exposure.bucket,O={context:k,featureId:"standout-stays",productIdentifier:{id:E.productIdentifier.id,type:m.Wx.PROPERTY_ID}},A=(0,i.I)(m.dy,{variables:O,ssr:!y,errorPolicy:"all",skip:0===x}).data;(null==A||null===(t=A.randomAccessOne)||void 0===t||null===(n=t.mapping)||void 0===n?void 0:n.length)&&C(new s.ok("LUXURY_PROPERTY",{message:!0}));var w={context:k,featureId:"ugc_content_on_images_script_tpl",productIdentifier:{id:E.productIdentifier.id,type:m.Wx.PROPERTY_ID,shoppingContext:E.productIdentifier.shoppingContext,travelSearchCriteria:E.productIdentifier.travelSearchCriteria}},P=(0,i.I)(m.dy,{variables:w,ssr:!y,errorPolicy:"all",context:{batchKey:null!=I?I:S},skip:0===_}).data,L=(0,i.I)(yn,{context:{batchKey:null!=I?I:S},variables:D,ssr:!y,errorPolicy:"all",skip:null==T||null===(a=T.product)||void 0===a?void 0:a.productGallery}),R=L.data,M=L.loading,G=(null==T||null===(g=T.product)||void 0===g?void 0:g.productGallery)||(null==R?void 0:R.productGallery),N=null==R||null===(f=R.productGallery)||void 0===f||null===(p=f.categorizedImages)||void 0===p||null===(v=p.find((function(e){return"Guest photos"===e.categoryId})))||void 0===v?void 0:v.clientSideAnalytics,F=l.createElement(sn,{propertyId:E.productIdentifier.id,data:G,placeholderData:b,shoppingContext:E.productIdentifier.shoppingContext,travelSearchCriteria:E.productIdentifier.travelSearchCriteria,onClickSeeAllReviewsButton:h});return l.createElement(pe,{data:A,multiModuleUgcContentData:P},M&&l.createElement(gn,{images:b}),N?l.createElement(o.ee,{referrerId:N.referrerId,linkName:N.linkName,trackOnce:!0},F):F)};bn.displayName="sharedui-ProductGallery"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-retail-product-gallery.46f2591a2c0c745eea8d.js.map
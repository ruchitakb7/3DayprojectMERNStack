/*@license For license information please refer to shared-ui-retail-product-rating-summary.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7620],{62308:function(e,t,n){n.d(t,{P:function(){return le},W:function(){return oe}});var r=n(96540),a=n(15043),i=n(1723),l=n(47576),o=n(94220),c=n(90745),u=n(36360),s=n(75826),d=n(85625),m=n(54235),p=n(94495),g=n(61917),v=n(68963),f=n(82960),y=n(10159),E=n(68174),b=n(42782),R=n(46198),I=n(63676),h=n(93149),S=n(14937),D=n(15144);function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){o=!0,a=c}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function x(){var e=w(["\n  fragment ProductExternalReviewsMessageFragment on PopUpMessage {\n    title\n    content {\n      ... on EGDSPlainText {\n        accessibility\n        text\n      }\n    }\n    openAnalytics {\n      eventType\n      linkName\n      referrerId\n    }\n  }\n"]);return x=function(){return e},e}function T(){var e=w(["\n  fragment ProductExternalReviewsFragment on ProductTextInfoSection {\n    title {\n      text\n    }\n    icon {\n      id\n      description\n      token\n    }\n    message {\n      ...ProductExternalReviewsMessageFragment\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function A(){var e=w(["\n  fragment ProductRatingSupportingMessagesFragment on ProductRatingSupportingMessage {\n    ... on EGDSPlainText {\n      text\n      accessibility\n    }\n    ... on ProductRatingLink {\n      link {\n        text\n        disabled\n        action {\n          target\n          useRelativePath\n          analytics {\n            eventType\n            linkName\n            referrerId\n          }\n        }\n        icon {\n          token\n        }\n      }\n      action {\n        text\n        title\n        icon {\n          id\n          token\n          description\n        }\n        closeAnalytics {\n          eventType\n          linkName\n          referrerId\n        }\n      }\n    }\n  }\n"]);return A=function(){return e},e}function N(){var e=w(["\n  fragment ProductRatingMetadataFragment on ProductRatingMetadata {\n    seoData {\n      itemprop\n      content\n      itemscope\n    }\n  }\n"]);return N=function(){return e},e}function L(){var e=w(["\n  fragment SummaryContentFragment on ProductRatingSummary {\n    __typename\n    primary\n    secondary\n    theme\n    accessibilityLabel\n    supportingMessages {\n      ...ProductRatingSupportingMessagesFragment\n    }\n    icon {\n      id\n      theme\n    }\n  }\n"]);return L=function(){return e},e}function F(){var e=w(["\n  query ProductRatingSummaryQuery($productIdentifier: ProductIdentifierInput!, $context: ContextInput!) {\n    productRatingSummary(productIdentifier: $productIdentifier, context: $context) {\n      __typename\n      sectionHeadingAccessibilityText\n      summary {\n        ...SummaryContentFragment\n      }\n      metadata {\n        ...ProductRatingMetadataFragment\n      }\n      info {\n        ...ProductExternalReviewsFragment\n      }\n      impressionAnalytics\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}var M=r.createContext({}),j=(0,a.J1)(x()),K=function(e){var t=e.data,n=t.title,a=t.content,i=O(r.useState(!1),2),l=i[0],u=i[1];return r.createElement(v.f,null,r.createElement(c.c,{weight:"bold",size:400},n),r.createElement(o.b,{margin:{blockstart:"six"}},r.createElement(b.a,{isVisible:l,handleClick:function(){return u((function(e){return!e}))},items:1},null==a?void 0:a.map((function(e,t){return r.createElement(c.a,{key:t},"EGDSPlainText"===(null==e?void 0:e.__typename)&&(null==e?void 0:e.text))})))))};K.displayName="ProductExternalReviewsMessage",K.fragment=j;var Y=(0,a.J1)(T(),K.fragment),z=function(e){var t=e.data,n=t.title,a=t.icon,i=t.message,l=O((0,y.useDialog)("product-external-reviews-dialog"),3),d=l[0],m=l[1],b=l[2],R=r.useRef(null),I=(0,E.eg)({viewSizes:E.pf}),h=(0,u.R)().context,S=(0,s.KY)(),D=(0===I?"DESKTOP"===h.device.type||"MOBILE_TABLET"===h.device.type:I>E.pf.SMALL)?"small":"medium";if(!i||!n)return null;var k=i.openAnalytics;return r.createElement(r.Fragment,null,r.createElement(c.c,null,r.createElement(o.b,null,r.createElement(g.E,{onClick:function(){m.openDialog(),k&&S(k.referrerId,k.linkName)},size:"medium",weight:"regular"},r.createElement("button",{ref:R,type:"button","aria-label":n.text},n.text,r.createElement(p.a,{name:(null==a?void 0:a.token)||"",description:null==a?void 0:a.description,id:null==a?void 0:a.id,title:null==a?void 0:a.id}))))),r.createElement(v.h,{isVisible:d},r.createElement(b,null,r.createElement(v.e,{isVisible:d,type:"centered",centeredSheetSize:D,triggerRef:R},r.createElement(f.b,{navigationContent:{onClick:function(){m.closeDialog()},navIconLabel:"close toolbar",navType:"close"}}),i&&r.createElement(K,{data:i})))))};z.displayName="ProductExternalReviews",z.fragment=Y;var H=function(e){var t,n,a,i,l,o,c,u,d=e.triggerRef,m=e.dialogType,p=e.sheetType,g=e.sheetHeight,E=e.toolbarData,b=O((0,y.useDialog)(m,"pwaDialog"),3),R=b[0],h=b[1],S=b[2],D=r.useContext(M).productIdentifier,k=D.id,_=(0,s.KY)(),P=(0,r.useCallback)((function(){h.closeDialog()}),[h]),C=null==D?void 0:D.travelSearchCriteria;if(!(null==C||null===(t=C.property)||void 0===t?void 0:t.primary))return null;var w={primary:null==C||null===(n=C.property)||void 0===n?void 0:n.primary,secondary:null==C||null===(a=C.property)||void 0===a?void 0:a.secondary},x=E.action,T={id:(null===(i=x.closeAnalytics)||void 0===i?void 0:i.referrerId)||"",callback:function(){var e,t;return _((null===(e=x.closeAnalytics)||void 0===e?void 0:e.referrerId)||"",(null===(t=x.closeAnalytics)||void 0===t?void 0:t.linkName)||"")}},A=!(null==D||null===(c=D.travelSearchCriteria)||void 0===c||null===(o=c.property)||void 0===o||null===(l=o.primary)||void 0===l?void 0:l.dateRange);return r.createElement(v.h,{isVisible:R},r.createElement(S,null,r.createElement(v.e,{type:p,height:g,isVisible:R,returnFocusOnClose:!0,triggerRef:d},r.createElement(f.b,{toolbarTitle:x.title||"",navigationContent:{onClick:P,navIconLabel:null==x||null===(u=x.icon)||void 0===u?void 0:u.description,onClickAnalytics:T,navType:"close",navButtonId:"reviews-dialog-close"}}),r.createElement(v.f,{fullSheetContentMaxWidth:"extra-large"},r.createElement(I.u6,{inputs:{propertyId:k,searchCriteria:w,includeRecentReviews:!A}})))))};H.displayName="ReviewsDialog";var U=function(e){var t=e.dialogType,n=e.triggerRef,a=e.toolbarData;return r.createElement(E.LM,null,r.createElement(E.NP,null,r.createElement(H,{dialogType:t,triggerRef:n,sheetType:"full",toolbarData:a})),r.createElement(E.rw,null,r.createElement(H,{dialogType:t,sheetHeight:1200,triggerRef:n,sheetType:"centered",toolbarData:a})))};U.displayName="ReviewsDialogWrapper";var V=function(e){var t,n,a=e.data,i=O((0,y.useDialog)("product-reviews","pwaDialog"),2)[1],l=r.useRef(null),o=(0,s.KY)(),c=(0,r.useCallback)((function(){i.openDialog()}),[i]),u=(0,r.useCallback)((function(){var e=a.link;if(e.action.analytics){var t=e.action.analytics,n=t.linkName,r=t.referrerId;o(r,n)}c()}),[a,o,c]);if(!a||!(null==a||null===(t=a.link)||void 0===t?void 0:t.text))return null;var d=a.link;return r.createElement(r.Fragment,null,r.createElement(R.E,{onClick:u,domRef:l},r.createElement("button",{type:"button","data-stid":"reviews-link"},d.text,r.createElement(p.a,{name:(null===(n=d.icon)||void 0===n?void 0:n.token)||""}))),r.createElement(U,{dialogType:"product-reviews",triggerRef:l,toolbarData:a}))};V.displayName="ProductRatingLink";var G=(0,a.J1)(A()),W=function(e){return function(e,t,n){var a,i=((null==e||null===(a=e.link)||void 0===a?void 0:a.icon)||"").token;switch(e.__typename){case"EGDSPlainText":return(null==e?void 0:e.text)&&r.createElement(o.b,{margin:{blockend:"two"}},r.createElement(c.c,null,e.text),";");case"ProductRatingLink":var l;return r.createElement(d.Experiment,{name:"No_Harm_Review_Overlay_Dialog_Shared_UI_Migration"},r.createElement(d.ExperimentControl,null,(null==e||null===(l=e.link)||void 0===l?void 0:l.text)&&r.createElement(R.E,{onClick:t,domRef:n},r.createElement("button",{type:"button","data-stid":"reviews-link"},e.link.text,r.createElement(p.a,{name:i})))),r.createElement(d.ExperimentVariant,{bucket:1},r.createElement(V,{data:e})));default:return null}}(e.data,e.handleClick,e.triggerRef)};W.displayName="ProductRatingSupportingMessages",W.fragment=G;var B=(0,a.J1)(N()),J=function(e){var t=e.data.seoData;return r.createElement("div",{itemProp:"aggregateRating",itemScope:!0,itemType:"https://schema.org/AggregateRating"},t.map((function(e){var t=e.itemprop,n=e.content;return n?r.createElement("meta",{itemProp:t,content:n,key:t}):null})))};J.displayName="ProductRatingMetadata",J.fragment=C(P({},B),{__typename:"ProductRatingMetadata"});var $={STANDARD:"standard",EMPHASIS:"emphasis",INFO:"info",FEATURED:"featured",BRAND:"brand",WARNING:"warning",POSITIVE:"positive"},q=function(e){var t,n=e.text,a=e.badgeTheme,i=e.badgeSize,l=e.accessibilityLabel,o=null!==(t=i&&h.t[i.toUpperCase()])&&void 0!==t?t:h.t.LARGE,c=$[null==a?void 0:a.toUpperCase()]||$.STANDARD;return r.createElement(h.p,{text:n,size:o,theme:c,a11yText:null!=l?l:void 0})},Q=_({},"REVIEWS",["HOT.HIS.UGC.ViewAllResults","Display detailed reviews"]),X=function(e){var t=e.theme,n=e.primary,a=e.secondary,i=e.accessibilityLabel,l=e.icon,c=e.supportingMessages,u=e.handleClick,s=e.triggerRef,d=e.productIdentifierId,m=e.travelSearchCriteria,p=e.skipSsr;return r.createElement(r.Fragment,null,r.createElement(o.b,{margin:{blockend:"two"}},r.createElement(D.i,{alignItems:"center",space:"two"},t?r.createElement(te,{primary:n,theme:t,secondary:a,accessibilityLabel:i}):r.createElement(ne,{primary:n,icon:l,accessibilityLabel:i}))),r.createElement(ee,{productIdentifierId:d,travelSearchCriteria:m,skipSsr:p}),c&&c.length>0&&c.map((function(e,t){return r.createElement(o.b,{key:"".concat(t,"-message-").concat(e.__typename),margin:{inlinestart:"two"}},r.createElement(W,{data:e,handleClick:u,triggerRef:s}))})))},Z=(0,a.J1)(L()),ee=function(e){var t=e.productIdentifierId,n=e.travelSearchCriteria;e.skipSsr;return r.createElement(S.N,{inputs:{productIdentifier:{id:t,type:S.W.PROPERTY_ID,travelSearchCriteria:n}},skipSsr:!0})},te=function(e){var t=e.primary,n=e.theme,a=e.secondary,i=e.accessibilityLabel;return r.createElement(r.Fragment,null,t&&n&&r.createElement(q,{text:t,badgeTheme:n,accessibilityLabel:i}),a&&r.createElement(c.c,{size:500,weight:"medium"},a))},ne=function(e){var t=e.primary,n=e.icon,a=e.accessibilityLabel;return r.createElement(r.Fragment,null,n&&r.createElement(p.a,{name:n.id,size:p.E.MEDIUM,theme:n.theme||"default"}),a&&r.createElement("span",{className:"is-visually-hidden"},a),r.createElement(c.c,{size:500,weight:"bold",theme:"default","aria-hidden":null!==a},t))},re=function(e){var t=e.data,n=e.triggerRef,a=e.onClickReviews,i=e.productIdentifierId,l=(e.isDateless,e.travelSearchCriteria),o=e.skipSsr,c=(0,s.KY)(),u=r.useCallback((function(e){e.preventDefault();var t=O(Q.REVIEWS,2),n=t[0],r=t[1];c(n,r,!0),a()}),[a,c]),d=t||{},m=d.primary,p=d.secondary,g=d.theme,v=d.supportingMessages,f={theme:g,primary:m,secondary:p,accessibilityLabel:d.accessibilityLabel,icon:d.icon,supportingMessages:v,handleClick:u,triggerRef:n,productIdentifierId:i,travelSearchCriteria:l,skipSsr:o};return r.createElement(E.LM,null,r.createElement(E.NP,null,r.createElement(X,P({},f))),r.createElement(E.zQ,null,r.createElement(X,P({},f))))};re.displayName="SummaryContent",re.fragment=Z;var ae=(0,a.J1)(F(),W.fragment,J.fragment,re.fragment,z.fragment),ie=function(){return r.createElement(r.Fragment,null,r.createElement(o.b,{margin:{blockend:"two"}},r.createElement(l.b,{animation:!0})),r.createElement(o.b,{margin:{blockend:"two"}},r.createElement(l.b,{animation:!0,type:"secondary"})))},le=function(e){var t,n,a,l,p,g,v,f,y=e.inputs,E=e.skipSsr,b=e.className,R=e.onClickReviews,I=e.triggerRef,h=e.batchKey,S=e.isDataRequired,D=void 0!==S&&S,k=(0,m.kY)(),_=(0,u.R)().context,O=C(P({},y),{context:_}),w=!(null==O||null===(l=O.productIdentifier)||void 0===l||null===(a=l.travelSearchCriteria)||void 0===a||null===(n=a.property)||void 0===n||null===(t=n.primary)||void 0===t?void 0:t.dateRange),x=1===(0,d.useExperiment)("App_Shell_Property_Requirement_Web",!0).exposure.bucket,T=(0,i.I)(ae,{context:{useApq:!0,batchKey:null!=h?h:"default-product-details-experience-batch-key"},variables:O,ssr:!E,skip:null==k||null===(p=k.product)||void 0===p?void 0:p.productRatingSummary}),A=T.data,N=T.error,L=T.loading;if(N)return null;var F=null!==(f=null==A?void 0:A.productRatingSummary)&&void 0!==f?f:null==k||null===(g=k.product)||void 0===g?void 0:g.productRatingSummary;if(D&&!F)return L?r.createElement(ie,null):null;var j=F||{},K=j.summary,Y=j.metadata,H=j.sectionHeadingAccessibilityText,U=j.info,V=j.impressionAnalytics,G=r.createElement(M.Provider,{value:y},r.createElement(o.b,{padding:{blockend:x?void 0:"six"}},r.createElement("div",{className:K?b:"","data-stid":"content-hotel-reviewsummary"},Y&&r.createElement(J,{data:Y}),r.createElement(c.E,{className:"is-visually-hidden"},H),r.createElement(re,{onClickReviews:R,triggerRef:I,data:K,productIdentifierId:y.productIdentifier.id,isDateless:w,travelSearchCriteria:null==O||null===(v=O.productIdentifier)||void 0===v?void 0:v.travelSearchCriteria,skipSsr:E}),U&&r.createElement(z,{data:U}))));if(V){var W={clientPayload:{event:{event_name:"review_score.presented",event_version:"1.7.0"}},serverPayload:V};return r.createElement(s.E0,{eventData:W},G)}return G};le.displayName="sharedui-ProductRatingSummary";var oe=function(e){return e.ACTIVITY_ID="ACTIVITY_ID",e.CART_ID="CART_ID",e.CAR_OFFER_TOKEN="CAR_OFFER_TOKEN",e.CHECKOUT_SESSION_ID="CHECKOUT_SESSION_ID",e.ENTITY_ID="ENTITY_ID",e.LEGACY_ORDER_ID="LEGACY_ORDER_ID",e.OFFER_ID="OFFER_ID",e.ORDER_ID="ORDER_ID",e.PROPERTY_ID="PROPERTY_ID",e.SAILING_TOKEN="SAILING_TOKEN",e}(oe||{})}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-retail-product-rating-summary.835cc4171420373603f6.js.map
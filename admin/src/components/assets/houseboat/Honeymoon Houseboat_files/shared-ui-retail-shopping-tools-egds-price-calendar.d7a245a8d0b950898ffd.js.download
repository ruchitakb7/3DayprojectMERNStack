/*@license For license information please refer to shared-ui-retail-shopping-tools-egds-price-calendar.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4501],{48831:function(e,t,n){n.d(t,{D:function(){return X}});var r=n(96540),a=n(68098),i=n(36360),l=n(75826),o=n(2619),c=n(15144),u=n(94220),s=n(90745),d=n(68174),f=n(77969),g=n(15043),m=n(94495),h=n(1474);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(c){o=!0,a=c}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function S(){var e=D(["\n  fragment ClientSideAnalyticsFragment on ClientSideAnalytics {\n    linkName\n    referrerId\n  }\n"]);return S=function(){return e},e}function b(){var e=D(["\n  fragment IconFragment on Icon {\n    id\n    title\n    token\n    description\n    size\n  }\n"]);return b=function(){return e},e}function C(){var e=D(["\n  fragment MarkFragment on Mark {\n    description\n    id\n  }\n"]);return C=function(){return e},e}function A(){var e=D(["\n  fragment UIGraphicFragment on UIGraphic {\n    ... on Icon {\n      ...IconFragment\n    }\n\n    ... on Mark {\n      ...MarkFragment\n    }\n  }\n  ","\n  ","\n"]);return A=function(){return e},e}function I(){var e=D(["\n  fragment EGDSGraphicTextFragment on EGDSGraphicText {\n    accessibility\n    text\n    graphic {\n      ...UIGraphicFragment\n    }\n    trailingGraphics {\n      ...UIGraphicFragment\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function x(){var e=D(["\n  query FlightsPriceCalendar(\n    $context: ContextInput!\n    $flightsSearchContext: FlightsSearchContextInput!\n    $journeyCriteria: [FlightsJourneyCriteriaInput!]!\n    $queryState: FlightsQueryState\n    $searchFilterValuesList: [FlightsSearchFilterValuesInput!]\n    $searchPreferences: FlightsSearchPreferencesInput\n  ) {\n    flightsPriceCalendar(\n      context: $context\n      flightsSearchContext: $flightsSearchContext\n      journeyCriteria: $journeyCriteria\n      queryState: $queryState\n      searchFilterValuesList: $searchFilterValuesList\n      searchPreferences: $searchPreferences\n    ) {\n      alertText {\n        ...EGDSGraphicTextFragment\n      }\n      disclaimerText\n      coverageAnalytics {\n        linkName\n        referrerId\n      }\n      calendarPrices {\n        date\n        label\n        selectAnalytics {\n          ...ClientSideAnalyticsFragment\n        }\n        theme\n        weight\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return x=function(){return e},e}var L,R=function(e){return new Date("".concat(e,"T00:00:00"))},F=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate());return n.setDate(n.getDate()+t),n},M={PRICE_CALENDAR_QUERY_ERROR:new o.SystemEvent(o.SystemEventLevel.ERROR,"PRICE_CALENDAR_QUERY_ERROR")},_=function(e){return e.locale?e.locale.replace("_","-"):"en-US"},N={padding:{blockend:"three"}},P={padding:{blockend:"four"}},O=function(e){var t=e.data;return r.createElement(c.i,{justifyContent:"center"},r.createElement(c.j,null,r.createElement(d.LM,null,r.createElement(d.NP,null,r.createElement(u.b,{padding:N.padding},r.createElement(s.c,{size:200,weight:"regular"},t))),r.createElement(d.zQ,null,r.createElement(u.b,{padding:P.padding},r.createElement(s.c,{size:200,weight:"regular"},t))))))},w=(0,g.J1)(S()),k=(0,g.J1)(b()),G=(p(L={},"EXTRA_SMALL",m.E.EXTRA_SMALL),p(L,"SMALL",m.E.SMALL),p(L,"MEDIUM",m.E.MEDIUM),p(L,"MEDIUM_LARGE",m.E.MEDIUM),p(L,"LARGE",m.E.LARGE),p(L,"XLARGE",m.E.XLARGE),L),T=function(e){var t=e.data,n=t.id,a=t.title,i=t.description,l=t.size,o=G[null!=l?l:"LARGE"];return r.createElement(m.a,{id:n,name:n,title:null!=a?a:i,description:i,size:o})};T.displayName="Icon",T.fragment=k;var j=(0,g.J1)(C()),U=function(e){var t=e.data,n=e.className;return r.createElement(h.E,{className:n,description:t.description,id:t.id,name:t.id})};U.displayName="Mark",U.fragment=j;var $=(0,g.J1)(A(),T.fragment,U.fragment),Y=function(e){var t=e.data,n=e.markOptions;switch(t.__typename){case"Icon":return r.createElement(T,{data:t});case"Mark":return r.createElement(U,y({data:t},n));default:return null}};Y.displayName="UIGraphic",Y.fragment=$;var z=(0,g.J1)(I(),Y.fragment),J=function(e){var t=e.inline,n=e.size,a=e.graphicSpacing,i=e.data,l=i.accessibility,o=i.text,c=i.graphic,d=i.trailingGraphics,f=l&&l.length>0,g=f?r.createElement(r.Fragment,null,r.createElement("span",{"aria-hidden":f},o),r.createElement("span",{className:"is-visually-hidden"},l)):o;return r.createElement(s.c,{inline:t},r.createElement(u.b,{padding:null==a?void 0:a.padding,margin:null==a?void 0:a.margin},r.createElement(Y,{data:c})),r.createElement(u.b,{padding:{inline:"one"}},r.createElement(s.c,{inline:!0,size:n},g)),null==d?void 0:d.map((function(e,t){return r.createElement(Y,{data:e,key:"trailing-graphic-".concat(t)})})))};J.displayName="EGDSGraphicText",J.fragment=z;var Q=(0,g.J1)(x(),J.fragment,w),V=function(e){var t=(0,i.R)().context;return(0,f._)(Q,{ssr:!1,fetchPolicy:"no-cache",variables:y({context:t},e)})},q=function(e,t){var n,r,a=(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate())),i=e<a?a:e;return t&&(r=F(i,14)),{effectiveStartDate:i,effectiveEndDate:r}},B=function(e,t){var n,a=E(r.useState(void 0),2),i=a[0],l=a[1],c=E(r.useState(void 0),2),u=c[0],s=c[1],d=function(e){if("flights"===e)return V}(e),f=E(d(t),2),g=f[0],m=f[1],h=m.data,v=m.error,p=function(e,t){if("flights"===e)return function(e){var t=e.journeyCriteria;return{flightsSearchContext:e.flightsSearchContext,origin:t[0].origin,destination:t[0].destination}}(t)}(e,t),D=null==h||null===(n=h.flightsPriceCalendar)||void 0===n?void 0:n.disclaimerText,S=(0,o.useLoggerEvents)(M);r.useEffect((function(){var t;h&&(l(function(e,t){var n={defaults:{dateText:{textWeight:"bold",textTheme:null,textValue:null},analytics:{referrerId:"",linkName:""}}},r=function(e,t){var n;if("flights"===e)return null==t||null===(n=t.flightsPriceCalendar)||void 0===n?void 0:n.calendarPrices}(e,t);return r&&r.forEach((function(e){var t,r;n["".concat(e.date)]={dateText:{textWeight:e.theme?"bold":null,textTheme:null!==(r=null===(t=e.theme)||void 0===t?void 0:t.toLowerCase())&&void 0!==r?r:null,textValue:e.label},analytics:{referrerId:null==e?void 0:e.selectAnalytics.referrerId,linkName:null==e?void 0:e.selectAnalytics.linkName}}})),n}(e,h)),s(null===(t=h.flightsPriceCalendar)||void 0===t?void 0:t.coverageAnalytics));v&&S.PRICE_CALENDAR_QUERY_ERROR.log({error:v,message:"Price Calendar Query Error"})}),[h,e,v]);return[function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(void 0);var r=q(t,n),a=r.effectiveStartDate,i=r.effectiveEndDate,o=function(e){var t=e.lobName,n=e.effectiveStartDate,r=e.effectiveEndDate,a=e.flightsSearchContext,i=e.origin,l=e.destination;if("flights"===t){var o=function(e,t,n,r){var a=[{departureDate:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()},destination:n,origin:t}];return r&&(a=[{departureDate:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()},destination:n,origin:t},{departureDate:{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()},destination:t,origin:n}]),a}(n,i,l,r);return{journeyCriteria:o,flightsSearchContext:a}}}(y({lobName:e,effectiveStartDate:a,effectiveEndDate:i},p));g({variables:o})},i,D,u]},X=function(e){var t=e.lobName,n=e.queryInputs,o=e.priceCalendarPassthroughProps,c=o.submitButtonLabel,u=o.initialStartDate,s=o.initialEndDate,d=o.dateLabel,f=o.dialogId,g=o.onOpen,m=o.onClose,h=o.onDateChange,v=E(B(t,n),4),p=v[0],D=v[1],S=v[2],b=v[3],C=E(r.useState(u),2),A=C[0],I=C[1],x=E(r.useState(s),2),L=x[0],M=x[1],N=new Date,P=(0,l.KY)(),w=function(e,t){if("flights"===e)return"ROUND_TRIP"===t.flightsSearchContext.tripType}(t,n),k=(0,i.R)().context,G=r.useMemo((function(){var e;return{data:null!==(e=D&&S)&&void 0!==e?e:""}}),[D,S]),T=function(e,t){var n=e.month,r=e.year,a=t&&N.getMonth()===n?N.getDate():1;p(new Date(r,n,a),!1)},j=new Date;j.setDate(j.getDate()+330);var U={locale:_(k),startDate:A,endDate:null!=L?L:"",inputLabel1:d,dayNameLength:"narrow",handleShape:"circle",dayData:D,onOpen:function(){null==g||g();var e,t=R(A);(e=t).getMonth()!==N.getMonth()||e.getFullYear()!==N.getFullYear()?p(new Date(t.getFullYear(),t.getMonth(),1),!1):p(N,!1)},onNextClicked:function(e){var t=e.month,n=e.year;T({month:t,year:n},!1)},onPrevClicked:function(e){var t=e.month,n=e.year;T({month:t,year:n},!0)},onDateRangeChange:function(e,t){if(I(e),M(t),null==h||h(e,t),e&&!t&&w){p(R(e),!0);var n=(r=F(R(e),1),a=r.toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/"),"".concat(a[2],"-").concat(a[0],"-").concat(a[1]));M(n),null==h||h(e,n)}var r,a},onClose:function(){null==m||m(),(null==b?void 0:b.referrerId)&&(null==b?void 0:b.linkName)&&P(b.referrerId,b.linkName);var e=L||A;e&&(null==D?void 0:D[e])&&P(D[e].analytics.referrerId,D[e].analytics.linkName)},dateFormatOptions:{month:"short",day:"numeric"},alertTemplateData:G,alertTemplateComponent:O,useSingleTrigger:w,isSingleDateSelection:!w,enableSameDayDateRange:!1,numMonthsToDisplay:2,maxDate:j,submitButtonLabel:c,allowClearDates:!1,dialogId:f};return r.createElement("div",{"data-testid":"egds-price-calendar"},r.createElement(a.E,y({},U)))};X.displayName="sharedui-EGDSPriceCalendar"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-retail-shopping-tools-egds-price-calendar.d7a245a8d0b950898ffd.js.map
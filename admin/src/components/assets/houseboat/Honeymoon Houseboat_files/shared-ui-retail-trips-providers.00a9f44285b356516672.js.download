/*@license For license information please refer to shared-ui-retail-trips-providers.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[1987],{67609:function(t,e,n){n.d(e,{ek:function(){return P},uU:function(){return A}});var r=n(96540),i=n(15043),o=n(50632),a=n(48826);n(75826);function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){p(t,e,n[e])}))}return t}function s(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(p){u=!0,i=p}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||I(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function d(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||I(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function f(){var t=l(["\n  mutation SharedUIWeb_ConnectExternalMailboxMutation($context: ContextInput!, $mailboxType: String!, $redirectUri: String!) {\n    connectExternalMailbox(context: $context, mailboxType: $mailboxType, redirectUri: $redirectUri) {\n      redirectUri {\n        value\n      }\n    }\n  }\n"]);return f=function(){return t},t}function T(){var t=l(["\n  mutation SharedUIWeb_SaveExternalItemsToTripMutation(\n    $context: ContextInput!\n    $tripId: String!\n    $itemIdsToAdd: [String!]!\n    $itemIdsToRemove: [String!]!\n  ) {\n    saveExternalItemsToTrip(context: $context, tripId: $tripId, itemIdsToAdd: $itemIdsToAdd, itemIdsToRemove: $itemIdsToRemove) {\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return T=function(){return t},t}function v(){var t=l(["\n  mutation SharedUIWeb_CreateTripMutation(\n    $context: ContextInput!\n    $name: String!\n    $description: String\n    $itemId: String\n    $operationType: String\n    $tripContext: TripsUITripContextInput\n  ) {\n    createTrip(context: $context, name: $name, description: $description, itemId: $itemId, operationType: $operationType, tripContext: $tripContext) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return v=function(){return t},t}function $(){var t=l(["\n  mutation SharedUIWeb_DeleteTripMutation($context: ContextInput!, $tripId: String!) {\n    deleteTrip(context: $context, tripId: $tripId) {\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return $=function(){return t},t}function x(){var t=l(["\n  mutation SharedUIWeb_EditTripMutation($context: ContextInput!, $description: String, $name: String, $tripId: String!) {\n    editTrip(context: $context, description: $description, name: $name, tripId: $tripId) {\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return x=function(){return t},t}function y(){var t=l(["\n  mutation SharedUIWeb_UpdateTripItemTripMutation(\n    $context: ContextInput!\n    $tripContext: TripsUITripContextInput!\n    $itemId: String!\n    $operationType: String!\n  ) {\n    updateTripItemTrip(context: $context, tripContext: $tripContext, itemId: $itemId, operationType: $operationType) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return y=function(){return t},t}function b(){var t=l(["\n  mutation SharedUIWeb_SendTripInviteMutation($tripId: String!, $recipients: String!, $message: String!, $context: ContextInput!) {\n    sendTripInvite(tripId: $tripId, recipients: $recipients, message: $message, context: $context) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n  ","\n"]);return b=function(){return t},t}function g(){var t=l(["\n  mutation SharedUIWeb_AcceptRequestToJoinTripMutation($tripId: String!, $requestToJoinId: String!, $context: ContextInput!) {\n    acceptRequestToJoinTrip(tripId: $tripId, requestToJoinId: $requestToJoinId, context: $context) {\n      ...TripsUIToastFragment\n    }\n  }\n  ","\n"]);return g=function(){return t},t}function S(){var t=l(["\n  mutation SharedUIWeb_CreateTripItineraryTemplateMutation($tripId: String!, $context: ContextInput!) {\n    createTripItineraryTemplate(tripId: $tripId, context: $context) {\n      status\n    }\n  }\n"]);return S=function(){return t},t}function h(){var t=l(["\n  mutation SharedUIWeb_RemoveTripItemMutation($context: ContextInput!, $itemId: String!, $tripId: String!) {\n    removeTripItem(context: $context, itemId: $itemId, tripId: $tripId) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return h=function(){return t},t}function O(){var t=l(["\n  mutation SharedUIWeb_SaveTripItemsMutation($context: ContextInput!, $tripId: String, $criteria: TripsUISaveTripItemsCriteriaInput!) {\n    saveTripItems(context: $context, tripId: $tripId, criteria: $criteria) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n      url {\n        value\n      }\n    }\n  }\n\n  ","\n"]);return O=function(){return t},t}function U(){var t=l(["\n  mutation SharedUIWeb_UpdateTripItemDatesMutation($context: ContextInput!, $itemIds: [String!], $tripId: String!, $dateRange: DateRangeInput!) {\n    updateTripItemDates(context: $context, itemIds: $itemIds, tripId: $tripId, dateRange: $dateRange) {\n      status\n      toast {\n        ...TripsUIToastFragment\n      }\n    }\n  }\n\n  ","\n"]);return U=function(){return t},t}function C(){var t=l(["\n  mutation SharedUIWeb_UpdateTripItemVoteMutation($context: ContextInput!, $tripId: String!, $itemId: String!) {\n    updateTripItemVote(context: $context, tripId: $tripId, itemId: $itemId) {\n      ... on TripsUIUpdateTripItemVoteFailureResponse {\n        toast {\n          ...TripsUIToastFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return C=function(){return t},t}function _(){var t=l(["\n  mutation SharedUIWeb_SaveTripItemCommentMutation(\n    $context: ContextInput!\n    $tripId: String!\n    $itemId: String!\n    $comment: String!\n    $commentId: String\n  ) {\n    saveTripItemComment(context: $context, tripId: $tripId, itemId: $itemId, comment: $comment, commentId: $commentId) {\n      ... on TripsUISaveTripItemCommentFailureResponse {\n        toast {\n          ...TripsUIToastFragment\n        }\n      }\n      ... on TripsUISaveTripItemCommentSuccessResponse {\n        actionCount {\n          count\n          accessibility\n        }\n        comments {\n          avatar {\n            ... on TripsUITextAvatar {\n              text\n            }\n          }\n          comment\n          id\n          name\n          timestamp\n        }\n        impressionAnalytics {\n          linkName\n          referrerId\n        }\n      }\n    }\n  }\n\n  ","\n"]);return _=function(){return t},t}function N(t){return t.reduce((function(t,e){return Object.assign(t,p({},e,{status:"UNKNOWN"}))}),{})}function E(t){return function(){return Promise.resolve({success:!1,failureReason:"No ExternalItemsOperationsProvider found in tree found while calling ".concat(t),failure:{type:"NO_PROVIDER"}})}}var R={connectExternalMailbox:E("connectExternalMailbox"),saveExternalItemsToTrip:E("saveExternalItemsToTrip")};r.createContext(s(c({},R),{state:N(Object.keys(R))}));function j(t){return function(e,n,r){return n((function(e){return s(c({},e),p({},t.operationName,{status:"IN_PROGRESS"}))})),e({variables:r}).then((function(e){if(e.errors){var r={failureReason:"".concat(t.operationName," failed with graphql error(s)"),failure:{type:"GRAPHQL",errors:e.errors}};return n((function(e){return s(c({},e),p({},t.operationName,{status:"FAILURE",error:r}))})),c({success:!1},r)}return e.data?(n((function(n){return s(c({},n),p({},t.operationName,{status:"SUCCESS",result:e}))})),c({success:!0},e)):Promise.reject(new Error("".concat(t.operationName," returned null data")))})).catch((function(e){var r,i,o="unexpected error encountered while calling ".concat(t.operationName),a="".concat(o,": ").concat((r=e,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)?e.message:e)),u={failureReason:o,failure:{type:"UNKNOWN",error:new Error(a)}};return n((function(e){return s(c({},e),p({},t.operationName,{status:"FAILURE",error:u}))})),c({success:!1},u)}))}}j({operationName:"connectExternalMailbox"}),(0,i.J1)(f()),(0,i.J1)(T(),o.eh),j({operationName:"saveExternalItemsToTrip"});var w=r.createContext(void 0),P=function(t){var e=t.children,n=m(r.useState([]),2),i=n[0],o=n[1],a=r.useMemo((function(){return[]}),[]),u=r.useCallback((function(t){return t?(a.find((function(e){return Object.is(e,t)}))||a.push(t),t.reference?{subscribe:null!==(e=i.find((function(e){return e.result.reference===t.reference})))&&void 0!==e?e:null}:{subscribe:null!==(n=i.find((function(e){return e.result.type===t.type})))&&void 0!==n?n:null}):{subscribe:null};var e,n}),[a,i]),p=r.useCallback((function(t,e){var n=u(t).subscribe;n&&t&&(t.reference&&n.result.reference&&t.reference===n.result.reference&&e(n),t.reference||t.type!==n.result.type||e(n))}),[u]),c=r.useCallback((function(t){var e=a.map((function(t){return t.type})),n=t.filter((function(t){return e.includes(t.signal.type)})).map((function(t){var e;return{result:{type:t.signal.type,reference:null!==(e=t.signal.reference)&&void 0!==e?e:void 0,values:t.values}}}));o(n)}),[a]),s=r.useMemo((function(){return{onSignalEmit:p,emitSignals:c}}),[p,c]);return r.createElement(w.Provider,{value:s},e)};var A=function(t){var e=function(){var t=r.useContext(w);if(void 0===t)throw new Error("No Trips SignalProvider found in React tree");return t}().emitSignals,n=m((0,a.A9)(),1)[0];return{emit:function(){var r=null==t?void 0:t.map((function(t){var e=t.values.map((function(t){switch(t.value.__typename){case"TripsSignalFieldIdValue":var e=t.value,r=n.validatedInputs.inputFields.find((function(t){return t.inputId===e.id}));return{__typename:t.__typename,key:t.key,value:r.inputValue};case"TripsSignalFieldIdExistingValues":var i,o=t.value,a=o.ids.map((function(t){return n.validatedInputs.inputFields.find((function(e){return e.inputId===t}))})).map((function(t){return t.inputValue})),u=d(null!==(i=o.prefixes)&&void 0!==i?i:[]).concat(d(a));return{__typename:t.__typename,key:t.key,value:u};default:return{__typename:t.__typename,key:t.key,value:null}}}));return{__typename:t.__typename,signal:t.signal,values:e}}));r&&e(r)}}};function D(t){return function(){return Promise.resolve({success:!1,failureReason:"No TripOperationsProvider found in tree found while calling ".concat(t),failure:{type:"NO_PROVIDER"}})}}var J={createTripItineraryTemplate:D("createTripItineraryTemplate"),createTrip:D("createTrip"),deleteTrip:D("deleteTrip"),editTrip:D("editTrip"),updateTripItemTrip:D("updateTripItemTrip"),sendTripInvite:D("sendTripInvite"),acceptRequestToJoinTrip:D("acceptRequestToJoinTrip")};r.createContext(s(c({},J),{state:N(Object.keys(J))})),j({operationName:"createTrip"}),(0,i.J1)(v(),o.eh),j({operationName:"deleteTrip"}),(0,i.J1)($(),o.eh),j({operationName:"editTrip"}),(0,i.J1)(x(),o.eh),(0,i.J1)(y(),o.eh),j({operationName:"updateTripItemTrip"}),j({operationName:"sendTripInvite"}),(0,i.J1)(b(),o.eh),j({operationName:"acceptRequestToJoinTrip"}),(0,i.J1)(g(),o.eh),j({operationName:"createTripItineraryTemplate"}),(0,i.J1)(S());function M(t){return function(){return Promise.resolve({success:!1,failureReason:"No TripItemOperationsProvider found in tree found while calling ".concat(t),failure:{type:"NO_PROVIDER"}})}}var F={removeTripItem:M("removeTripItem"),saveTripItems:M("saveTripItems"),updateTripItemDates:M("updateTripItemDates"),updateTripItemVote:M("updateTripItemVote"),saveTripItemComment:M("saveTripItemComment")};r.createContext(s(c({},F),{state:N(Object.keys(F))})),j({operationName:"removeTripItem"}),(0,i.J1)(h(),o.eh),j({operationName:"saveTripItems"}),(0,i.J1)(O(),o.eh),(0,i.J1)(U(),o.eh),j({operationName:"updateTripItemDates"}),(0,i.J1)(C(),o.eh),j({operationName:"updateTripItemVote"}),(0,i.J1)(_(),o.eh),j({operationName:"saveTripItemComment"});r.createContext(void 0);r.createContext({setTripsToastData:function(){},setTripsFallbackToastData:function(){}})}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-retail-trips-providers.00a9f44285b356516672.js.map
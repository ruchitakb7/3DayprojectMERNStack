/*@license For license information please refer to shared-ui-shopping-search-criteria-providers.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7800],{22060:function(e,r,t){t.d(r,{EY:function(){return gr},Lv:function(){return O},Ok:function(){return vr},dM:function(){return pe},fF:function(){return Ce},ld:function(){return Je},m6:function(){return hr},zD:function(){return Re}});var n=t(96540),a=t(15043),i=t(54235),o=t(13274),u=t(1192),l=t(85625),c=t(36360);function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){d(e,r,t[r])}))}return e}function p(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i=[],o=!0,u=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);o=!0);}catch(l){u=!0,a=l}finally{try{o||null==t.return||t.return()}finally{if(u)throw a}}return i}}(e,r)||_(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function h(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,r){if(e){if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}function E(){var e=g(["\n  query PropertySearchQuery(\n    $context: ContextInput!\n    $destination: DestinationInput!\n    $rooms: [RoomInput!]\n    $dateRange: PropertyDateRangeInput\n    $sort: PropertySort\n    $filters: PropertySearchFiltersInput\n    $marketing: PropertyMarketingInfoInput\n    $propertyShopOptions: PropertyShopOptionsInput\n    $searchPagination: PaginationInput\n    $searchIntent: SearchIntentInput\n    $shoppingContext: ShoppingContextInput\n    $criteria: PropertySearchCriteriaInput\n    $productShoppingCriteriaInput: ProductShoppingCriteriaInput\n  ) {\n    propertySearch(\n      context: $context\n      destination: $destination\n      rooms: $rooms\n      dateRange: $dateRange\n      sort: $sort\n      filters: $filters\n      marketing: $marketing\n      propertyShopOptions: $propertyShopOptions\n      searchPagination: $searchPagination\n      searchIntent: $searchIntent\n      shoppingContext: $shoppingContext\n      criteria: $criteria\n      productShoppingCriteriaInput: $productShoppingCriteriaInput\n      returnPropertyType: false\n    ) {\n      searchCriteria {\n        searchId\n      }\n    }\n  }\n"]);return E=function(){return e},e}function I(){var e=g(["\n  query ProductNavigationBarQuery($context: ContextInput!, $productIdentifier: ProductIdentifierInput!) {\n    productNavigationBar(context: $context, productIdentifier: $productIdentifier) {\n      tabs {\n        text\n      }\n    }\n  }\n"]);return I=function(){return e},e}function m(){var e=g(["\n  query FlightSearchQuery(\n    $context: ContextInput!\n    $flightsSearchContext: FlightsSearchContextInput\n    $journeyCriteria: [FlightsJourneyCriteriaInput!]!\n    $searchFilterValuesList: [FlightsSearchFilterValuesInput!]\n    $searchPreferences: FlightsSearchPreferencesInput\n    $sortOption: FlightsSortOptionTypeInput\n    $travelerDetails: [FlightsTravelerDetailsInput!]\n  ) {\n    flightsSearch(\n      context: $context\n      flightsSearchContext: $flightsSearchContext\n      journeyCriteria: $journeyCriteria\n      searchPreferences: $searchPreferences\n      searchFilterValuesList: $searchFilterValuesList\n      travelerDetails: $travelerDetails\n      sortOption: $sortOption\n    ) {\n      gaiaId\n    }\n  }\n"]);return m=function(){return e},e}var T=n.createContext(null),Y=n.createContext(null),O=function(e){return e[e.READ_PARAMS_FROM_URL=0]="READ_PARAMS_FROM_URL",e[e.MULTI_SELECT_CLEAR_ALL=1]="MULTI_SELECT_CLEAR_ALL",e[e.MULTI_SELECT_CLOSE=2]="MULTI_SELECT_CLOSE",e[e.SORT_AND_FILTER_UPDATE=3]="SORT_AND_FILTER_UPDATE",e[e.SORT_AND_FILTER_SUBMIT=4]="SORT_AND_FILTER_SUBMIT",e[e.SEARCH_FORM_UPDATE=5]="SEARCH_FORM_UPDATE",e[e.REMOVE_FILTER_PILL=6]="REMOVE_FILTER_PILL",e[e.REMOVE_ALL_FILTERS=7]="REMOVE_ALL_FILTERS",e[e.ONE_KEY_SWITCH_TOGGLE=8]="ONE_KEY_SWITCH_TOGGLE",e[e.MULTI_FILTER_UPDATE=9]="MULTI_FILTER_UPDATE",e}(O||{}),R=[{locale:"en_AU",format:"dd-MM-YYYY"},{locale:"en_CA",format:"dd-MM-YYYY"},{locale:"en_GB",format:"dd-MM-YYYY"},{locale:"en_IE",format:"dd-MM-YYYY"},{locale:"en_MY",format:"dd-MM-YYYY"},{locale:"en_SG",format:"dd-MM-YYYY"},{locale:"en_US",format:"MM-dd-YYYY",siteid:1},{locale:"en_US",format:"dd-MM-YYYY",siteid:12},{locale:"en_US",format:"YYYY-MM-dd",siteid:16},{locale:"en_US",format:"YYYY-MM-dd",siteid:28},{locale:"en_US",format:"YYYY-MM-dd",siteid:62},{locale:"en_US",format:"dd-MM-YYYY",siteid:69},{locale:"en_US",format:"dd-MM-YYYY",siteid:76},{locale:"en_US",format:"dd-MM-YYYY",siteid:77},{locale:"es_AR",format:"dd-MM-YYYY"},{locale:"es_ES",format:"dd-MM-YYYY"},{locale:"es_MX",format:"MM-dd-YYYY",siteid:1},{locale:"es_MX",format:"dd-MM-YYYY",siteid:12},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4403},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4404},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4405},{locale:"es_MX",format:"dd-MM-YYYY",siteid:4407},{locale:"da_DK",format:"dd-MM-YYYY"},{locale:"de_AT",format:"dd-MM-YYYY"},{locale:"de_DE",format:"dd-MM-YYYY"},{locale:"de_CH",format:"dd-MM-YYYY"},{locale:"fi_FI",format:"dd-MM-YYYY"},{locale:"fr_CH",format:"dd-MM-YYYY"},{locale:"fr_BE",format:"dd-MM-YYYY"},{locale:"fr_CA",format:"dd-MM-YYYY"},{locale:"fr_FR",format:"dd-MM-YYYY"},{locale:"nl_BE",format:"dd-MM-YYYY"},{locale:"nl_NL",format:"dd-MM-YYYY"},{locale:"nb_NO",format:"dd-MM-YYYY"},{locale:"pt_BR",format:"dd-MM-YYYY"},{locale:"zh_HK",format:"dd-MM-YYYY"},{locale:"vi_VN",format:"dd-MM-YYYY"},{locale:"it_IT",format:"dd-MM-YYYY"},{locale:"ms_MY",format:"dd-MM-YYYY"},{locale:"id_ID",format:"dd-MM-YYYY"},{locale:"th_TH",format:"dd-MM-YYYY"},{locale:"ca_ES",format:"dd-MM-YYYY"},{locale:"en_PH",format:"MM-dd-YYYY"},{locale:"en_HK",format:"YYYY-MM-dd"},{locale:"ja_JP",format:"YYYY-MM-dd"},{locale:"ko_KR",format:"YYYY-MM-dd"},{locale:"sv_SE",format:"YYYY-MM-dd"},{locale:"zh_CN",format:"YYYY-MM-dd"},{locale:"zh_TW",format:"YYYY-MM-dd"}],S=function(e){return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},y=function(e){var r=new Date,t=v(e.split("-").map((function(e){return Number.parseInt(e,10)})),3),n=t[0],a=t[1],i=t[2];return{day:null!=i?i:r.getDate(),month:null!=a?a:r.getMonth()+1,year:null!=n?n:r.getFullYear()}},A=function(e,r,t){var n,a,i,o,u,l,c,s,d,f,p,v,g=e.replace("TANYT","").split(/[/.-]/).map((function(e){return parseInt(e,10)})),h="MM-dd-YYYY",_=R.filter((function(e){return e.locale===r}));if(_.length>1){var E,I,m=_.filter((function(e){return e.siteid===t}));if(m.length>0)h=null!==(I=null===(E=m[0])||void 0===E?void 0:E.format)&&void 0!==I?I:h}else if(1===_.length){var T,Y;h=null!==(Y=null===(T=_[0])||void 0===T?void 0:T.format)&&void 0!==Y?Y:h}return n=g,a=h,v=new Date,"dd-MM-YYYY"===a?{day:null!==(i=n[0])&&void 0!==i?i:v.getDate(),month:null!==(o=n[1])&&void 0!==o?o:v.getMonth()+1,year:null!==(u=n[2])&&void 0!==u?u:v.getFullYear()}:"MM-dd-YYYY"===a?{day:null!==(l=n[1])&&void 0!==l?l:v.getDate(),month:null!==(c=n[0])&&void 0!==c?c:v.getMonth()+1,year:null!==(s=n[2])&&void 0!==s?s:v.getFullYear()}:{day:null!==(d=n[2])&&void 0!==d?d:v.getDate(),month:null!==(f=n[1])&&void 0!==f?f:v.getMonth()+1,year:null!==(p=n[0])&&void 0!==p?p:v.getFullYear()}},C=function(e){var r,t,n,a=e;switch(3!==a.length&&5!==a.length||(a="0".concat(a)),a.length){case 4:r=parseInt(a.substring(0,2),10),t=parseInt(a.substring(2,4),10);break;case 6:if(r=parseInt(a.substring(0,2),10),t=parseInt(a.substring(2,4),10),"AM"!==(n=a.substring(4,6).toUpperCase())&&"PM"!==n)throw new Error("Failed to parse time value: ".concat(e));break;default:throw new Error("Failed to parse time value: ".concat(e))}if(Number.isNaN(r)||Number.isNaN(t))throw new Error("Failed to parse time value: ".concat(e));if(12===r&&"AM"===n&&(r=0),12!==r&&"PM"===n&&(r+=12),r<0||r>23||t<0||t>59)throw new Error("Failed to parse time value: ".concat(e));return"".concat(r,":").concat(t)},P=function(e,r,t,n,a,i){var o=function(e,r,t){var n;try{n=r.parseLocalDateString(e,t?{raw:t}:{})}catch(a){n=null}if(!n)try{if(!(n=r.parseLocalDateString(e,{raw:"yyyy-MM-dd"})||r.parseLocalDateString(e,{raw:"MM/dd/yyyy"})))return null}catch(i){return null}return r.formatDate(n,{raw:"yyyy-MM-dd"})||null}(null!=e?e:n,t,e?i:""),u=y(null!=o?o:n),l=new Date,c=v(function(e,r){var t=v((null!=e?e:r).split(":").map((function(e){return parseInt(e,10)})),2),n=t[0],a=t[1];return[void 0===n||Number.isNaN(n)?10:n,void 0===a||Number.isNaN(a)?30:a]}(r,a),2),s=c[0],d=c[1];return p(f({},u),{hour:null!=s?s:l.getHours(),minute:null!=d?d:l.getMinutes(),second:0})},M=function(e,r){return e?r.formatDate(new Date(e.year,e.month-1,e.day),{raw:"yyyy-MM-dd"}):null},N=function(e){return e?"".concat(e.hour,":").concat(e.minute):null},L=function(e,r,t){r?t.set(e,r):t.delete(e)},D="10:30",U={SEARCH_TERM:"locn",REGION:"dpln",EXACT_LOCATION:"exlocn",LATITUDE:"olat",LONGITUDE:"olon"},b={SEARCH_TERM:"loc2",REGION:"drid1",EXACT_LOCATION:"exloc2",LATITUDE:"dlat",LONGITUDE:"dlon"},w={DATE:"date1",TIME:"time1"},F={DATE:"date2",TIME:"time2"},x="useRewards",G=new Set(["orid","oloc","rdus","piid","totalprice","age","rfrr",x]),H=function(e,r,t,n,a){var i=!r&&n&&a?{latitude:Number(n),longitude:Number(a)}:void 0;return{searchTerm:e||void 0,regionId:null!=r?r:void 0,coordinates:i,isExactLocationSearch:Boolean(i)||Boolean(t)}},B=function(e){var r,t=new Date;return t.setDate(t.getDate()+e),null!==(r=t.toISOString().split("T")[0])&&void 0!==r?r:""},$=function(e,r,t){var n=function(e){var r=e.get(U.SEARCH_TERM),t=e.get(U.REGION),n=e.get(U.EXACT_LOCATION),a=e.get(U.LATITUDE),i=e.get(U.LONGITUDE);return H(r,t,n,a,i)}(e),a=function(e){var r=e.get(b.SEARCH_TERM),t=e.get(b.REGION),n=e.get(b.EXACT_LOCATION),a=e.get(b.LATITUDE),i=e.get(b.LONGITUDE),o=H(r,t,n,a,i);return o.regionId||o.searchTerm||o.coordinates?o:null}(e),i=function(e,r,t){var n=e.get(w.DATE),a=e.get(w.TIME),i=a&&!a.includes(":")?C(a):a;return P(n,i,r,B(14),D,t)}(e,r,t),o=function(e,r,t){var n=e.get(F.DATE),a=e.get(F.TIME),i=a&&!a.includes(":")?C(a):a;return P(n,i,r,B(15),D,t)}(e,r,t);return{pickUpLocation:n,pickUpDateTime:i,dropOffLocation:a,dropOffDateTime:o}},k=function(e){var r=[],t="aarpcr";return"on"===e.get(t)&&r.push({id:t,value:!0}),r},j=function(e){return{id:x,value:"true"===e?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}},W=function(e){if(0===h(e.keys()).length)return[];var r=[],t=function(e){var r=h(e.keys()).filter((function(e){return e.startsWith("sel")||G.has(e)}));return h(new Set(r))}(e);return t.forEach((function(t){var n=e.getAll(t);n.length>0&&h(new Set(n)).forEach((function(e){"piid"===t?r.push({id:"carOfferToken",value:e}):t===x?r.push(j(e)):r.push({id:t,value:e})}))})),r},V=function(e){var r=W(e),t=function(e){var r=[],t=e.get("cdnu"),n=e.get("vend"),a=e.get("cpcd"),i=e.get("rtcd"),o=e.get("odcd");return t&&r.push({id:"corporateDiscountCode",value:t}),n&&r.push({id:"selVen",value:n}),a&&r.push({id:"promoCode",value:a}),i&&r.push({id:"rateCode",value:i}),o&&r.push({id:"loyaltyProgramCode",value:o}),r}(e),n=function(e){var r=[],t=e.get("sort");return t&&r.push({id:"sort",value:t}),r}(e);return h(r).concat(h(t),h(n))},z=function(e,r,t){return{primarySearchCriteria:{car:$(e,r,t)},secondaryCriteria:{booleans:k(e),selections:V(e)}}},K=function(e,r,t){var n;return h(((null===(n=t.secondaryCriteria)||void 0===n?void 0:n.selections)||[]).filter((function(t){return t.id!==e||t.id===e&&t.value!==r})))},X=function(e,r){var t,n;return h((null===(n=e.secondaryCriteria)||void 0===n||null===(t=n.selections)||void 0===t?void 0:t.filter((function(e){return e.id!==x})))||[]).concat([{id:x,value:r?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}])},q=function(e,r,t){var n=e.name,a=e.value,i=r.target,o=i.type,u=i.checked;switch(o){case"checkbox":var l=u?function(e,r,t){var n,a=(null===(n=t.secondaryCriteria)||void 0===n?void 0:n.selections)||[];return a.some((function(t){return t.id===e&&t.value===r}))?h(a):h(a).concat([{id:e,value:r}])}(n,a,t):K(n,a,t);return p(f({},t),{secondaryCriteria:p(f({},t.secondaryCriteria),{selections:l})});case"radio":case"select-one":var c=function(e,r,t){var n,a=((null===(n=t.secondaryCriteria)||void 0===n?void 0:n.selections)||[]).filter((function(r){return r.id!==e}));return r&&a.push({id:e,value:r}),h(a)}(n,a,t);return p(f({},t),{secondaryCriteria:p(f({},t.secondaryCriteria),{selections:c})});default:return t}},Q=function(e,r,t){var n=t.getAll(e);return n.includes(r)&&(t.delete(e),n.forEach((function(n){n!==r&&t.append(e,n)}))),t.toString()},J=function(e,r,t){return r?t.set(e,r):t.delete(e),t.toString()},Z=function(e){return J("pwaDialog",null,new URLSearchParams(e))},ee=function(e){var r=new URLSearchParams(e.toString()),t=Array.from(r.entries()).filter((function(e){return v(e,2)[1].includes("[")}));return 0===t.length?null:(t.forEach((function(e){var t=v(e,2),n=t[0],a=t[1];r.delete(n,a),JSON.parse(a).forEach((function(e){r.append(n,e)}))})),r)},re=function(e,r,t){var n=e.name,a=e.value,i=r.target,o=i.type,u=i.checked;switch(o){case"checkbox":return u?function(e,r,t){return t.getAll(e).includes(r)||t.append(e,r),t.toString()}(n,a,t):Q(n,a,t);case"radio":case"select-one":return J(n,a,t);default:return t.toString()}},te="filterCount",ne=function(e){var r=(0,o.zy)(),t=(0,o.Zp)(),a=(0,u.useLocalization)(),i=v((0,n.useState)(1),2),l=i[0],c=i[1],s=v((0,n.useState)(1),2),d=s[0],g=s[1],_=n.useMemo((function(){return new URLSearchParams(r.search)}),[r.search]),E=n.useMemo((function(){return ee(_)}),[_]);n.useEffect((function(){if(E){var e=setTimeout((function(){t(p(f({},r),{search:E.toString()}),{replace:!0})}));return function(){e&&clearTimeout(e)}}}),[r,t,E]);var I=(0,n.useRef)(null),m=(0,n.useRef)(null),T=z(null!=E?E:_,a,e);return n.useReducer((function(n,i){var o=!!_.get("pwaDialog"),u=m.current||n,s=I.current||r.search;switch(i.type){case 0:var E;return z(null!==(E=ee(i.urlSearchParams))&&void 0!==E?E:i.urlSearchParams,a,e);case 3:var T,Y,O=i.field,R=i.event;if("clear"===O.name||"clear_quick_filters"===O.name)return n;if("restore"===O.name)return m.current=null,I.current=null,setTimeout((function(){t(p(f({},r),{search:Z(r.search)}))}),0),n;if(o)return I.current=re(O,R,new URLSearchParams(s)),m.current=q(O,R,u),n;var S=re(O,R,_);t(p(f({},r),{search:S})),g(d+1);var y,A={id:te,value:d.toString()},C=q(O,R,n),P=h(null!==(y=null===(Y=C.secondaryCriteria)||void 0===Y||null===(T=Y.selections)||void 0===T?void 0:T.filter((function(e){return e.id!==te})))&&void 0!==y?y:[]).concat([A]);return p(f({},C),{secondaryCriteria:p(f({},C.secondaryCriteria),{selections:P})});case 5:var D=i.updatedPrimarySearchCriteria,H=new URLSearchParams,B=_.get(x);J(x,B,H);var $=function(e,r,t){var n,a,i,o,u,l,c,s,d,f;t.delete("pwaDialog");var p=null==e?void 0:e.pickUpLocation;L(U.SEARCH_TERM,null==p?void 0:p.searchTerm,t),L(U.EXACT_LOCATION,null==p||null===(n=p.isExactLocationSearch)||void 0===n?void 0:n.toString(),t),L(U.REGION,null==p?void 0:p.regionId,t),L(U.LATITUDE,null==p||null===(i=p.coordinates)||void 0===i||null===(a=i.latitude)||void 0===a?void 0:a.toString(),t),L(U.LONGITUDE,null==p||null===(u=p.coordinates)||void 0===u||null===(o=u.longitude)||void 0===o?void 0:o.toString(),t);var v=null==e?void 0:e.pickUpDateTime;L(w.DATE,M(v,r),t),L(w.TIME,N(v),t);var g=null==e?void 0:e.dropOffLocation;L(b.SEARCH_TERM,null==g?void 0:g.searchTerm,t),L(b.EXACT_LOCATION,null==g||null===(l=g.isExactLocationSearch)||void 0===l?void 0:l.toString(),t),L(b.REGION,null==g?void 0:g.regionId,t),L(b.LATITUDE,null==g||null===(s=g.coordinates)||void 0===s||null===(c=s.latitude)||void 0===c?void 0:c.toString(),t),L(b.LONGITUDE,null==g||null===(f=g.coordinates)||void 0===f||null===(d=f.longitude)||void 0===d?void 0:d.toString(),t);var h=null==e?void 0:e.dropOffDateTime;return L(F.DATE,M(h,r),t),L(F.TIME,N(h),t),t.toString()}(D.car,a,H);t(p(f({},r),{search:$})),c(l+1);var k=[{id:"searchFormCount",value:l.toString()}];return B&&k.push(j(B)),{primarySearchCriteria:D,secondaryCriteria:{booleans:[],selections:k}};case 6:var W=v(i.filterId,1)[0],V=void 0===W?{id:"",value:""}:W,ne=V.id,ae=V.value,ie=Q(ne,ae,_);t(p(f({},r),{search:ie})),g(d+1);var oe={id:te,value:d.toString()},ue=h(K(ne,ae,n).filter((function(e){return e.id!==te}))).concat([oe]);return p(f({},n),{secondaryCriteria:p(f({},n.secondaryCriteria),{selections:ue})});case 7:var le=function(e){var r,t=(null===(r=e.secondaryCriteria)||void 0===r?void 0:r.selections)||[];return 0===t.length?[]:t.filter((function(e){return e.id.startsWith("sel")||G.has(e.id)}))}(n),ce=le.reduce((function(e,r){var t=r.id,n=r.value;return Q(t,n,new URLSearchParams(e))}),s),se=le.reduce((function(e,r){var t=r.id,n=r.value,a=K(t,n,e);return p(f({},e),{secondaryCriteria:p(f({},e.secondaryCriteria),{selections:a})})}),u);return o?(I.current=ce,m.current=se,n):(t(p(f({},r),{search:ce})),se);case 4:var de,fe,pe=s,ve=u;g(d+1);var ge,he={id:te,value:d.toString()},_e=h(null!==(ge=null===(fe=ve.secondaryCriteria)||void 0===fe||null===(de=fe.selections)||void 0===de?void 0:de.filter((function(e){return e.id!==te})))&&void 0!==ge?ge:[]).concat([he]);return m.current=null,m.current=null,setTimeout((function(){t(p(f({},r),{search:Z(pe)}))}),0),p(f({},ve),{secondaryCriteria:p(f({},ve.secondaryCriteria),{selections:_e})});case 8:return p(f({},n),{secondaryCriteria:p(f({},n.secondaryCriteria),{selections:X(n,i.isChecked)})});case 9:var Ee=i.keyValueParams,Ie=function(e,r){return e.forEach((function(e){L(e.key,e.value,r)})),r.toString()}(Ee,_);return t(p(f({},r),{search:Ie})),function(e,r){var t,n=(null===(t=r.secondaryCriteria)||void 0===t?void 0:t.selections)?h(r.secondaryCriteria.selections):[],a=e.map((function(e){return e.key})),i=n.filter((function(e){return!a.includes(e.id)}));return e.forEach((function(e){i.push({id:e.key,value:e.value})})),p(f({},r),{secondaryCriteria:p(f({},r.secondaryCriteria),{selections:i})})}(Ee,n);default:return n}}),T)},ae=n.createContext(null),ie=n.createContext(null),oe=n.createContext(null),ue=function(e){var r=e.children,t=n.useContext(T),a=function(){var e=n.useContext(Y);if(!e)throw new Error("useCarsCriteriaDispatch can only be used inside CarsCriteriaProvider");return e}();return n.createElement(ae.Provider,{value:t},n.createElement(oe.Provider,{value:a},r))};ue.displayName="sharedui-CarsCriteriaConsumer";var le=n.createContext(null),ce=n.createContext(null),se=n.createContext(null),de=function(e){return e.LOWER="LOWER",e.UPPER="UPPER",e}(de||{}),fe=function(e){return e.DAY="DAY",e.MONTH="MONTH",e.WEEK="WEEK",e.WEEKEND="WEEKEND",e}(fe||{}),pe=function(e){return e.SAILING_VARIETIES="sailing-varieties",e.CABIN_EXPERIENCE="cabin-experience",e.DEPARTURE_PORT="departure-port",e.CRUISE_LINE="cruise-line",e.SHIPS="ships",e}(pe||{}),ve=["alaska","bahamas","caribbean","europe","mexico"],ge=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"|",n=[];return h(new Set(e.getAll(r))).reduce((function(e,r){return r.split(t).forEach((function(r){e.push(r)})),e}),n).length?n:null},he=function(e,r){var t=e.get(r),n=parseInt(t||"",10);return Number.isNaN(n)?null:n},_e=function(e){var r,t,n=e.get("earliest-departure-date"),a=e.get("latest-departure-date");return n&&a?{start:y(n),end:y(a)}:(r=new Date,(t=new Date).setDate(r.getDate()+30),{start:S(r),end:S(t)})},Ee=function(e){var r=he(e,"min-length"),t=he(e,"max-length");return r&&t?{min:r,max:t}:null},Ie=function(e){var r,t,n=ge(e,"childAges",",");return null!==(t=null==n||null===(r=n.map((function(e){return{age:parseInt(e,10)}})))||void 0===r?void 0:r.filter((function(e){var r=e.age;return Number.isInteger(r)})))&&void 0!==t?t:null},me=function(e,r){return e&&0!==e.length?e.map((function(e){return{id:r,value:e}})):[]},Te=(new Map).set("price|asc","PRICE_LOW_TO_HIGH").set("price|desc","PRICE_HIGH_TO_LOW").set("departure-date|asc","DEPARTURE_EARLY_TO_LATE").set("departure-date|desc","DEPARTURE_LATE_TO_EARLY").set("duration|asc","DURATION_SHORT_TO_LONG").set("duration|desc","DURATION_LONG_TO_SHORT"),Ye=function(e){var r;return null!==(r=Te.get("".concat(e.get("sort-by"),"|").concat(e.get("sort-order"))))&&void 0!==r?r:""},Oe=function(e){var r;return h(me(ge(e,"sailing-varieties"),"sailing-varieties")).concat(h(me(ge(e,"sailing-token"),"sailing-token")),h(me(ge(e,"cabin-experience"),"cabin-experience")),h(me(ge(e,"departure-port"),"departure-port")),h(me(ge(e,"cruise-line"),"cruise-line")),h(me(ge(e,"ships"),"ships")),[{id:"sort",value:null!==(r=e.get("sort"))&&void 0!==r?r:Ye(e)}])},Re=function(e){var r;return{primarySearchCriteria:{cruise:{adultCount:he(e,"adultCount"),childCount:he(e,"childCount"),children:Ie(e),departureDateRange:_e(e),destinations:null!==(r=ge(e,"destination"))&&void 0!==r?r:ve,durationRange:Ee(e)}},secondaryCriteria:{selections:Oe(e)}}},Se=function(e,r,t){var n,a=[];return null==r||r.reduce((function(r,t){var n=t.data.value;return n&&r.push({id:e,value:n}),r}),a),h((null==t||null===(n=t.selections)||void 0===n?void 0:n.filter((function(r){return r.id!==e})))||[]).concat(h(a))},ye=function(e){var r=e.children,t=(0,o.zy)(),a=v(function(){var e=(0,o.zy)(),r=(0,o.Zp)();return n.useReducer((function(t,n){var a=new URLSearchParams(e.search);switch(n.type){case 0:return Re(n.urlSearchParams);case 1:var i,o,u=n.filterId,l=(null===(o=t.secondaryCriteria)||void 0===o||null===(i=o.selections)||void 0===i?void 0:i.filter((function(e){return e.id!==u})))||[];return a.delete(u),r(p(f({},e),{search:a.toString()})),p(f({},t),{secondaryCriteria:p(f({},t.secondaryCriteria),{selections:l})});case 2:var c=n.filterId,s=n.selections,d=p(f({},t.secondaryCriteria),{selections:Se(c,s,t.secondaryCriteria)}),v=function(e,r){var t,n=[];return null==r||null===(t=r.selections)||void 0===t||t.reduce((function(r,t){return t.id===e&&r.push(t.value),r}),n),0===n.length?null:n.join("|")}(c,d);return v&&a.set(c,v),r(p(f({},e),{search:a.toString()})),p(f({},t),{secondaryCriteria:d});default:return t}}),Re(new URLSearchParams(e.search)))}(),2),i=a[0],u=a[1];return n.useEffect((function(){u({type:0,urlSearchParams:new URLSearchParams(t.search)})}),[t.search,u]),n.createElement(le.Provider,{value:i},n.createElement(se.Provider,{value:u},r))};ye.displayName="sharedui-CruiseCriteriaProvider";var Ae="10:30",Ce=function(e){return e.FILTER_CATEGORIES="filterCategories",e}(Ce||{});function Pe(e){if(!e)return null;var r=v(e.split(","),2),t=r[0],n=r[1];return t&&n?{latitude:Number(t),longitude:Number(n)}:null}var Me=function(){var e,r=new Date;return r.setDate(r.getDate()+14),null!==(e=r.toISOString().split("T")[0])&&void 0!==e?e:""};function Ne(e){return{id:e.hotelId,name:e.hotelName,coordinates:Pe(e.hotelLatLong),type:"PROPERTY"}}function Le(e){var r=e.airportCode,t=e.location,n=e.airportLatLong,a=e.regionId;return r?{id:r,name:t,coordinates:Pe(n),type:"AIRPORT"}:{id:a,name:t,type:"DESTINATION"}}function De(e,r,t){var n=Object.fromEntries(e),a=n.direction,i=n.roundTrip,o=n.pickUpDate,u=n.pickUpTime,l=n.dropOffDate,c=n.dropOffTime,s=function(e,r){if("true"===e)return"ROUNDTRIP";switch(r){case"H2A":case"TO_AIRPORT":return"TO_AIRPORT";default:return"FROM_AIRPORT"}}(i,a),d="TO_AIRPORT"===s,f=[],p=function(e){var r=e.adults,t=e.children,n=e.infants,a=[];return r&&a.push({type:"ADULT",count:parseInt(r,10)}),t&&a.push({type:"CHILD",count:parseInt(t,10)}),n&&a.push({type:"INFANT",count:parseInt(n,10)}),a}(n),v={dateTime:P(o,u,r,Me(),Ae,t),origin:d?Ne(n):Le(n),destination:d?Le(n):Ne(n)};if(f.push(v),"true"===n.roundTrip){var g={dateTime:P(null!=l?l:o,null!=c?c:u,r,Me(),Ae,t),origin:Ne(n),destination:Le(n)};f.push(g)}return{journeyCriteria:f,shoppingPath:"STANDALONE",travelerDetails:p,dateRange:{},direction:null!=s?s:"FROM_AIRPORT",locations:[]}}var Ue=function(e){if(0===h(e.keys()).length)return null;var r,t,n,a=[],i=(r="filter",t=h(e.keys()).filter((function(e){return e.indexOf(r)>-1})),h(new Set(t)));return a.push({id:"sort",value:null!==(n=e.get("sort"))&&void 0!==n?n:""}),i.forEach((function(r){var t=h(new Set(e.getAll(r)));t.length&&t.forEach((function(e){e&&a.push({id:r,value:e})}))})),a},be=n.createContext([null,null]),we=function(e){var r=e.children,t=e.localDateFormat,a=(0,u.useLocalization)(),i=(0,o.zy)(),l=n.useMemo((function(){var e=new URLSearchParams(i.search),r=De(e,a,t),n=function(e){return{booleans:[{id:"swp",value:"false"!==e.get("swp")}],selections:Ue(e)}}(e);return[r,n]}),[i.search,a,t]);return n.createElement(be.Provider,{value:l},r)};we.displayName="sharedui-GroundTransportationCriteriaProvider";var Fe=n.createContext(null),xe=function(e){return e.SORT="sort",e.HOTEL_NAME="hotelName",e.REWARDS="rewards",e.STAR="star",e.GUEST_RATING="guestRating",e.CLEANING_AND_SAFETY="cleaningAndSafetyPractices",e.LODGING="lodging",e.MEAL_PLAN="mealPlan",e.AMENITIES="amenities",e.TRAVELER_TYPE="travelerType",e.PAYMENT_TYPE="paymentType",e.DEALS="deals",e.PROPERTY_STYLE="propertyStyle",e.BEDROOM_FILTER="bedroomFilter",e.NEIGHBORHOOD="neighborhood",e.STAY_TYPE="stayType",e.ACCESSIBILITY="accessibility",e.POI="poi",e.MIN_BEDROOMS="bedroom_count_gt",e.MIN_BEDS="bed_count_ge",e.MIN_BATHROOMS="us_bathroom_count_gt",e.PROPERTY_TYPE="property_type_group",e.LOCATION="location_group",e.ACCESSIBILITY_FEATURES="accessibility_features_group",e.BOOKING_OPTIONS="booking_options_group",e.DISCOUNTS_GROUP="discounts_group",e.AMENITIES_FACILITIES="amenities_facilities_group",e.FREE_CANCELLATION_GROUP="free_cancellation_group",e.HOUSE_RULES="house_rules_group",e.NEARBY_ACTIVITIES="nearby_activities_group",e.NEIGHBORHOOD_GROUP="neighborhood_group",e.PREMIER_HOST="premier_host_group",e.PROPERTIES_GOOD="properties_good_for_group",e.PROPERTY_REVIEWS="property_reviews_group",e.ROOMS_SPACES="rooms_spaces_group",e.SAFETY="safety_group",e.VIRTUAL_TOUR_GROUP="virtual_tour_group",e.PRICING_GROUP="pricing_group",e.PROPERTY_NAME="propertyName",e.AVAILABLE_FILTER="availableFilter",e.AGENCY_BUSINESS_MODELS="agencyBusinessModels",e.COMMISSION_TIERS="commissionTiers",e.USE_REWARDS="useRewards",e.BED_TYPE_GROUP="bed_type_group",e.STAY_OPTIONS_GROUP="stay_options_group",e.HOTEL_BRAND="hotel_brand",e.MULTI_NEIGHBORHOOD_GROUP="multi_neighborhood_group",e.SPECIAL_DISCOUNTS_GROUP="special_discounts_group",e.HIGHLY_RATED_FOR_GROUP="highly_rated_for_group",e.AI_SEARCH_QUERY="ai_search_query",e.AVAILABILITY_GROUP="availableFilter",e.EXPEDIA_REWARDS_GROUP="expedia_rewards_group",e.AVAILABILITY_GROUP_VRBO="availability_group",e.LOCATION_HIGHLIGHTS_GROUP="location_highlights_explore",e.PROPERTY_AMENITIES_GROUP="property_amenities_group_explore",e.SPECIALIZED_STAYS_GROUP="specialized_stays_group_explore",e.ROOM_AMENITIES_GROUP="room_amenities_group_explore",e.RECREATION_GROUP="recreation_group_explore",e.AI_LOCATION="AI_LOCATION",e.AI_AMENITY="AI_AMENITY",e.AI_AFFINITY="AI_AFFINITY",e.AI_AFFINITY_NEARBY="AI_AFFINITY_NEARBY",e.AI_PROPERTY_BRAND="AI_PROPERTY_BRAND",e.AI_PROPERTY_NAME="AI_PROPERTY_NAME",e}(xe||{}),Ge=function(e){return e.PRICE="price",e.NIGHTLY_PRICE="nightly_price",e.TOTAL_PRICE="total_price",e.PROPERTY_SIZE="property_size",e}(Ge||{}),He=function(e){var r=e.destination,t=e.regionId,n=e.latLong,a=e.selected,i=e.mapBounds,o=e.group,u=v((null==n?void 0:n.split(",").map((function(e){return parseFloat(e)})))||[null,null],2),l=u[0],c=u[1];return f({regionName:r,regionId:t,coordinates:l&&c?{latitude:l,longitude:c}:null,mapBounds:i},a&&{pinnedPropertyId:a},o&&{propertyIds:o})},Be=function(e){var r=new Date(e),t=v(e.split("-").map((function(e){return parseInt(e,10)})),3),n=t[0],a=t[1],i=t[2];return{year:null!=n?n:r.getFullYear(),month:null!=a?a:r.getMonth()+1,day:null!=i?i:r.getDate()}},$e=function(e){var r=v(e.split("/"),3),t=r[0],n=r[1],a=r[2];return"".concat(a,"-").concat(t,"-").concat(n)},ke=function(e){var r=e.startDate,t=e.endDate;if(!r||!t)return null;var n=/^\d{4}-\d{2}-\d{2}$/,a=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}$/,i=n.test(r)||a.test(r),o=n.test(t)||a.test(t);if(!i||!o)return null;var u=n.test(r)?r:$e(r),l=n.test(t)?t:$e(t);return{checkInDate:Be(u),checkOutDate:Be(l)}},je=function(e){var r=e.queryParams,t=[];return Object.values(Ge).forEach((function(e){var n,a,i=r.getAll(e),o=(1===i.length&&null!==i[0]&&void 0!==i[0]?i[0].split(","):i).filter((function(e){return 0!==e.length})).map(Number).filter((function(e){return!Number.isNaN(e)}));o.length>1&&t.push({id:e,min:(n=Math).min.apply(n,h(o)),max:(a=Math).max.apply(a,h(o))})})),t},We=function(e){var r=e.adults,t=e.children,n=(null==r?void 0:r.split(",").map((function(e){return parseInt(e,10)})))||[],a=(null==t?void 0:t.split(","))||[];return n.map((function(e,r){var t=r+1;return{adults:e,children:a.filter((function(e){return e.startsWith(t.toString())})).map((function(e){var r;return{age:parseInt(null!==(r=e.split("_")[1])&&void 0!==r?r:"",10)}}))}})).filter((function(e){return!Number.isNaN(e.adults)}))},Ve=function(e){var r=e.queryParams,t=e.paramsToExclude,n=e.isPartnerPointsToggleEnabled;return function(e,r){return e.some((function(e){return e.id===r.id}))?e:h(e).concat([r])}(Object.values(xe).reduce((function(e,a){!n&&r.has("useRewards")&&r.delete("useRewards");var i=r.getAll(a);if(i.length&&""!==i[0]){var o=i.map((function(e){return(t.includes(a)?[e]:e.split(",")).map((function(e){return n&&"useRewards"===a?{id:a,value:"true"===e?"SHOP_WITH_POINTS":"SHOP_WITHOUT_POINTS"}:{id:a,value:e}}))}));return h(e).concat(h(o))}return h(e)}),[]).flat(),{id:"sort",value:"RECOMMENDED"})},ze=function(e){var r=function(e){var r=e.getAll("flexibility");return 0===r.length?null:r.reduce((function(e,r){var t=r.split("_");if(t.length>1){var n,a=parseInt(null!==(n=t[0])&&void 0!==n?n:"",10),i=t[1]?fe[t[1].toUpperCase()]:"DAY",o=3===t.length&&t[2]?{bound:de[t[2].toUpperCase()]}:{};a&&i&&e.push(f({length:a,unit:i},o))}return e}),[])}(e),t=function(e){return e.getAll("searchRange").reduce((function(e,r){var t,n,a=r.split("_");return 2===a.length&&e.push({start:Be(null!==(t=a[0])&&void 0!==t?t:""),end:Be(null!==(n=a[1])&&void 0!==n?n:"")}),e}),[])}(e),n=function(e){return e.getAll("flexibleSearchRequirement").filter((function(e){return e}))}(e),a=f({},(null==r?void 0:r.length)&&{flexibility:r},(null==t?void 0:t.length)&&{searchRange:t},(null==n?void 0:n.length)&&{flexibleSearchRequirement:n});return Object.getOwnPropertyNames(a).length?a:null},Ke=function(e){var r=e.map((function(e){return e.split(",")})).filter((function(e){var r=v(e,2),t=r[0],n=r[1];return""!==t&&""!==n})).map((function(e){var r=v(e,2),t=r[0],n=r[1];return{latitude:Number(t),longitude:Number(n)}}));return 2===r.length?r:[]},Xe=function(e){var r,t=null==e||null===(r=e.split(","))||void 0===r?void 0:r.filter((function(e){return""!==e}));return(null==t?void 0:t.length)?t:null},qe=[{URL_PARAM_ID:"packageRates",QUERY_BOOLEAN_ID:"showPackageRates"},{URL_PARAM_ID:"vacationRentalsOnly",QUERY_BOOLEAN_ID:"showVacationRentalsOnly"},{URL_PARAM_ID:"dateSelectedByUser",QUERY_BOOLEAN_ID:"isUserSelectedDates"}],Qe=function(e){return qe.flatMap((function(r){return"true"===e.get(r.URL_PARAM_ID)?[{id:r.QUERY_BOOLEAN_ID,value:!0}]:[]}))},Je=function(e,r){var t,n=He({destination:e.get("destination"),regionId:"null"===e.get("regionId")?null:e.get("regionId"),latLong:e.get("latLong"),selected:e.get("selected"),mapBounds:Ke(e.getAll("mapBounds")),group:Xe(e.get("group"))}),a=ke({startDate:e.get("startDate"),endDate:e.get("endDate")}),i=We({adults:e.get("adults"),children:e.get("children")}),o=je({queryParams:e}),u=Ve({queryParams:e,paramsToExclude:["hotelName","poi"],isPartnerPointsToggleEnabled:r}),l=ze(e),c=l?{flexSearchCriteria:l}:{},s=Qe(e);return{propertySearchCriteriaInput:{primary:f({destination:n,rooms:i,dateRange:(null==l?void 0:l.searchRange)&&0!==(null==l||null===(t=l.searchRange)||void 0===t?void 0:t.length)?null:a},c),secondary:{ranges:o,selections:u,booleans:s}}}},Ze=function(e){var r=e.children,t=n.useContext(Fe);return n.createElement(ae.Provider,{value:t},r)};Ze.displayName="sharedui-LodgingCriteriaConsumer";var er=function(e){var r=e.children,t=v(n.useContext(be),2),a=t[0],i=t[1],o=n.useMemo((function(){return{primarySearchCriteria:{groundTransportation:a},secondaryCriteria:i}}),[a,i]);return n.createElement(ae.Provider,{value:o},r)},rr=function(e){var r=e.children,t=n.useContext(le),a=function(){var e=n.useContext(se);if(!e)throw new Error("useCruiseCriteriaDispatch can only be used inside CruiseCriteriaProvider");return e}();return n.createElement(ae.Provider,{value:t},n.createElement(oe.Provider,{value:a},r))};er.displayName="sharedui-GroundTransportationCriteriaConsumer",rr.displayName="sharedui-CruiseCriteriaConsumer";(0,a.J1)(E()),(0,a.J1)(I());var tr,nr,ar,ir,or,ur,lr,cr,sr,dr,fr=(d(or={},i.ch.GroundTransportation,(d(tr={},"Search",we),d(tr,"Product",n.Fragment),tr)),d(or,i.ch.Cruise,(d(nr={},"Search",ye),d(nr,"Product",(function(e){var r,t,a,i,u,l,c,s=e.children,d=(0,o.zy)(),f=v(n.useState((r=new URLSearchParams(d.search),{id:null!==(t=r.get("sailingToken"))&&void 0!==t?t:"",type:"SAILING_TOKEN",productLine:"CRUISE",travelSearchCriteria:{cruise:{primary:{cabinExperience:null!==(a=r.get("cabinExperience"))&&void 0!==a?a:"",cabinType:null!==(i=r.get("cabinType"))&&void 0!==i?i:"",adultCount:null!==(u=he(r,"adultCount"))&&void 0!==u?u:0,childCount:null!==(l=he(r,"childCount"))&&void 0!==l?l:0,children:Ie(r),sailingToken:null!==(c=r.get("sailingToken"))&&void 0!==c?c:""},secondary:{selections:Oe(r)}}}})),1)[0];return n.createElement(ce.Provider,{value:f},s)})),nr)),d(or,i.ch.Cars,(d(ar={},"Search",(function(e){var r=e.children,t=e.localDateFormat,a=v(ne(t),2),i=a[0],o=a[1];return n.createElement(T.Provider,{value:i},n.createElement(Y.Provider,{value:o},r))})),d(ar,"Product",n.Fragment),ar)),d(or,i.ch.Lodging,(d(ir={},"Search",(function(e){var r=e.children,t=(0,l.useExperiment)("ETS_POINTS_TOGGLE").exposure,a=(0,o.zy)(),i=n.useMemo((function(){return e=new URLSearchParams(a.search),r=1===t.bucket,i=He({destination:e.get("destination"),regionId:"null"===e.get("regionId")?null:e.get("regionId"),latLong:e.get("latLong"),selected:e.get("selected"),mapBounds:Ke(e.getAll("mapBounds")),group:Xe(e.get("group"))}),o=ke({startDate:e.get("startDate"),endDate:e.get("endDate")}),u=We({adults:e.get("adults"),children:e.get("children")}),l=je({queryParams:e}),c=Ve({queryParams:e,paramsToExclude:["hotelName","poi"],isPartnerPointsToggleEnabled:r}),s=ze(e),d=s?{flexSearchCriteria:s}:{},p=Qe(e),{primarySearchCriteria:{property:f({destination:i,rooms:u,dateRange:(null==s?void 0:s.searchRange)&&0!==(null==s||null===(n=s.searchRange)||void 0===n?void 0:n.length)?null:o},d)},secondaryCriteria:{ranges:l,selections:c,booleans:p}};var e,r,n,i,o,u,l,c,s,d,p}),[a.search,t]);return n.createElement(Fe.Provider,{value:i},r)})),d(ir,"Product",n.Fragment),ir)),or),pr=(d(dr={},i.ch.GroundTransportation,(d(ur={},"Search",er),d(ur,"Product",n.Fragment),ur)),d(dr,i.ch.Cruise,(d(lr={},"Search",rr),d(lr,"Product",(function(e){var r=e.children,t=n.useContext(ce);return n.createElement(ie.Provider,{value:t},r)})),lr)),d(dr,i.ch.Cars,(d(cr={},"Search",ue),d(cr,"Product",n.Fragment),cr)),d(dr,i.ch.Lodging,(d(sr={},"Search",Ze),d(sr,"Product",n.Fragment),sr)),dr),vr=function(e){var r=e.children,t=e.localDateFormat,a=e.criteriaType,o=void 0===a?"Search":a,u=(0,i.z)(),l=u?fr[u][o]:n.Fragment,c=u?pr[u][o]:n.Fragment;return n.createElement(l,{localDateFormat:t},n.createElement(c,null,r))};vr.displayName="sharedui-ProductShoppingCriteriaProvider";var gr=function(){return n.useContext(ae)},hr=function(){var e=n.useContext(oe);return e||function(){}},_r=function(e){switch(e){case"oneway":default:return"ONE_WAY";case"roundtrip":return"ROUND_TRIP";case"multi":return"MULTI_DESTINATION"}},Er=function(e,r,t){return e.filter((function(e){return null!==e})).map((function(e){var n,a,i=decodeURIComponent(e).replace("from:","").replace(",to:","|").replace(",departure:","|").split("|"),o=i[2]||"";return{departureDate:A(o,r,t),destination:(null===(n=i[1])||void 0===n?void 0:n.split(",toCode")[0])||"",origin:(null===(a=i[0])||void 0===a?void 0:a.split(",frCode")[0])||""}}))},Ir=function(e){var r,t,n=e.split(","),a=[],i=n.find((function(e){return e.includes("adults")}))||"",o=n.find((function(e){return e.includes("children")}))||"",u=n.find((function(e){return e.includes("infantinlap")}))||"N";(i&&a.push({travelerType:"ADULT",count:(r=i.split(":"))[1]?parseInt(r[1],10):1}),o)&&(t=a).push.apply(t,h(function(e,r){var t=[],n=e.split(":");if("0"===(null==n?void 0:n[1]))return[];var a,i=n[1]?n[1].split("["):"",o=parseInt(null!==(a=i[0])&&void 0!==a?a:"",10),u=i[1]&&i[1].replace("]","").split(";").map((function(e){return parseInt(e,10)}))||[],l=u.filter((function(e){return e<=1}));return l.length>0&&(o-=l.length,t.push({count:l.length,travelerType:(null==r?void 0:r.includes("Y"))?"INFANT_IN_LAP":"INFANT_IN_SEAT",ages:l})),o>0&&t.push({count:o,travelerType:"CHILD",ages:u.filter((function(e){return e>1}))}),t}(o,u)));return a},mr=function(e){return e.includes("business")?"BUSINESS":e.includes("premium")||e.includes("premium coach")||e.includes("premium_economy")?"PREMIUM_ECONOMY":e.includes("first")?"FIRST":"COACH"},Tr=((0,a.J1)(m()),(0,n.createContext)(null));(function(e){var r=e.children,t=(0,o.zy)(),a=(0,c.R)().context,i=(0,n.useMemo)((function(){var e,r,n,i,o,u,l,c,s,d,f=new URLSearchParams(t.search);return e=f,r=a.locale,n=a.siteId,i=e.get("trip"),o=e.get("originalBookingId"),u=e.get("journeysContinuationId"),l=e.get("airCreditIntent"),c=e.get("passengers")||"",s=e.get("options")||"",d=[e.get("leg1")||"",e.get("leg2")||"",e.get("leg3")||"",e.get("leg4")||"",e.get("leg5")||""].filter((function(e){return""!==e})),{journeyCriteria:Er(d,r,n),searchPreferences:{cabinClass:mr(s)},flightsSearchContext:{tripType:_r(i),originalBookingId:o,journeysContinuationId:u,hasCreditRedemptionIntent:"true"===l||null},travelerDetails:Ir(c),sortOption:null,searchFilterValuesList:[]}}),[a.locale,a.siteId,t.search]);return n.createElement(Tr.Provider,{value:i},r)}).displayName="sharedui-FlightsSearchCriteriaProvider"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-shopping-search-criteria-providers.b2afda5e1941a44eb599.js.map
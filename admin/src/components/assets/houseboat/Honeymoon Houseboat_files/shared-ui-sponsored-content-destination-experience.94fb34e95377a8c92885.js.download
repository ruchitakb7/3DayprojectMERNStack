/*@license For license information please refer to shared-ui-sponsored-content-destination-experience.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6127],{14617:function(e,n,t){t.d(n,{d:function(){return Ce}});var r=t(96540),a=t(76128),l=t(15043),i=t(85625),o=t(75826),c=t(2619),u=t(16484),m=t(30313),s=t(91214),d=t(90745),E=t(67226),f=t(68174),p=t(34638),g=t(46198),v=t(94220),y=t(22710),b=t(1474),_=t(93149),w=t(1723),A=t(36360);function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){S(e,n,t[n])}))}return e}function k(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l=[],i=!0,o=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);i=!0);}catch(c){o=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(o)throw a}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function D(){var e=N(["\n  fragment ClientSideAnalyticsFragment on ClientSideAnalytics {\n    linkName\n    referrerId\n    urls\n  }\n"]);return D=function(){return e},e}function I(){var e=N(["\n  fragment SponsoredContentBeaconsFragment on SponsoredContentBeacons {\n    renderBeacons\n    viewabilityBeacon\n  }\n"]);return I=function(){return e},e}function x(){var e=N(["\n  fragment EGDSInlineLinkFragment on EGDSInlineLink {\n    text\n    action {\n      ...UILinkActionFragment\n    }\n  }\n"]);return x=function(){return e},e}function L(){var e=N(["\n  fragment UILinkActionFragment on UILinkAction {\n    accessibility\n    analytics {\n      referrerId\n      linkName\n      urls\n    }\n    resource {\n      ... on HttpURI {\n        value\n      }\n    }\n    target\n  }\n"]);return L=function(){return e},e}function T(){var e=N(["\n  fragment EGDSImageLinkFragment on EGDSImageLink {\n    image {\n      url\n      description\n    }\n    action {\n      ...UILinkActionFragment\n    }\n  }\n\n  ","\n"]);return T=function(){return e},e}function B(){var e=N(["\n  fragment ImageGalleryTileCardFragment on EGDSImageLinkCard {\n    title\n    link {\n      ...EGDSImageLinkFragment\n    }\n  }\n\n  ","\n"]);return B=function(){return e},e}function G(){var e=N(["\n  fragment EGDSMarkFragment on Mark {\n    description\n    id\n    orientation\n    size\n    url {\n      ... on HttpURI {\n        __typename\n        value\n      }\n    }\n  }\n"]);return G=function(){return e},e}function F(){var e=N(["\n  fragment EGDSStandardBadgeFragment on EGDSStandardBadge {\n    accessibility\n    text\n  }\n"]);return F=function(){return e},e}function P(){var e=N(["\n  fragment ImageGalleryHeaderFragment on SponsoredContentImageGallery {\n    heading\n    paragraph\n    adTransparencyTrigger {\n      adTransparencyId\n      adTransparencyButton {\n        ...AdTransparencyButtonFragment\n      }\n      adTransparencyOverlaySkeleton {\n        ...TransparencyOverlaySkeletonFragment\n      }\n    }\n    link {\n      ...UILinkActionFragment\n    }\n    badge {\n      ...EGDSStandardBadgeFragment\n    }\n    logo {\n      standard {\n        ...EGDSMarkFragment\n      }\n    }\n  }\n\n  fragment AdTransparencyButtonFragment on AdTransparencyButton {\n    primary\n    accessibility\n    disabled\n    size\n    icon {\n      description\n      id\n      title\n    }\n    analyticsPayload\n  }\n  fragment TransparencyOverlaySkeletonFragment on TransparencyOverlaySkeleton {\n    title\n    error {\n      icon {\n        id\n        size\n      }\n      description\n      button {\n        primary\n      }\n      allowedRetryAttempts\n      exceededAttemptsMessage\n    }\n  }\n  ","\n  ","\n  ","\n"]);return P=function(){return e},e}function R(){var e=N(["\n  query DestinationExperienceQuery($context: ContextInput!, $sponsoredContentContext: SponsoredContentContextInput!) {\n    sponsoredContent {\n      imageGallery(context: $context, sponsoredContentContext: $sponsoredContentContext) {\n        ...ImageGalleryHeaderFragment\n        impressionAnalytics {\n          ...ClientSideAnalyticsFragment\n        }\n        beacons {\n          ...SponsoredContentBeaconsFragment\n        }\n        tiles {\n          ...ImageGalleryTileCardFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n"]);return R=function(){return e},e}var j,U=(0,l.J1)(D()),z={FAIL_TO_SEND_BEACON_USING_BEACON_API:new c.SystemEvent(c.SystemEventLevel.WARN,"FAIL_TO_SEND_BEACON_USING_BEACON_API")},H=(0,l.J1)(I()),K=function(e){var n=(0,c.useLoggerEvents)(z);r.useEffect((function(){var t;e&&(null===(t=e.renderBeacons)||void 0===t||t.forEach((function(e){!function(e,n){try{navigator.sendBeacon(encodeURI(e))||n.FAIL_TO_SEND_BEACON_USING_BEACON_API.log({})}catch(t){n.FAIL_TO_SEND_BEACON_USING_BEACON_API.log({error:t})}}(e,n)})))}),[])},M=((0,l.J1)(x()),(0,l.J1)(L())),J=(S(j={},"EXTERNAL","_blank"),S(j,"INTERNAL","_self"),j),V=function(e){var n=e.className,t=e.data,a=e.children,l=t.accessibility,i=t.resource,c=t.target,u=t.analytics,m=(0,o.KY)(),s=r.useCallback((function(){var e;null==u||null===(e=u.urls)||void 0===e||e.forEach((function(e){var n;null===(n=navigator)||void 0===n||n.sendBeacon(e)})),(null==u?void 0:u.referrerId)&&(null==u?void 0:u.linkName)&&m(u.referrerId,u.linkName)}),[m]);return"HttpURI"!==i.__typename?null:r.createElement("a",{className:n,target:J[c],href:i.value,rel:"noopener",onClickCapture:s},l&&r.createElement("span",{className:"is-visually-hidden"},l),a)};V.fragment=M,V.displayName="UILinkAction";var $=(0,l.J1)(T(),V.fragment),W=function(e){var n=e.data,t=n.image,a=n.action,l=e.ratio,i=e.roundcorner,o=e.children;return r.createElement(E.a,{ratio:l,roundcorner:i},r.createElement(E.b,{placeholderImage:!0,alt:t.description,src:t.url}),o,r.createElement(E.c,null,r.createElement(V,{data:a})))};W.fragment=$,W.displayName="SponsoredContentEGDSImageLink";var Q=(0,l.J1)(B(),W.fragment),q=function(e){var n=e.data,t=e.key,a=e.ratio,l=e.colSpan,i=void 0===l?1:l,o=n.link;return r.createElement(m.a,{key:t,colSpan:i},r.createElement(u.i,null,r.createElement(W,{data:n.link,ratio:a},r.createElement(s.E,{type:s.a.BOTTOM,role:"link"},r.createElement(d.c,{size:300},n.title))),r.createElement(u.q,null,r.createElement(V,{data:o.action}))))};q.fragment=Q,q.displayName="ImageGalleryTileCard";var Y,X={4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,24:24,30:30,37:37,38:38,40:40,48:48,72:72},Z=(S(Y={},"LANDSCAPE","landscape"),S(Y,"PORTRAIT","portrait"),Y),ee=(0,l.J1)(G()),ne=function(e){var n,t=e.className,a=e.size,l=e.data,i=l.description,o=l.id,c=l.orientation,u=l.url;n=a?X[a]:l.size?X[l.size]:void 0;var m=c&&Z[c]||"landscape";return r.createElement(b.E,{className:t,description:i,id:o,name:o,orientation:m,size:n,url:null==u?void 0:u.value})};ne.displayName="SponsoredContentEGDSMark",ne.fragment=ee;var te=(0,l.J1)(F()),re=function(e){var n,t=e.data;return t.text?r.createElement(_.p,{size:"small",text:t.text,a11yText:null!==(n=t.accessibility)&&void 0!==n?n:void 0}):null};re.fragment=te,re.displayName="EGDSStandardBadge";var ae=(0,l.J1)(P(),V.fragment,re.fragment,ne.fragment),le={small:["1fr","min-content"],medium:["auto","1fr","auto"]},ie={small:["1fr","min-content"],medium:["1fr","auto"]},oe={small:["logo badge","text text"],medium:["logo text badge"]},ce={small:["badge badge","text text"],medium:["text badge"]},ue=function(e){var n=e.data,t=n.heading,a=n.logo,l=n.link,i=n.paragraph,o=n.badge,c=n.adTransparencyTrigger,u=function(e){return l?r.createElement(g.E,null,r.createElement(V,{data:l},e)):e};return r.createElement(p.d,{type:"relative"},r.createElement(v.b,{margin:{block:"three"}},r.createElement(m.E,{space:"three",areas:(null==a?void 0:a.standard)?oe:ce,columns:(null==a?void 0:a.standard)?le:ie},(null==a?void 0:a.standard)&&r.createElement(m.a,{area:"logo"},r.createElement("div",null,u(r.createElement(ne,{data:a.standard})))),r.createElement(m.a,{area:"text"},r.createElement("div",null,u(r.createElement(d.E,{tag:"h2",size:5},t)),u(r.createElement(d.a,null,i)))),r.createElement(m.a,{area:"badge"},r.createElement("div",null,c?r.createElement(y.x,{data:c}):o&&r.createElement(re,{data:o}))))))};ue.fragment=ae,ue.displayName="ImageGalleryHeader";var me=new c.SystemEvent(c.SystemEventLevel.INFO,"AD_BLOCK_DETECTED"),se=function(){return(0,c.useLoggerEvents)({AD_BLOCK_DETECTED_EVENT:me}).AD_BLOCK_DETECTED_EVENT.log({message:"collapsing"}),null},de=function(e){var n=e.children;return(0,c.useLoggerEvents)({AD_BLOCK_DETECTED_EVENT:me}).AD_BLOCK_DETECTED_EVENT.log({message:"not collapsing"}),r.createElement(r.Fragment,null,n)};function Ee(e){var n=function(n){var t,a=n.collapseWhenAdBlockDetected,l=n.adBlockCollapseExperiment,o=r.createElement(de,null,r.createElement(e,O({},n)));return window.meso=null!==(t=window.meso)&&void 0!==t?t:{},!window.meso.adblock||window.meso.adblock.enabled?l?r.createElement(i.Experiment,{name:"Acceptable_Ads_Component_Enablement"},r.createElement(i.ExperimentControl,null,r.createElement(se,null)),r.createElement(i.ExperimentVariant,{bucket:1},"PG_Acceptable_Ads_Enablement"===l?r.createElement(i.Experiment,{name:"PG_Acceptable_Ads_Enablement"},r.createElement(i.ExperimentControl,null,r.createElement(se,null)),r.createElement(i.ExperimentVariant,{bucket:1},o)):"Acceptable_Ads_Component_Enablement"===l?o:r.createElement(se,null))):!1===a?o:r.createElement(se,null):r.createElement(e,O({},n))};return n.displayName="WithAdBlockDetectHOC",n}var fe=function(e){var n=e.viewabilityBeacon,t=r.useRef(null),a=(0,r.useCallback)((function(e){var n;e&&window.meso&&(window.meso.viewability=null!==(n=window.meso.viewability)&&void 0!==n?n:[],window.meso.viewability.push({type:"deregister",element:e}))}),[]),l=(0,r.useCallback)((function(e){var t,r;e&&(window.meso=null!==(t=window.meso)&&void 0!==t?t:{},window.meso.viewability=null!==(r=window.meso.viewability)&&void 0!==r?r:[],window.meso.viewability.push({type:"register",config:"image",element:e,beacon:n}))}),[n]);return r.useEffect((function(){var e=t.current;return l(e),function(){a(e)}}),[l,a]),{componentRef:t}},pe="sponsored-content",ge="no-cache",ve=function(e){var n,t,a=e.data,l=e.ratio,i=a.tiles,c=a.beacons,u=a.impressionAnalytics;return K(c),n=u,t=(0,o.KY)(),n.referrerId&&n.linkName&&t(n.referrerId,n.linkName),i&&3===i.length?r.createElement(r.Fragment,null,r.createElement(v.c,{blockMargin:"six"}),r.createElement(ue,{data:a}),r.createElement(m.E,{columns:3,space:"three"},i.map((function(e,n){return e&&r.createElement(q,{data:e,key:"tile_".concat(n),ratio:l})}))),r.createElement(v.c,{blockMargin:"six"})):null};ve.displayName="LazyDestinationExperienceContent";var ye=function(e){var n,t,a,l=e.inputs,i=e.skipSsr,o=e.batchKey,c=void 0===o?pe:o,u=(0,A.R)().context,m=k(O({},l),{context:u}),s=(0,w.I)(Ae,{context:{batchKey:c},variables:m,ssr:!i,fetchPolicy:ge}),d=s.data,p=s.error,g=s.loading,v=null==d||null===(a=d.sponsoredContent)||void 0===a||null===(t=a.imageGallery)||void 0===t||null===(n=t.beacons)||void 0===n?void 0:n.viewabilityBeacon,y=fe({viewabilityBeacon:v}).componentRef;if(g||p||!d||!d.sponsoredContent.imageGallery)return null;var b=d.sponsoredContent.imageGallery;return r.createElement("div",{"data-eg-sc":!0,ref:y},r.createElement(f.LM,null,r.createElement(f.NP,null,r.createElement(ve,{data:b,ratio:E.E.R3_4})),r.createElement(f.rw,null,r.createElement(ve,{data:b,ratio:E.E.R16_9}))))};ye.displayName="sharedui-DestinationExperienceQueryComponent";var be=Ee(ye);be.displayName="sharedui-DestinationExperienceLazyFetch";var _e=function(e){var n,t,l,i=e.inputs,o=e.skipSsr,c=e.batchKey,u=void 0===c?pe:c,m=(0,A.R)().context,s=k(O({},i),{context:m}),d=h(r.useState(0),2),p=d[0],g=d[1];r.useEffect((function(){window&&g(window.innerHeight)}),[]);var v=(0,w.I)(Ae,{context:{batchKey:u},variables:s,ssr:!o,fetchPolicy:ge}),y=v.data,b=v.error,_=v.loading,C=null==y||null===(l=y.sponsoredContent)||void 0===l||null===(t=l.imageGallery)||void 0===t||null===(n=t.beacons)||void 0===n?void 0:n.viewabilityBeacon,S=fe({viewabilityBeacon:C}).componentRef;if(_||b||!y||!y.sponsoredContent.imageGallery)return null;var N=y.sponsoredContent.imageGallery;return r.createElement("div",{"data-eg-sc":!0,ref:S},r.createElement(f.LM,null,r.createElement(f.NP,null,r.createElement(a.A,{offset:p},r.createElement(ve,{data:N,ratio:E.E.R3_4}))),r.createElement(f.rw,null,r.createElement(a.A,{offset:p/2},r.createElement(ve,{data:N,ratio:E.E.R16_9})))))};_e.displayName="sharedui-DestinationExperienceQueryComponent";var we=Ee(_e);we.displayName="sharedui-DestinationExperienceLazyRender";var Ae=(0,l.J1)(R(),ue.fragment,q.fragment,U,H),Ce=function(e){var n,t=h(r.useState(0),2),l=t[0],o=t[1];return r.useEffect((function(){var e;o(null===(e=window)||void 0===e?void 0:e.innerHeight)}),[]),r.createElement(i.Experiment,{name:"MeSo_Remove_Eager_Fetch_on_server_side_ads_Web"},r.createElement(i.ExperimentControl,null,r.createElement(we,O({},e))),r.createElement(i.ExperimentVariant,{bucket:1},(l||(null===(n=window)||void 0===n?void 0:n.innerHeight))&&r.createElement(f.LM,null,r.createElement(f.NP,null,r.createElement(a.A,{offset:window?window.innerHeight:0},r.createElement(be,O({},e)))),r.createElement(f.rw,null,r.createElement(a.A,{offset:window?window.innerHeight/2:0},r.createElement(be,O({},e)))))))};Ce.displayName="sharedui-DestinationExperience"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-sponsored-content-destination-experience.94fb34e95377a8c92885.js.map